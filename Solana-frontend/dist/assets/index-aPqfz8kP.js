const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-BHXdsozy.js","assets/vendor-UoctVF6z.js"])))=>i.map(i=>d[i]);
var RD=Object.defineProperty;var TD=(t,e,n)=>e in t?RD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var an=(t,e,n)=>TD(t,typeof e!="symbol"?e+"":e,n);import{g as vi,B as gt,p as Oi,c as Li,r as OD,a as Ne,b as PD,d as ND,o as LD,e as xi,f as DD,h as al,s as $D,i as BD,j as mx,k as MD,l as B1,m as D5}from"./vendor-UoctVF6z.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var $5={exports:{}},Xm={},B5={exports:{}},zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep=Symbol.for("react.element"),UD=Symbol.for("react.portal"),jD=Symbol.for("react.fragment"),FD=Symbol.for("react.strict_mode"),zD=Symbol.for("react.profiler"),KD=Symbol.for("react.provider"),HD=Symbol.for("react.context"),WD=Symbol.for("react.forward_ref"),qD=Symbol.for("react.suspense"),VD=Symbol.for("react.memo"),GD=Symbol.for("react.lazy"),a3=Symbol.iterator;function YD(t){return t===null||typeof t!="object"?null:(t=a3&&t[a3]||t["@@iterator"],typeof t=="function"?t:null)}var M5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U5=Object.assign,j5={};function Yd(t,e,n){this.props=t,this.context=e,this.refs=j5,this.updater=n||M5}Yd.prototype.isReactComponent={};Yd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function F5(){}F5.prototype=Yd.prototype;function wx(t,e,n){this.props=t,this.context=e,this.refs=j5,this.updater=n||M5}var yx=wx.prototype=new F5;yx.constructor=wx;U5(yx,Yd.prototype);yx.isPureReactComponent=!0;var c3=Array.isArray,z5=Object.prototype.hasOwnProperty,bx={current:null},K5={key:!0,ref:!0,__self:!0,__source:!0};function H5(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)z5.call(e,r)&&!K5.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ep,type:t,key:s,ref:o,props:i,_owner:bx.current}}function JD(t,e){return{$$typeof:Ep,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ep}function ZD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var l3=/\/+/g;function Cy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ZD(""+t.key):e.toString(36)}function o0(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ep:case UD:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Cy(o,0):r,c3(i)?(n="",t!=null&&(n=t.replace(l3,"$&/")+"/"),o0(i,e,n,"",function(l){return l})):i!=null&&(vx(i)&&(i=JD(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(l3,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",c3(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+Cy(s,a);o+=o0(s,e,n,c,i)}else if(c=YD(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+Cy(s,a++),o+=o0(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ag(t,e,n){if(t==null)return t;var r=[],i=0;return o0(t,r,"","",function(s){return e.call(n,s,i++)}),r}function XD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $i={current:null},a0={transition:null},QD={ReactCurrentDispatcher:$i,ReactCurrentBatchConfig:a0,ReactCurrentOwner:bx};function W5(){throw Error("act(...) is not supported in production builds of React.")}zt.Children={map:ag,forEach:function(t,e,n){ag(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ag(t,function(){e++}),e},toArray:function(t){return ag(t,function(e){return e})||[]},only:function(t){if(!vx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};zt.Component=Yd;zt.Fragment=jD;zt.Profiler=zD;zt.PureComponent=wx;zt.StrictMode=FD;zt.Suspense=qD;zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QD;zt.act=W5;zt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=U5({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=bx.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)z5.call(e,c)&&!K5.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Ep,type:t.type,key:i,ref:s,props:r,_owner:o}};zt.createContext=function(t){return t={$$typeof:HD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KD,_context:t},t.Consumer=t};zt.createElement=H5;zt.createFactory=function(t){var e=H5.bind(null,t);return e.type=t,e};zt.createRef=function(){return{current:null}};zt.forwardRef=function(t){return{$$typeof:WD,render:t}};zt.isValidElement=vx;zt.lazy=function(t){return{$$typeof:GD,_payload:{_status:-1,_result:t},_init:XD}};zt.memo=function(t,e){return{$$typeof:VD,type:t,compare:e===void 0?null:e}};zt.startTransition=function(t){var e=a0.transition;a0.transition={};try{t()}finally{a0.transition=e}};zt.unstable_act=W5;zt.useCallback=function(t,e){return $i.current.useCallback(t,e)};zt.useContext=function(t){return $i.current.useContext(t)};zt.useDebugValue=function(){};zt.useDeferredValue=function(t){return $i.current.useDeferredValue(t)};zt.useEffect=function(t,e){return $i.current.useEffect(t,e)};zt.useId=function(){return $i.current.useId()};zt.useImperativeHandle=function(t,e,n){return $i.current.useImperativeHandle(t,e,n)};zt.useInsertionEffect=function(t,e){return $i.current.useInsertionEffect(t,e)};zt.useLayoutEffect=function(t,e){return $i.current.useLayoutEffect(t,e)};zt.useMemo=function(t,e){return $i.current.useMemo(t,e)};zt.useReducer=function(t,e,n){return $i.current.useReducer(t,e,n)};zt.useRef=function(t){return $i.current.useRef(t)};zt.useState=function(t){return $i.current.useState(t)};zt.useSyncExternalStore=function(t,e,n){return $i.current.useSyncExternalStore(t,e,n)};zt.useTransition=function(){return $i.current.useTransition()};zt.version="18.3.1";B5.exports=zt;var ne=B5.exports;const e$=vi(ne);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t$=ne,n$=Symbol.for("react.element"),r$=Symbol.for("react.fragment"),i$=Object.prototype.hasOwnProperty,s$=t$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o$={key:!0,ref:!0,__self:!0,__source:!0};function q5(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)i$.call(e,r)&&!o$.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:n$,type:t,key:s,ref:o,props:i,_owner:s$.current}}Xm.Fragment=r$;Xm.jsx=q5;Xm.jsxs=q5;$5.exports=Xm;var z=$5.exports;typeof window<"u"&&(window.Buffer=gt,window.global=window,window.process=Oi);var M1={},V5={exports:{}},ks={},G5={exports:{}},Y5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,I){var M=T.length;T.push(I);e:for(;0<M;){var Y=M-1>>>1,X=T[Y];if(0<i(X,I))T[Y]=I,T[M]=X,M=Y;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var I=T[0],M=T.pop();if(M!==I){T[0]=M;e:for(var Y=0,X=T.length,Z=X>>>1;Y<Z;){var le=2*(Y+1)-1,ae=T[le],ye=le+1,Ee=T[ye];if(0>i(ae,M))ye<X&&0>i(Ee,ae)?(T[Y]=Ee,T[ye]=M,Y=ye):(T[Y]=ae,T[le]=M,Y=le);else if(ye<X&&0>i(Ee,M))T[Y]=Ee,T[ye]=M,Y=ye;else break e}}return I}function i(T,I){var M=T.sortIndex-I.sortIndex;return M!==0?M:T.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,f=3,h=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(T){for(var I=n(l);I!==null;){if(I.callback===null)r(l);else if(I.startTime<=T)r(l),I.sortIndex=I.expirationTime,e(c,I);else break;I=n(l)}}function x(T){if(g=!1,m(T),!p)if(n(c)!==null)p=!0,R(E);else{var I=n(l);I!==null&&D(x,I.startTime-T)}}function E(T,I){p=!1,g&&(g=!1,y(S),S=-1),h=!0;var M=f;try{for(m(I),d=n(c);d!==null&&(!(d.expirationTime>I)||T&&!N());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,f=d.priorityLevel;var X=Y(d.expirationTime<=I);I=t.unstable_now(),typeof X=="function"?d.callback=X:d===n(c)&&r(c),m(I)}else r(c);d=n(c)}if(d!==null)var Z=!0;else{var le=n(l);le!==null&&D(x,le.startTime-I),Z=!1}return Z}finally{d=null,f=M,h=!1}}var A=!1,k=null,S=-1,C=5,F=-1;function N(){return!(t.unstable_now()-F<C)}function L(){if(k!==null){var T=t.unstable_now();F=T;var I=!0;try{I=k(!0,T)}finally{I?j():(A=!1,k=null)}}else A=!1}var j;if(typeof b=="function")j=function(){b(L)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,O=B.port2;B.port1.onmessage=L,j=function(){O.postMessage(null)}}else j=function(){w(L,0)};function R(T){k=T,A||(A=!0,j())}function D(T,I){S=w(function(){T(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,R(E))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(T){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var M=f;f=I;try{return T()}finally{f=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,I){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var M=f;f=T;try{return I()}finally{f=M}},t.unstable_scheduleCallback=function(T,I,M){var Y=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?Y+M:Y):M=Y,T){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=M+X,T={id:u++,callback:I,priorityLevel:T,startTime:M,expirationTime:X,sortIndex:-1},M>Y?(T.sortIndex=M,e(l,T),n(c)===null&&T===n(l)&&(g?(y(S),S=-1):g=!0,D(x,M-Y))):(T.sortIndex=X,e(c,T),p||h||(p=!0,R(E))),T},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(T){var I=f;return function(){var M=f;f=I;try{return T.apply(this,arguments)}finally{f=M}}}})(Y5);G5.exports=Y5;var a$=G5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c$=ne,_s=a$;function Oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var J5=new Set,Ph={};function gu(t,e){Ed(t,e),Ed(t+"Capture",e)}function Ed(t,e){for(Ph[t]=e,t=0;t<e.length;t++)J5.add(e[t])}var qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),U1=Object.prototype.hasOwnProperty,l$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u3={},d3={};function u$(t){return U1.call(d3,t)?!0:U1.call(u3,t)?!1:l$.test(t)?d3[t]=!0:(u3[t]=!0,!1)}function d$(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function f$(t,e,n,r){if(e===null||typeof e>"u"||d$(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bi(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qr[t]=new Bi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qr[e]=new Bi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qr[t]=new Bi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qr[t]=new Bi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qr[t]=new Bi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qr[t]=new Bi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qr[t]=new Bi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qr[t]=new Bi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qr[t]=new Bi(t,5,!1,t.toLowerCase(),null,!1,!1)});var xx=/[\-:]([a-z])/g;function Ex(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xx,Ex);Qr[e]=new Bi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xx,Ex);Qr[e]=new Bi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xx,Ex);Qr[e]=new Bi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qr[t]=new Bi(t,1,!1,t.toLowerCase(),null,!1,!1)});Qr.xlinkHref=new Bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qr[t]=new Bi(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sx(t,e,n,r){var i=Qr.hasOwnProperty(e)?Qr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(f$(e,n,i,r)&&(n=null),r||i===null?u$(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qa=c$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cg=Symbol.for("react.element"),Yu=Symbol.for("react.portal"),Ju=Symbol.for("react.fragment"),_x=Symbol.for("react.strict_mode"),j1=Symbol.for("react.profiler"),Z5=Symbol.for("react.provider"),X5=Symbol.for("react.context"),kx=Symbol.for("react.forward_ref"),F1=Symbol.for("react.suspense"),z1=Symbol.for("react.suspense_list"),Ax=Symbol.for("react.memo"),vc=Symbol.for("react.lazy"),Q5=Symbol.for("react.offscreen"),f3=Symbol.iterator;function Sf(t){return t===null||typeof t!="object"?null:(t=f3&&t[f3]||t["@@iterator"],typeof t=="function"?t:null)}var Hn=Object.assign,Ry;function eh(t){if(Ry===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ry=e&&e[1]||""}return`
`+Ry+t}var Ty=!1;function Oy(t,e){if(!t||Ty)return"";Ty=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Ty=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?eh(t):""}function h$(t){switch(t.tag){case 5:return eh(t.type);case 16:return eh("Lazy");case 13:return eh("Suspense");case 19:return eh("SuspenseList");case 0:case 2:case 15:return t=Oy(t.type,!1),t;case 11:return t=Oy(t.type.render,!1),t;case 1:return t=Oy(t.type,!0),t;default:return""}}function K1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ju:return"Fragment";case Yu:return"Portal";case j1:return"Profiler";case _x:return"StrictMode";case F1:return"Suspense";case z1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X5:return(t.displayName||"Context")+".Consumer";case Z5:return(t._context.displayName||"Context")+".Provider";case kx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ax:return e=t.displayName||null,e!==null?e:K1(t.type)||"Memo";case vc:e=t._payload,t=t._init;try{return K1(t(e))}catch{}}return null}function p$(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K1(e);case 8:return e===_x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function el(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function g$(t){var e=eR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function lg(t){t._valueTracker||(t._valueTracker=g$(t))}function tR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=eR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function W0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function H1(t,e){var n=e.checked;return Hn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function h3(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=el(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nR(t,e){e=e.checked,e!=null&&Sx(t,"checked",e,!1)}function W1(t,e){nR(t,e);var n=el(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?q1(t,e.type,n):e.hasOwnProperty("defaultValue")&&q1(t,e.type,el(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function p3(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function q1(t,e,n){(e!=="number"||W0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var th=Array.isArray;function ud(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+el(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function V1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return Hn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function g3(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Oe(92));if(th(n)){if(1<n.length)throw Error(Oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:el(n)}}function rR(t,e){var n=el(e.value),r=el(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function m3(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function G1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ug,sR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ug=ug||document.createElement("div"),ug.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ug.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var lh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m$=["Webkit","ms","Moz","O"];Object.keys(lh).forEach(function(t){m$.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),lh[e]=lh[t]})});function oR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||lh.hasOwnProperty(t)&&lh[t]?(""+e).trim():e+"px"}function aR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=oR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var w$=Hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Y1(t,e){if(e){if(w$[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Oe(62))}}function J1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z1=null;function Ix(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var X1=null,dd=null,fd=null;function w3(t){if(t=kp(t)){if(typeof X1!="function")throw Error(Oe(280));var e=t.stateNode;e&&(e=rw(e),X1(t.stateNode,t.type,e))}}function cR(t){dd?fd?fd.push(t):fd=[t]:dd=t}function lR(){if(dd){var t=dd,e=fd;if(fd=dd=null,w3(t),e)for(t=0;t<e.length;t++)w3(e[t])}}function uR(t,e){return t(e)}function dR(){}var Py=!1;function fR(t,e,n){if(Py)return t(e,n);Py=!0;try{return uR(t,e,n)}finally{Py=!1,(dd!==null||fd!==null)&&(dR(),lR())}}function Lh(t,e){var n=t.stateNode;if(n===null)return null;var r=rw(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Oe(231,e,typeof n));return n}var Q1=!1;if(qa)try{var _f={};Object.defineProperty(_f,"passive",{get:function(){Q1=!0}}),window.addEventListener("test",_f,_f),window.removeEventListener("test",_f,_f)}catch{Q1=!1}function y$(t,e,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var uh=!1,q0=null,V0=!1,ev=null,b$={onError:function(t){uh=!0,q0=t}};function v$(t,e,n,r,i,s,o,a,c){uh=!1,q0=null,y$.apply(b$,arguments)}function x$(t,e,n,r,i,s,o,a,c){if(v$.apply(this,arguments),uh){if(uh){var l=q0;uh=!1,q0=null}else throw Error(Oe(198));V0||(V0=!0,ev=l)}}function mu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function y3(t){if(mu(t)!==t)throw Error(Oe(188))}function E$(t){var e=t.alternate;if(!e){if(e=mu(t),e===null)throw Error(Oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return y3(i),t;if(s===r)return y3(i),e;s=s.sibling}throw Error(Oe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Oe(189))}}if(n.alternate!==r)throw Error(Oe(190))}if(n.tag!==3)throw Error(Oe(188));return n.stateNode.current===n?t:e}function pR(t){return t=E$(t),t!==null?gR(t):null}function gR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gR(t);if(e!==null)return e;t=t.sibling}return null}var mR=_s.unstable_scheduleCallback,b3=_s.unstable_cancelCallback,S$=_s.unstable_shouldYield,_$=_s.unstable_requestPaint,rr=_s.unstable_now,k$=_s.unstable_getCurrentPriorityLevel,Cx=_s.unstable_ImmediatePriority,wR=_s.unstable_UserBlockingPriority,G0=_s.unstable_NormalPriority,A$=_s.unstable_LowPriority,yR=_s.unstable_IdlePriority,Qm=null,Qo=null;function I$(t){if(Qo&&typeof Qo.onCommitFiberRoot=="function")try{Qo.onCommitFiberRoot(Qm,t,void 0,(t.current.flags&128)===128)}catch{}}var vo=Math.clz32?Math.clz32:T$,C$=Math.log,R$=Math.LN2;function T$(t){return t>>>=0,t===0?32:31-(C$(t)/R$|0)|0}var dg=64,fg=4194304;function nh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Y0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=nh(a):(s&=o,s!==0&&(r=nh(s)))}else o=n&~i,o!==0?r=nh(o):s!==0&&(r=nh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vo(e),i=1<<n,r|=t[n],e&=~i;return r}function O$(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P$(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-vo(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=O$(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function tv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bR(){var t=dg;return dg<<=1,!(dg&4194240)&&(dg=64),t}function Ny(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vo(e),t[e]=n}function N$(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vo(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Rx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vo(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var hn=0;function vR(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xR,Tx,ER,SR,_R,nv=!1,hg=[],Bc=null,Mc=null,Uc=null,Dh=new Map,$h=new Map,_c=[],L$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function v3(t,e){switch(t){case"focusin":case"focusout":Bc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Uc=null;break;case"pointerover":case"pointerout":Dh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$h.delete(e.pointerId)}}function kf(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=kp(e),e!==null&&Tx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function D$(t,e,n,r,i){switch(e){case"focusin":return Bc=kf(Bc,t,e,n,r,i),!0;case"dragenter":return Mc=kf(Mc,t,e,n,r,i),!0;case"mouseover":return Uc=kf(Uc,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Dh.set(s,kf(Dh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,$h.set(s,kf($h.get(s)||null,t,e,n,r,i)),!0}return!1}function kR(t){var e=$l(t.target);if(e!==null){var n=mu(e);if(n!==null){if(e=n.tag,e===13){if(e=hR(n),e!==null){t.blockedOn=e,_R(t.priority,function(){ER(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function c0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Z1=r,n.target.dispatchEvent(r),Z1=null}else return e=kp(n),e!==null&&Tx(e),t.blockedOn=n,!1;e.shift()}return!0}function x3(t,e,n){c0(t)&&n.delete(e)}function $$(){nv=!1,Bc!==null&&c0(Bc)&&(Bc=null),Mc!==null&&c0(Mc)&&(Mc=null),Uc!==null&&c0(Uc)&&(Uc=null),Dh.forEach(x3),$h.forEach(x3)}function Af(t,e){t.blockedOn===e&&(t.blockedOn=null,nv||(nv=!0,_s.unstable_scheduleCallback(_s.unstable_NormalPriority,$$)))}function Bh(t){function e(i){return Af(i,t)}if(0<hg.length){Af(hg[0],t);for(var n=1;n<hg.length;n++){var r=hg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Bc!==null&&Af(Bc,t),Mc!==null&&Af(Mc,t),Uc!==null&&Af(Uc,t),Dh.forEach(e),$h.forEach(e),n=0;n<_c.length;n++)r=_c[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_c.length&&(n=_c[0],n.blockedOn===null);)kR(n),n.blockedOn===null&&_c.shift()}var hd=Qa.ReactCurrentBatchConfig,J0=!0;function B$(t,e,n,r){var i=hn,s=hd.transition;hd.transition=null;try{hn=1,Ox(t,e,n,r)}finally{hn=i,hd.transition=s}}function M$(t,e,n,r){var i=hn,s=hd.transition;hd.transition=null;try{hn=4,Ox(t,e,n,r)}finally{hn=i,hd.transition=s}}function Ox(t,e,n,r){if(J0){var i=rv(t,e,n,r);if(i===null)Ky(t,e,r,Z0,n),v3(t,r);else if(D$(i,t,e,n,r))r.stopPropagation();else if(v3(t,r),e&4&&-1<L$.indexOf(t)){for(;i!==null;){var s=kp(i);if(s!==null&&xR(s),s=rv(t,e,n,r),s===null&&Ky(t,e,r,Z0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ky(t,e,r,null,n)}}var Z0=null;function rv(t,e,n,r){if(Z0=null,t=Ix(r),t=$l(t),t!==null)if(e=mu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Z0=t,null}function AR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(k$()){case Cx:return 1;case wR:return 4;case G0:case A$:return 16;case yR:return 536870912;default:return 16}default:return 16}}var Oc=null,Px=null,l0=null;function IR(){if(l0)return l0;var t,e=Px,n=e.length,r,i="value"in Oc?Oc.value:Oc.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return l0=i.slice(t,1<r?1-r:void 0)}function u0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pg(){return!0}function E3(){return!1}function As(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pg:E3,this.isPropagationStopped=E3,this}return Hn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pg)},persist:function(){},isPersistent:pg}),e}var Jd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nx=As(Jd),_p=Hn({},Jd,{view:0,detail:0}),U$=As(_p),Ly,Dy,If,ew=Hn({},_p,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==If&&(If&&t.type==="mousemove"?(Ly=t.screenX-If.screenX,Dy=t.screenY-If.screenY):Dy=Ly=0,If=t),Ly)},movementY:function(t){return"movementY"in t?t.movementY:Dy}}),S3=As(ew),j$=Hn({},ew,{dataTransfer:0}),F$=As(j$),z$=Hn({},_p,{relatedTarget:0}),$y=As(z$),K$=Hn({},Jd,{animationName:0,elapsedTime:0,pseudoElement:0}),H$=As(K$),W$=Hn({},Jd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),q$=As(W$),V$=Hn({},Jd,{data:0}),_3=As(V$),G$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z$(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=J$[t])?!!e[t]:!1}function Lx(){return Z$}var X$=Hn({},_p,{key:function(t){if(t.key){var e=G$[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=u0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Y$[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lx,charCode:function(t){return t.type==="keypress"?u0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?u0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Q$=As(X$),eB=Hn({},ew,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k3=As(eB),tB=Hn({},_p,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lx}),nB=As(tB),rB=Hn({},Jd,{propertyName:0,elapsedTime:0,pseudoElement:0}),iB=As(rB),sB=Hn({},ew,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oB=As(sB),aB=[9,13,27,32],Dx=qa&&"CompositionEvent"in window,dh=null;qa&&"documentMode"in document&&(dh=document.documentMode);var cB=qa&&"TextEvent"in window&&!dh,CR=qa&&(!Dx||dh&&8<dh&&11>=dh),A3=" ",I3=!1;function RR(t,e){switch(t){case"keyup":return aB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zu=!1;function lB(t,e){switch(t){case"compositionend":return TR(e);case"keypress":return e.which!==32?null:(I3=!0,A3);case"textInput":return t=e.data,t===A3&&I3?null:t;default:return null}}function uB(t,e){if(Zu)return t==="compositionend"||!Dx&&RR(t,e)?(t=IR(),l0=Px=Oc=null,Zu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return CR&&e.locale!=="ko"?null:e.data;default:return null}}var dB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C3(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dB[t.type]:e==="textarea"}function OR(t,e,n,r){cR(r),e=X0(e,"onChange"),0<e.length&&(n=new Nx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fh=null,Mh=null;function fB(t){zR(t,0)}function tw(t){var e=ed(t);if(tR(e))return t}function hB(t,e){if(t==="change")return e}var PR=!1;if(qa){var By;if(qa){var My="oninput"in document;if(!My){var R3=document.createElement("div");R3.setAttribute("oninput","return;"),My=typeof R3.oninput=="function"}By=My}else By=!1;PR=By&&(!document.documentMode||9<document.documentMode)}function T3(){fh&&(fh.detachEvent("onpropertychange",NR),Mh=fh=null)}function NR(t){if(t.propertyName==="value"&&tw(Mh)){var e=[];OR(e,Mh,t,Ix(t)),fR(fB,e)}}function pB(t,e,n){t==="focusin"?(T3(),fh=e,Mh=n,fh.attachEvent("onpropertychange",NR)):t==="focusout"&&T3()}function gB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tw(Mh)}function mB(t,e){if(t==="click")return tw(e)}function wB(t,e){if(t==="input"||t==="change")return tw(e)}function yB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var So=typeof Object.is=="function"?Object.is:yB;function Uh(t,e){if(So(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!U1.call(e,i)||!So(t[i],e[i]))return!1}return!0}function O3(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function P3(t,e){var n=O3(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=O3(n)}}function LR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?LR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function DR(){for(var t=window,e=W0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=W0(t.document)}return e}function $x(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bB(t){var e=DR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&LR(n.ownerDocument.documentElement,n)){if(r!==null&&$x(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=P3(n,s);var o=P3(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vB=qa&&"documentMode"in document&&11>=document.documentMode,Xu=null,iv=null,hh=null,sv=!1;function N3(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sv||Xu==null||Xu!==W0(r)||(r=Xu,"selectionStart"in r&&$x(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hh&&Uh(hh,r)||(hh=r,r=X0(iv,"onSelect"),0<r.length&&(e=new Nx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xu)))}function gg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qu={animationend:gg("Animation","AnimationEnd"),animationiteration:gg("Animation","AnimationIteration"),animationstart:gg("Animation","AnimationStart"),transitionend:gg("Transition","TransitionEnd")},Uy={},$R={};qa&&($R=document.createElement("div").style,"AnimationEvent"in window||(delete Qu.animationend.animation,delete Qu.animationiteration.animation,delete Qu.animationstart.animation),"TransitionEvent"in window||delete Qu.transitionend.transition);function nw(t){if(Uy[t])return Uy[t];if(!Qu[t])return t;var e=Qu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $R)return Uy[t]=e[n];return t}var BR=nw("animationend"),MR=nw("animationiteration"),UR=nw("animationstart"),jR=nw("transitionend"),FR=new Map,L3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cl(t,e){FR.set(t,e),gu(e,[t])}for(var jy=0;jy<L3.length;jy++){var Fy=L3[jy],xB=Fy.toLowerCase(),EB=Fy[0].toUpperCase()+Fy.slice(1);cl(xB,"on"+EB)}cl(BR,"onAnimationEnd");cl(MR,"onAnimationIteration");cl(UR,"onAnimationStart");cl("dblclick","onDoubleClick");cl("focusin","onFocus");cl("focusout","onBlur");cl(jR,"onTransitionEnd");Ed("onMouseEnter",["mouseout","mouseover"]);Ed("onMouseLeave",["mouseout","mouseover"]);Ed("onPointerEnter",["pointerout","pointerover"]);Ed("onPointerLeave",["pointerout","pointerover"]);gu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gu("onBeforeInput",["compositionend","keypress","textInput","paste"]);gu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SB=new Set("cancel close invalid load scroll toggle".split(" ").concat(rh));function D3(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,x$(r,e,void 0,t),t.currentTarget=null}function zR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;D3(i,a,l),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;D3(i,a,l),s=c}}}if(V0)throw t=ev,V0=!1,ev=null,t}function Tn(t,e){var n=e[uv];n===void 0&&(n=e[uv]=new Set);var r=t+"__bubble";n.has(r)||(KR(e,t,2,!1),n.add(r))}function zy(t,e,n){var r=0;e&&(r|=4),KR(n,t,r,e)}var mg="_reactListening"+Math.random().toString(36).slice(2);function jh(t){if(!t[mg]){t[mg]=!0,J5.forEach(function(n){n!=="selectionchange"&&(SB.has(n)||zy(n,!1,t),zy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mg]||(e[mg]=!0,zy("selectionchange",!1,e))}}function KR(t,e,n,r){switch(AR(e)){case 1:var i=B$;break;case 4:i=M$;break;default:i=Ox}n=i.bind(null,e,n,t),i=void 0,!Q1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ky(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=$l(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}fR(function(){var l=s,u=Ix(n),d=[];e:{var f=FR.get(t);if(f!==void 0){var h=Nx,p=t;switch(t){case"keypress":if(u0(n)===0)break e;case"keydown":case"keyup":h=Q$;break;case"focusin":p="focus",h=$y;break;case"focusout":p="blur",h=$y;break;case"beforeblur":case"afterblur":h=$y;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=S3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=F$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=nB;break;case BR:case MR:case UR:h=H$;break;case jR:h=iB;break;case"scroll":h=U$;break;case"wheel":h=oB;break;case"copy":case"cut":case"paste":h=q$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=k3}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var b=l,m;b!==null;){m=b;var x=m.stateNode;if(m.tag===5&&x!==null&&(m=x,y!==null&&(x=Lh(b,y),x!=null&&g.push(Fh(b,x,m)))),w)break;b=b.return}0<g.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Z1&&(p=n.relatedTarget||n.fromElement)&&($l(p)||p[Va]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?$l(p):null,p!==null&&(w=mu(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(g=S3,x="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=k3,x="onPointerLeave",y="onPointerEnter",b="pointer"),w=h==null?f:ed(h),m=p==null?f:ed(p),f=new g(x,b+"leave",h,n,u),f.target=w,f.relatedTarget=m,x=null,$l(u)===l&&(g=new g(y,b+"enter",p,n,u),g.target=m,g.relatedTarget=w,x=g),w=x,h&&p)t:{for(g=h,y=p,b=0,m=g;m;m=Ru(m))b++;for(m=0,x=y;x;x=Ru(x))m++;for(;0<b-m;)g=Ru(g),b--;for(;0<m-b;)y=Ru(y),m--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=Ru(g),y=Ru(y)}g=null}else g=null;h!==null&&$3(d,f,h,g,!1),p!==null&&w!==null&&$3(d,w,p,g,!0)}}e:{if(f=l?ed(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var E=hB;else if(C3(f))if(PR)E=wB;else{E=gB;var A=pB}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=mB);if(E&&(E=E(t,l))){OR(d,E,n,u);break e}A&&A(t,f,l),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&q1(f,"number",f.value)}switch(A=l?ed(l):window,t){case"focusin":(C3(A)||A.contentEditable==="true")&&(Xu=A,iv=l,hh=null);break;case"focusout":hh=iv=Xu=null;break;case"mousedown":sv=!0;break;case"contextmenu":case"mouseup":case"dragend":sv=!1,N3(d,n,u);break;case"selectionchange":if(vB)break;case"keydown":case"keyup":N3(d,n,u)}var k;if(Dx)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Zu?RR(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(CR&&n.locale!=="ko"&&(Zu||S!=="onCompositionStart"?S==="onCompositionEnd"&&Zu&&(k=IR()):(Oc=u,Px="value"in Oc?Oc.value:Oc.textContent,Zu=!0)),A=X0(l,S),0<A.length&&(S=new _3(S,t,null,n,u),d.push({event:S,listeners:A}),k?S.data=k:(k=TR(n),k!==null&&(S.data=k)))),(k=cB?lB(t,n):uB(t,n))&&(l=X0(l,"onBeforeInput"),0<l.length&&(u=new _3("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=k))}zR(d,e)})}function Fh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function X0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Lh(t,n),s!=null&&r.unshift(Fh(t,s,i)),s=Lh(t,e),s!=null&&r.push(Fh(t,s,i))),t=t.return}return r}function Ru(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $3(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=Lh(n,s),c!=null&&o.unshift(Fh(n,c,a))):i||(c=Lh(n,s),c!=null&&o.push(Fh(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _B=/\r\n?/g,kB=/\u0000|\uFFFD/g;function B3(t){return(typeof t=="string"?t:""+t).replace(_B,`
`).replace(kB,"")}function wg(t,e,n){if(e=B3(e),B3(t)!==e&&n)throw Error(Oe(425))}function Q0(){}var ov=null,av=null;function cv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lv=typeof setTimeout=="function"?setTimeout:void 0,AB=typeof clearTimeout=="function"?clearTimeout:void 0,M3=typeof Promise=="function"?Promise:void 0,IB=typeof queueMicrotask=="function"?queueMicrotask:typeof M3<"u"?function(t){return M3.resolve(null).then(t).catch(CB)}:lv;function CB(t){setTimeout(function(){throw t})}function Hy(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Bh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Bh(e)}function jc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function U3(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zd=Math.random().toString(36).slice(2),Go="__reactFiber$"+Zd,zh="__reactProps$"+Zd,Va="__reactContainer$"+Zd,uv="__reactEvents$"+Zd,RB="__reactListeners$"+Zd,TB="__reactHandles$"+Zd;function $l(t){var e=t[Go];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Va]||n[Go]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=U3(t);t!==null;){if(n=t[Go])return n;t=U3(t)}return e}t=n,n=t.parentNode}return null}function kp(t){return t=t[Go]||t[Va],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ed(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Oe(33))}function rw(t){return t[zh]||null}var dv=[],td=-1;function ll(t){return{current:t}}function Nn(t){0>td||(t.current=dv[td],dv[td]=null,td--)}function In(t,e){td++,dv[td]=t.current,t.current=e}var tl={},bi=ll(tl),Xi=ll(!1),eu=tl;function Sd(t,e){var n=t.type.contextTypes;if(!n)return tl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qi(t){return t=t.childContextTypes,t!=null}function em(){Nn(Xi),Nn(bi)}function j3(t,e,n){if(bi.current!==tl)throw Error(Oe(168));In(bi,e),In(Xi,n)}function HR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Oe(108,p$(t)||"Unknown",i));return Hn({},n,r)}function tm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tl,eu=bi.current,In(bi,t),In(Xi,Xi.current),!0}function F3(t,e,n){var r=t.stateNode;if(!r)throw Error(Oe(169));n?(t=HR(t,e,eu),r.__reactInternalMemoizedMergedChildContext=t,Nn(Xi),Nn(bi),In(bi,t)):Nn(Xi),In(Xi,n)}var Ca=null,iw=!1,Wy=!1;function WR(t){Ca===null?Ca=[t]:Ca.push(t)}function OB(t){iw=!0,WR(t)}function ul(){if(!Wy&&Ca!==null){Wy=!0;var t=0,e=hn;try{var n=Ca;for(hn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ca=null,iw=!1}catch(i){throw Ca!==null&&(Ca=Ca.slice(t+1)),mR(Cx,ul),i}finally{hn=e,Wy=!1}}return null}var nd=[],rd=0,nm=null,rm=0,js=[],Fs=0,tu=null,Ba=1,Ma="";function Al(t,e){nd[rd++]=rm,nd[rd++]=nm,nm=t,rm=e}function qR(t,e,n){js[Fs++]=Ba,js[Fs++]=Ma,js[Fs++]=tu,tu=t;var r=Ba;t=Ma;var i=32-vo(r)-1;r&=~(1<<i),n+=1;var s=32-vo(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ba=1<<32-vo(e)+i|n<<i|r,Ma=s+t}else Ba=1<<s|n<<i|r,Ma=t}function Bx(t){t.return!==null&&(Al(t,1),qR(t,1,0))}function Mx(t){for(;t===nm;)nm=nd[--rd],nd[rd]=null,rm=nd[--rd],nd[rd]=null;for(;t===tu;)tu=js[--Fs],js[Fs]=null,Ma=js[--Fs],js[Fs]=null,Ba=js[--Fs],js[Fs]=null}var Ss=null,bs=null,Mn=!1,mo=null;function VR(t,e){var n=Hs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function z3(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ss=t,bs=jc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ss=t,bs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=tu!==null?{id:Ba,overflow:Ma}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Hs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ss=t,bs=null,!0):!1;default:return!1}}function fv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hv(t){if(Mn){var e=bs;if(e){var n=e;if(!z3(t,e)){if(fv(t))throw Error(Oe(418));e=jc(n.nextSibling);var r=Ss;e&&z3(t,e)?VR(r,n):(t.flags=t.flags&-4097|2,Mn=!1,Ss=t)}}else{if(fv(t))throw Error(Oe(418));t.flags=t.flags&-4097|2,Mn=!1,Ss=t}}}function K3(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ss=t}function yg(t){if(t!==Ss)return!1;if(!Mn)return K3(t),Mn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cv(t.type,t.memoizedProps)),e&&(e=bs)){if(fv(t))throw GR(),Error(Oe(418));for(;e;)VR(t,e),e=jc(e.nextSibling)}if(K3(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bs=jc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bs=null}}else bs=Ss?jc(t.stateNode.nextSibling):null;return!0}function GR(){for(var t=bs;t;)t=jc(t.nextSibling)}function _d(){bs=Ss=null,Mn=!1}function Ux(t){mo===null?mo=[t]:mo.push(t)}var PB=Qa.ReactCurrentBatchConfig;function Cf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Oe(309));var r=n.stateNode}if(!r)throw Error(Oe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Oe(284));if(!n._owner)throw Error(Oe(290,t))}return t}function bg(t,e){throw t=Object.prototype.toString.call(e),Error(Oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function H3(t){var e=t._init;return e(t._payload)}function YR(t){function e(y,b){if(t){var m=y.deletions;m===null?(y.deletions=[b],y.flags|=16):m.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=Hc(y,b),y.index=0,y.sibling=null,y}function s(y,b,m){return y.index=m,t?(m=y.alternate,m!==null?(m=m.index,m<b?(y.flags|=2,b):m):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,m,x){return b===null||b.tag!==6?(b=Xy(m,y.mode,x),b.return=y,b):(b=i(b,m),b.return=y,b)}function c(y,b,m,x){var E=m.type;return E===Ju?u(y,b,m.props.children,x,m.key):b!==null&&(b.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===vc&&H3(E)===b.type)?(x=i(b,m.props),x.ref=Cf(y,b,m),x.return=y,x):(x=w0(m.type,m.key,m.props,null,y.mode,x),x.ref=Cf(y,b,m),x.return=y,x)}function l(y,b,m,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==m.containerInfo||b.stateNode.implementation!==m.implementation?(b=Qy(m,y.mode,x),b.return=y,b):(b=i(b,m.children||[]),b.return=y,b)}function u(y,b,m,x,E){return b===null||b.tag!==7?(b=ql(m,y.mode,x,E),b.return=y,b):(b=i(b,m),b.return=y,b)}function d(y,b,m){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Xy(""+b,y.mode,m),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case cg:return m=w0(b.type,b.key,b.props,null,y.mode,m),m.ref=Cf(y,null,b),m.return=y,m;case Yu:return b=Qy(b,y.mode,m),b.return=y,b;case vc:var x=b._init;return d(y,x(b._payload),m)}if(th(b)||Sf(b))return b=ql(b,y.mode,m,null),b.return=y,b;bg(y,b)}return null}function f(y,b,m,x){var E=b!==null?b.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return E!==null?null:a(y,b,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case cg:return m.key===E?c(y,b,m,x):null;case Yu:return m.key===E?l(y,b,m,x):null;case vc:return E=m._init,f(y,b,E(m._payload),x)}if(th(m)||Sf(m))return E!==null?null:u(y,b,m,x,null);bg(y,m)}return null}function h(y,b,m,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(m)||null,a(b,y,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cg:return y=y.get(x.key===null?m:x.key)||null,c(b,y,x,E);case Yu:return y=y.get(x.key===null?m:x.key)||null,l(b,y,x,E);case vc:var A=x._init;return h(y,b,m,A(x._payload),E)}if(th(x)||Sf(x))return y=y.get(m)||null,u(b,y,x,E,null);bg(b,x)}return null}function p(y,b,m,x){for(var E=null,A=null,k=b,S=b=0,C=null;k!==null&&S<m.length;S++){k.index>S?(C=k,k=null):C=k.sibling;var F=f(y,k,m[S],x);if(F===null){k===null&&(k=C);break}t&&k&&F.alternate===null&&e(y,k),b=s(F,b,S),A===null?E=F:A.sibling=F,A=F,k=C}if(S===m.length)return n(y,k),Mn&&Al(y,S),E;if(k===null){for(;S<m.length;S++)k=d(y,m[S],x),k!==null&&(b=s(k,b,S),A===null?E=k:A.sibling=k,A=k);return Mn&&Al(y,S),E}for(k=r(y,k);S<m.length;S++)C=h(k,y,S,m[S],x),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?S:C.key),b=s(C,b,S),A===null?E=C:A.sibling=C,A=C);return t&&k.forEach(function(N){return e(y,N)}),Mn&&Al(y,S),E}function g(y,b,m,x){var E=Sf(m);if(typeof E!="function")throw Error(Oe(150));if(m=E.call(m),m==null)throw Error(Oe(151));for(var A=E=null,k=b,S=b=0,C=null,F=m.next();k!==null&&!F.done;S++,F=m.next()){k.index>S?(C=k,k=null):C=k.sibling;var N=f(y,k,F.value,x);if(N===null){k===null&&(k=C);break}t&&k&&N.alternate===null&&e(y,k),b=s(N,b,S),A===null?E=N:A.sibling=N,A=N,k=C}if(F.done)return n(y,k),Mn&&Al(y,S),E;if(k===null){for(;!F.done;S++,F=m.next())F=d(y,F.value,x),F!==null&&(b=s(F,b,S),A===null?E=F:A.sibling=F,A=F);return Mn&&Al(y,S),E}for(k=r(y,k);!F.done;S++,F=m.next())F=h(k,y,S,F.value,x),F!==null&&(t&&F.alternate!==null&&k.delete(F.key===null?S:F.key),b=s(F,b,S),A===null?E=F:A.sibling=F,A=F);return t&&k.forEach(function(L){return e(y,L)}),Mn&&Al(y,S),E}function w(y,b,m,x){if(typeof m=="object"&&m!==null&&m.type===Ju&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case cg:e:{for(var E=m.key,A=b;A!==null;){if(A.key===E){if(E=m.type,E===Ju){if(A.tag===7){n(y,A.sibling),b=i(A,m.props.children),b.return=y,y=b;break e}}else if(A.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===vc&&H3(E)===A.type){n(y,A.sibling),b=i(A,m.props),b.ref=Cf(y,A,m),b.return=y,y=b;break e}n(y,A);break}else e(y,A);A=A.sibling}m.type===Ju?(b=ql(m.props.children,y.mode,x,m.key),b.return=y,y=b):(x=w0(m.type,m.key,m.props,null,y.mode,x),x.ref=Cf(y,b,m),x.return=y,y=x)}return o(y);case Yu:e:{for(A=m.key;b!==null;){if(b.key===A)if(b.tag===4&&b.stateNode.containerInfo===m.containerInfo&&b.stateNode.implementation===m.implementation){n(y,b.sibling),b=i(b,m.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=Qy(m,y.mode,x),b.return=y,y=b}return o(y);case vc:return A=m._init,w(y,b,A(m._payload),x)}if(th(m))return p(y,b,m,x);if(Sf(m))return g(y,b,m,x);bg(y,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,b!==null&&b.tag===6?(n(y,b.sibling),b=i(b,m),b.return=y,y=b):(n(y,b),b=Xy(m,y.mode,x),b.return=y,y=b),o(y)):n(y,b)}return w}var kd=YR(!0),JR=YR(!1),im=ll(null),sm=null,id=null,jx=null;function Fx(){jx=id=sm=null}function zx(t){var e=im.current;Nn(im),t._currentValue=e}function pv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pd(t,e){sm=t,jx=id=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ji=!0),t.firstContext=null)}function Ys(t){var e=t._currentValue;if(jx!==t)if(t={context:t,memoizedValue:e,next:null},id===null){if(sm===null)throw Error(Oe(308));id=t,sm.dependencies={lanes:0,firstContext:t}}else id=id.next=t;return e}var Bl=null;function Kx(t){Bl===null?Bl=[t]:Bl.push(t)}function ZR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Kx(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ga(t,r)}function Ga(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xc=!1;function Hx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,en&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ga(t,n)}return i=r.interleaved,i===null?(e.next=e,Kx(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ga(t,n)}function d0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rx(t,n)}}function W3(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function om(t,e,n,r){var i=t.updateQueue;xc=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,u=l=c=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(f=e,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Hn({},d,f);break e;case 2:xc=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=h,c=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ru|=o,t.lanes=o,t.memoizedState=d}}function q3(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Oe(191,i));i.call(r)}}}var Ap={},ea=ll(Ap),Kh=ll(Ap),Hh=ll(Ap);function Ml(t){if(t===Ap)throw Error(Oe(174));return t}function Wx(t,e){switch(In(Hh,e),In(Kh,t),In(ea,Ap),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:G1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=G1(e,t)}Nn(ea),In(ea,e)}function Ad(){Nn(ea),Nn(Kh),Nn(Hh)}function QR(t){Ml(Hh.current);var e=Ml(ea.current),n=G1(e,t.type);e!==n&&(In(Kh,t),In(ea,n))}function qx(t){Kh.current===t&&(Nn(ea),Nn(Kh))}var jn=ll(0);function am(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qy=[];function Vx(){for(var t=0;t<qy.length;t++)qy[t]._workInProgressVersionPrimary=null;qy.length=0}var f0=Qa.ReactCurrentDispatcher,Vy=Qa.ReactCurrentBatchConfig,nu=0,zn=null,mr=null,Rr=null,cm=!1,ph=!1,Wh=0,NB=0;function oi(){throw Error(Oe(321))}function Gx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!So(t[n],e[n]))return!1;return!0}function Yx(t,e,n,r,i,s){if(nu=s,zn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,f0.current=t===null||t.memoizedState===null?BB:MB,t=n(r,i),ph){s=0;do{if(ph=!1,Wh=0,25<=s)throw Error(Oe(301));s+=1,Rr=mr=null,e.updateQueue=null,f0.current=UB,t=n(r,i)}while(ph)}if(f0.current=lm,e=mr!==null&&mr.next!==null,nu=0,Rr=mr=zn=null,cm=!1,e)throw Error(Oe(300));return t}function Jx(){var t=Wh!==0;return Wh=0,t}function zo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rr===null?zn.memoizedState=Rr=t:Rr=Rr.next=t,Rr}function Js(){if(mr===null){var t=zn.alternate;t=t!==null?t.memoizedState:null}else t=mr.next;var e=Rr===null?zn.memoizedState:Rr.next;if(e!==null)Rr=e,mr=t;else{if(t===null)throw Error(Oe(310));mr=t,t={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},Rr===null?zn.memoizedState=Rr=t:Rr=Rr.next=t}return Rr}function qh(t,e){return typeof e=="function"?e(t):e}function Gy(t){var e=Js(),n=e.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=t;var r=mr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if((nu&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,zn.lanes|=u,ru|=u}l=l.next}while(l!==null&&l!==s);c===null?o=r:c.next=a,So(r,e.memoizedState)||(Ji=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,zn.lanes|=s,ru|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yy(t){var e=Js(),n=e.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);So(s,e.memoizedState)||(Ji=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function eT(){}function tT(t,e){var n=zn,r=Js(),i=e(),s=!So(r.memoizedState,i);if(s&&(r.memoizedState=i,Ji=!0),r=r.queue,Zx(iT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Rr!==null&&Rr.memoizedState.tag&1){if(n.flags|=2048,Vh(9,rT.bind(null,n,r,i,e),void 0,null),Dr===null)throw Error(Oe(349));nu&30||nT(n,e,i)}return i}function nT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=zn.updateQueue,e===null?(e={lastEffect:null,stores:null},zn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rT(t,e,n,r){e.value=n,e.getSnapshot=r,sT(e)&&oT(t)}function iT(t,e,n){return n(function(){sT(e)&&oT(t)})}function sT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!So(t,n)}catch{return!0}}function oT(t){var e=Ga(t,1);e!==null&&xo(e,t,1,-1)}function V3(t){var e=zo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qh,lastRenderedState:t},e.queue=t,t=t.dispatch=$B.bind(null,zn,t),[e.memoizedState,t]}function Vh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=zn.updateQueue,e===null?(e={lastEffect:null,stores:null},zn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function aT(){return Js().memoizedState}function h0(t,e,n,r){var i=zo();zn.flags|=t,i.memoizedState=Vh(1|e,n,void 0,r===void 0?null:r)}function sw(t,e,n,r){var i=Js();r=r===void 0?null:r;var s=void 0;if(mr!==null){var o=mr.memoizedState;if(s=o.destroy,r!==null&&Gx(r,o.deps)){i.memoizedState=Vh(e,n,s,r);return}}zn.flags|=t,i.memoizedState=Vh(1|e,n,s,r)}function G3(t,e){return h0(8390656,8,t,e)}function Zx(t,e){return sw(2048,8,t,e)}function cT(t,e){return sw(4,2,t,e)}function lT(t,e){return sw(4,4,t,e)}function uT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dT(t,e,n){return n=n!=null?n.concat([t]):null,sw(4,4,uT.bind(null,e,t),n)}function Xx(){}function fT(t,e){var n=Js();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hT(t,e){var n=Js();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pT(t,e,n){return nu&21?(So(n,e)||(n=bR(),zn.lanes|=n,ru|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ji=!0),t.memoizedState=n)}function LB(t,e){var n=hn;hn=n!==0&&4>n?n:4,t(!0);var r=Vy.transition;Vy.transition={};try{t(!1),e()}finally{hn=n,Vy.transition=r}}function gT(){return Js().memoizedState}function DB(t,e,n){var r=Kc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},mT(t))wT(e,n);else if(n=ZR(t,e,n,r),n!==null){var i=Pi();xo(n,t,r,i),yT(n,e,r)}}function $B(t,e,n){var r=Kc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(mT(t))wT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,So(a,o)){var c=e.interleaved;c===null?(i.next=i,Kx(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=ZR(t,e,i,r),n!==null&&(i=Pi(),xo(n,t,r,i),yT(n,e,r))}}function mT(t){var e=t.alternate;return t===zn||e!==null&&e===zn}function wT(t,e){ph=cm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rx(t,n)}}var lm={readContext:Ys,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useInsertionEffect:oi,useLayoutEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useMutableSource:oi,useSyncExternalStore:oi,useId:oi,unstable_isNewReconciler:!1},BB={readContext:Ys,useCallback:function(t,e){return zo().memoizedState=[t,e===void 0?null:e],t},useContext:Ys,useEffect:G3,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,h0(4194308,4,uT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return h0(4194308,4,t,e)},useInsertionEffect:function(t,e){return h0(4,2,t,e)},useMemo:function(t,e){var n=zo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DB.bind(null,zn,t),[r.memoizedState,t]},useRef:function(t){var e=zo();return t={current:t},e.memoizedState=t},useState:V3,useDebugValue:Xx,useDeferredValue:function(t){return zo().memoizedState=t},useTransition:function(){var t=V3(!1),e=t[0];return t=LB.bind(null,t[1]),zo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=zn,i=zo();if(Mn){if(n===void 0)throw Error(Oe(407));n=n()}else{if(n=e(),Dr===null)throw Error(Oe(349));nu&30||nT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,G3(iT.bind(null,r,s,t),[t]),r.flags|=2048,Vh(9,rT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=zo(),e=Dr.identifierPrefix;if(Mn){var n=Ma,r=Ba;n=(r&~(1<<32-vo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},MB={readContext:Ys,useCallback:fT,useContext:Ys,useEffect:Zx,useImperativeHandle:dT,useInsertionEffect:cT,useLayoutEffect:lT,useMemo:hT,useReducer:Gy,useRef:aT,useState:function(){return Gy(qh)},useDebugValue:Xx,useDeferredValue:function(t){var e=Js();return pT(e,mr.memoizedState,t)},useTransition:function(){var t=Gy(qh)[0],e=Js().memoizedState;return[t,e]},useMutableSource:eT,useSyncExternalStore:tT,useId:gT,unstable_isNewReconciler:!1},UB={readContext:Ys,useCallback:fT,useContext:Ys,useEffect:Zx,useImperativeHandle:dT,useInsertionEffect:cT,useLayoutEffect:lT,useMemo:hT,useReducer:Yy,useRef:aT,useState:function(){return Yy(qh)},useDebugValue:Xx,useDeferredValue:function(t){var e=Js();return mr===null?e.memoizedState=t:pT(e,mr.memoizedState,t)},useTransition:function(){var t=Yy(qh)[0],e=Js().memoizedState;return[t,e]},useMutableSource:eT,useSyncExternalStore:tT,useId:gT,unstable_isNewReconciler:!1};function fo(t,e){if(t&&t.defaultProps){e=Hn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Hn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ow={isMounted:function(t){return(t=t._reactInternals)?mu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pi(),i=Kc(t),s=Fa(r,i);s.payload=e,n!=null&&(s.callback=n),e=Fc(t,s,i),e!==null&&(xo(e,t,i,r),d0(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pi(),i=Kc(t),s=Fa(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Fc(t,s,i),e!==null&&(xo(e,t,i,r),d0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pi(),r=Kc(t),i=Fa(n,r);i.tag=2,e!=null&&(i.callback=e),e=Fc(t,i,r),e!==null&&(xo(e,t,r,n),d0(e,t,r))}};function Y3(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Uh(n,r)||!Uh(i,s):!0}function bT(t,e,n){var r=!1,i=tl,s=e.contextType;return typeof s=="object"&&s!==null?s=Ys(s):(i=Qi(e)?eu:bi.current,r=e.contextTypes,s=(r=r!=null)?Sd(t,i):tl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ow,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function J3(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ow.enqueueReplaceState(e,e.state,null)}function mv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Hx(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ys(s):(s=Qi(e)?eu:bi.current,i.context=Sd(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(gv(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ow.enqueueReplaceState(i,i.state,null),om(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Id(t,e){try{var n="",r=e;do n+=h$(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Jy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jB=typeof WeakMap=="function"?WeakMap:Map;function vT(t,e,n){n=Fa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){dm||(dm=!0,Iv=r),wv(t,e)},n}function xT(t,e,n){n=Fa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){wv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){wv(t,e),typeof r!="function"&&(zc===null?zc=new Set([this]):zc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Z3(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jB;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=eM.bind(null,t,e,n),e.then(t,t))}function X3(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Q3(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fa(-1,1),e.tag=2,Fc(n,e,1))),n.lanes|=1),t)}var FB=Qa.ReactCurrentOwner,Ji=!1;function Ci(t,e,n,r){e.child=t===null?JR(e,null,n,r):kd(e,t.child,n,r)}function e_(t,e,n,r,i){n=n.render;var s=e.ref;return pd(e,i),r=Yx(t,e,n,r,s,i),n=Jx(),t!==null&&!Ji?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ya(t,e,i)):(Mn&&n&&Bx(e),e.flags|=1,Ci(t,e,r,i),e.child)}function t_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!oE(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ET(t,e,s,r,i)):(t=w0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Uh,n(o,r)&&t.ref===e.ref)return Ya(t,e,i)}return e.flags|=1,t=Hc(s,r),t.ref=e.ref,t.return=e,e.child=t}function ET(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Uh(s,r)&&t.ref===e.ref)if(Ji=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ji=!0);else return e.lanes=t.lanes,Ya(t,e,i)}return yv(t,e,n,r,i)}function ST(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},In(od,fs),fs|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,In(od,fs),fs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,In(od,fs),fs|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,In(od,fs),fs|=r;return Ci(t,e,i,n),e.child}function _T(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yv(t,e,n,r,i){var s=Qi(n)?eu:bi.current;return s=Sd(e,s),pd(e,i),n=Yx(t,e,n,r,s,i),r=Jx(),t!==null&&!Ji?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ya(t,e,i)):(Mn&&r&&Bx(e),e.flags|=1,Ci(t,e,n,i),e.child)}function n_(t,e,n,r,i){if(Qi(n)){var s=!0;tm(e)}else s=!1;if(pd(e,i),e.stateNode===null)p0(t,e),bT(e,n,r),mv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Ys(l):(l=Qi(n)?eu:bi.current,l=Sd(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&J3(e,o,r,l),xc=!1;var f=e.memoizedState;o.state=f,om(e,r,o,i),c=e.memoizedState,a!==r||f!==c||Xi.current||xc?(typeof u=="function"&&(gv(e,n,u,r),c=e.memoizedState),(a=xc||Y3(e,n,a,r,f,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,XR(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:fo(e.type,a),o.props=l,d=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ys(c):(c=Qi(n)?eu:bi.current,c=Sd(e,c));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&J3(e,o,r,c),xc=!1,f=e.memoizedState,o.state=f,om(e,r,o,i);var p=e.memoizedState;a!==d||f!==p||Xi.current||xc?(typeof h=="function"&&(gv(e,n,h,r),p=e.memoizedState),(l=xc||Y3(e,n,l,r,f,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return bv(t,e,n,r,s,i)}function bv(t,e,n,r,i,s){_T(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&F3(e,n,!1),Ya(t,e,s);r=e.stateNode,FB.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=kd(e,t.child,null,s),e.child=kd(e,null,a,s)):Ci(t,e,a,s),e.memoizedState=r.state,i&&F3(e,n,!0),e.child}function kT(t){var e=t.stateNode;e.pendingContext?j3(t,e.pendingContext,e.pendingContext!==e.context):e.context&&j3(t,e.context,!1),Wx(t,e.containerInfo)}function r_(t,e,n,r,i){return _d(),Ux(i),e.flags|=256,Ci(t,e,n,r),e.child}var vv={dehydrated:null,treeContext:null,retryLane:0};function xv(t){return{baseLanes:t,cachePool:null,transitions:null}}function AT(t,e,n){var r=e.pendingProps,i=jn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),In(jn,i&1),t===null)return hv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=lw(o,r,0,null),t=ql(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=xv(n),e.memoizedState=vv,t):Qx(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return zB(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Hc(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Hc(a,s):(s=ql(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?xv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=vv,r}return s=t.child,t=s.sibling,r=Hc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Qx(t,e){return e=lw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vg(t,e,n,r){return r!==null&&Ux(r),kd(e,t.child,null,n),t=Qx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zB(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Jy(Error(Oe(422))),vg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=lw({mode:"visible",children:r.children},i,0,null),s=ql(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&kd(e,t.child,null,o),e.child.memoizedState=xv(o),e.memoizedState=vv,s);if(!(e.mode&1))return vg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Oe(419)),r=Jy(s,r,void 0),vg(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ji||a){if(r=Dr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ga(t,i),xo(r,t,i,-1))}return sE(),r=Jy(Error(Oe(421))),vg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=tM.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,bs=jc(i.nextSibling),Ss=e,Mn=!0,mo=null,t!==null&&(js[Fs++]=Ba,js[Fs++]=Ma,js[Fs++]=tu,Ba=t.id,Ma=t.overflow,tu=e),e=Qx(e,r.children),e.flags|=4096,e)}function i_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),pv(t.return,e,n)}function Zy(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function IT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ci(t,e,r.children,n),r=jn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&i_(t,n,e);else if(t.tag===19)i_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(In(jn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&am(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zy(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&am(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zy(e,!0,n,null,s);break;case"together":Zy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function p0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ya(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ru|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Oe(153));if(e.child!==null){for(t=e.child,n=Hc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KB(t,e,n){switch(e.tag){case 3:kT(e),_d();break;case 5:QR(e);break;case 1:Qi(e.type)&&tm(e);break;case 4:Wx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;In(im,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(In(jn,jn.current&1),e.flags|=128,null):n&e.child.childLanes?AT(t,e,n):(In(jn,jn.current&1),t=Ya(t,e,n),t!==null?t.sibling:null);In(jn,jn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return IT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),In(jn,jn.current),r)break;return null;case 22:case 23:return e.lanes=0,ST(t,e,n)}return Ya(t,e,n)}var CT,Ev,RT,TT;CT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ev=function(){};RT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ml(ea.current);var s=null;switch(n){case"input":i=H1(t,i),r=H1(t,r),s=[];break;case"select":i=Hn({},i,{value:void 0}),r=Hn({},r,{value:void 0}),s=[];break;case"textarea":i=V1(t,i),r=V1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Q0)}Y1(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ph.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Ph.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Tn("scroll",t),s||a===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};TT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rf(t,e){if(!Mn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ai(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function HB(t,e,n){var r=e.pendingProps;switch(Mx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(e),null;case 1:return Qi(e.type)&&em(),ai(e),null;case 3:return r=e.stateNode,Ad(),Nn(Xi),Nn(bi),Vx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mo!==null&&(Tv(mo),mo=null))),Ev(t,e),ai(e),null;case 5:qx(e);var i=Ml(Hh.current);if(n=e.type,t!==null&&e.stateNode!=null)RT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Oe(166));return ai(e),null}if(t=Ml(ea.current),yg(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Go]=e,r[zh]=s,t=(e.mode&1)!==0,n){case"dialog":Tn("cancel",r),Tn("close",r);break;case"iframe":case"object":case"embed":Tn("load",r);break;case"video":case"audio":for(i=0;i<rh.length;i++)Tn(rh[i],r);break;case"source":Tn("error",r);break;case"img":case"image":case"link":Tn("error",r),Tn("load",r);break;case"details":Tn("toggle",r);break;case"input":h3(r,s),Tn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Tn("invalid",r);break;case"textarea":g3(r,s),Tn("invalid",r)}Y1(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&wg(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wg(r.textContent,a,t),i=["children",""+a]):Ph.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Tn("scroll",r)}switch(n){case"input":lg(r),p3(r,s,!0);break;case"textarea":lg(r),m3(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Q0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Go]=e,t[zh]=r,CT(t,e,!1,!1),e.stateNode=t;e:{switch(o=J1(n,r),n){case"dialog":Tn("cancel",t),Tn("close",t),i=r;break;case"iframe":case"object":case"embed":Tn("load",t),i=r;break;case"video":case"audio":for(i=0;i<rh.length;i++)Tn(rh[i],t);i=r;break;case"source":Tn("error",t),i=r;break;case"img":case"image":case"link":Tn("error",t),Tn("load",t),i=r;break;case"details":Tn("toggle",t),i=r;break;case"input":h3(t,r),i=H1(t,r),Tn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Hn({},r,{value:void 0}),Tn("invalid",t);break;case"textarea":g3(t,r),i=V1(t,r),Tn("invalid",t);break;default:i=r}Y1(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?aR(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&sR(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Nh(t,c):typeof c=="number"&&Nh(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ph.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Tn("scroll",t):c!=null&&Sx(t,s,c,o))}switch(n){case"input":lg(t),p3(t,r,!1);break;case"textarea":lg(t),m3(t);break;case"option":r.value!=null&&t.setAttribute("value",""+el(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ud(t,!!r.multiple,s,!1):r.defaultValue!=null&&ud(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Q0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ai(e),null;case 6:if(t&&e.stateNode!=null)TT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Oe(166));if(n=Ml(Hh.current),Ml(ea.current),yg(e)){if(r=e.stateNode,n=e.memoizedProps,r[Go]=e,(s=r.nodeValue!==n)&&(t=Ss,t!==null))switch(t.tag){case 3:wg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wg(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Go]=e,e.stateNode=r}return ai(e),null;case 13:if(Nn(jn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Mn&&bs!==null&&e.mode&1&&!(e.flags&128))GR(),_d(),e.flags|=98560,s=!1;else if(s=yg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Oe(317));s[Go]=e}else _d(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ai(e),s=!1}else mo!==null&&(Tv(mo),mo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||jn.current&1?yr===0&&(yr=3):sE())),e.updateQueue!==null&&(e.flags|=4),ai(e),null);case 4:return Ad(),Ev(t,e),t===null&&jh(e.stateNode.containerInfo),ai(e),null;case 10:return zx(e.type._context),ai(e),null;case 17:return Qi(e.type)&&em(),ai(e),null;case 19:if(Nn(jn),s=e.memoizedState,s===null)return ai(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Rf(s,!1);else{if(yr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=am(t),o!==null){for(e.flags|=128,Rf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return In(jn,jn.current&1|2),e.child}t=t.sibling}s.tail!==null&&rr()>Cd&&(e.flags|=128,r=!0,Rf(s,!1),e.lanes=4194304)}else{if(!r)if(t=am(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Mn)return ai(e),null}else 2*rr()-s.renderingStartTime>Cd&&n!==1073741824&&(e.flags|=128,r=!0,Rf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rr(),e.sibling=null,n=jn.current,In(jn,r?n&1|2:n&1),e):(ai(e),null);case 22:case 23:return iE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fs&1073741824&&(ai(e),e.subtreeFlags&6&&(e.flags|=8192)):ai(e),null;case 24:return null;case 25:return null}throw Error(Oe(156,e.tag))}function WB(t,e){switch(Mx(e),e.tag){case 1:return Qi(e.type)&&em(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ad(),Nn(Xi),Nn(bi),Vx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qx(e),null;case 13:if(Nn(jn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Oe(340));_d()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Nn(jn),null;case 4:return Ad(),null;case 10:return zx(e.type._context),null;case 22:case 23:return iE(),null;case 24:return null;default:return null}}var xg=!1,wi=!1,qB=typeof WeakSet=="function"?WeakSet:Set,nt=null;function sd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Jn(t,e,r)}else n.current=null}function Sv(t,e,n){try{n()}catch(r){Jn(t,e,r)}}var s_=!1;function VB(t,e){if(ov=J0,t=DR(),$x(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++l===i&&(a=o),f===s&&++u===r&&(c=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(av={focusedElem:t,selectionRange:n},J0=!1,nt=e;nt!==null;)if(e=nt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,nt=t;else for(;nt!==null;){e=nt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:fo(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(x){Jn(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,nt=t;break}nt=e.return}return p=s_,s_=!1,p}function gh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Sv(e,n,s)}i=i.next}while(i!==r)}}function aw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _v(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function OT(t){var e=t.alternate;e!==null&&(t.alternate=null,OT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Go],delete e[zh],delete e[uv],delete e[RB],delete e[TB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function PT(t){return t.tag===5||t.tag===3||t.tag===4}function o_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||PT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Q0));else if(r!==4&&(t=t.child,t!==null))for(kv(t,e,n),t=t.sibling;t!==null;)kv(t,e,n),t=t.sibling}function Av(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Av(t,e,n),t=t.sibling;t!==null;)Av(t,e,n),t=t.sibling}var Wr=null,po=!1;function oc(t,e,n){for(n=n.child;n!==null;)NT(t,e,n),n=n.sibling}function NT(t,e,n){if(Qo&&typeof Qo.onCommitFiberUnmount=="function")try{Qo.onCommitFiberUnmount(Qm,n)}catch{}switch(n.tag){case 5:wi||sd(n,e);case 6:var r=Wr,i=po;Wr=null,oc(t,e,n),Wr=r,po=i,Wr!==null&&(po?(t=Wr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wr.removeChild(n.stateNode));break;case 18:Wr!==null&&(po?(t=Wr,n=n.stateNode,t.nodeType===8?Hy(t.parentNode,n):t.nodeType===1&&Hy(t,n),Bh(t)):Hy(Wr,n.stateNode));break;case 4:r=Wr,i=po,Wr=n.stateNode.containerInfo,po=!0,oc(t,e,n),Wr=r,po=i;break;case 0:case 11:case 14:case 15:if(!wi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Sv(n,e,o),i=i.next}while(i!==r)}oc(t,e,n);break;case 1:if(!wi&&(sd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Jn(n,e,a)}oc(t,e,n);break;case 21:oc(t,e,n);break;case 22:n.mode&1?(wi=(r=wi)||n.memoizedState!==null,oc(t,e,n),wi=r):oc(t,e,n);break;default:oc(t,e,n)}}function a_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new qB),e.forEach(function(r){var i=nM.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function io(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Wr=a.stateNode,po=!1;break e;case 3:Wr=a.stateNode.containerInfo,po=!0;break e;case 4:Wr=a.stateNode.containerInfo,po=!0;break e}a=a.return}if(Wr===null)throw Error(Oe(160));NT(s,o,i),Wr=null,po=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){Jn(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LT(e,t),e=e.sibling}function LT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(io(e,t),Oo(t),r&4){try{gh(3,t,t.return),aw(3,t)}catch(g){Jn(t,t.return,g)}try{gh(5,t,t.return)}catch(g){Jn(t,t.return,g)}}break;case 1:io(e,t),Oo(t),r&512&&n!==null&&sd(n,n.return);break;case 5:if(io(e,t),Oo(t),r&512&&n!==null&&sd(n,n.return),t.flags&32){var i=t.stateNode;try{Nh(i,"")}catch(g){Jn(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&nR(i,s),J1(a,o);var l=J1(a,s);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?aR(i,d):u==="dangerouslySetInnerHTML"?sR(i,d):u==="children"?Nh(i,d):Sx(i,u,d,l)}switch(a){case"input":W1(i,s);break;case"textarea":rR(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?ud(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?ud(i,!!s.multiple,s.defaultValue,!0):ud(i,!!s.multiple,s.multiple?[]:"",!1))}i[zh]=s}catch(g){Jn(t,t.return,g)}}break;case 6:if(io(e,t),Oo(t),r&4){if(t.stateNode===null)throw Error(Oe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Jn(t,t.return,g)}}break;case 3:if(io(e,t),Oo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bh(e.containerInfo)}catch(g){Jn(t,t.return,g)}break;case 4:io(e,t),Oo(t);break;case 13:io(e,t),Oo(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(nE=rr())),r&4&&a_(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(wi=(l=wi)||u,io(e,t),wi=l):io(e,t),Oo(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(nt=t,u=t.child;u!==null;){for(d=nt=u;nt!==null;){switch(f=nt,h=f.child,f.tag){case 0:case 11:case 14:case 15:gh(4,f,f.return);break;case 1:sd(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Jn(r,n,g)}}break;case 5:sd(f,f.return);break;case 22:if(f.memoizedState!==null){l_(d);continue}}h!==null?(h.return=f,nt=h):l_(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=oR("display",o))}catch(g){Jn(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Jn(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:io(e,t),Oo(t),r&4&&a_(t);break;case 21:break;default:io(e,t),Oo(t)}}function Oo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(PT(n)){var r=n;break e}n=n.return}throw Error(Oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Nh(i,""),r.flags&=-33);var s=o_(t);Av(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=o_(t);kv(t,a,o);break;default:throw Error(Oe(161))}}catch(c){Jn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GB(t,e,n){nt=t,DT(t)}function DT(t,e,n){for(var r=(t.mode&1)!==0;nt!==null;){var i=nt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||xg;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||wi;a=xg;var l=wi;if(xg=o,(wi=c)&&!l)for(nt=i;nt!==null;)o=nt,c=o.child,o.tag===22&&o.memoizedState!==null?u_(i):c!==null?(c.return=o,nt=c):u_(i);for(;s!==null;)nt=s,DT(s),s=s.sibling;nt=i,xg=a,wi=l}c_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,nt=s):c_(t)}}function c_(t){for(;nt!==null;){var e=nt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wi||aw(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wi)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:fo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&q3(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}q3(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Bh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}wi||e.flags&512&&_v(e)}catch(f){Jn(e,e.return,f)}}if(e===t){nt=null;break}if(n=e.sibling,n!==null){n.return=e.return,nt=n;break}nt=e.return}}function l_(t){for(;nt!==null;){var e=nt;if(e===t){nt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,nt=n;break}nt=e.return}}function u_(t){for(;nt!==null;){var e=nt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{aw(4,e)}catch(c){Jn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Jn(e,i,c)}}var s=e.return;try{_v(e)}catch(c){Jn(e,s,c)}break;case 5:var o=e.return;try{_v(e)}catch(c){Jn(e,o,c)}}}catch(c){Jn(e,e.return,c)}if(e===t){nt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,nt=a;break}nt=e.return}}var YB=Math.ceil,um=Qa.ReactCurrentDispatcher,eE=Qa.ReactCurrentOwner,Vs=Qa.ReactCurrentBatchConfig,en=0,Dr=null,fr=null,Xr=0,fs=0,od=ll(0),yr=0,Gh=null,ru=0,cw=0,tE=0,mh=null,Gi=null,nE=0,Cd=1/0,Ia=null,dm=!1,Iv=null,zc=null,Eg=!1,Pc=null,fm=0,wh=0,Cv=null,g0=-1,m0=0;function Pi(){return en&6?rr():g0!==-1?g0:g0=rr()}function Kc(t){return t.mode&1?en&2&&Xr!==0?Xr&-Xr:PB.transition!==null?(m0===0&&(m0=bR()),m0):(t=hn,t!==0||(t=window.event,t=t===void 0?16:AR(t.type)),t):1}function xo(t,e,n,r){if(50<wh)throw wh=0,Cv=null,Error(Oe(185));Sp(t,n,r),(!(en&2)||t!==Dr)&&(t===Dr&&(!(en&2)&&(cw|=n),yr===4&&kc(t,Xr)),es(t,r),n===1&&en===0&&!(e.mode&1)&&(Cd=rr()+500,iw&&ul()))}function es(t,e){var n=t.callbackNode;P$(t,e);var r=Y0(t,t===Dr?Xr:0);if(r===0)n!==null&&b3(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&b3(n),e===1)t.tag===0?OB(d_.bind(null,t)):WR(d_.bind(null,t)),IB(function(){!(en&6)&&ul()}),n=null;else{switch(vR(r)){case 1:n=Cx;break;case 4:n=wR;break;case 16:n=G0;break;case 536870912:n=yR;break;default:n=G0}n=KT(n,$T.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $T(t,e){if(g0=-1,m0=0,en&6)throw Error(Oe(327));var n=t.callbackNode;if(gd()&&t.callbackNode!==n)return null;var r=Y0(t,t===Dr?Xr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hm(t,r);else{e=r;var i=en;en|=2;var s=MT();(Dr!==t||Xr!==e)&&(Ia=null,Cd=rr()+500,Wl(t,e));do try{XB();break}catch(a){BT(t,a)}while(!0);Fx(),um.current=s,en=i,fr!==null?e=0:(Dr=null,Xr=0,e=yr)}if(e!==0){if(e===2&&(i=tv(t),i!==0&&(r=i,e=Rv(t,i))),e===1)throw n=Gh,Wl(t,0),kc(t,r),es(t,rr()),n;if(e===6)kc(t,r);else{if(i=t.current.alternate,!(r&30)&&!JB(i)&&(e=hm(t,r),e===2&&(s=tv(t),s!==0&&(r=s,e=Rv(t,s))),e===1))throw n=Gh,Wl(t,0),kc(t,r),es(t,rr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Oe(345));case 2:Il(t,Gi,Ia);break;case 3:if(kc(t,r),(r&130023424)===r&&(e=nE+500-rr(),10<e)){if(Y0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Pi(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=lv(Il.bind(null,t,Gi,Ia),e);break}Il(t,Gi,Ia);break;case 4:if(kc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-vo(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YB(r/1960))-r,10<r){t.timeoutHandle=lv(Il.bind(null,t,Gi,Ia),r);break}Il(t,Gi,Ia);break;case 5:Il(t,Gi,Ia);break;default:throw Error(Oe(329))}}}return es(t,rr()),t.callbackNode===n?$T.bind(null,t):null}function Rv(t,e){var n=mh;return t.current.memoizedState.isDehydrated&&(Wl(t,e).flags|=256),t=hm(t,e),t!==2&&(e=Gi,Gi=n,e!==null&&Tv(e)),t}function Tv(t){Gi===null?Gi=t:Gi.push.apply(Gi,t)}function JB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!So(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kc(t,e){for(e&=~tE,e&=~cw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vo(e),r=1<<n;t[n]=-1,e&=~r}}function d_(t){if(en&6)throw Error(Oe(327));gd();var e=Y0(t,0);if(!(e&1))return es(t,rr()),null;var n=hm(t,e);if(t.tag!==0&&n===2){var r=tv(t);r!==0&&(e=r,n=Rv(t,r))}if(n===1)throw n=Gh,Wl(t,0),kc(t,e),es(t,rr()),n;if(n===6)throw Error(Oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Il(t,Gi,Ia),es(t,rr()),null}function rE(t,e){var n=en;en|=1;try{return t(e)}finally{en=n,en===0&&(Cd=rr()+500,iw&&ul())}}function iu(t){Pc!==null&&Pc.tag===0&&!(en&6)&&gd();var e=en;en|=1;var n=Vs.transition,r=hn;try{if(Vs.transition=null,hn=1,t)return t()}finally{hn=r,Vs.transition=n,en=e,!(en&6)&&ul()}}function iE(){fs=od.current,Nn(od)}function Wl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AB(n)),fr!==null)for(n=fr.return;n!==null;){var r=n;switch(Mx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&em();break;case 3:Ad(),Nn(Xi),Nn(bi),Vx();break;case 5:qx(r);break;case 4:Ad();break;case 13:Nn(jn);break;case 19:Nn(jn);break;case 10:zx(r.type._context);break;case 22:case 23:iE()}n=n.return}if(Dr=t,fr=t=Hc(t.current,null),Xr=fs=e,yr=0,Gh=null,tE=cw=ru=0,Gi=mh=null,Bl!==null){for(e=0;e<Bl.length;e++)if(n=Bl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Bl=null}return t}function BT(t,e){do{var n=fr;try{if(Fx(),f0.current=lm,cm){for(var r=zn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}cm=!1}if(nu=0,Rr=mr=zn=null,ph=!1,Wh=0,eE.current=null,n===null||n.return===null){yr=1,Gh=e,fr=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=Xr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=X3(o);if(h!==null){h.flags&=-257,Q3(h,o,a,s,e),h.mode&1&&Z3(s,l,e),e=h,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){Z3(s,l,e),sE();break e}c=Error(Oe(426))}}else if(Mn&&a.mode&1){var w=X3(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Q3(w,o,a,s,e),Ux(Id(c,a));break e}}s=c=Id(c,a),yr!==4&&(yr=2),mh===null?mh=[s]:mh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=vT(s,c,e);W3(s,y);break e;case 1:a=c;var b=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(zc===null||!zc.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=xT(s,a,e);W3(s,x);break e}}s=s.return}while(s!==null)}jT(n)}catch(E){e=E,fr===n&&n!==null&&(fr=n=n.return);continue}break}while(!0)}function MT(){var t=um.current;return um.current=lm,t===null?lm:t}function sE(){(yr===0||yr===3||yr===2)&&(yr=4),Dr===null||!(ru&268435455)&&!(cw&268435455)||kc(Dr,Xr)}function hm(t,e){var n=en;en|=2;var r=MT();(Dr!==t||Xr!==e)&&(Ia=null,Wl(t,e));do try{ZB();break}catch(i){BT(t,i)}while(!0);if(Fx(),en=n,um.current=r,fr!==null)throw Error(Oe(261));return Dr=null,Xr=0,yr}function ZB(){for(;fr!==null;)UT(fr)}function XB(){for(;fr!==null&&!S$();)UT(fr)}function UT(t){var e=zT(t.alternate,t,fs);t.memoizedProps=t.pendingProps,e===null?jT(t):fr=e,eE.current=null}function jT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=WB(n,e),n!==null){n.flags&=32767,fr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yr=6,fr=null;return}}else if(n=HB(n,e,fs),n!==null){fr=n;return}if(e=e.sibling,e!==null){fr=e;return}fr=e=t}while(e!==null);yr===0&&(yr=5)}function Il(t,e,n){var r=hn,i=Vs.transition;try{Vs.transition=null,hn=1,QB(t,e,n,r)}finally{Vs.transition=i,hn=r}return null}function QB(t,e,n,r){do gd();while(Pc!==null);if(en&6)throw Error(Oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(N$(t,s),t===Dr&&(fr=Dr=null,Xr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Eg||(Eg=!0,KT(G0,function(){return gd(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Vs.transition,Vs.transition=null;var o=hn;hn=1;var a=en;en|=4,eE.current=null,VB(t,n),LT(n,t),bB(av),J0=!!ov,av=ov=null,t.current=n,GB(n),_$(),en=a,hn=o,Vs.transition=s}else t.current=n;if(Eg&&(Eg=!1,Pc=t,fm=i),s=t.pendingLanes,s===0&&(zc=null),I$(n.stateNode),es(t,rr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(dm)throw dm=!1,t=Iv,Iv=null,t;return fm&1&&t.tag!==0&&gd(),s=t.pendingLanes,s&1?t===Cv?wh++:(wh=0,Cv=t):wh=0,ul(),null}function gd(){if(Pc!==null){var t=vR(fm),e=Vs.transition,n=hn;try{if(Vs.transition=null,hn=16>t?16:t,Pc===null)var r=!1;else{if(t=Pc,Pc=null,fm=0,en&6)throw Error(Oe(331));var i=en;for(en|=4,nt=t.current;nt!==null;){var s=nt,o=s.child;if(nt.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(nt=l;nt!==null;){var u=nt;switch(u.tag){case 0:case 11:case 15:gh(8,u,s)}var d=u.child;if(d!==null)d.return=u,nt=d;else for(;nt!==null;){u=nt;var f=u.sibling,h=u.return;if(OT(u),u===l){nt=null;break}if(f!==null){f.return=h,nt=f;break}nt=h}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}nt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,nt=o;else e:for(;nt!==null;){if(s=nt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:gh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,nt=y;break e}nt=s.return}}var b=t.current;for(nt=b;nt!==null;){o=nt;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,nt=m;else e:for(o=b;nt!==null;){if(a=nt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:aw(9,a)}}catch(E){Jn(a,a.return,E)}if(a===o){nt=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,nt=x;break e}nt=a.return}}if(en=i,ul(),Qo&&typeof Qo.onPostCommitFiberRoot=="function")try{Qo.onPostCommitFiberRoot(Qm,t)}catch{}r=!0}return r}finally{hn=n,Vs.transition=e}}return!1}function f_(t,e,n){e=Id(n,e),e=vT(t,e,1),t=Fc(t,e,1),e=Pi(),t!==null&&(Sp(t,1,e),es(t,e))}function Jn(t,e,n){if(t.tag===3)f_(t,t,n);else for(;e!==null;){if(e.tag===3){f_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zc===null||!zc.has(r))){t=Id(n,t),t=xT(e,t,1),e=Fc(e,t,1),t=Pi(),e!==null&&(Sp(e,1,t),es(e,t));break}}e=e.return}}function eM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pi(),t.pingedLanes|=t.suspendedLanes&n,Dr===t&&(Xr&n)===n&&(yr===4||yr===3&&(Xr&130023424)===Xr&&500>rr()-nE?Wl(t,0):tE|=n),es(t,e)}function FT(t,e){e===0&&(t.mode&1?(e=fg,fg<<=1,!(fg&130023424)&&(fg=4194304)):e=1);var n=Pi();t=Ga(t,e),t!==null&&(Sp(t,e,n),es(t,n))}function tM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),FT(t,n)}function nM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Oe(314))}r!==null&&r.delete(e),FT(t,n)}var zT;zT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xi.current)Ji=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ji=!1,KB(t,e,n);Ji=!!(t.flags&131072)}else Ji=!1,Mn&&e.flags&1048576&&qR(e,rm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;p0(t,e),t=e.pendingProps;var i=Sd(e,bi.current);pd(e,n),i=Yx(null,e,r,t,i,n);var s=Jx();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qi(r)?(s=!0,tm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Hx(e),i.updater=ow,e.stateNode=i,i._reactInternals=e,mv(e,r,t,n),e=bv(null,e,r,!0,s,n)):(e.tag=0,Mn&&s&&Bx(e),Ci(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(p0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=iM(r),t=fo(r,t),i){case 0:e=yv(null,e,r,t,n);break e;case 1:e=n_(null,e,r,t,n);break e;case 11:e=e_(null,e,r,t,n);break e;case 14:e=t_(null,e,r,fo(r.type,t),n);break e}throw Error(Oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fo(r,i),yv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fo(r,i),n_(t,e,r,i,n);case 3:e:{if(kT(e),t===null)throw Error(Oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,XR(t,e),om(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Id(Error(Oe(423)),e),e=r_(t,e,r,n,i);break e}else if(r!==i){i=Id(Error(Oe(424)),e),e=r_(t,e,r,n,i);break e}else for(bs=jc(e.stateNode.containerInfo.firstChild),Ss=e,Mn=!0,mo=null,n=JR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_d(),r===i){e=Ya(t,e,n);break e}Ci(t,e,r,n)}e=e.child}return e;case 5:return QR(e),t===null&&hv(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,cv(r,i)?o=null:s!==null&&cv(r,s)&&(e.flags|=32),_T(t,e),Ci(t,e,o,n),e.child;case 6:return t===null&&hv(e),null;case 13:return AT(t,e,n);case 4:return Wx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=kd(e,null,r,n):Ci(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fo(r,i),e_(t,e,r,i,n);case 7:return Ci(t,e,e.pendingProps,n),e.child;case 8:return Ci(t,e,e.pendingProps.children,n),e.child;case 12:return Ci(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,In(im,r._currentValue),r._currentValue=o,s!==null)if(So(s.value,o)){if(s.children===i.children&&!Xi.current){e=Ya(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Fa(-1,n&-n),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),pv(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),pv(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ci(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,pd(e,n),i=Ys(i),r=r(i),e.flags|=1,Ci(t,e,r,n),e.child;case 14:return r=e.type,i=fo(r,e.pendingProps),i=fo(r.type,i),t_(t,e,r,i,n);case 15:return ET(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fo(r,i),p0(t,e),e.tag=1,Qi(r)?(t=!0,tm(e)):t=!1,pd(e,n),bT(e,r,i),mv(e,r,i,n),bv(null,e,r,!0,t,n);case 19:return IT(t,e,n);case 22:return ST(t,e,n)}throw Error(Oe(156,e.tag))};function KT(t,e){return mR(t,e)}function rM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hs(t,e,n,r){return new rM(t,e,n,r)}function oE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iM(t){if(typeof t=="function")return oE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kx)return 11;if(t===Ax)return 14}return 2}function Hc(t,e){var n=t.alternate;return n===null?(n=Hs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function w0(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")oE(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ju:return ql(n.children,i,s,e);case _x:o=8,i|=8;break;case j1:return t=Hs(12,n,e,i|2),t.elementType=j1,t.lanes=s,t;case F1:return t=Hs(13,n,e,i),t.elementType=F1,t.lanes=s,t;case z1:return t=Hs(19,n,e,i),t.elementType=z1,t.lanes=s,t;case Q5:return lw(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z5:o=10;break e;case X5:o=9;break e;case kx:o=11;break e;case Ax:o=14;break e;case vc:o=16,r=null;break e}throw Error(Oe(130,t==null?t:typeof t,""))}return e=Hs(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ql(t,e,n,r){return t=Hs(7,t,r,e),t.lanes=n,t}function lw(t,e,n,r){return t=Hs(22,t,r,e),t.elementType=Q5,t.lanes=n,t.stateNode={isHidden:!1},t}function Xy(t,e,n){return t=Hs(6,t,null,e),t.lanes=n,t}function Qy(t,e,n){return e=Hs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sM(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ny(0),this.expirationTimes=Ny(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ny(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function aE(t,e,n,r,i,s,o,a,c){return t=new sM(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Hs(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hx(s),t}function oM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function HT(t){if(!t)return tl;t=t._reactInternals;e:{if(mu(t)!==t||t.tag!==1)throw Error(Oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Oe(171))}if(t.tag===1){var n=t.type;if(Qi(n))return HR(t,n,e)}return e}function WT(t,e,n,r,i,s,o,a,c){return t=aE(n,r,!0,t,i,s,o,a,c),t.context=HT(null),n=t.current,r=Pi(),i=Kc(n),s=Fa(r,i),s.callback=e??null,Fc(n,s,i),t.current.lanes=i,Sp(t,i,r),es(t,r),t}function uw(t,e,n,r){var i=e.current,s=Pi(),o=Kc(i);return n=HT(n),e.context===null?e.context=n:e.pendingContext=n,e=Fa(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fc(i,e,o),t!==null&&(xo(t,i,o,s),d0(t,i,o)),o}function pm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function h_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cE(t,e){h_(t,e),(t=t.alternate)&&h_(t,e)}function aM(){return null}var qT=typeof reportError=="function"?reportError:function(t){console.error(t)};function lE(t){this._internalRoot=t}dw.prototype.render=lE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Oe(409));uw(t,e,null,null)};dw.prototype.unmount=lE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;iu(function(){uw(null,t,null,null)}),e[Va]=null}};function dw(t){this._internalRoot=t}dw.prototype.unstable_scheduleHydration=function(t){if(t){var e=SR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_c.length&&e!==0&&e<_c[n].priority;n++);_c.splice(n,0,t),n===0&&kR(t)}};function uE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function p_(){}function cM(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=pm(o);s.call(l)}}var o=WT(e,r,t,0,null,!1,!1,"",p_);return t._reactRootContainer=o,t[Va]=o.current,jh(t.nodeType===8?t.parentNode:t),iu(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=pm(c);a.call(l)}}var c=aE(t,0,!1,null,null,!1,!1,"",p_);return t._reactRootContainer=c,t[Va]=c.current,jh(t.nodeType===8?t.parentNode:t),iu(function(){uw(e,c,n,r)}),c}function hw(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=pm(o);a.call(c)}}uw(e,o,t,i)}else o=cM(n,e,t,i,r);return pm(o)}xR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nh(e.pendingLanes);n!==0&&(Rx(e,n|1),es(e,rr()),!(en&6)&&(Cd=rr()+500,ul()))}break;case 13:iu(function(){var r=Ga(t,1);if(r!==null){var i=Pi();xo(r,t,1,i)}}),cE(t,1)}};Tx=function(t){if(t.tag===13){var e=Ga(t,134217728);if(e!==null){var n=Pi();xo(e,t,134217728,n)}cE(t,134217728)}};ER=function(t){if(t.tag===13){var e=Kc(t),n=Ga(t,e);if(n!==null){var r=Pi();xo(n,t,e,r)}cE(t,e)}};SR=function(){return hn};_R=function(t,e){var n=hn;try{return hn=t,e()}finally{hn=n}};X1=function(t,e,n){switch(e){case"input":if(W1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=rw(r);if(!i)throw Error(Oe(90));tR(r),W1(r,i)}}}break;case"textarea":rR(t,n);break;case"select":e=n.value,e!=null&&ud(t,!!n.multiple,e,!1)}};uR=rE;dR=iu;var lM={usingClientEntryPoint:!1,Events:[kp,ed,rw,cR,lR,rE]},Tf={findFiberByHostInstance:$l,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uM={bundleType:Tf.bundleType,version:Tf.version,rendererPackageName:Tf.rendererPackageName,rendererConfig:Tf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pR(t),t===null?null:t.stateNode},findFiberByHostInstance:Tf.findFiberByHostInstance||aM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sg.isDisabled&&Sg.supportsFiber)try{Qm=Sg.inject(uM),Qo=Sg}catch{}}ks.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lM;ks.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uE(e))throw Error(Oe(200));return oM(t,e,null,n)};ks.createRoot=function(t,e){if(!uE(t))throw Error(Oe(299));var n=!1,r="",i=qT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=aE(t,1,!1,null,null,n,!1,r,i),t[Va]=e.current,jh(t.nodeType===8?t.parentNode:t),new lE(e)};ks.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Oe(188)):(t=Object.keys(t).join(","),Error(Oe(268,t)));return t=pR(e),t=t===null?null:t.stateNode,t};ks.flushSync=function(t){return iu(t)};ks.hydrate=function(t,e,n){if(!fw(e))throw Error(Oe(200));return hw(null,t,e,!0,n)};ks.hydrateRoot=function(t,e,n){if(!uE(t))throw Error(Oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=qT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=WT(e,null,t,1,n??null,i,!1,s,o),t[Va]=e.current,jh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new dw(e)};ks.render=function(t,e,n){if(!fw(e))throw Error(Oe(200));return hw(null,t,e,!1,n)};ks.unmountComponentAtNode=function(t){if(!fw(t))throw Error(Oe(40));return t._reactRootContainer?(iu(function(){hw(null,null,t,!1,function(){t._reactRootContainer=null,t[Va]=null})}),!0):!1};ks.unstable_batchedUpdates=rE;ks.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fw(n))throw Error(Oe(200));if(t==null||t._reactInternals===void 0)throw Error(Oe(38));return hw(t,e,n,!1,r)};ks.version="18.3.1-next-f1338f8080-20240426";function VT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VT)}catch(t){console.error(t)}}VT(),V5.exports=ks;var dM=V5.exports,GT,g_=dM;GT=M1.createRoot=g_.createRoot,M1.hydrateRoot=g_.hydrateRoot;var dE={};Object.defineProperty(dE,"__esModule",{value:!0});dE.parse=yM;dE.serialize=bM;const fM=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,hM=/^[\u0021-\u003A\u003C-\u007E]*$/,pM=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,gM=/^[\u0020-\u003A\u003D-\u007E]*$/,mM=Object.prototype.toString,wM=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function yM(t,e){const n=new wM,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||vM;let s=0;do{const o=t.indexOf("=",s);if(o===-1)break;const a=t.indexOf(";",s),c=a===-1?r:a;if(o>c){s=t.lastIndexOf(";",o-1)+1;continue}const l=m_(t,s,o),u=w_(t,o,l),d=t.slice(l,u);if(n[d]===void 0){let f=m_(t,o+1,c),h=w_(t,c,f);const p=i(t.slice(f,h));n[d]=p}s=c+1}while(s<r);return n}function m_(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function w_(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function bM(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!fM.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!hM.test(i))throw new TypeError(`argument val is invalid: ${e}`);let s=t+"="+i;if(!n)return s;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!pM.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!gM.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!xM(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.partitioned&&(s+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return s}function vM(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function xM(t){return mM.call(t)==="[object Date]"}var y_="popstate";function EM(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Ov("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Yh(i)}return _M(e,n,null,t)}function Kn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ia(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SM(){return Math.random().toString(36).substring(2,10)}function b_(t,e){return{usr:t.state,key:t.key,idx:e}}function Ov(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Xd(e):e,state:n,key:e&&e.key||r||SM()}}function Yh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Xd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function _M(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",c=null,l=u();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:y})}function f(w,y){a="PUSH";let b=Ov(g.location,w,y);l=u()+1;let m=b_(b,l),x=g.createHref(b);try{o.pushState(m,"",x)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(x)}s&&c&&c({action:a,location:g.location,delta:1})}function h(w,y){a="REPLACE";let b=Ov(g.location,w,y);l=u();let m=b_(b,l),x=g.createHref(b);o.replaceState(m,"",x),s&&c&&c({action:a,location:g.location,delta:0})}function p(w){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof w=="string"?w:Yh(w);return b=b.replace(/ $/,"%20"),Kn(y,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,y)}let g={get action(){return a},get location(){return t(i,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(y_,d),c=w,()=>{i.removeEventListener(y_,d),c=null}},createHref(w){return e(i,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:h,go(w){return o.go(w)}};return g}function YT(t,e,n="/"){return kM(t,e,n,!1)}function kM(t,e,n,r){let i=typeof e=="string"?Xd(e):e,s=Ja(i.pathname||"/",n);if(s==null)return null;let o=JT(t);AM(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=BM(s);a=DM(o[c],l,r)}return a}function JT(t,e=[],n=[],r=""){let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Kn(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let l=za([r,c.relativePath]),u=n.concat(c);s.children&&s.children.length>0&&(Kn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),JT(s.children,e,u,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:NM(l,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of ZT(s.path))i(s,o,c)}),e}function ZT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ZT(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function AM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:LM(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var IM=/^:[\w-]+$/,CM=3,RM=2,TM=1,OM=10,PM=-2,v_=t=>t==="*";function NM(t,e){let n=t.split("/"),r=n.length;return n.some(v_)&&(r+=PM),e&&(r+=RM),n.filter(i=>!v_(i)).reduce((i,s)=>i+(IM.test(s)?CM:s===""?TM:OM),r)}function LM(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function DM(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=gm({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=gm({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:za([s,d.pathname]),pathnameBase:FM(za([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=za([s,d.pathnameBase]))}return o}function gm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=$M(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,{paramName:u,isOptional:d},f)=>{if(u==="*"){let p=a[f]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[f];return d&&!h?l[u]=void 0:l[u]=(h||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:t}}function $M(t,e=!1,n=!0){ia(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function BM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ia(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ja(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function MM(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Xd(t):t;return{pathname:n?n.startsWith("/")?n:UM(n,e):e,search:zM(r),hash:KM(i)}}function UM(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function eb(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jM(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function XT(t){let e=jM(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function QT(t,e,n,r=!1){let i;typeof t=="string"?i=Xd(t):(i={...t},Kn(!i.pathname||!i.pathname.includes("?"),eb("?","pathname","search",i)),Kn(!i.pathname||!i.pathname.includes("#"),eb("#","pathname","hash",i)),Kn(!i.search||!i.search.includes("#"),eb("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let c=MM(i,a),l=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}var za=t=>t.join("/").replace(/\/\/+/g,"/"),FM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,KM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var eO=["POST","PUT","PATCH","DELETE"];new Set(eO);var WM=["GET",...eO];new Set(WM);var Qd=ne.createContext(null);Qd.displayName="DataRouter";var pw=ne.createContext(null);pw.displayName="DataRouterState";var tO=ne.createContext({isTransitioning:!1});tO.displayName="ViewTransition";var qM=ne.createContext(new Map);qM.displayName="Fetchers";var VM=ne.createContext(null);VM.displayName="Await";var la=ne.createContext(null);la.displayName="Navigation";var Ip=ne.createContext(null);Ip.displayName="Location";var ec=ne.createContext({outlet:null,matches:[],isDataRoute:!1});ec.displayName="Route";var fE=ne.createContext(null);fE.displayName="RouteError";function GM(t,{relative:e}={}){Kn(Cp(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=ne.useContext(la),{hash:i,pathname:s,search:o}=Rp(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:za([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Cp(){return ne.useContext(Ip)!=null}function wu(){return Kn(Cp(),"useLocation() may be used only in the context of a <Router> component."),ne.useContext(Ip).location}var nO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rO(t){ne.useContext(la).static||ne.useLayoutEffect(t)}function iO(){let{isDataRoute:t}=ne.useContext(ec);return t?aU():YM()}function YM(){Kn(Cp(),"useNavigate() may be used only in the context of a <Router> component.");let t=ne.useContext(Qd),{basename:e,navigator:n}=ne.useContext(la),{matches:r}=ne.useContext(ec),{pathname:i}=wu(),s=JSON.stringify(XT(r)),o=ne.useRef(!1);return rO(()=>{o.current=!0}),ne.useCallback((c,l={})=>{if(ia(o.current,nO),!o.current)return;if(typeof c=="number"){n.go(c);return}let u=QT(c,JSON.parse(s),i,l.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:za([e,u.pathname])),(l.replace?n.replace:n.push)(u,l.state,l)},[e,n,s,i,t])}ne.createContext(null);function Rp(t,{relative:e}={}){let{matches:n}=ne.useContext(ec),{pathname:r}=wu(),i=JSON.stringify(XT(n));return ne.useMemo(()=>QT(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function JM(t,e){return sO(t,e)}function sO(t,e,n,r){var b;Kn(Cp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=ne.useContext(la),{matches:o}=ne.useContext(ec),a=o[o.length-1],c=a?a.params:{},l=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let m=d&&d.path||"";oO(l,!d||m.endsWith("*")||m.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${m}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${m}"> to <Route path="${m==="/"?"*":`${m}/*`}">.`)}let f=wu(),h;if(e){let m=typeof e=="string"?Xd(e):e;Kn(u==="/"||((b=m.pathname)==null?void 0:b.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${m.pathname}" was given in the \`location\` prop.`),h=m}else h=f;let p=h.pathname||"/",g=p;if(u!=="/"){let m=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(m.length).join("/")}let w=!s&&n&&n.matches&&n.matches.length>0?n.matches:YT(t,{pathname:g});ia(d||w!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),ia(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=tU(w&&w.map(m=>Object.assign({},m,{params:Object.assign({},c,m.params),pathname:za([u,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?u:za([u,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),o,n,r);return e&&y?ne.createElement(Ip.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},y):y}function ZM(){let t=oU(),e=HM(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=ne.createElement(ne.Fragment,null,ne.createElement("p",null," Hey developer "),ne.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ne.createElement("code",{style:s},"ErrorBoundary")," or"," ",ne.createElement("code",{style:s},"errorElement")," prop on your route.")),ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},e),n?ne.createElement("pre",{style:i},n):null,o)}var XM=ne.createElement(ZM,null),QM=class extends ne.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?ne.createElement(ec.Provider,{value:this.props.routeContext},ne.createElement(fE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function eU({routeContext:t,match:e,children:n}){let r=ne.useContext(Qd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ne.createElement(ec.Provider,{value:t},n)}function tU(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let c=i.findIndex(l=>l.route.id&&(s==null?void 0:s[l.route.id])!==void 0);Kn(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,a=-1;if(n)for(let c=0;c<i.length;c++){let l=i[c];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(a=c),l.route.id){let{loaderData:u,errors:d}=n,f=l.route.loader&&!u.hasOwnProperty(l.route.id)&&(!d||d[l.route.id]===void 0);if(l.route.lazy||f){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((c,l,u)=>{let d,f=!1,h=null,p=null;n&&(d=s&&l.route.id?s[l.route.id]:void 0,h=l.route.errorElement||XM,o&&(a<0&&u===0?(oO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,p=null):a===u&&(f=!0,p=l.route.hydrateFallbackElement||null)));let g=e.concat(i.slice(0,u+1)),w=()=>{let y;return d?y=h:f?y=p:l.route.Component?y=ne.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=c,ne.createElement(eU,{match:l,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:y})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?ne.createElement(QM,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:w(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):w()},null)}function hE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nU(t){let e=ne.useContext(Qd);return Kn(e,hE(t)),e}function rU(t){let e=ne.useContext(pw);return Kn(e,hE(t)),e}function iU(t){let e=ne.useContext(ec);return Kn(e,hE(t)),e}function pE(t){let e=iU(t),n=e.matches[e.matches.length-1];return Kn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function sU(){return pE("useRouteId")}function oU(){var r;let t=ne.useContext(fE),e=rU("useRouteError"),n=pE("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function aU(){let{router:t}=nU("useNavigate"),e=pE("useNavigate"),n=ne.useRef(!1);return rO(()=>{n.current=!0}),ne.useCallback(async(i,s={})=>{ia(n.current,nO),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var x_={};function oO(t,e,n){!e&&!x_[t]&&(x_[t]=!0,ia(!1,n))}ne.memo(cU);function cU({routes:t,future:e,state:n}){return sO(t,void 0,n,e)}function Pv(t){Kn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lU({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Kn(!Cp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=ne.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Xd(n));let{pathname:c="/",search:l="",hash:u="",state:d=null,key:f="default"}=n,h=ne.useMemo(()=>{let p=Ja(c,o);return p==null?null:{location:{pathname:p,search:l,hash:u,state:d,key:f},navigationType:r}},[o,c,l,u,d,f,r]);return ia(h!=null,`<Router basename="${o}"> is not able to match the URL "${c}${l}${u}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:ne.createElement(la.Provider,{value:a},ne.createElement(Ip.Provider,{children:e,value:h}))}function uU({children:t,location:e}){return JM(Nv(t),e)}function Nv(t,e=[]){let n=[];return ne.Children.forEach(t,(r,i)=>{if(!ne.isValidElement(r))return;let s=[...e,i];if(r.type===ne.Fragment){n.push.apply(n,Nv(r.props.children,s));return}Kn(r.type===Pv,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Nv(r.props.children,s)),n.push(o)}),n}var y0="get",b0="application/x-www-form-urlencoded";function gw(t){return t!=null&&typeof t.tagName=="string"}function dU(t){return gw(t)&&t.tagName.toLowerCase()==="button"}function fU(t){return gw(t)&&t.tagName.toLowerCase()==="form"}function hU(t){return gw(t)&&t.tagName.toLowerCase()==="input"}function pU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gU(t,e){return t.button===0&&(!e||e==="_self")&&!pU(t)}var _g=null;function mU(){if(_g===null)try{new FormData(document.createElement("form"),0),_g=!1}catch{_g=!0}return _g}var wU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tb(t){return t!=null&&!wU.has(t)?(ia(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${b0}"`),null):t}function yU(t,e){let n,r,i,s,o;if(fU(t)){let a=t.getAttribute("action");r=a?Ja(a,e):null,n=t.getAttribute("method")||y0,i=tb(t.getAttribute("enctype"))||b0,s=new FormData(t)}else if(dU(t)||hU(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||a.getAttribute("action");if(r=c?Ja(c,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||y0,i=tb(t.getAttribute("formenctype"))||tb(a.getAttribute("enctype"))||b0,s=new FormData(a,t),!mU()){let{name:l,type:u,value:d}=t;if(u==="image"){let f=l?`${l}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else l&&s.append(l,d)}}else{if(gw(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=y0,r=null,i=b0,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function gE(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function bU(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vU(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function xU(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await bU(s,n);return o.links?o.links():[]}return[]}));return kU(r.flat(1).filter(vU).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function E_(t,e,n,r,i,s){let o=(c,l)=>n[l]?c.route.id!==n[l].route.id:!0,a=(c,l)=>{var u;return n[l].pathname!==c.pathname||((u=n[l].route.path)==null?void 0:u.endsWith("*"))&&n[l].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,l)=>o(c,l)||a(c,l)):s==="data"?e.filter((c,l)=>{var d;let u=r.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,l)||a(c,l))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function EU(t,e,{includeHydrateFallback:n}={}){return SU(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function SU(t){return[...new Set(t)]}function _U(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function kU(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(_U(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}var AU=new Set([100,101,204,205]);function IU(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Ja(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function aO(){let t=ne.useContext(Qd);return gE(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function CU(){let t=ne.useContext(pw);return gE(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var mE=ne.createContext(void 0);mE.displayName="FrameworkContext";function cO(){let t=ne.useContext(mE);return gE(t,"You must render this element inside a <HydratedRouter> element"),t}function RU(t,e){let n=ne.useContext(mE),[r,i]=ne.useState(!1),[s,o]=ne.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=e,f=ne.useRef(null);ne.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let g=y=>{y.forEach(b=>{o(b.isIntersecting)})},w=new IntersectionObserver(g,{threshold:.5});return f.current&&w.observe(f.current),()=>{w.disconnect()}}},[t]),ne.useEffect(()=>{if(r){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[r]);let h=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:Of(a,h),onBlur:Of(c,p),onMouseEnter:Of(l,h),onMouseLeave:Of(u,p),onTouchStart:Of(d,h)}]:[!1,f,{}]}function Of(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function TU({page:t,...e}){let{router:n}=aO(),r=ne.useMemo(()=>YT(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?ne.createElement(PU,{page:t,matches:r,...e}):null}function OU(t){let{manifest:e,routeModules:n}=cO(),[r,i]=ne.useState([]);return ne.useEffect(()=>{let s=!1;return xU(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function PU({page:t,matches:e,...n}){let r=wu(),{manifest:i,routeModules:s}=cO(),{basename:o}=aO(),{loaderData:a,matches:c}=CU(),l=ne.useMemo(()=>E_(t,e,c,i,r,"data"),[t,e,c,i,r]),u=ne.useMemo(()=>E_(t,e,c,i,r,"assets"),[t,e,c,i,r]),d=ne.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,g=!1;if(e.forEach(y=>{var m;let b=i.routes[y.route.id];!b||!b.hasLoader||(!l.some(x=>x.route.id===y.route.id)&&y.route.id in a&&((m=s[y.route.id])!=null&&m.shouldRevalidate)||b.hasClientLoader?g=!0:p.add(y.route.id))}),p.size===0)return[];let w=IU(t,o);return g&&p.size>0&&w.searchParams.set("_routes",e.filter(y=>p.has(y.route.id)).map(y=>y.route.id).join(",")),[w.pathname+w.search]},[o,a,r,i,l,e,t,s]),f=ne.useMemo(()=>EU(u,i),[u,i]),h=OU(u);return ne.createElement(ne.Fragment,null,d.map(p=>ne.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),f.map(p=>ne.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),h.map(({key:p,link:g})=>ne.createElement("link",{key:p,...g})))}function NU(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var lO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lO&&(window.__reactRouterVersion="7.5.2")}catch{}function LU({basename:t,children:e,window:n}){let r=ne.useRef();r.current==null&&(r.current=EM({window:n,v5Compat:!0}));let i=r.current,[s,o]=ne.useState({action:i.action,location:i.location}),a=ne.useCallback(c=>{ne.startTransition(()=>o(c))},[o]);return ne.useLayoutEffect(()=>i.listen(a),[i,a]),ne.createElement(lU,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var uO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wE=ne.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:c,to:l,preventScrollReset:u,viewTransition:d,...f},h){let{basename:p}=ne.useContext(la),g=typeof l=="string"&&uO.test(l),w,y=!1;if(typeof l=="string"&&g&&(w=l,lO))try{let C=new URL(window.location.href),F=l.startsWith("//")?new URL(C.protocol+l):new URL(l),N=Ja(F.pathname,p);F.origin===C.origin&&N!=null?l=N+F.search+F.hash:y=!0}catch{ia(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=GM(l,{relative:i}),[m,x,E]=RU(r,f),A=MU(l,{replace:o,state:a,target:c,preventScrollReset:u,relative:i,viewTransition:d});function k(C){e&&e(C),C.defaultPrevented||A(C)}let S=ne.createElement("a",{...f,...E,href:w||b,onClick:y||s?e:k,ref:NU(h,x),target:c,"data-discover":!g&&n==="render"?"true":void 0});return m&&!g?ne.createElement(ne.Fragment,null,S,ne.createElement(TU,{page:b})):S});wE.displayName="Link";var DU=ne.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:c,...l},u){let d=Rp(o,{relative:l.relative}),f=wu(),h=ne.useContext(pw),{navigator:p,basename:g}=ne.useContext(la),w=h!=null&&KU(d)&&a===!0,y=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,b=f.pathname,m=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(b=b.toLowerCase(),m=m?m.toLowerCase():null,y=y.toLowerCase()),m&&g&&(m=Ja(m,g)||m);const x=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let E=b===y||!i&&b.startsWith(y)&&b.charAt(x)==="/",A=m!=null&&(m===y||!i&&m.startsWith(y)&&m.charAt(y.length)==="/"),k={isActive:E,isPending:A,isTransitioning:w},S=E?e:void 0,C;typeof r=="function"?C=r(k):C=[r,E?"active":null,A?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let F=typeof s=="function"?s(k):s;return ne.createElement(wE,{...l,"aria-current":S,className:C,ref:u,style:F,to:o,viewTransition:a},typeof c=="function"?c(k):c)});DU.displayName="NavLink";var $U=ne.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=y0,action:a,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,...f},h)=>{let p=FU(),g=zU(a,{relative:l}),w=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&uO.test(a),b=m=>{if(c&&c(m),m.defaultPrevented)return;m.preventDefault();let x=m.nativeEvent.submitter,E=(x==null?void 0:x.getAttribute("formmethod"))||o;p(x||m.currentTarget,{fetcherKey:e,method:E,navigate:n,replace:i,state:s,relative:l,preventScrollReset:u,viewTransition:d})};return ne.createElement("form",{ref:h,method:w,action:g,onSubmit:r?c:b,...f,"data-discover":!y&&t==="render"?"true":void 0})});$U.displayName="Form";function BU(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dO(t){let e=ne.useContext(Qd);return Kn(e,BU(t)),e}function MU(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=iO(),c=wu(),l=Rp(t,{relative:s});return ne.useCallback(u=>{if(gU(u,e)){u.preventDefault();let d=n!==void 0?n:Yh(c)===Yh(l);a(t,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[c,a,l,n,r,e,t,i,s,o])}var UU=0,jU=()=>`__${String(++UU)}__`;function FU(){let{router:t}=dO("useSubmit"),{basename:e}=ne.useContext(la),n=sU();return ne.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:c,body:l}=yU(r,e);if(i.navigate===!1){let u=i.fetcherKey||jU();await t.fetch(u,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function zU(t,{relative:e}={}){let{basename:n}=ne.useContext(la),r=ne.useContext(ec);Kn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Rp(t||".",{relative:e})},o=wu();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),c=a.getAll("index");if(c.some(u=>u==="")){a.delete("index"),c.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();s.search=u?`?${u}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:za([n,s.pathname])),Yh(s)}function KU(t,e={}){let n=ne.useContext(tO);Kn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=dO("useViewTransitionState"),i=Rp(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ja(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ja(n.nextLocation.pathname,r)||n.nextLocation.pathname;return gm(i.pathname,o)!=null||gm(i.pathname,s)!=null}new TextEncoder;[...AU];function Jh(t){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(t)}function HU(t,e){if(Jh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WU(t){var e=HU(t,"string");return Jh(e)=="symbol"?e:e+""}function me(t,e,n){return(e=WU(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qU(t,e){var n=Object.setPrototypeOf;n?n(t,e):t.__proto__=e}function VU(t,e){e===void 0&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}var GU=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])},t(n,r)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fO=function(t){GU(e,t);function e(n,r){var i=this.constructor,s=t.call(this,n,r)||this;return Object.defineProperty(s,"name",{value:i.name,enumerable:!1,configurable:!0}),qU(s,i.prototype),VU(s),s}return e}(Error);function YU(t){const e=t.findIndex(s=>s instanceof Error),n=t.findIndex(s=>typeof s=="string"),r=t.findIndex(s=>s&&typeof s=="object"&&"status"in s&&"type"in s);let i;if(r!==-1){const s=t[r];i=new Error(`${s.status} ${s.type.toString()} ${s.statusText}`)}else e!==-1?i=t.splice(e,1)[0]:n!==-1?i=new Error(t.splice(n,1)[0]):i=new Error("Unknown error");return[i,t]}class Wc extends fO{constructor(e,n,r){super(n),me(this,"code",void 0),me(this,"message",void 0),me(this,"cause",void 0),this.code=e,this.message=n||"",this.cause=r,Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:YU([this.cause])}}toString(){return JSON.stringify(this.toJSON())}}class Ue extends Wc{constructor(e,n,r){super(e,n,r),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(e,n="",r){return new Ue(e,`${Ue.messages[e]}, ${n}`,r)}static notFound(e="",n){return Ue.fromCode(5001,e,n)}static notInstalled(e="",n){return Ue.fromCode(5002,e,n)}static notReady(e="",n){return Ue.fromCode(5003,e,n)}static windowBlocked(e="",n){return Ue.fromCode(5004,e,n)}static windowClosed(e="",n){return Ue.fromCode(5005,e,n)}static incompatibleChainNameSpace(e="",n){return Ue.fromCode(5006,e,n)}static duplicateAdapterError(e="",n){return Ue.fromCode(5007,e,n)}static invalidProviderConfigError(e="",n){return Ue.fromCode(5008,e,n)}static providerNotReadyError(e="",n){return Ue.fromCode(5009,e,n)}static rpcConnectionError(e="",n){return Ue.fromCode(5010,e,n)}static invalidParams(e="",n){return Ue.fromCode(5011,e,n)}static invalidNetwork(e="",n){return Ue.fromCode(5013,e,n)}}me(Ue,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class ut extends Wc{constructor(e,n,r){super(e,n,r),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(e,n="",r){return new ut(e,`${ut.messages[e]}. ${n}`,r)}static connectionError(e="",n){return ut.fromCode(5111,e,n)}static disconnectionError(e="",n){return ut.fromCode(5112,e,n)}static notConnectedError(e="",n){return ut.fromCode(5113,e,n)}static popupClosed(e="",n){return ut.fromCode(5114,e,n)}static mfaEnabled(e="",n){return ut.fromCode(5115,e,n)}static chainConfigNotAdded(e="",n){return ut.fromCode(5116,e,n)}static unsupportedOperation(e="",n){return ut.fromCode(5117,e,n)}static coreKitKeyNotFound(e="",n){return ut.fromCode(5118,e,n)}static userNotLoggedIn(e="",n){return ut.fromCode(5119,e,n)}}me(ut,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user",5115:"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa",5116:"Chain config has not been added. Please add the chain config before calling switchChain",5117:"Unsupported operation",5118:"useCoreKitKey flag is enabled but coreKitKey is not available",5119:"User not logged in."});class Ks extends Wc{constructor(e,n,r){super(e,n,r),Object.defineProperty(this,"name",{value:"WalletOperationsError"})}static fromCode(e,n="",r){return new Ks(e,`${Ks.messages[e]}, ${n}`,r)}static chainIDNotAllowed(e="",n){return Ks.fromCode(5201,e,n)}static operationNotAllowed(e="",n){return Ks.fromCode(5202,e,n)}static chainNamespaceNotAllowed(e="",n){return Ks.fromCode(5203,e,n)}}me(Ks,"messages",{5e3:"Custom",5201:"Provided chainId is not allowed",5202:"This operation is not allowed"});class Ra extends Wc{constructor(e,n,r){super(e,n,r),Object.defineProperty(this,"name",{value:"WalletProviderError"})}static fromCode(e,n="",r){return new Ks(e,`${Ra.messages[e]}, ${n}`,r)}static invalidRequestArgs(e="",n){return Ks.fromCode(5301,e,n)}static invalidRequestMethod(e="",n){return Ks.fromCode(5302,e,n)}static invalidRequestParams(e="",n){return Ks.fromCode(5303,e,n)}}me(Ra,"messages",{5e3:"Custom",5301:"Expected a single, non-array, object argument.",5302:"'args.method' must be a non-empty string.",5303:"'args.params' must be an object or array if provided."});const wt={EIP155:"eip155",SOLANA:"solana",CASPER:"casper",XRPL:"xrpl",OTHER:"other"},Zh={SOLANA:"solana",MULTICHAIN:"multichain"},JU="https://api.web3auth.io/infura-service/v1",ZU=t=>{if(t===wt.EIP155)return 1;if(t===wt.SOLANA)return 1;if(t===wt.XRPL)return 1;throw Ue.invalidParams(`Chain namespace ${t} is not supported`)},XU=(t,e="")=>{const n=wt.EIP155,r=`${JU}/${t}/${e}`;return t===1?{logo:"https://images.toruswallet.io/eth.svg",chainNamespace:n,chainId:"0x1",rpcTarget:r,displayName:"Ethereum Mainnet",blockExplorerUrl:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:t===10?{chainNamespace:wt.EIP155,decimals:18,blockExplorerUrl:"https://optimistic.etherscan.io",chainId:"0xa",displayName:"Optimism",logo:"optimism.svg",rpcTarget:r,ticker:"ETH",tickerName:"Ethereum"}:t===8453?{chainNamespace:wt.EIP155,decimals:18,blockExplorerUrl:"https://basescan.org",chainId:"0x2105",displayName:"Base",logo:"base.svg",rpcTarget:r,ticker:"ETH",tickerName:"Ethereum"}:t===42161?{chainNamespace:wt.EIP155,decimals:18,blockExplorerUrl:"https://arbiscan.io",chainId:"0xa4b1",displayName:"Arbitrum One",logo:"arbitrum.svg",rpcTarget:r,ticker:"ETH",tickerName:"Ethereum"}:t===59144?{chainNamespace:wt.EIP155,decimals:18,blockExplorerUrl:"https://lineascan.build",chainId:"0xe708",logo:"https://images.toruswallet.io/eth.svg",rpcTarget:r,ticker:"ETH",tickerName:"Ethereum"}:t===11155111?{logo:"https://images.toruswallet.io/eth.svg",chainNamespace:n,chainId:"0xaa36a7",rpcTarget:r,displayName:"Sepolia Testnet",blockExplorerUrl:"https://sepolia.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:t===137?{logo:"https://images.toruswallet.io/polygon.svg",chainNamespace:n,chainId:"0x89",rpcTarget:r,displayName:"Polygon Mainnet",blockExplorerUrl:"https://polygonscan.com",ticker:"POL",tickerName:"Polygon Ecosystem Token"}:t===80002?{logo:"https://images.toruswallet.io/polygon.svg",chainNamespace:n,chainId:"0x13882",rpcTarget:r,displayName:"Polygon Amoy Testnet",blockExplorerUrl:"https://www.oklink.com/amoy",ticker:"POL",tickerName:"Polygon Ecosystem Token",decimals:18}:t===56?{logo:"https://images.toruswallet.io/bnb.png",chainNamespace:n,chainId:"0x38",rpcTarget:r,displayName:"Binance SmartChain Mainnet",blockExplorerUrl:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:t===97?{logo:"https://images.toruswallet.io/bnb.png",chainNamespace:n,chainId:"0x61",rpcTarget:r,displayName:"Binance SmartChain Testnet",blockExplorerUrl:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:t===25?{logo:"https://images.toruswallet.io/cro.svg",chainNamespace:n,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorerUrl:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:t===338?{logo:"https://images.toruswallet.io/cro.svg",chainNamespace:n,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorerUrl:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos",decimals:18}:t===8217?{logo:"https://images.toruswallet.io/klay.svg",chainNamespace:n,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorerUrl:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn",decimals:18}:t===1946?{chainNamespace:wt.EIP155,chainId:"0x79a",rpcTarget:"https://rpc.minato.soneium.org",displayName:"Soneium Minato Testnet",blockExplorerUrl:"https://explorer-testnet.soneium.org",ticker:"ETH",tickerName:"ETH",logo:"https://iili.io/2i5xce2.png"}:t===1868?{chainNamespace:wt.EIP155,chainId:"0x74c",rpcTarget:"https://rpc.soneium.org",displayName:"Soneium Mainnet",blockExplorerUrl:"https://soneium.blockscout.com",ticker:"ETH",tickerName:"ETH",logo:"https://iili.io/2i5xce2.png"}:null},yE=t=>{const e=wt.SOLANA;return t===101||t===1?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:e,chainId:"0x65",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorerUrl:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana",decimals:9}:t===102||t===2?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:e,chainId:"0x66",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorerUrl:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana",decimals:9}:t===103||t===3?{logo:"https://images.toruswallet.io/sol.svg",chainNamespace:e,chainId:"0x67",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorerUrl:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana",decimals:9}:null},QU=t=>{const e=wt.XRPL;return t===1?{chainNamespace:e,decimals:15,chainId:"0x1",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://ripple-node.tor.us",wsTarget:"wss://s2.ripple.com",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl mainnet",blockExplorerUrl:"https://livenet.xrpl.org"}:t===2?{chainNamespace:e,decimals:15,chainId:"0x2",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://testnet-ripple-node.tor.us",wsTarget:"wss://s.altnet.rippletest.net",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl testnet",blockExplorerUrl:"https://testnet.xrpl.org",isTestnet:!0}:t===3?{chainNamespace:e,decimals:15,chainId:"0x3",logo:"https://images.toruswallet.io/XRP.svg",rpcTarget:"https://devnet-ripple-node.tor.us",wsTarget:"wss://s.devnet.rippletest.net/",ticker:"XRP",tickerName:"XRPL",displayName:"xrpl devnet",blockExplorerUrl:"https://devnet.xrpl.org",isTestnet:!0}:null},nl=(t,e,n)=>{if(t===wt.OTHER)return null;const r=e?typeof e=="number"?e:parseInt(e,16):ZU(t);return t===wt.EIP155?XU(r,n):t===wt.SOLANA?yE(r):t===wt.XRPL?QU(r):null};var hO={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(Li,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function a(g,w){var y=g[w];if(typeof y.bind=="function")return y.bind(g);try{return Function.prototype.bind.call(y,g)}catch{return function(){return Function.prototype.apply.apply(y,[g,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(g){return g==="debug"&&(g="log"),typeof console===n?!1:g==="trace"&&r?c:console[g]!==void 0?a(console,g):console.log!==void 0?a(console,"log"):e}function u(){for(var g=this.getLevel(),w=0;w<i.length;w++){var y=i[w];this[y]=w<g?e:this.methodFactory(y,g,this.name)}if(this.log=this.debug,typeof console===n&&g<this.levels.SILENT)return"No console available for logging"}function d(g){return function(){typeof console!==n&&(u.call(this),this[g].apply(this,arguments))}}function f(g,w,y){return l(g)||d.apply(this,arguments)}function h(g,w){var y=this,b,m,x,E="loglevel";typeof g=="string"?E+=":"+g:typeof g=="symbol"&&(E=void 0);function A(N){var L=(i[N]||"silent").toUpperCase();if(!(typeof window===n||!E)){try{window.localStorage[E]=L;return}catch{}try{window.document.cookie=encodeURIComponent(E)+"="+L+";"}catch{}}}function k(){var N;if(!(typeof window===n||!E)){try{N=window.localStorage[E]}catch{}if(typeof N===n)try{var L=window.document.cookie,j=encodeURIComponent(E),B=L.indexOf(j+"=");B!==-1&&(N=/^([^;]+)/.exec(L.slice(B+j.length+1))[1])}catch{}return y.levels[N]===void 0&&(N=void 0),N}}function S(){if(!(typeof window===n||!E)){try{window.localStorage.removeItem(E)}catch{}try{window.document.cookie=encodeURIComponent(E)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function C(N){var L=N;if(typeof L=="string"&&y.levels[L.toUpperCase()]!==void 0&&(L=y.levels[L.toUpperCase()]),typeof L=="number"&&L>=0&&L<=y.levels.SILENT)return L;throw new TypeError("log.setLevel() called with invalid level: "+N)}y.name=g,y.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},y.methodFactory=w||f,y.getLevel=function(){return x??m??b},y.setLevel=function(N,L){return x=C(N),L!==!1&&A(x),u.call(y)},y.setDefaultLevel=function(N){m=C(N),k()||y.setLevel(N,!1)},y.resetLevel=function(){x=null,S(),u.call(y)},y.enableAll=function(N){y.setLevel(y.levels.TRACE,N)},y.disableAll=function(N){y.setLevel(y.levels.SILENT,N)},y.rebuild=function(){if(o!==y&&(b=C(o.getLevel())),u.call(y),o===y)for(var N in s)s[N].rebuild()},b=C(o?o.getLevel():"WARN");var F=k();F!=null&&(x=C(F)),u.call(y)}o=new h,o.getLogger=function(w){if(typeof w!="symbol"&&typeof w!="string"||w==="")throw new TypeError("You must supply a name when creating a logger.");var y=s[w];return y||(y=s[w]=new h(w,o.methodFactory)),y};var p=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=p),o},o.getLoggers=function(){return s},o.default=o,o})})(hO);var pO=hO.exports;const Tp=vi(pO);var We=Tp.getLogger("web3auth-logger");function S_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S_(Object(n),!0).forEach(function(r){me(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ua={},kn={},Ri={},su={},mw={};Object.defineProperty(mw,"__esModule",{value:!0});mw.crypto=void 0;mw.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=n,t.anumber=r,t.abytes=i,t.ahash=s,t.aexists=o,t.aoutput=a,t.u8=c,t.u32=l,t.clean=u,t.createView=d,t.rotr=f,t.rotl=h,t.byteSwap=p,t.byteSwap32=g,t.bytesToHex=b,t.hexToBytes=E,t.asyncLoop=k,t.utf8ToBytes=S,t.bytesToUtf8=C,t.toBytes=F,t.kdfInputToBytes=N,t.concatBytes=L,t.checkOpts=j,t.createHasher=O,t.createOptHasher=R,t.createXOFer=D,t.randomBytes=T;const e=mw;function n(I){return I instanceof Uint8Array||ArrayBuffer.isView(I)&&I.constructor.name==="Uint8Array"}function r(I){if(!Number.isSafeInteger(I)||I<0)throw new Error("positive integer expected, got "+I)}function i(I,...M){if(!n(I))throw new Error("Uint8Array expected");if(M.length>0&&!M.includes(I.length))throw new Error("Uint8Array expected of length "+M+", got length="+I.length)}function s(I){if(typeof I!="function"||typeof I.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");r(I.outputLen),r(I.blockLen)}function o(I,M=!0){if(I.destroyed)throw new Error("Hash instance has been destroyed");if(M&&I.finished)throw new Error("Hash#digest() has already been called")}function a(I,M){i(I);const Y=M.outputLen;if(I.length<Y)throw new Error("digestInto() expects output buffer of length at least "+Y)}function c(I){return new Uint8Array(I.buffer,I.byteOffset,I.byteLength)}function l(I){return new Uint32Array(I.buffer,I.byteOffset,Math.floor(I.byteLength/4))}function u(...I){for(let M=0;M<I.length;M++)I[M].fill(0)}function d(I){return new DataView(I.buffer,I.byteOffset,I.byteLength)}function f(I,M){return I<<32-M|I>>>M}function h(I,M){return I<<M|I>>>32-M>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function p(I){return I<<24&4278190080|I<<8&16711680|I>>>8&65280|I>>>24&255}t.swap8IfBE=t.isLE?I=>I:I=>p(I),t.byteSwapIfBE=t.swap8IfBE;function g(I){for(let M=0;M<I.length;M++)I[M]=p(I[M]);return I}t.swap32IfBE=t.isLE?I=>I:g;const w=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",y=Array.from({length:256},(I,M)=>M.toString(16).padStart(2,"0"));function b(I){if(i(I),w)return I.toHex();let M="";for(let Y=0;Y<I.length;Y++)M+=y[I[Y]];return M}const m={_0:48,_9:57,A:65,F:70,a:97,f:102};function x(I){if(I>=m._0&&I<=m._9)return I-m._0;if(I>=m.A&&I<=m.F)return I-(m.A-10);if(I>=m.a&&I<=m.f)return I-(m.a-10)}function E(I){if(typeof I!="string")throw new Error("hex string expected, got "+typeof I);if(w)return Uint8Array.fromHex(I);const M=I.length,Y=M/2;if(M%2)throw new Error("hex string expected, got unpadded hex of length "+M);const X=new Uint8Array(Y);for(let Z=0,le=0;Z<Y;Z++,le+=2){const ae=x(I.charCodeAt(le)),ye=x(I.charCodeAt(le+1));if(ae===void 0||ye===void 0){const Ee=I[le]+I[le+1];throw new Error('hex string expected, got non-hex character "'+Ee+'" at index '+le)}X[Z]=ae*16+ye}return X}const A=async()=>{};t.nextTick=A;async function k(I,M,Y){let X=Date.now();for(let Z=0;Z<I;Z++){Y(Z);const le=Date.now()-X;le>=0&&le<M||(await(0,t.nextTick)(),X+=le)}}function S(I){if(typeof I!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(I))}function C(I){return new TextDecoder().decode(I)}function F(I){return typeof I=="string"&&(I=S(I)),i(I),I}function N(I){return typeof I=="string"&&(I=S(I)),i(I),I}function L(...I){let M=0;for(let X=0;X<I.length;X++){const Z=I[X];i(Z),M+=Z.length}const Y=new Uint8Array(M);for(let X=0,Z=0;X<I.length;X++){const le=I[X];Y.set(le,Z),Z+=le.length}return Y}function j(I,M){if(M!==void 0&&{}.toString.call(M)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(I,M)}class B{}t.Hash=B;function O(I){const M=X=>I().update(F(X)).digest(),Y=I();return M.outputLen=Y.outputLen,M.blockLen=Y.blockLen,M.create=()=>I(),M}function R(I){const M=(X,Z)=>I(Z).update(F(X)).digest(),Y=I({});return M.outputLen=Y.outputLen,M.blockLen=Y.blockLen,M.create=X=>I(X),M}function D(I){const M=(X,Z)=>I(Z).update(F(X)).digest(),Y=I({});return M.outputLen=Y.outputLen,M.blockLen=Y.blockLen,M.create=X=>I(X),M}t.wrapConstructor=O,t.wrapConstructorWithOpts=R,t.wrapXOFConstructorWithOpts=D;function T(I=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(I));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(I));throw new Error("crypto.getRandomValues must be defined")}})(su);Object.defineProperty(Ri,"__esModule",{value:!0});Ri.SHA512_IV=Ri.SHA384_IV=Ri.SHA224_IV=Ri.SHA256_IV=Ri.HashMD=void 0;Ri.setBigUint64=gO;Ri.Chi=e9;Ri.Maj=t9;const Po=su;function gO(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function e9(t,e,n){return t&e^~t&n}function t9(t,e,n){return t&e^t&n^e&n}let n9=class extends Po.Hash{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=(0,Po.createView)(this.buffer)}update(e){(0,Po.aexists)(this),e=(0,Po.toBytes)(e),(0,Po.abytes)(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=(0,Po.createView)(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,Po.aexists)(this),(0,Po.aoutput)(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,(0,Po.clean)(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;gO(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=(0,Po.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};Ri.HashMD=n9;Ri.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);Ri.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]);Ri.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]);Ri.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.toBig=Tt.shrSL=Tt.shrSH=Tt.rotrSL=Tt.rotrSH=Tt.rotrBL=Tt.rotrBH=Tt.rotr32L=Tt.rotr32H=Tt.rotlSL=Tt.rotlSH=Tt.rotlBL=Tt.rotlBH=Tt.add5L=Tt.add5H=Tt.add4L=Tt.add4H=Tt.add3L=Tt.add3H=void 0;Tt.add=TO;Tt.fromBig=bE;Tt.split=mO;const kg=BigInt(2**32-1),Lv=BigInt(32);function bE(t,e=!1){return e?{h:Number(t&kg),l:Number(t>>Lv&kg)}:{h:Number(t>>Lv&kg)|0,l:Number(t&kg)|0}}function mO(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=bE(t[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const wO=(t,e)=>BigInt(t>>>0)<<Lv|BigInt(e>>>0);Tt.toBig=wO;const yO=(t,e,n)=>t>>>n;Tt.shrSH=yO;const bO=(t,e,n)=>t<<32-n|e>>>n;Tt.shrSL=bO;const vO=(t,e,n)=>t>>>n|e<<32-n;Tt.rotrSH=vO;const xO=(t,e,n)=>t<<32-n|e>>>n;Tt.rotrSL=xO;const EO=(t,e,n)=>t<<64-n|e>>>n-32;Tt.rotrBH=EO;const SO=(t,e,n)=>t>>>n-32|e<<64-n;Tt.rotrBL=SO;const _O=(t,e)=>e;Tt.rotr32H=_O;const kO=(t,e)=>t;Tt.rotr32L=kO;const AO=(t,e,n)=>t<<n|e>>>32-n;Tt.rotlSH=AO;const IO=(t,e,n)=>e<<n|t>>>32-n;Tt.rotlSL=IO;const CO=(t,e,n)=>e<<n-32|t>>>64-n;Tt.rotlBH=CO;const RO=(t,e,n)=>t<<n-32|e>>>64-n;Tt.rotlBL=RO;function TO(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const OO=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);Tt.add3L=OO;const PO=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;Tt.add3H=PO;const NO=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);Tt.add4L=NO;const LO=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;Tt.add4H=LO;const DO=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);Tt.add5L=DO;const $O=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0;Tt.add5H=$O;const r9={fromBig:bE,split:mO,toBig:wO,shrSH:yO,shrSL:bO,rotrSH:vO,rotrSL:xO,rotrBH:EO,rotrBL:SO,rotr32H:_O,rotr32L:kO,rotlSH:AO,rotlSL:IO,rotlBH:CO,rotlBL:RO,add:TO,add3L:OO,add3H:PO,add4L:NO,add4H:LO,add5H:$O,add5L:DO};Tt.default=r9;Object.defineProperty(kn,"__esModule",{value:!0});kn.sha512_224=kn.sha512_256=kn.sha384=kn.sha512=kn.sha224=kn.sha256=kn.SHA512_256=kn.SHA512_224=kn.SHA384=kn.SHA512=kn.SHA224=kn.SHA256=void 0;const dt=Ri,$t=Tt,cr=su,i9=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ac=new Uint32Array(64);let vE=class extends dt.HashMD{constructor(e=32){super(64,e,8,!1),this.A=dt.SHA256_IV[0]|0,this.B=dt.SHA256_IV[1]|0,this.C=dt.SHA256_IV[2]|0,this.D=dt.SHA256_IV[3]|0,this.E=dt.SHA256_IV[4]|0,this.F=dt.SHA256_IV[5]|0,this.G=dt.SHA256_IV[6]|0,this.H=dt.SHA256_IV[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)ac[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=ac[d-15],h=ac[d-2],p=(0,cr.rotr)(f,7)^(0,cr.rotr)(f,18)^f>>>3,g=(0,cr.rotr)(h,17)^(0,cr.rotr)(h,19)^h>>>10;ac[d]=g+ac[d-7]+p+ac[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=(0,cr.rotr)(a,6)^(0,cr.rotr)(a,11)^(0,cr.rotr)(a,25),h=u+f+(0,dt.Chi)(a,c,l)+i9[d]+ac[d]|0,g=((0,cr.rotr)(r,2)^(0,cr.rotr)(r,13)^(0,cr.rotr)(r,22))+(0,dt.Maj)(r,i,s)|0;u=l,l=c,c=a,a=o+h|0,o=s,s=i,i=r,r=h+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){(0,cr.clean)(ac)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,cr.clean)(this.buffer)}};kn.SHA256=vE;class BO extends vE{constructor(){super(28),this.A=dt.SHA224_IV[0]|0,this.B=dt.SHA224_IV[1]|0,this.C=dt.SHA224_IV[2]|0,this.D=dt.SHA224_IV[3]|0,this.E=dt.SHA224_IV[4]|0,this.F=dt.SHA224_IV[5]|0,this.G=dt.SHA224_IV[6]|0,this.H=dt.SHA224_IV[7]|0}}kn.SHA224=BO;const MO=$t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),s9=MO[0],o9=MO[1],cc=new Uint32Array(80),lc=new Uint32Array(80);let Op=class extends dt.HashMD{constructor(e=64){super(128,e,16,!1),this.Ah=dt.SHA512_IV[0]|0,this.Al=dt.SHA512_IV[1]|0,this.Bh=dt.SHA512_IV[2]|0,this.Bl=dt.SHA512_IV[3]|0,this.Ch=dt.SHA512_IV[4]|0,this.Cl=dt.SHA512_IV[5]|0,this.Dh=dt.SHA512_IV[6]|0,this.Dl=dt.SHA512_IV[7]|0,this.Eh=dt.SHA512_IV[8]|0,this.El=dt.SHA512_IV[9]|0,this.Fh=dt.SHA512_IV[10]|0,this.Fl=dt.SHA512_IV[11]|0,this.Gh=dt.SHA512_IV[12]|0,this.Gl=dt.SHA512_IV[13]|0,this.Hh=dt.SHA512_IV[14]|0,this.Hl=dt.SHA512_IV[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,i,s,o,a,c,l,u,d,f,h,p,g,w]}set(e,n,r,i,s,o,a,c,l,u,d,f,h,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let m=0;m<16;m++,n+=4)cc[m]=e.getUint32(n),lc[m]=e.getUint32(n+=4);for(let m=16;m<80;m++){const x=cc[m-15]|0,E=lc[m-15]|0,A=$t.rotrSH(x,E,1)^$t.rotrSH(x,E,8)^$t.shrSH(x,E,7),k=$t.rotrSL(x,E,1)^$t.rotrSL(x,E,8)^$t.shrSL(x,E,7),S=cc[m-2]|0,C=lc[m-2]|0,F=$t.rotrSH(S,C,19)^$t.rotrBH(S,C,61)^$t.shrSH(S,C,6),N=$t.rotrSL(S,C,19)^$t.rotrBL(S,C,61)^$t.shrSL(S,C,6),L=$t.add4L(k,N,lc[m-7],lc[m-16]),j=$t.add4H(L,A,F,cc[m-7],cc[m-16]);cc[m]=j|0,lc[m]=L|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let m=0;m<80;m++){const x=$t.rotrSH(d,f,14)^$t.rotrSH(d,f,18)^$t.rotrBH(d,f,41),E=$t.rotrSL(d,f,14)^$t.rotrSL(d,f,18)^$t.rotrBL(d,f,41),A=d&h^~d&g,k=f&p^~f&w,S=$t.add5L(b,E,k,o9[m],lc[m]),C=$t.add5H(S,y,x,A,s9[m],cc[m]),F=S|0,N=$t.rotrSH(r,i,28)^$t.rotrBH(r,i,34)^$t.rotrBH(r,i,39),L=$t.rotrSL(r,i,28)^$t.rotrBL(r,i,34)^$t.rotrBL(r,i,39),j=r&s^r&a^s&a,B=i&o^i&c^o&c;y=g|0,b=w|0,g=h|0,w=p|0,h=d|0,p=f|0,{h:d,l:f}=$t.add(l|0,u|0,C|0,F|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const O=$t.add3L(F,L,B);r=$t.add3H(O,C,N,j),i=O|0}({h:r,l:i}=$t.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=$t.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=$t.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=$t.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:f}=$t.add(this.Eh|0,this.El|0,d|0,f|0),{h,l:p}=$t.add(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:w}=$t.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=$t.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,i,s,o,a,c,l,u,d,f,h,p,g,w,y,b)}roundClean(){(0,cr.clean)(cc,lc)}destroy(){(0,cr.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};kn.SHA512=Op;class UO extends Op{constructor(){super(48),this.Ah=dt.SHA384_IV[0]|0,this.Al=dt.SHA384_IV[1]|0,this.Bh=dt.SHA384_IV[2]|0,this.Bl=dt.SHA384_IV[3]|0,this.Ch=dt.SHA384_IV[4]|0,this.Cl=dt.SHA384_IV[5]|0,this.Dh=dt.SHA384_IV[6]|0,this.Dl=dt.SHA384_IV[7]|0,this.Eh=dt.SHA384_IV[8]|0,this.El=dt.SHA384_IV[9]|0,this.Fh=dt.SHA384_IV[10]|0,this.Fl=dt.SHA384_IV[11]|0,this.Gh=dt.SHA384_IV[12]|0,this.Gl=dt.SHA384_IV[13]|0,this.Hh=dt.SHA384_IV[14]|0,this.Hl=dt.SHA384_IV[15]|0}}kn.SHA384=UO;const ci=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),li=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class jO extends Op{constructor(){super(28),this.Ah=ci[0]|0,this.Al=ci[1]|0,this.Bh=ci[2]|0,this.Bl=ci[3]|0,this.Ch=ci[4]|0,this.Cl=ci[5]|0,this.Dh=ci[6]|0,this.Dl=ci[7]|0,this.Eh=ci[8]|0,this.El=ci[9]|0,this.Fh=ci[10]|0,this.Fl=ci[11]|0,this.Gh=ci[12]|0,this.Gl=ci[13]|0,this.Hh=ci[14]|0,this.Hl=ci[15]|0}}kn.SHA512_224=jO;class FO extends Op{constructor(){super(32),this.Ah=li[0]|0,this.Al=li[1]|0,this.Bh=li[2]|0,this.Bl=li[3]|0,this.Ch=li[4]|0,this.Cl=li[5]|0,this.Dh=li[6]|0,this.Dl=li[7]|0,this.Eh=li[8]|0,this.El=li[9]|0,this.Fh=li[10]|0,this.Fl=li[11]|0,this.Gh=li[12]|0,this.Gl=li[13]|0,this.Hh=li[14]|0,this.Hl=li[15]|0}}kn.SHA512_256=FO;kn.sha256=(0,cr.createHasher)(()=>new vE);kn.sha224=(0,cr.createHasher)(()=>new BO);kn.sha512=(0,cr.createHasher)(()=>new Op);kn.sha384=(0,cr.createHasher)(()=>new UO);kn.sha512_256=(0,cr.createHasher)(()=>new FO);kn.sha512_224=(0,cr.createHasher)(()=>new jO);Object.defineProperty(Ua,"__esModule",{value:!0});Ua.sha224=Ua.SHA224=Dv=Ua.sha256=Ua.SHA256=void 0;const ww=kn;Ua.SHA256=ww.SHA256;var Dv=Ua.sha256=ww.sha256;Ua.SHA224=ww.SHA224;Ua.sha224=ww.sha224;var zO=OD();const ou=Tp.getLogger("auth");ou.setLevel("error");const Cn={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},Ac={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};Cn.MAINNET+"",Cn.TESTNET+"",Cn.CYAN+"",Cn.AQUA+"",Cn.CELESTE+"";Cn.AQUA+"",Ac.SAPPHIRE_MAINNET,Cn.CELESTE+"",Ac.SAPPHIRE_MAINNET,Cn.CYAN+"",Ac.SAPPHIRE_MAINNET,Cn.MAINNET+"",Ac.SAPPHIRE_MAINNET,Cn.TESTNET+"",Ac.SAPPHIRE_DEVNET;Cn.MAINNET+"",Cn.TESTNET+"",Cn.CYAN+"",Cn.AQUA+"",Cn.CELESTE+"";const a9={[Ac.SAPPHIRE_MAINNET]:"https://api.web3auth.io/signer-service",[Ac.SAPPHIRE_DEVNET]:"https://api.web3auth.io/signer-service",[Cn.MAINNET]:"https://api.web3auth.io/signer-service",[Cn.TESTNET]:"https://api.web3auth.io/signer-service",[Cn.CYAN]:"https://api.web3auth.io/signer-polygon-service",[Cn.AQUA]:"https://api.web3auth.io/signer-polygon-service",[Cn.CELESTE]:"https://api.web3auth.io/signer-polygon-service"};Cn.MAINNET+"",Cn.TESTNET+"",Cn.CYAN+"",Cn.AQUA+"",Cn.CELESTE+"";const yw="https://api.web3auth.io/session-service",xE="https://session.web3auth.io";var c9=function(e){return l9(e)&&!u9(e)};function l9(t){return!!t&&typeof t=="object"}function u9(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||h9(t)}var d9=typeof Symbol=="function"&&Symbol.for,f9=d9?Symbol.for("react.element"):60103;function h9(t){return t.$$typeof===f9}function p9(t){return Array.isArray(t)?[]:{}}function Xh(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Rd(p9(t),t,e):t}function g9(t,e,n){return t.concat(e).map(function(r){return Xh(r,n)})}function m9(t,e){if(!e.customMerge)return Rd;var n=e.customMerge(t);return typeof n=="function"?n:Rd}function w9(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function __(t){return Object.keys(t).concat(w9(t))}function KO(t,e){try{return e in t}catch{return!1}}function y9(t,e){return KO(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function b9(t,e,n){var r={};return n.isMergeableObject(t)&&__(t).forEach(function(i){r[i]=Xh(t[i],n)}),__(e).forEach(function(i){y9(t,i)||(KO(t,i)&&n.isMergeableObject(e[i])?r[i]=m9(i,n)(t[i],e[i],n):r[i]=Xh(e[i],n))}),r}function Rd(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||g9,n.isMergeableObject=n.isMergeableObject||c9,n.cloneUnlessOtherwiseSpecified=Xh;var r=Array.isArray(e),i=Array.isArray(t),s=r===i;return s?r?n.arrayMerge(t,e,n):b9(t,e,n):Xh(e,n)}Rd.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return Rd(r,i,n)},{})};var v9=Rd,x9=v9;const _o=vi(x9),Qh=Tp.getLogger("http-helpers");Qh.setLevel(pO.levels.INFO);let E9="torus-default";const S9="x-api-key";function _9(t){Qh.setLevel(t)}async function bw(t,e){let n=null;try{n=new URL(t)}catch{}return fetch(t,e)}function vw(){const t={};return t[S9]=E9,t}function xw(t){Qh.info(`Response: ${t.status} ${t.statusText}`),Qh.info(`Url: ${t.url}`)}function k9(t){const e=t.headers.get("x-web3-correlation-id");e&&Qh.info(`Request tracing with traceID = ${e}`)}const A9=async(t,e)=>{let n=null;try{const r=new Promise((s,o)=>{n=setTimeout(()=>{o(new Error(`Timed out in ${t}ms`))},t)}),i=await Promise.race([e,r]);return n!=null&&clearTimeout(n),i}catch(r){throw n!=null&&clearTimeout(n),r}},Ew=async(t,e={},n={})=>{const r={mode:"cors",headers:{}};n.useAPIKey&&(r.headers=fe(fe({},r.headers),vw())),e.method="GET";const i=_o(r,e),s=await bw(t,i);if(s.ok){const o=s.headers.get("content-type");return o!=null&&o.includes("application/json")?s.json():s.text()}throw xw(s),s},Pp=(t,e={},n={},r={})=>{const i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(i.headers=fe(fe({},i.headers),vw())),n.method="POST";const s=_o(i,n);return r.isUrlEncodedData?(s.body=e,s.headers["Content-Type"]==="application/json; charset=utf-8"&&delete s.headers["Content-Type"]):s.body=JSON.stringify(e),A9(r.timeout||6e4,bw(t,s).then(o=>{if(r.logTracingHeader&&k9(o),o.ok){const a=o.headers.get("content-type");return a!=null&&a.includes("application/json")?o.json():o.text()}throw xw(o),o}))},I9=async(t,e={},n={},r={})=>{const i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(i.headers=fe(fe({},i.headers),vw())),n.method="PATCH";const s=_o(i,n);r.isUrlEncodedData?(s.body=e,s.headers["Content-Type"]==="application/json; charset=utf-8"&&delete s.headers["Content-Type"]):s.body=JSON.stringify(e);const o=await bw(t,s);if(o.ok){const a=o.headers.get("content-type");return a!=null&&a.includes("application/json")?o.json():o.text()}throw xw(o),o},C9=async(t,e={},n={},r={})=>{const i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(i.headers=fe(fe({},i.headers),vw())),n.method="PUT";const s=_o(i,n);r.isUrlEncodedData?(s.body=e,s.headers["Content-Type"]==="application/json; charset=utf-8"&&delete s.headers["Content-Type"]):s.body=JSON.stringify(e);const o=await bw(t,s);if(o.ok){const a=o.headers.get("content-type");return a!=null&&a.includes("application/json")?o.json():o.text()}throw xw(o),o},$v=t=>t.padStart(64,"0").slice(0,64);class R9{constructor(){me(this,"sessionId",void 0)}checkSessionParams(){if(!this.sessionId)throw new Error("Session id is required");this.sessionId=$v(this.sessionId)}request({method:e="GET",url:n,data:r={},headers:i={}}){const s={headers:i};switch(e){case"GET":return Ew(n,s);case"POST":return Pp(n,r,s);case"PUT":return C9(n,r,s);case"PATCH":return I9(n,r,s)}throw new Error("Invalid method type")}}const Td=new zO.ec("secp256k1"),vs=globalThis.crypto||globalThis.msCrypto||{},Ic=vs.subtle||vs.webkitSubtle,T9=Ne.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),O9=Ne.alloc(32,0);function ur(t,e){if(!t)throw new Error(e||"Assertion failed")}function P9(t){return Ne.isBuffer(t)&&t.length===32}function ef(t){return P9(t)?t.compare(O9)>0&&t.compare(T9)<0:!1}function N9(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function yh(t){if(typeof vs.getRandomValues>"u")return Ne.from(vs.randomBytes(t));const e=new Uint8Array(t);return vs.getRandomValues(e),Ne.from(e)}async function HO(t){if(!vs.createHash){const r=await Ic.digest("SHA-512",t);return new Uint8Array(r)}const n=vs.createHash("sha512").update(t).digest();return new Uint8Array(n)}function WO(t){return async function(e,n,r){if(Ic&&Ic[t]&&Ic.importKey){const i={name:"AES-CBC"},s=await Ic.importKey("raw",n,i,!1,[t]),o={name:"AES-CBC",iv:e},a=await Ic[t](o,s,r);return Ne.from(new Uint8Array(a))}else if(t==="encrypt"&&vs.createCipheriv){const i=vs.createCipheriv("aes-256-cbc",n,e),s=i.update(r),o=i.final();return Ne.concat([s,o])}else if(t==="decrypt"&&vs.createDecipheriv){const i=vs.createDecipheriv("aes-256-cbc",n,e),s=i.update(r),o=i.final();return Ne.concat([s,o])}throw new Error(`Unsupported operation: ${t}`)}}const L9=WO("encrypt"),D9=WO("decrypt");async function qO(t,e){if(!vs.createHmac){const i={name:"HMAC",hash:{name:"SHA-256"}},s=await Ic.importKey("raw",new Uint8Array(t),i,!1,["sign","verify"]),o=await Ic.sign("HMAC",s,e);return Ne.from(new Uint8Array(o))}const n=vs.createHmac("sha256",Ne.from(t));return n.update(e),n.digest()}async function $9(t,e,n){const r=await qO(t,e);return N9(r,n)}const B9=function(){let t=yh(32);for(;!ef(t);)t=yh(32);return t},Nc=function(t){return ur(t.length===32,"Bad private key"),ur(ef(t),"Bad private key"),Ne.from(Td.keyFromPrivate(t).getPublic("array"))},v0=async function(t,e){return ur(t.length===32,"Bad private key"),ur(ef(t),"Bad private key"),ur(e.length>0,"Message should not be empty"),ur(e.length<=32,"Message is too long"),Ne.from(Td.sign(e,t,{canonical:!0}).toDER())},M9=async function(t,e){ur(Ne.isBuffer(t),"Bad private key"),ur(Ne.isBuffer(e),"Bad public key"),ur(t.length===32,"Bad private key"),ur(ef(t),"Bad private key"),ur(e.length===65||e.length===33,"Bad public key"),e.length===65&&ur(e[0]===4,"Bad public key"),e.length===33&&ur(e[0]===2||e[0]===3,"Bad public key");const n=Td.keyFromPrivate(t),r=Td.keyFromPublic(e),i=n.derive(r.getPublic());return Ne.from(i.toArray())},VO=M9,U9=async function(t,e){ur(Ne.isBuffer(t),"Bad private key"),ur(Ne.isBuffer(e),"Bad public key"),ur(t.length===32,"Bad private key"),ur(ef(t),"Bad private key"),ur(e.length===65||e.length===33,"Bad public key"),e.length===65&&ur(e[0]===4,"Bad public key"),e.length===33&&ur(e[0]===2||e[0]===3,"Bad public key");const n=Td.keyFromPrivate(t),r=Td.keyFromPublic(e),i=n.derive(r.getPublic());return Ne.from(i.toString(16,64),"hex")},j9=async function(t,e,n){n=n||{};let r=n.ephemPrivateKey||yh(32);for(;!ef(r);)r=n.ephemPrivateKey||yh(32);const i=Nc(r),s=await VO(r,t),o=await HO(s),a=n.iv||yh(16),c=o.slice(0,32),l=o.slice(32),d=await L9(a,Ne.from(c),e),f=Ne.concat([a,i,d]),h=await qO(Ne.from(l),f);return{iv:a,ephemPublicKey:i,ciphertext:d,mac:h}},GO=async function(t,e,n){const r=n??!1,s=await(r?U9:VO)(t,e.ephemPublicKey),o=await HO(s),a=o.slice(0,32),c=o.slice(32),l=Ne.concat([e.iv,e.ephemPublicKey,e.ciphertext]),u=await $9(Ne.from(c),l,e.mac);if(!u&&r===!1)return GO(t,e,!0);if(!u&&r===!0)throw new Error("bad MAC after trying padded");const d=await D9(e.iv,Ne.from(a),e.ciphertext);return Ne.from(new Uint8Array(d))};var Ag={},nb,k_;function F9(){if(k_)return nb;k_=1;var t,e,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},r;function i(h){throw{name:"SyntaxError",message:h,at:t,text:r}}function s(h){return h&&h!==e&&i("Expected '"+h+"' instead of '"+e+"'"),e=r.charAt(t),t+=1,e}function o(){var h,p="";for(e==="-"&&(p="-",s("-"));e>="0"&&e<="9";)p+=e,s();if(e===".")for(p+=".";s()&&e>="0"&&e<="9";)p+=e;if(e==="e"||e==="E")for(p+=e,s(),(e==="-"||e==="+")&&(p+=e,s());e>="0"&&e<="9";)p+=e,s();return h=Number(p),isFinite(h)||i("Bad number"),h}function a(){var h,p,g="",w;if(e==='"')for(;s();){if(e==='"')return s(),g;if(e==="\\")if(s(),e==="u"){for(w=0,p=0;p<4&&(h=parseInt(s(),16),!!isFinite(h));p+=1)w=w*16+h;g+=String.fromCharCode(w)}else if(typeof n[e]=="string")g+=n[e];else break;else g+=e}i("Bad string")}function c(){for(;e&&e<=" ";)s()}function l(){switch(e){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null;default:i("Unexpected '"+e+"'")}}function u(){var h=[];if(e==="["){if(s("["),c(),e==="]")return s("]"),h;for(;e;){if(h.push(f()),c(),e==="]")return s("]"),h;s(","),c()}}i("Bad array")}function d(){var h,p={};if(e==="{"){if(s("{"),c(),e==="}")return s("}"),p;for(;e;){if(h=a(),c(),s(":"),Object.prototype.hasOwnProperty.call(p,h)&&i('Duplicate key "'+h+'"'),p[h]=f(),c(),e==="}")return s("}"),p;s(","),c()}}i("Bad object")}function f(){switch(c(),e){case"{":return d();case"[":return u();case'"':return a();case"-":return o();default:return e>="0"&&e<="9"?o():l()}}return nb=function(h,p){var g;return r=h,t=0,e=" ",g=f(),c(),e&&i("Syntax error"),typeof p=="function"?function w(y,b){var m,x,E=y[b];if(E&&typeof E=="object")for(m in f)Object.prototype.hasOwnProperty.call(E,m)&&(x=w(E,m),typeof x>"u"?delete E[m]:E[m]=x);return p.call(y,b,E)}({"":g},""):g},nb}var rb,A_;function z9(){if(A_)return rb;A_=1;var t=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,n,r={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;function s(a){return t.lastIndex=0,t.test(a)?'"'+a.replace(t,function(c){var l=r[c];return typeof l=="string"?l:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function o(a,c){var l,u,d,f,h=e,p,g=c[a];switch(g&&typeof g=="object"&&typeof g.toJSON=="function"&&(g=g.toJSON(a)),typeof i=="function"&&(g=i.call(c,a,g)),typeof g){case"string":return s(g);case"number":return isFinite(g)?String(g):"null";case"boolean":case"null":return String(g);case"object":if(!g)return"null";if(e+=n,p=[],Object.prototype.toString.apply(g)==="[object Array]"){for(f=g.length,l=0;l<f;l+=1)p[l]=o(l,g)||"null";return d=p.length===0?"[]":e?`[
`+e+p.join(`,
`+e)+`
`+h+"]":"["+p.join(",")+"]",e=h,d}if(i&&typeof i=="object")for(f=i.length,l=0;l<f;l+=1)u=i[l],typeof u=="string"&&(d=o(u,g),d&&p.push(s(u)+(e?": ":":")+d));else for(u in g)Object.prototype.hasOwnProperty.call(g,u)&&(d=o(u,g),d&&p.push(s(u)+(e?": ":":")+d));return d=p.length===0?"{}":e?`{
`+e+p.join(`,
`+e)+`
`+h+"}":"{"+p.join(",")+"}",e=h,d}}return rb=function(a,c,l){var u;if(e="",n="",typeof l=="number")for(u=0;u<l;u+=1)n+=" ";else typeof l=="string"&&(n=l);if(i=c,c&&typeof c!="function"&&(typeof c!="object"||typeof c.length!="number"))throw new Error("JSON.stringify");return o("",{"":a})},rb}var I_;function K9(){return I_||(I_=1,Ag.parse=F9(),Ag.stringify=z9()),Ag}var H9={}.toString,W9=Array.isArray||function(t){return H9.call(t)=="[object Array]"},Ig=(typeof JSON<"u"?JSON:K9()).stringify,q9=W9,V9=LD,G9=PD,Sw=ND,Y9=Sw("Array.prototype.join"),C_=Sw("Array.prototype.indexOf"),J9=Sw("Array.prototype.splice"),Z9=Sw("Array.prototype.sort"),R_=function(e,n){for(var r="",i=0;i<e;i+=1)r+=n;return r},X9=function(t,e,n){return n},Q9=function(e){var n=arguments.length>1?arguments[1]:void 0,r=n&&n.space||"";typeof r=="number"&&(r=R_(r," "));var i=!!n&&typeof n.cycles=="boolean"&&n.cycles,s=n&&n.replacer?G9(n.replacer):X9;if(n&&typeof n.collapseEmpty<"u"&&typeof n.collapseEmpty!="boolean")throw new TypeError("`collapseEmpty` must be a boolean, if provided");var o=!!n&&n.collapseEmpty,a=typeof n=="function"?n:n&&n.cmp,c=a&&function(u){var d=a.length>2&&function(h){return u[h]};return function(f,h){return a({key:f,value:u[f]},{key:h,value:u[h]},d?{__proto__:null,get:d}:void 0)}},l=[];return function u(d,f,h,p){var g=r?`
`+R_(p,r):"",w=r?": ":":";if(h&&h.toJSON&&typeof h.toJSON=="function"&&(h=h.toJSON()),h=s(d,f,h),h!==void 0){if(typeof h!="object"||h===null)return Ig(h);var y=function(S,C){return o&&S.length===0?C:(C==="[]"?"[":"{")+Y9(S,",")+g+(C==="[]"?"]":"}")};if(q9(h)){for(var E=[],b=0;b<h.length;b++){var m=u(h,b,h[b],p+1)||Ig(null);E[E.length]=g+r+m}return y(E,"[]")}if(C_(l,h)!==-1){if(i)return Ig("__cycle__");throw new TypeError("Converting circular structure to JSON")}else l[l.length]=h;for(var x=Z9(V9(h),c&&c(h)),E=[],b=0;b<x.length;b++){var f=x[b],A=u(h,f,h[f],p+1);if(A){var k=Ig(f)+w+A;E[E.length]=g+r+k}}return J9(l,C_(l,h),1),y(E,"{}")}}({"":e},"",e,0)};const YO=vi(Q9);function ep(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function e7(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function t7(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function _w(t,...e){if(!t7(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function n7(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ep(t.outputLen),ep(t.blockLen)}function Bv(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function JO(t,e){_w(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const r7={number:ep,bool:e7,bytes:_w,hash:n7,exists:Bv,output:JO},Cg=BigInt(2**32-1),T_=BigInt(32);function i7(t,e=!1){return e?{h:Number(t&Cg),l:Number(t>>T_&Cg)}:{h:Number(t>>T_&Cg)|0,l:Number(t&Cg)|0}}function s7(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=i7(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const o7=(t,e,n)=>t<<n|e>>>32-n,a7=(t,e,n)=>e<<n|t>>>32-n,c7=(t,e,n)=>e<<n-32|t>>>64-n,l7=(t,e,n)=>t<<n-32|e>>>64-n;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u7=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),O_=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,d7=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function P_(t){for(let e=0;e<t.length;e++)t[e]=d7(t[e])}function f7(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function ZO(t){return typeof t=="string"&&(t=f7(t)),_w(t),t}let h7=class{clone(){return this._cloneInto()}};function p7(t){const e=r=>t().update(ZO(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const XO=[],QO=[],eP=[],g7=BigInt(0),Pf=BigInt(1),m7=BigInt(2),w7=BigInt(7),y7=BigInt(256),b7=BigInt(113);for(let t=0,e=Pf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],XO.push(2*(5*r+n)),QO.push((t+1)*(t+2)/2%64);let i=g7;for(let s=0;s<7;s++)e=(e<<Pf^(e>>w7)*b7)%y7,e&m7&&(i^=Pf<<(Pf<<BigInt(s))-Pf);eP.push(i)}const[v7,x7]=s7(eP,!0),N_=(t,e,n)=>n>32?c7(t,e,n):o7(t,e,n),L_=(t,e,n)=>n>32?l7(t,e,n):a7(t,e,n);function E7(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=N_(l,u,1)^n[a],f=L_(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=QO[o],c=N_(i,s,a),l=L_(i,s,a),u=XO[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=v7[r],t[1]^=x7[r]}n.fill(0)}let S7=class tP extends h7{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ep(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=u7(this.state)}keccak(){O_||P_(this.state32),E7(this.state32,this.rounds),O_||P_(this.state32),this.posOut=0,this.pos=0}update(e){Bv(this);const{blockLen:n,state:r}=this;e=ZO(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Bv(this,!1),_w(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ep(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(JO(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new tP(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const _7=(t,e,n)=>p7(()=>new S7(e,t,n)),D_=_7(1,136,256/8);function Mv(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function k7(t){return e=>(r7.bytes(e),t(e))}(()=>{const t=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,e=typeof module<"u"&&typeof Mv=="function"&&Mv.bind(module);return{node:e&&!t?e("crypto"):void 0,web:t}})();const A7=(()=>{const t=k7(D_);return t.create=D_.create,t})();function md(t){return Ne.from(A7(t))}const I7=new zO.ec("secp256k1");function C7(t){return{iv:Ne.from(t.iv,"hex"),ephemPublicKey:Ne.from(t.ephemPublicKey,"hex"),ciphertext:Ne.from(t.ciphertext,"hex"),mac:Ne.from(t.mac,"hex")}}function R7(t){return{iv:Ne.from(t.iv).toString("hex"),ephemPublicKey:Ne.from(t.ephemPublicKey).toString("hex"),ciphertext:Ne.from(t.ciphertext).toString("hex"),mac:Ne.from(t.mac).toString("hex")}}async function x0(t,e){const n=JSON.stringify(e),r=Ne.from(n,"utf-8"),i=await j9(Nc(Ne.from(t,"hex")),r),s=R7(i);return JSON.stringify(s)}async function nP(t,e){const n=JSON.parse(e),r=C7(n),i=I7.keyFromPrivate(t),o=(await GO(Ne.from(i.getPrivate().toString("hex",64),"hex"),r)).toString("utf-8");return JSON.parse(o)}const T7=86400;class Rg extends R9{constructor({sessionServerBaseUrl:e,sessionNamespace:n,sessionTime:r,sessionId:i,allowedOrigin:s}={}){super(),me(this,"sessionServerBaseUrl",yw),me(this,"sessionNamespace",void 0),me(this,"allowedOrigin",void 0),me(this,"sessionTime",T7),me(this,"sessionId",""),e&&(this.sessionServerBaseUrl=e),n&&(this.sessionNamespace=n),r&&(this.sessionTime=r),i&&(this.sessionId=$v(i)),s?this.allowedOrigin=s:this.allowedOrigin="*"}static generateRandomSessionKey(){return $v(B9().toString("hex"))}async createSession(e,n={}){super.checkSessionParams();const r=Ne.from(this.sessionId,"hex"),i=Nc(r).toString("hex"),s=await x0(this.sessionId,e),o=(await v0(r,md(Ne.from(s,"utf8")))).toString("hex"),a={key:i,data:s,signature:o,namespace:this.sessionNamespace,timeout:this.sessionTime,allowedOrigin:this.allowedOrigin};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/set`,data:a,headers:n}),this.sessionId}async authorizeSession({headers:e}={headers:{}}){super.checkSessionParams();const r={key:Nc(Ne.from(this.sessionId,"hex")).toString("hex"),namespace:this.sessionNamespace},i=await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/get`,data:r,headers:e});if(!i.message)throw new Error("Session Expired or Invalid public key");const s=await nP(this.sessionId,i.message);if(s.error)throw new Error("There was an error decrypting data.");return s}async updateSession(e,n={}){super.checkSessionParams();const r=Ne.from(this.sessionId,"hex"),i=Nc(r).toString("hex"),s=await x0(this.sessionId,e),o=(await v0(r,md(Ne.from(s,"utf8")))).toString("hex"),a={key:i,data:s,signature:o,namespace:this.sessionNamespace,allowedOrigin:this.allowedOrigin};await super.request({method:"PUT",url:`${this.sessionServerBaseUrl}/v2/store/update`,data:a,headers:n})}async invalidateSession(e={}){super.checkSessionParams();const n=Ne.from(this.sessionId,"hex"),r=Nc(n).toString("hex"),i=await x0(this.sessionId,{}),s=(await v0(n,md(Ne.from(i,"utf8")))).toString("hex"),o={key:r,data:i,signature:s,namespace:this.sessionNamespace,timeout:1};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/set`,data:o,headers:e}),this.sessionId="",!0}}class rP extends fO{constructor(e,n){super(n),me(this,"code",void 0),me(this,"message",void 0),this.code=e,this.message=n||"",Object.defineProperty(this,"name",{value:"AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class ja extends rP{constructor(e,n){super(e,n),Object.defineProperty(this,"name",{value:"InitializationError"})}static fromCode(e,n=""){return new ja(e,`${ja.messages[e]}, ${n}`)}static invalidParams(e=""){return ja.fromCode(5001,e)}static notInitialized(e=""){return ja.fromCode(5002,e)}}me(ja,"messages",{5e3:"Custom",5001:"Invalid constructor params",5002:"SDK not initialized. please call init first"});class Sn extends rP{constructor(e,n){super(e,n),Object.defineProperty(this,"name",{value:"LoginError"})}static fromCode(e,n=""){return new Sn(e,`${Sn.messages[e]}, ${n}`)}static invalidLoginParams(e=""){return Sn.fromCode(5111,e)}static userNotLoggedIn(e=""){return Sn.fromCode(5112,e)}static popupClosed(e=""){return Sn.fromCode(5113,e)}static loginFailed(e=""){return Sn.fromCode(5114,e)}static popupBlocked(e=""){return Sn.fromCode(5115,e)}static mfaAlreadyEnabled(e=""){return Sn.fromCode(5116,e)}static mfaNotEnabled(e=""){return Sn.fromCode(5117,e)}}me(Sn,"messages",{5e3:"Custom",5111:"Invalid login params",5112:"User not logged in.",5113:"login popup has been closed by the user",5114:"Login failed",5115:"Popup was blocked. Please call this function as soon as user clicks button or use redirect mode",5116:"MFA already enabled",5117:"MFA not yet enabled. Please call `enableMFA` first"});const sa=Object.create(null);sa.open="0";sa.close="1";sa.ping="2";sa.pong="3";sa.message="4";sa.upgrade="5";sa.noop="6";const E0=Object.create(null);Object.keys(sa).forEach(t=>{E0[sa[t]]=t});const Uv={type:"error",data:"parser error"},iP=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",sP=typeof ArrayBuffer=="function",oP=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,EE=({type:t,data:e},n,r)=>iP&&e instanceof Blob?n?r(e):$_(e,r):sP&&(e instanceof ArrayBuffer||oP(e))?n?r(e):$_(new Blob([e]),r):r(sa[t]+(e||"")),$_=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function B_(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let ib;function O7(t,e){if(iP&&t.data instanceof Blob)return t.data.arrayBuffer().then(B_).then(e);if(sP&&(t.data instanceof ArrayBuffer||oP(t.data)))return e(B_(t.data));EE(t,!1,n=>{ib||(ib=new TextEncoder),e(ib.encode(n))})}const M_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ih=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<M_.length;t++)ih[M_.charCodeAt(t)]=t;const P7=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(r=0;r<n;r+=4)s=ih[t.charCodeAt(r)],o=ih[t.charCodeAt(r+1)],a=ih[t.charCodeAt(r+2)],c=ih[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l},N7=typeof ArrayBuffer=="function",SE=(t,e)=>{if(typeof t!="string")return{type:"message",data:aP(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:L7(t.substring(1),e)}:E0[n]?t.length>1?{type:E0[n],data:t.substring(1)}:{type:E0[n]}:Uv},L7=(t,e)=>{if(N7){const n=P7(t);return aP(n,e)}else return{base64:!0,data:t}},aP=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},cP="",D7=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{EE(s,!1,a=>{r[o]=a,++i===n&&e(r.join(cP))})})},$7=(t,e)=>{const n=t.split(cP),r=[];for(let i=0;i<n.length;i++){const s=SE(n[i],e);if(r.push(s),s.type==="error")break}return r};function B7(){return new TransformStream({transform(t,e){O7(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let sb;function Tg(t){return t.reduce((e,n)=>e+n.length,0)}function Og(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function M7(t,e){sb||(sb=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(Tg(n)<1)break;const c=Og(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Tg(n)<2)break;const c=Og(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Tg(n)<8)break;const c=Og(n,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(Uv);break}i=u*Math.pow(2,32)+l.getUint32(4),r=3}else{if(Tg(n)<i)break;const c=Og(n,i);a.enqueue(SE(s?c:sb.decode(c),e)),r=0}if(i===0||i>t){a.enqueue(Uv);break}}}})}const lP=4;function hr(t){if(t)return U7(t)}function U7(t){for(var e in hr.prototype)t[e]=hr.prototype[e];return t}hr.prototype.on=hr.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};hr.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};hr.prototype.off=hr.prototype.removeListener=hr.prototype.removeAllListeners=hr.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};hr.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};hr.prototype.emitReserved=hr.prototype.emit;hr.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};hr.prototype.hasListeners=function(t){return!!this.listeners(t).length};const kw=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),zs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),j7="arraybuffer";function uP(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const F7=zs.setTimeout,z7=zs.clearTimeout;function Aw(t,e){e.useNativeTimers?(t.setTimeoutFn=F7.bind(zs),t.clearTimeoutFn=z7.bind(zs)):(t.setTimeoutFn=zs.setTimeout.bind(zs),t.clearTimeoutFn=zs.clearTimeout.bind(zs))}const K7=1.33;function H7(t){return typeof t=="string"?W7(t):Math.ceil((t.byteLength||t.size)*K7)}function W7(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function dP(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function q7(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function V7(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class G7 extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class _E extends hr{constructor(e){super(),this.writable=!1,Aw(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new G7(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=SE(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=q7(e);return n.length?"?"+n:""}}class Y7 extends _E{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};$7(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,D7(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=dP()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let fP=!1;try{fP=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const J7=fP;function Z7(){}class X7 extends Y7{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let wd=class S0 extends hr{constructor(e,n,r){super(),this.createRequest=e,Aw(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=uP(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=S0.requestsCount++,S0.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Z7,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete S0.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};wd.requestsCount=0;wd.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",U_);else if(typeof addEventListener=="function"){const t="onpagehide"in zs?"pagehide":"unload";addEventListener(t,U_,!1)}}function U_(){for(let t in wd.requests)wd.requests.hasOwnProperty(t)&&wd.requests[t].abort()}const Q7=function(){const t=hP({xdomain:!1});return t&&t.responseType!==null}();class ej extends X7{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Q7&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new wd(hP,this.uri(),e)}}function hP(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||J7))return new XMLHttpRequest}catch{}if(!e)try{return new zs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const pP=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class tj extends _E{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=pP?{}:uP(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;EE(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&kw(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=dP()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const ob=zs.WebSocket||zs.MozWebSocket;class nj extends tj{createSocket(e,n,r){return pP?new ob(e,n,r):n?new ob(e,n):new ob(e)}doWrite(e,n){this.ws.send(n)}}class rj extends _E{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=M7(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=B7();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&kw(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const ij={websocket:nj,webtransport:rj,polling:ej},sj=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,oj=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function jv(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=sj.exec(t||""),s={},o=14;for(;o--;)s[oj[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=aj(s,s.path),s.queryKey=cj(s,s.query),s}function aj(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function cj(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const Fv=typeof addEventListener=="function"&&typeof removeEventListener=="function",_0=[];Fv&&addEventListener("offline",()=>{_0.forEach(t=>t())},!1);class qc extends hr{constructor(e,n){if(super(),this.binaryType=j7,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=jv(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=jv(n.host).host);Aw(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=V7(this.opts.query)),Fv&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},_0.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=lP,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&qc.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",qc.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=H7(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,kw(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(qc.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Fv&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=_0.indexOf(this._offlineEventListener);r!==-1&&_0.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}qc.protocol=lP;class lj extends qc{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;qc.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;qc.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=d=>{const f=new Error("probe error: "+d);f.transport=n.name,s(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function c(){o("socket closed")}function l(d){n&&d.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let uj=class extends lj{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>ij[i]).filter(i=>!!i)),super(e,r)}};function dj(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=jv(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const fj=typeof ArrayBuffer=="function",hj=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,gP=Object.prototype.toString,pj=typeof Blob=="function"||typeof Blob<"u"&&gP.call(Blob)==="[object BlobConstructor]",gj=typeof File=="function"||typeof File<"u"&&gP.call(File)==="[object FileConstructor]";function kE(t){return fj&&(t instanceof ArrayBuffer||hj(t))||pj&&t instanceof Blob||gj&&t instanceof File}function k0(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(k0(t[n]))return!0;return!1}if(kE(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return k0(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&k0(t[n]))return!0;return!1}function mj(t){const e=[],n=t.data,r=t;return r.data=zv(n,e),r.attachments=e.length,{packet:r,buffers:e}}function zv(t,e){if(!t)return t;if(kE(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=zv(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=zv(t[r],e));return n}return t}function wj(t,e){return t.data=Kv(t.data,e),delete t.attachments,t}function Kv(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Kv(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Kv(t[n],e));return t}const yj=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],bj=5;var Jt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Jt||(Jt={}));let vj=class{constructor(e){this.replacer=e}encode(e){return(e.type===Jt.EVENT||e.type===Jt.ACK)&&k0(e)?this.encodeAsBinary({type:e.type===Jt.EVENT?Jt.BINARY_EVENT:Jt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Jt.BINARY_EVENT||e.type===Jt.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=mj(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}};function j_(t){return Object.prototype.toString.call(t)==="[object Object]"}let xj=class mP extends hr{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Jt.BINARY_EVENT;r||n.type===Jt.BINARY_ACK?(n.type=r?Jt.EVENT:Jt.ACK,this.reconstructor=new Ej(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(kE(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Jt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Jt.BINARY_EVENT||r.type===Jt.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(mP.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Jt.CONNECT:return j_(n);case Jt.DISCONNECT:return n===void 0;case Jt.CONNECT_ERROR:return typeof n=="string"||j_(n);case Jt.EVENT:case Jt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&yj.indexOf(n[0])===-1);case Jt.ACK:case Jt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class Ej{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=wj(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Sj=Object.freeze(Object.defineProperty({__proto__:null,Decoder:xj,Encoder:vj,get PacketType(){return Jt},protocol:bj},Symbol.toStringTag,{value:"Module"}));function go(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const _j=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class wP extends hr{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[go(e,"open",this.onopen.bind(this)),go(e,"packet",this.onpacket.bind(this)),go(e,"error",this.onerror.bind(this)),go(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(_j.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:Jt.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,d=n.pop();this._registerAckCallback(u,d),o.id=u}const a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Jt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Jt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Jt.EVENT:case Jt.BINARY_EVENT:this.onevent(e);break;case Jt.ACK:case Jt.BINARY_ACK:this.onack(e);break;case Jt.DISCONNECT:this.ondisconnect();break;case Jt.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Jt.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Jt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function tf(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}tf.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};tf.prototype.reset=function(){this.attempts=0};tf.prototype.setMin=function(t){this.ms=t};tf.prototype.setMax=function(t){this.max=t};tf.prototype.setJitter=function(t){this.jitter=t};class Hv extends hr{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Aw(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new tf({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||Sj;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new uj(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=go(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=go(n,"error",s);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(go(e,"ping",this.onping.bind(this)),go(e,"data",this.ondata.bind(this)),go(e,"error",this.onerror.bind(this)),go(e,"close",this.onclose.bind(this)),go(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){kw(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new wP(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Nf={};function A0(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=dj(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Nf[i]&&s in Nf[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new Hv(r,e):(Nf[i]||(Nf[i]=new Hv(r,e)),c=Nf[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(A0,{Manager:Hv,Socket:wP,io:A0,connect:A0});var ui=Tp.getLogger("SecurePubSub");class kj{constructor(e={}){me(this,"options",void 0),me(this,"SOCKET_CONN",null),this.options=e,this.options.timeout=e.timeout||600,this.options.serverUrl=e.serverUrl||yw,this.options.socketUrl=e.socketUrl||xE,this.options.enableLogging=e.enableLogging||!1,this.options.namespace=e.namespace||"",this.options.sameIpCheck=e.sameIpCheck||!1,this.options.sameOriginCheck=e.sameOriginCheck||!1,this.options.enableLogging?ui.enableAll():ui.disableAll()}static setLogLevel(e){ui.setLevel(e),_9(e)}async publish(e,n){const r=md(Ne.from(e,"utf8")),i=await x0(r.toString("hex"),n),s=await v0(r,md(Ne.from(i,"utf8"))),o={key:Nc(r).toString("hex"),data:i,signature:s.toString("hex"),timeout:this.options.timeout,namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck};return Pp(`${this.options.serverUrl}/channel/set`,o)}async subscribe(e){let n=!0;const r=md(Ne.from(e,"utf8")),i=Nc(r).toString("hex"),s=this.getSocketConnection();s.connected?(ui.debug("already connected with socket"),s.emit("check_auth_status",i,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck})):s.once("connect",()=>{ui.debug("connected with socket"),s.emit("check_auth_status",i,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck})});const o=()=>{s.once("connect",async()=>{ui.debug("connected with socket using reconnect"),n&&s.emit("check_auth_status",i,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,sameOriginCheck:this.options.sameOriginCheck})})},a=()=>{n||document.removeEventListener("visibilitychange",a),!s.connected&&document.visibilityState==="visible"&&o()},c=()=>{ui.debug("socket disconnected",n),n?(ui.error("socket disconnected unexpectedly, reconnecting socket"),o()):s.removeListener("disconnect",c)};s.on("disconnect",c);const l=new Promise((u,d)=>{const f=async h=>{try{const p=await nP(r.toString("hex"),h);ui.info("got data",p),u(p)}catch(p){ui.error(p),d(p)}finally{n=!1,document.removeEventListener("visibilitychange",a)}};ui.info("listening to",`${i}_success`),s.once(`${i}_success`,f)});return typeof document<"u"&&document.addEventListener("visibilitychange",a),l}cleanup(){this.SOCKET_CONN&&(this.SOCKET_CONN.disconnect(),this.SOCKET_CONN=null)}getSocketConnection(){if(this.SOCKET_CONN)return this.SOCKET_CONN;const e=A0(this.options.socketUrl,{transports:["websocket","polling"],withCredentials:!0,reconnectionDelayMax:1e4,reconnectionAttempts:10});return e.on("connect_error",n=>{e.io.opts.transports=["polling","websocket"],ui.error("connect error",n)}),e.on("connect",async()=>{const{engine:n}=e.io;ui.debug("initially connected to",n.transport.name),n.once("upgrade",()=>{ui.debug("upgraded",n.transport.name)}),n.once("close",r=>{ui.debug("connection closed",r)})}),e.on("error",n=>{ui.error("socket errored",n),e.disconnect()}),this.SOCKET_CONN=e,this.SOCKET_CONN}}const Aj={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},yP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},tr={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Ii={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},yc={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Se{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5)){if(n[0]===1&&n[1]<6)return"Cupcake";if(n[0]===1&&n[1]>=6)return"Donut";if(n[0]===2&&n[1]<2)return"Eclair";if(n[0]===2&&n[1]===2)return"Froyo";if(n[0]===2&&n[1]>2)return"Gingerbread";if(n[0]===3)return"Honeycomb";if(n[0]===4&&n[1]<1)return"Ice Cream Sandwich";if(n[0]===4&&n[1]<4)return"Jelly Bean";if(n[0]===4&&n[1]>=4)return"KitKat";if(n[0]===5)return"Lollipop";if(n[0]===6)return"Marshmallow";if(n[0]===7)return"Nougat";if(n[0]===8)return"Oreo";if(n[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const i=Se.getVersionPrecision(e),s=Se.getVersionPrecision(n);let o=Math.max(i,s),a=0;const c=Se.map([e,n],l=>{const u=o-Se.getVersionPrecision(l),d=l+new Array(u+1).join(".0");return Se.map(d.split("."),f=>new Array(20-f.length).join("0")+f).reverse()});for(r&&(a=o-Math.min(i,s)),o-=1;o>=a;){if(c[0][o]>c[1][o])return 1;if(c[0][o]===c[1][o]){if(o===a)return 0;o-=1}else if(c[0][o]<c[1][o])return-1}}static map(e,n){const r=[];let i;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(i=0;i<e.length;i+=1)r.push(n(e[i]));return r}static find(e,n){let r,i;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,i=e.length;r<i;r+=1){const s=e[r];if(n(s,r))return s}}static assign(e,...n){const r=e;let i,s;if(Object.assign)return Object.assign(e,...n);for(i=0,s=n.length;i<s;i+=1){const o=n[i];typeof o=="object"&&o!==null&&Object.keys(o).forEach(c=>{r[c]=o[c]})}return e}static getBrowserAlias(e){return Aj[e]}static getBrowserTypeByAlias(e){return yP[e]||""}}const wn=/version\/(\d+(\.?_?\d+)+)/i,Ij=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=Se.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=Se.getFirstMatch(wn,t)||Se.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=Se.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=Se.getFirstMatch(wn,t)||Se.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=Se.getFirstMatch(wn,t)||Se.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=Se.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=Se.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=Se.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=Se.getFirstMatch(wn,t)||Se.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=Se.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=Se.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=Se.getFirstMatch(wn,t)||Se.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=Se.getFirstMatch(wn,t)||Se.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=Se.getFirstMatch(wn,t)||Se.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=Se.getFirstMatch(wn,t)||Se.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=Se.getFirstMatch(wn,t)||Se.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=Se.getFirstMatch(wn,t)||Se.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=Se.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=Se.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=Se.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=Se.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=Se.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=Se.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=Se.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=Se.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=Se.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=Se.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=Se.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=Se.getFirstMatch(wn,t)||Se.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=Se.getFirstMatch(wn,t)||Se.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=Se.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=Se.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=Se.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=Se.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=Se.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=Se.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=Se.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=Se.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=Se.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=Se.getFirstMatch(wn,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,n=/^(.*)\/(.*)[ \t]\((.*)/,i=t.search("\\(")!==-1?n:e;return{name:Se.getFirstMatch(i,t),version:Se.getSecondMatch(i,t)}}}],Cj=[{test:[/Roku\/DVP/],describe(t){const e=Se.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:Ii.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=Se.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:Ii.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=Se.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=Se.getWindowsVersionName(e);return{name:Ii.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:Ii.iOS},n=Se.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=Se.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=Se.getMacOSVersionName(e),r={name:Ii.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=Se.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:Ii.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=Se.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=Se.getAndroidVersionName(e),r={name:Ii.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=Se.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:Ii.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=Se.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||Se.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||Se.getFirstMatch(/\bbb(\d+)/i,t);return{name:Ii.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=Se.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:Ii.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=Se.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:Ii.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:Ii.Linux}}},{test:[/CrOS/],describe(){return{name:Ii.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=Se.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:Ii.PlayStation4,version:e}}}],Rj=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=Se.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:tr.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:tr.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:tr.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:tr.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:tr.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:tr.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:tr.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=Se.getFirstMatch(/(ipod|iphone)/i,t);return{type:tr.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:tr.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:tr.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:tr.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:tr.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:tr.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:tr.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:tr.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:tr.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:tr.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:tr.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:tr.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:tr.tv}}}],Tj=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:yc.Blink};const n=Se.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:yc.EdgeHTML,version:n}}},{test:[/trident/i],describe(t){const e={name:yc.Trident},n=Se.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:yc.Presto},n=Se.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:yc.Gecko},n=Se.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:yc.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:yc.WebKit},n=Se.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class F_{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=Se.find(Ij,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=Se.find(Cj,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=Se.find(Rj,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=Se.find(Tj,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Se.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const i={};let s=0;if(Object.keys(e).forEach(a=>{const c=e[a];typeof c=="string"?(i[a]=c,s+=1):typeof c=="object"&&(n[a]=c,r+=1)}),r>0){const a=Object.keys(n),c=Se.find(a,u=>this.isOS(u));if(c){const u=this.satisfies(n[c]);if(u!==void 0)return u}const l=Se.find(a,u=>this.isPlatform(u));if(l){const u=this.satisfies(n[l]);if(u!==void 0)return u}}if(s>0){const a=Object.keys(i),c=Se.find(a,l=>this.isBrowser(l,!0));if(c!==void 0)return this.compareVersion(i[c])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let i=e.toLowerCase();const s=Se.getBrowserTypeByAlias(i);return n&&s&&(i=s.toLowerCase()),i===r}compareVersion(e){let n=[0],r=e,i=!1;const s=this.getBrowserVersion();if(typeof s=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(i=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(i=!0,r=e.substr(1)),n.indexOf(Se.compareVersions(s,r,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Vl{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new F_(e,n)}static parse(e){return new F_(e).getResult()}static get BROWSER_MAP(){return yP}static get ENGINE_MAP(){return yc}static get OS_MAP(){return Ii}static get PLATFORMS_MAP(){return tr}}var bP={exports:{}},AE={},IE={};Object.defineProperty(IE,"__esModule",{value:!0});function Oj(t){var e=4,n=t.length,r=n%e;if(!r)return t;var i=n,s=e-r,o=n+s,a=Ne.alloc(o);for(a.write(t);s--;)a.write("=",i++);return a.toString()}IE.default=Oj;Object.defineProperty(AE,"__esModule",{value:!0});var Pj=IE;function vP(t,e){return e===void 0&&(e="utf8"),Ne.isBuffer(t)?Wv(t.toString("base64")):Wv(Ne.from(t,e).toString("base64"))}function Nj(t,e){return e===void 0&&(e="utf8"),Ne.from(CE(t),"base64").toString(e)}function CE(t){return t=t.toString(),Pj.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function Wv(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lj(t){return Ne.from(CE(t),"base64")}var nf=vP;nf.encode=vP;nf.decode=Nj;nf.toBase64=CE;nf.fromBase64=Wv;nf.toBuffer=Lj;AE.default=nf;(function(t){t.exports=AE.default,t.exports.default=t.exports})(bP);var Dj=bP.exports;const $j=vi(Dj),xP=$j;function z_(t){return xP.decode(t)}function Pg(t){return xP.encode(JSON.stringify(t))}function K_(t){let e=!1,n=0,r;try{r=window[t],e=!0,n=r.length;const i="__storage_test__";return r.setItem(i,i),r.removeItem(i),!0}catch(i){const s=i;return s&&(s.code===22||s.code===1014||s.name==="QuotaExceededError"||s.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&n!==0}}const EP=Cn,Bj=Ac,Ko={POPUP:"popup",REDIRECT:"redirect"},Ka=fe(fe({},Bj),EP),Mj={OTHER:"other"},un={GOOGLE:"google",FACEBOOK:"facebook",REDDIT:"reddit",DISCORD:"discord",TWITCH:"twitch",APPLE:"apple",LINE:"line",GITHUB:"github",KAKAO:"kakao",LINKEDIN:"linkedin",TWITTER:"twitter",WEIBO:"weibo",WECHAT:"wechat",FARCASTER:"farcaster",EMAIL_PASSWORDLESS:"email_passwordless",SMS_PASSWORDLESS:"sms_passwordless",WEBAUTHN:"webauthn",JWT:"jwt",PASSKEYS:"passkeys",AUTHENTICATOR:"authenticator"},Lf={LOGIN:"login",ENABLE_MFA:"enable_mfa",MANAGE_MFA:"manage_mfa",ADD_AUTHENTICATOR_FACTOR:"add_authenticator_factor",ADD_PASSKEY_FACTOR:"add_passkey_factor"},No={PRODUCTION:"production",DEVELOPMENT:"development",STAGING:"staging",TESTING:"testing"},H_="9.6.4";function Uj(t=!1){const e={},n=new URLSearchParams(window.location.search.slice(1));n.forEach((o,a)=>{a!=="b64Params"&&(e[a]=o)});const r=n.get("b64Params");if(r)try{const o=JSON.parse(z_(r));Object.keys(o).forEach(a=>{e[a]=o[a]})}catch(o){ou.error(o)}const i=new URLSearchParams(window.location.hash.substring(1));i.forEach((o,a)=>{a!=="b64Params"&&(e[a]=o)});const s=i.get("b64Params");if(s)try{const o=JSON.parse(z_(s));Object.keys(o).forEach(a=>{e[a]=o[a]})}catch(o){ou.error(o)}if(t){const o=new URL(window.location.origin+window.location.pathname);n.size!==0&&(n.delete("error"),n.delete("state"),n.delete("b64Params"),n.delete("sessionNamespace"),o.search=n.toString()),i.size!==0&&(i.delete("error"),i.delete("state"),i.delete("b64Params"),i.delete("sessionNamespace"),o.hash=i.toString()),window.history.replaceState(fe(fe({},window.history.state),{},{as:o.href,url:o.href}),"",o.href)}return e}function I0(t){const{baseURL:e,query:n,hash:r}=t,i=new URL(e);if(n&&Object.keys(n).forEach(s=>{i.searchParams.append(s,n[s])}),r){const s=new URL(I0({baseURL:e,query:r})).searchParams.toString();i.hash=s}return i.toString()}function jj(){if(typeof window>"u")return"";const t=window.screenLeft!==void 0?window.screenLeft:window.screenX,e=window.screenTop!==void 0?window.screenTop:window.screenY,n=1200,r=700,i=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,o=1,a=Math.abs((i-n)/2/o+t),c=Math.abs((s-r)/2/o+e);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${r/o},width=${n/o},top=${c},left=${a}`}function Fj(){if(typeof window>"u")return!1;const e=Vl.getParser(window.navigator.userAgent).getPlatform();return e.type===Vl.PLATFORMS_MAP.tablet||e.type===Vl.PLATFORMS_MAP.mobile}function W_(t){return(t===un.FACEBOOK||t===un.LINE)&&Fj()?1e3*60*5:1e3*10}class zj extends xi.EventEmitter{constructor({url:e,target:n,features:r,timeout:i=3e4,sessionSocketUrl:s,sessionServerUrl:o}){super(),me(this,"url",void 0),me(this,"target",void 0),me(this,"features",void 0),me(this,"window",void 0),me(this,"windowTimer",void 0),me(this,"iClosedWindow",void 0),me(this,"timeout",void 0),me(this,"sessionSocketUrl",void 0),me(this,"sessionServerUrl",void 0),this.url=e,this.target=n||"_blank",this.features=r||jj(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=i,this.sessionServerUrl=o||yw,this.sessionSocketUrl=s||xE,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var e;if(this.window=window.open(this.url,this.target,this.features),!this.window)throw Sn.popupBlocked();(e=this.window)!==null&&e!==void 0&&e.focus&&this.window.focus()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url):window.location.href=this.url}async listenOnChannel(e){const n=new kj({serverUrl:this.sessionServerUrl,socketUrl:this.sessionSocketUrl}),r=await n.subscribe(e);this.close(),n.cleanup();const i=JSON.parse(r);return i.error?{error:i.error,state:i.state}:i.data}}class Kj{constructor(){me(this,"store",new Map)}getItem(e){return this.store.get(e)||null}setItem(e,n){this.store.set(e,n)}removeItem(e){this.store.delete(e)}}class SP{constructor(e,n){me(this,"storage",void 0),me(this,"_storeKey",void 0),this.storage=n,this._storeKey=e;try{n.getItem(e)||this.resetStore()}catch{}}static getInstance(e,n="local"){if(!this.instanceMap.has(e)){let r;n==="local"&&K_("localStorage")?r=window.localStorage:n==="session"&&K_("sessionStorage")?r=window.sessionStorage:r=new Kj,this.instanceMap.set(e,new this(e,r))}return this.instanceMap.get(e)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.removeItem(this._storeKey),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,n){const r=JSON.parse(this.storage.getItem(this._storeKey)||"{}");r[e]=n,this.storage.setItem(this._storeKey,JSON.stringify(r))}}me(SP,"instanceMap",new Map);class Hj{constructor(e){if(me(this,"state",{}),me(this,"options",void 0),me(this,"sessionManager",void 0),me(this,"currentStorage",void 0),me(this,"_storageBaseKey","auth_store"),me(this,"dappState",void 0),me(this,"addVersionInUrls",!0),!e.clientId)throw ja.invalidParams("clientId is required");if(e.network||(e.network=Ka.SAPPHIRE_MAINNET),e.buildEnv||(e.buildEnv=No.PRODUCTION),(e.buildEnv===No.DEVELOPMENT||e.buildEnv===No.TESTING||e.sdkUrl)&&(this.addVersionInUrls=!1),!e.sdkUrl&&!e.useMpc&&(e.buildEnv===No.DEVELOPMENT?(e.sdkUrl="http://localhost:3000",e.dashboardUrl="http://localhost:5173"):e.buildEnv===No.STAGING?(e.sdkUrl="https://staging-auth.web3auth.io",e.dashboardUrl="https://staging-account.web3auth.io"):e.buildEnv===No.TESTING?(e.sdkUrl="https://develop-auth.web3auth.io",e.dashboardUrl="https://develop-account.web3auth.io"):(e.sdkUrl="https://auth.web3auth.io",e.dashboardUrl="https://account.web3auth.io")),e.useMpc&&!e.sdkUrl){if(Object.values(EP).includes(e.network))throw ja.invalidParams("MPC is not supported on legacy networks, please use sapphire_devnet or sapphire_mainnet.");e.buildEnv===No.DEVELOPMENT?e.sdkUrl="http://localhost:3000":e.buildEnv===No.STAGING?e.sdkUrl="https://staging-mpc-auth.web3auth.io":e.buildEnv===No.TESTING?e.sdkUrl="https://develop-mpc-auth.web3auth.io":e.sdkUrl="https://mpc-auth.web3auth.io"}!e.redirectUrl&&typeof window<"u"&&(e.redirectUrl=`${window.location.protocol}//${window.location.host}${window.location.pathname}`),e.uxMode||(e.uxMode=Ko.REDIRECT),typeof e.replaceUrlOnRedirect!="boolean"&&(e.replaceUrlOnRedirect=!0),e.originData||(e.originData={}),e.whiteLabel||(e.whiteLabel={}),e.loginConfig||(e.loginConfig={}),e.mfaSettings||(e.mfaSettings={}),e.storageServerUrl||(e.storageServerUrl=yw),e.sessionSocketUrl||(e.sessionSocketUrl=xE),e.storageKey||(e.storageKey="local"),e.webauthnTransports||(e.webauthnTransports=["internal"]),e.sessionTime||(e.sessionTime=86400),this.options=e}get privKey(){return this.options.useMpc?this.state.factorKey||"":this.state.privKey?this.state.privKey.padStart(64,"0"):""}get coreKitKey(){return this.state.coreKitKey?this.state.coreKitKey.padStart(64,"0"):""}get ed25519PrivKey(){return this.state.ed25519PrivKey?this.state.ed25519PrivKey.padStart(128,"0"):""}get coreKitEd25519Key(){return this.state.coreKitEd25519PrivKey?this.state.coreKitEd25519PrivKey.padStart(128,"0"):""}get sessionId(){return this.state.sessionId||""}get sessionNamespace(){return this.options.sessionNamespace||""}get appState(){return this.state.userInfo.appState||this.dappState||""}get baseUrl(){return this.addVersionInUrls?`${this.options.sdkUrl}/v${H_.split(".")[0]}`:`${this.options.sdkUrl}`}get dashboardUrl(){return this.addVersionInUrls?`${this.options.dashboardUrl}/v${H_.split(".")[0]}`:`${this.options.dashboardUrl}`}async init(){const e=Uj(this.options.replaceUrlOnRedirect);e.sessionNamespace&&(this.options.sessionNamespace=e.sessionNamespace);const n=this.options.sessionNamespace?`${this._storageBaseKey}_${this.options.sessionNamespace}`:this._storageBaseKey;this.currentStorage=SP.getInstance(n,this.options.storageKey);const r=this.currentStorage.get("sessionId");if(this.sessionManager=new Rg({sessionServerBaseUrl:this.options.storageServerUrl,sessionNamespace:this.options.sessionNamespace,sessionTime:this.options.sessionTime,sessionId:r,allowedOrigin:this.options.sdkUrl}),(this.options.network===Ka.TESTNET||this.options.network===Ka.SAPPHIRE_DEVNET)&&console.log(`%c WARNING! You are on ${this.options.network}. Please set network: 'mainnet' or 'sapphire_mainnet' in production`,"color: #FF0000"),this.options.buildEnv!==No.PRODUCTION&&console.log(`%c WARNING! You are using build env ${this.options.buildEnv}. Please set buildEnv: 'production' in production`,"color: #FF0000"),e.error)throw this.dappState=e.state,Sn.loginFailed(e.error);if(e.sessionId&&(this.currentStorage.set("sessionId",e.sessionId),this.sessionManager.sessionId=e.sessionId),this.sessionManager.sessionId){const i=await this._authorizeSession();this.updateState(i),Object.keys(i).length===0?this.currentStorage.set("sessionId",""):this.updateState({sessionId:this.sessionManager.sessionId})}}async login(e){if(!e.loginProvider)throw Sn.invalidLoginParams("loginProvider is required");const n={redirectUrl:this.options.redirectUrl},r=fe(fe({loginProvider:e.loginProvider},n),e),i={actionType:Lf.LOGIN,options:this.options,params:r},s=await this.authHandler(`${this.baseUrl}/start`,i,W_(e.loginProvider));if(this.options.uxMode===Ko.REDIRECT)return null;if(s.error)throw this.dappState=s.state,Sn.loginFailed(s.error);return this.sessionManager.sessionId=s.sessionId,this.options.sessionNamespace=s.sessionNamespace,this.currentStorage.set("sessionId",s.sessionId),await this.rehydrateSession(),{privKey:this.privKey}}async logout(){if(!this.sessionManager.sessionId)throw Sn.userNotLoggedIn();await this.sessionManager.invalidateSession(),this.updateState({privKey:"",coreKitKey:"",coreKitEd25519PrivKey:"",ed25519PrivKey:"",walletKey:"",oAuthPrivateKey:"",tKey:"",metadataNonce:"",keyMode:void 0,userInfo:{name:"",profileImage:"",dappShare:"",idToken:"",oAuthIdToken:"",oAuthAccessToken:"",appState:"",email:"",verifier:"",verifierId:"",aggregateVerifier:"",typeOfLogin:"",isMfaEnabled:!1},authToken:"",sessionId:"",factorKey:"",signatures:[],tssShareIndex:-1,tssPubKey:"",tssShare:"",tssNonce:-1}),this.currentStorage.set("sessionId","")}async enableMFA(e){var n;if(!this.sessionId)throw Sn.userNotLoggedIn();if(this.state.userInfo.isMfaEnabled)throw Sn.mfaAlreadyEnabled();const r={redirectUrl:this.options.redirectUrl},i={actionType:Lf.ENABLE_MFA,options:this.options,params:fe(fe(fe({},r),e),{},{loginProvider:this.state.userInfo.typeOfLogin,extraLoginOptions:{login_hint:this.state.userInfo.verifierId},mfaLevel:"mandatory"}),sessionId:this.sessionId},s=await this.authHandler(`${this.baseUrl}/start`,i,W_(i.params.loginProvider));if(this.options.uxMode===Ko.REDIRECT)return null;if(s.error)throw this.dappState=s.state,Sn.loginFailed(s.error);return this.sessionManager.sessionId=s.sessionId,this.options.sessionNamespace=s.sessionNamespace,this.currentStorage.set("sessionId",s.sessionId),await this.rehydrateSession(),!!(!((n=this.state.userInfo)===null||n===void 0)&&n.isMfaEnabled)}async manageMFA(e){if(!this.sessionId)throw Sn.userNotLoggedIn();if(!this.state.userInfo.isMfaEnabled)throw Sn.mfaNotEnabled();const n={redirectUrl:`${this.dashboardUrl}/wallet/account`,dappUrl:`${window.location.origin}${window.location.pathname}`},r=Rg.generateRandomSessionKey(),i={actionType:Lf.MANAGE_MFA,options:fe(fe({},this.options),{},{uxMode:"redirect"}),params:fe(fe(fe({},n),e),{},{loginProvider:this.state.userInfo.typeOfLogin,extraLoginOptions:{login_hint:this.state.userInfo.verifierId},appState:Pg({loginId:r})}),sessionId:this.sessionId};this.createLoginSession(r,i,i.options.sessionTime,!0);const s={loginId:r,sessionNamespace:this.options.sessionNamespace,storageServerUrl:this.options.storageServerUrl},o=I0({baseURL:`${this.baseUrl}/start`,hash:{b64Params:Pg(s)}});window.open(o,"_blank")}async manageSocialFactor(e,n){if(!this.sessionId)throw Sn.userNotLoggedIn();const r={redirectUrl:this.options.redirectUrl},i={actionType:e,options:this.options,params:fe(fe({},r),n),sessionId:this.sessionId},s=await this.authHandler(`${this.baseUrl}/start`,i);if(this.options.uxMode!==Ko.REDIRECT)return!s.error}async addAuthenticatorFactor(e){if(!this.sessionId)throw Sn.userNotLoggedIn();const n={redirectUrl:this.options.redirectUrl},r={actionType:Lf.ADD_AUTHENTICATOR_FACTOR,options:this.options,params:fe(fe(fe({},n),e),{},{loginProvider:un.AUTHENTICATOR}),sessionId:this.sessionId},i=await this.authHandler(`${this.baseUrl}/start`,r);if(this.options.uxMode!==Ko.REDIRECT)return!i.error}async addPasskeyFactor(e){if(!this.sessionId)throw Sn.userNotLoggedIn();const n={redirectUrl:this.options.redirectUrl},r={actionType:Lf.ADD_PASSKEY_FACTOR,options:this.options,params:fe(fe(fe({},n),e),{},{loginProvider:un.PASSKEYS}),sessionId:this.sessionId},i=await this.authHandler(`${this.baseUrl}/start`,r);if(this.options.uxMode!==Ko.REDIRECT)return!i.error}getUserInfo(){if(!this.sessionManager.sessionId)throw Sn.userNotLoggedIn();return this.state.userInfo}async createLoginSession(e,n,r=600,i=!1){if(!this.sessionManager)throw ja.notInitialized();const o=new Rg({sessionServerBaseUrl:n.options.storageServerUrl,sessionNamespace:n.options.sessionNamespace,sessionTime:r,sessionId:e,allowedOrigin:this.options.sdkUrl}).createSession(JSON.parse(JSON.stringify(n)));n.options.uxMode===Ko.REDIRECT&&!i&&await o}async _authorizeSession(){try{return this.sessionManager.sessionId?await this.sessionManager.authorizeSession():{}}catch(e){return ou.error("authorization failed",e),{}}}updateState(e){this.state=fe(fe({},this.state),e)}async rehydrateSession(){const e=await this._authorizeSession();this.updateState(e)}async authHandler(e,n,r=1e3*10){const i=Rg.generateRandomSessionKey();await this.createLoginSession(i,n);const s={loginId:i,sessionNamespace:this.options.sessionNamespace,storageServerUrl:this.options.storageServerUrl};if(this.options.uxMode===Ko.REDIRECT){const c=I0({baseURL:e,hash:{b64Params:Pg(s)}});window.location.href=c;return}const o=I0({baseURL:e,hash:{b64Params:Pg(s)}}),a=new zj({url:o,timeout:r,sessionServerUrl:this.options.storageServerUrl,sessionSocketUrl:this.options.sessionSocketUrl});return new Promise((c,l)=>{a.on("close",()=>{l(Sn.popupClosed())}),a.listenOnChannel(i).then(c).catch(l);try{a.open()}catch(u){l(u)}})}}var _P={exports:{}};(function(t){(function(e){var n=function(_){var $,P=new Float64Array(16);if(_)for($=0;$<_.length;$++)P[$]=_[$];return P},r=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=n(),a=n([1]),c=n([56129,1]),l=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(_,$,P,v){_[$]=P>>24&255,_[$+1]=P>>16&255,_[$+2]=P>>8&255,_[$+3]=P&255,_[$+4]=v>>24&255,_[$+5]=v>>16&255,_[$+6]=v>>8&255,_[$+7]=v&255}function g(_,$,P,v,U){var ie,ce=0;for(ie=0;ie<U;ie++)ce|=_[$+ie]^P[v+ie];return(1&ce-1>>>8)-1}function w(_,$,P,v){return g(_,$,P,v,16)}function y(_,$,P,v){return g(_,$,P,v,32)}function b(_,$,P,v){for(var U=v[0]&255|(v[1]&255)<<8|(v[2]&255)<<16|(v[3]&255)<<24,ie=P[0]&255|(P[1]&255)<<8|(P[2]&255)<<16|(P[3]&255)<<24,ce=P[4]&255|(P[5]&255)<<8|(P[6]&255)<<16|(P[7]&255)<<24,we=P[8]&255|(P[9]&255)<<8|(P[10]&255)<<16|(P[11]&255)<<24,Te=P[12]&255|(P[13]&255)<<8|(P[14]&255)<<16|(P[15]&255)<<24,Ve=v[4]&255|(v[5]&255)<<8|(v[6]&255)<<16|(v[7]&255)<<24,Fe=$[0]&255|($[1]&255)<<8|($[2]&255)<<16|($[3]&255)<<24,Ot=$[4]&255|($[5]&255)<<8|($[6]&255)<<16|($[7]&255)<<24,Ke=$[8]&255|($[9]&255)<<8|($[10]&255)<<16|($[11]&255)<<24,yt=$[12]&255|($[13]&255)<<8|($[14]&255)<<16|($[15]&255)<<24,bt=v[8]&255|(v[9]&255)<<8|(v[10]&255)<<16|(v[11]&255)<<24,mt=P[16]&255|(P[17]&255)<<8|(P[18]&255)<<16|(P[19]&255)<<24,kt=P[20]&255|(P[21]&255)<<8|(P[22]&255)<<16|(P[23]&255)<<24,vt=P[24]&255|(P[25]&255)<<8|(P[26]&255)<<16|(P[27]&255)<<24,St=P[28]&255|(P[29]&255)<<8|(P[30]&255)<<16|(P[31]&255)<<24,xt=v[12]&255|(v[13]&255)<<8|(v[14]&255)<<16|(v[15]&255)<<24,Qe=U,st=ie,Ze=ce,et=we,Xe=Te,Ge=Ve,he=Fe,pe=Ot,ke=Ke,be=yt,ve=bt,Ie=mt,lt=kt,Et=vt,Rt=St,At=xt,G,Lt=0;Lt<20;Lt+=2)G=Qe+lt|0,Xe^=G<<7|G>>>25,G=Xe+Qe|0,ke^=G<<9|G>>>23,G=ke+Xe|0,lt^=G<<13|G>>>19,G=lt+ke|0,Qe^=G<<18|G>>>14,G=Ge+st|0,be^=G<<7|G>>>25,G=be+Ge|0,Et^=G<<9|G>>>23,G=Et+be|0,st^=G<<13|G>>>19,G=st+Et|0,Ge^=G<<18|G>>>14,G=ve+he|0,Rt^=G<<7|G>>>25,G=Rt+ve|0,Ze^=G<<9|G>>>23,G=Ze+Rt|0,he^=G<<13|G>>>19,G=he+Ze|0,ve^=G<<18|G>>>14,G=At+Ie|0,et^=G<<7|G>>>25,G=et+At|0,pe^=G<<9|G>>>23,G=pe+et|0,Ie^=G<<13|G>>>19,G=Ie+pe|0,At^=G<<18|G>>>14,G=Qe+et|0,st^=G<<7|G>>>25,G=st+Qe|0,Ze^=G<<9|G>>>23,G=Ze+st|0,et^=G<<13|G>>>19,G=et+Ze|0,Qe^=G<<18|G>>>14,G=Ge+Xe|0,he^=G<<7|G>>>25,G=he+Ge|0,pe^=G<<9|G>>>23,G=pe+he|0,Xe^=G<<13|G>>>19,G=Xe+pe|0,Ge^=G<<18|G>>>14,G=ve+be|0,Ie^=G<<7|G>>>25,G=Ie+ve|0,ke^=G<<9|G>>>23,G=ke+Ie|0,be^=G<<13|G>>>19,G=be+ke|0,ve^=G<<18|G>>>14,G=At+Rt|0,lt^=G<<7|G>>>25,G=lt+At|0,Et^=G<<9|G>>>23,G=Et+lt|0,Rt^=G<<13|G>>>19,G=Rt+Et|0,At^=G<<18|G>>>14;Qe=Qe+U|0,st=st+ie|0,Ze=Ze+ce|0,et=et+we|0,Xe=Xe+Te|0,Ge=Ge+Ve|0,he=he+Fe|0,pe=pe+Ot|0,ke=ke+Ke|0,be=be+yt|0,ve=ve+bt|0,Ie=Ie+mt|0,lt=lt+kt|0,Et=Et+vt|0,Rt=Rt+St|0,At=At+xt|0,_[0]=Qe>>>0&255,_[1]=Qe>>>8&255,_[2]=Qe>>>16&255,_[3]=Qe>>>24&255,_[4]=st>>>0&255,_[5]=st>>>8&255,_[6]=st>>>16&255,_[7]=st>>>24&255,_[8]=Ze>>>0&255,_[9]=Ze>>>8&255,_[10]=Ze>>>16&255,_[11]=Ze>>>24&255,_[12]=et>>>0&255,_[13]=et>>>8&255,_[14]=et>>>16&255,_[15]=et>>>24&255,_[16]=Xe>>>0&255,_[17]=Xe>>>8&255,_[18]=Xe>>>16&255,_[19]=Xe>>>24&255,_[20]=Ge>>>0&255,_[21]=Ge>>>8&255,_[22]=Ge>>>16&255,_[23]=Ge>>>24&255,_[24]=he>>>0&255,_[25]=he>>>8&255,_[26]=he>>>16&255,_[27]=he>>>24&255,_[28]=pe>>>0&255,_[29]=pe>>>8&255,_[30]=pe>>>16&255,_[31]=pe>>>24&255,_[32]=ke>>>0&255,_[33]=ke>>>8&255,_[34]=ke>>>16&255,_[35]=ke>>>24&255,_[36]=be>>>0&255,_[37]=be>>>8&255,_[38]=be>>>16&255,_[39]=be>>>24&255,_[40]=ve>>>0&255,_[41]=ve>>>8&255,_[42]=ve>>>16&255,_[43]=ve>>>24&255,_[44]=Ie>>>0&255,_[45]=Ie>>>8&255,_[46]=Ie>>>16&255,_[47]=Ie>>>24&255,_[48]=lt>>>0&255,_[49]=lt>>>8&255,_[50]=lt>>>16&255,_[51]=lt>>>24&255,_[52]=Et>>>0&255,_[53]=Et>>>8&255,_[54]=Et>>>16&255,_[55]=Et>>>24&255,_[56]=Rt>>>0&255,_[57]=Rt>>>8&255,_[58]=Rt>>>16&255,_[59]=Rt>>>24&255,_[60]=At>>>0&255,_[61]=At>>>8&255,_[62]=At>>>16&255,_[63]=At>>>24&255}function m(_,$,P,v){for(var U=v[0]&255|(v[1]&255)<<8|(v[2]&255)<<16|(v[3]&255)<<24,ie=P[0]&255|(P[1]&255)<<8|(P[2]&255)<<16|(P[3]&255)<<24,ce=P[4]&255|(P[5]&255)<<8|(P[6]&255)<<16|(P[7]&255)<<24,we=P[8]&255|(P[9]&255)<<8|(P[10]&255)<<16|(P[11]&255)<<24,Te=P[12]&255|(P[13]&255)<<8|(P[14]&255)<<16|(P[15]&255)<<24,Ve=v[4]&255|(v[5]&255)<<8|(v[6]&255)<<16|(v[7]&255)<<24,Fe=$[0]&255|($[1]&255)<<8|($[2]&255)<<16|($[3]&255)<<24,Ot=$[4]&255|($[5]&255)<<8|($[6]&255)<<16|($[7]&255)<<24,Ke=$[8]&255|($[9]&255)<<8|($[10]&255)<<16|($[11]&255)<<24,yt=$[12]&255|($[13]&255)<<8|($[14]&255)<<16|($[15]&255)<<24,bt=v[8]&255|(v[9]&255)<<8|(v[10]&255)<<16|(v[11]&255)<<24,mt=P[16]&255|(P[17]&255)<<8|(P[18]&255)<<16|(P[19]&255)<<24,kt=P[20]&255|(P[21]&255)<<8|(P[22]&255)<<16|(P[23]&255)<<24,vt=P[24]&255|(P[25]&255)<<8|(P[26]&255)<<16|(P[27]&255)<<24,St=P[28]&255|(P[29]&255)<<8|(P[30]&255)<<16|(P[31]&255)<<24,xt=v[12]&255|(v[13]&255)<<8|(v[14]&255)<<16|(v[15]&255)<<24,Qe=U,st=ie,Ze=ce,et=we,Xe=Te,Ge=Ve,he=Fe,pe=Ot,ke=Ke,be=yt,ve=bt,Ie=mt,lt=kt,Et=vt,Rt=St,At=xt,G,Lt=0;Lt<20;Lt+=2)G=Qe+lt|0,Xe^=G<<7|G>>>25,G=Xe+Qe|0,ke^=G<<9|G>>>23,G=ke+Xe|0,lt^=G<<13|G>>>19,G=lt+ke|0,Qe^=G<<18|G>>>14,G=Ge+st|0,be^=G<<7|G>>>25,G=be+Ge|0,Et^=G<<9|G>>>23,G=Et+be|0,st^=G<<13|G>>>19,G=st+Et|0,Ge^=G<<18|G>>>14,G=ve+he|0,Rt^=G<<7|G>>>25,G=Rt+ve|0,Ze^=G<<9|G>>>23,G=Ze+Rt|0,he^=G<<13|G>>>19,G=he+Ze|0,ve^=G<<18|G>>>14,G=At+Ie|0,et^=G<<7|G>>>25,G=et+At|0,pe^=G<<9|G>>>23,G=pe+et|0,Ie^=G<<13|G>>>19,G=Ie+pe|0,At^=G<<18|G>>>14,G=Qe+et|0,st^=G<<7|G>>>25,G=st+Qe|0,Ze^=G<<9|G>>>23,G=Ze+st|0,et^=G<<13|G>>>19,G=et+Ze|0,Qe^=G<<18|G>>>14,G=Ge+Xe|0,he^=G<<7|G>>>25,G=he+Ge|0,pe^=G<<9|G>>>23,G=pe+he|0,Xe^=G<<13|G>>>19,G=Xe+pe|0,Ge^=G<<18|G>>>14,G=ve+be|0,Ie^=G<<7|G>>>25,G=Ie+ve|0,ke^=G<<9|G>>>23,G=ke+Ie|0,be^=G<<13|G>>>19,G=be+ke|0,ve^=G<<18|G>>>14,G=At+Rt|0,lt^=G<<7|G>>>25,G=lt+At|0,Et^=G<<9|G>>>23,G=Et+lt|0,Rt^=G<<13|G>>>19,G=Rt+Et|0,At^=G<<18|G>>>14;_[0]=Qe>>>0&255,_[1]=Qe>>>8&255,_[2]=Qe>>>16&255,_[3]=Qe>>>24&255,_[4]=Ge>>>0&255,_[5]=Ge>>>8&255,_[6]=Ge>>>16&255,_[7]=Ge>>>24&255,_[8]=ve>>>0&255,_[9]=ve>>>8&255,_[10]=ve>>>16&255,_[11]=ve>>>24&255,_[12]=At>>>0&255,_[13]=At>>>8&255,_[14]=At>>>16&255,_[15]=At>>>24&255,_[16]=he>>>0&255,_[17]=he>>>8&255,_[18]=he>>>16&255,_[19]=he>>>24&255,_[20]=pe>>>0&255,_[21]=pe>>>8&255,_[22]=pe>>>16&255,_[23]=pe>>>24&255,_[24]=ke>>>0&255,_[25]=ke>>>8&255,_[26]=ke>>>16&255,_[27]=ke>>>24&255,_[28]=be>>>0&255,_[29]=be>>>8&255,_[30]=be>>>16&255,_[31]=be>>>24&255}function x(_,$,P,v){b(_,$,P,v)}function E(_,$,P,v){m(_,$,P,v)}var A=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function k(_,$,P,v,U,ie,ce){var we=new Uint8Array(16),Te=new Uint8Array(64),Ve,Fe;for(Fe=0;Fe<16;Fe++)we[Fe]=0;for(Fe=0;Fe<8;Fe++)we[Fe]=ie[Fe];for(;U>=64;){for(x(Te,we,ce,A),Fe=0;Fe<64;Fe++)_[$+Fe]=P[v+Fe]^Te[Fe];for(Ve=1,Fe=8;Fe<16;Fe++)Ve=Ve+(we[Fe]&255)|0,we[Fe]=Ve&255,Ve>>>=8;U-=64,$+=64,v+=64}if(U>0)for(x(Te,we,ce,A),Fe=0;Fe<U;Fe++)_[$+Fe]=P[v+Fe]^Te[Fe];return 0}function S(_,$,P,v,U){var ie=new Uint8Array(16),ce=new Uint8Array(64),we,Te;for(Te=0;Te<16;Te++)ie[Te]=0;for(Te=0;Te<8;Te++)ie[Te]=v[Te];for(;P>=64;){for(x(ce,ie,U,A),Te=0;Te<64;Te++)_[$+Te]=ce[Te];for(we=1,Te=8;Te<16;Te++)we=we+(ie[Te]&255)|0,ie[Te]=we&255,we>>>=8;P-=64,$+=64}if(P>0)for(x(ce,ie,U,A),Te=0;Te<P;Te++)_[$+Te]=ce[Te];return 0}function C(_,$,P,v,U){var ie=new Uint8Array(32);E(ie,v,U,A);for(var ce=new Uint8Array(8),we=0;we<8;we++)ce[we]=v[we+16];return S(_,$,P,ce,ie)}function F(_,$,P,v,U,ie,ce){var we=new Uint8Array(32);E(we,ie,ce,A);for(var Te=new Uint8Array(8),Ve=0;Ve<8;Ve++)Te[Ve]=ie[Ve+16];return k(_,$,P,v,U,Te,we)}var N=function(_){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var $,P,v,U,ie,ce,we,Te;$=_[0]&255|(_[1]&255)<<8,this.r[0]=$&8191,P=_[2]&255|(_[3]&255)<<8,this.r[1]=($>>>13|P<<3)&8191,v=_[4]&255|(_[5]&255)<<8,this.r[2]=(P>>>10|v<<6)&7939,U=_[6]&255|(_[7]&255)<<8,this.r[3]=(v>>>7|U<<9)&8191,ie=_[8]&255|(_[9]&255)<<8,this.r[4]=(U>>>4|ie<<12)&255,this.r[5]=ie>>>1&8190,ce=_[10]&255|(_[11]&255)<<8,this.r[6]=(ie>>>14|ce<<2)&8191,we=_[12]&255|(_[13]&255)<<8,this.r[7]=(ce>>>11|we<<5)&8065,Te=_[14]&255|(_[15]&255)<<8,this.r[8]=(we>>>8|Te<<8)&8191,this.r[9]=Te>>>5&127,this.pad[0]=_[16]&255|(_[17]&255)<<8,this.pad[1]=_[18]&255|(_[19]&255)<<8,this.pad[2]=_[20]&255|(_[21]&255)<<8,this.pad[3]=_[22]&255|(_[23]&255)<<8,this.pad[4]=_[24]&255|(_[25]&255)<<8,this.pad[5]=_[26]&255|(_[27]&255)<<8,this.pad[6]=_[28]&255|(_[29]&255)<<8,this.pad[7]=_[30]&255|(_[31]&255)<<8};N.prototype.blocks=function(_,$,P){for(var v=this.fin?0:2048,U,ie,ce,we,Te,Ve,Fe,Ot,Ke,yt,bt,mt,kt,vt,St,xt,Qe,st,Ze,et=this.h[0],Xe=this.h[1],Ge=this.h[2],he=this.h[3],pe=this.h[4],ke=this.h[5],be=this.h[6],ve=this.h[7],Ie=this.h[8],lt=this.h[9],Et=this.r[0],Rt=this.r[1],At=this.r[2],G=this.r[3],Lt=this.r[4],qt=this.r[5],Vt=this.r[6],Pt=this.r[7],Kt=this.r[8],Ht=this.r[9];P>=16;)U=_[$+0]&255|(_[$+1]&255)<<8,et+=U&8191,ie=_[$+2]&255|(_[$+3]&255)<<8,Xe+=(U>>>13|ie<<3)&8191,ce=_[$+4]&255|(_[$+5]&255)<<8,Ge+=(ie>>>10|ce<<6)&8191,we=_[$+6]&255|(_[$+7]&255)<<8,he+=(ce>>>7|we<<9)&8191,Te=_[$+8]&255|(_[$+9]&255)<<8,pe+=(we>>>4|Te<<12)&8191,ke+=Te>>>1&8191,Ve=_[$+10]&255|(_[$+11]&255)<<8,be+=(Te>>>14|Ve<<2)&8191,Fe=_[$+12]&255|(_[$+13]&255)<<8,ve+=(Ve>>>11|Fe<<5)&8191,Ot=_[$+14]&255|(_[$+15]&255)<<8,Ie+=(Fe>>>8|Ot<<8)&8191,lt+=Ot>>>5|v,Ke=0,yt=Ke,yt+=et*Et,yt+=Xe*(5*Ht),yt+=Ge*(5*Kt),yt+=he*(5*Pt),yt+=pe*(5*Vt),Ke=yt>>>13,yt&=8191,yt+=ke*(5*qt),yt+=be*(5*Lt),yt+=ve*(5*G),yt+=Ie*(5*At),yt+=lt*(5*Rt),Ke+=yt>>>13,yt&=8191,bt=Ke,bt+=et*Rt,bt+=Xe*Et,bt+=Ge*(5*Ht),bt+=he*(5*Kt),bt+=pe*(5*Pt),Ke=bt>>>13,bt&=8191,bt+=ke*(5*Vt),bt+=be*(5*qt),bt+=ve*(5*Lt),bt+=Ie*(5*G),bt+=lt*(5*At),Ke+=bt>>>13,bt&=8191,mt=Ke,mt+=et*At,mt+=Xe*Rt,mt+=Ge*Et,mt+=he*(5*Ht),mt+=pe*(5*Kt),Ke=mt>>>13,mt&=8191,mt+=ke*(5*Pt),mt+=be*(5*Vt),mt+=ve*(5*qt),mt+=Ie*(5*Lt),mt+=lt*(5*G),Ke+=mt>>>13,mt&=8191,kt=Ke,kt+=et*G,kt+=Xe*At,kt+=Ge*Rt,kt+=he*Et,kt+=pe*(5*Ht),Ke=kt>>>13,kt&=8191,kt+=ke*(5*Kt),kt+=be*(5*Pt),kt+=ve*(5*Vt),kt+=Ie*(5*qt),kt+=lt*(5*Lt),Ke+=kt>>>13,kt&=8191,vt=Ke,vt+=et*Lt,vt+=Xe*G,vt+=Ge*At,vt+=he*Rt,vt+=pe*Et,Ke=vt>>>13,vt&=8191,vt+=ke*(5*Ht),vt+=be*(5*Kt),vt+=ve*(5*Pt),vt+=Ie*(5*Vt),vt+=lt*(5*qt),Ke+=vt>>>13,vt&=8191,St=Ke,St+=et*qt,St+=Xe*Lt,St+=Ge*G,St+=he*At,St+=pe*Rt,Ke=St>>>13,St&=8191,St+=ke*Et,St+=be*(5*Ht),St+=ve*(5*Kt),St+=Ie*(5*Pt),St+=lt*(5*Vt),Ke+=St>>>13,St&=8191,xt=Ke,xt+=et*Vt,xt+=Xe*qt,xt+=Ge*Lt,xt+=he*G,xt+=pe*At,Ke=xt>>>13,xt&=8191,xt+=ke*Rt,xt+=be*Et,xt+=ve*(5*Ht),xt+=Ie*(5*Kt),xt+=lt*(5*Pt),Ke+=xt>>>13,xt&=8191,Qe=Ke,Qe+=et*Pt,Qe+=Xe*Vt,Qe+=Ge*qt,Qe+=he*Lt,Qe+=pe*G,Ke=Qe>>>13,Qe&=8191,Qe+=ke*At,Qe+=be*Rt,Qe+=ve*Et,Qe+=Ie*(5*Ht),Qe+=lt*(5*Kt),Ke+=Qe>>>13,Qe&=8191,st=Ke,st+=et*Kt,st+=Xe*Pt,st+=Ge*Vt,st+=he*qt,st+=pe*Lt,Ke=st>>>13,st&=8191,st+=ke*G,st+=be*At,st+=ve*Rt,st+=Ie*Et,st+=lt*(5*Ht),Ke+=st>>>13,st&=8191,Ze=Ke,Ze+=et*Ht,Ze+=Xe*Kt,Ze+=Ge*Pt,Ze+=he*Vt,Ze+=pe*qt,Ke=Ze>>>13,Ze&=8191,Ze+=ke*Lt,Ze+=be*G,Ze+=ve*At,Ze+=Ie*Rt,Ze+=lt*Et,Ke+=Ze>>>13,Ze&=8191,Ke=(Ke<<2)+Ke|0,Ke=Ke+yt|0,yt=Ke&8191,Ke=Ke>>>13,bt+=Ke,et=yt,Xe=bt,Ge=mt,he=kt,pe=vt,ke=St,be=xt,ve=Qe,Ie=st,lt=Ze,$+=16,P-=16;this.h[0]=et,this.h[1]=Xe,this.h[2]=Ge,this.h[3]=he,this.h[4]=pe,this.h[5]=ke,this.h[6]=be,this.h[7]=ve,this.h[8]=Ie,this.h[9]=lt},N.prototype.finish=function(_,$){var P=new Uint16Array(10),v,U,ie,ce;if(this.leftover){for(ce=this.leftover,this.buffer[ce++]=1;ce<16;ce++)this.buffer[ce]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(v=this.h[1]>>>13,this.h[1]&=8191,ce=2;ce<10;ce++)this.h[ce]+=v,v=this.h[ce]>>>13,this.h[ce]&=8191;for(this.h[0]+=v*5,v=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=v,v=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=v,P[0]=this.h[0]+5,v=P[0]>>>13,P[0]&=8191,ce=1;ce<10;ce++)P[ce]=this.h[ce]+v,v=P[ce]>>>13,P[ce]&=8191;for(P[9]-=8192,U=(v^1)-1,ce=0;ce<10;ce++)P[ce]&=U;for(U=~U,ce=0;ce<10;ce++)this.h[ce]=this.h[ce]&U|P[ce];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,ie=this.h[0]+this.pad[0],this.h[0]=ie&65535,ce=1;ce<8;ce++)ie=(this.h[ce]+this.pad[ce]|0)+(ie>>>16)|0,this.h[ce]=ie&65535;_[$+0]=this.h[0]>>>0&255,_[$+1]=this.h[0]>>>8&255,_[$+2]=this.h[1]>>>0&255,_[$+3]=this.h[1]>>>8&255,_[$+4]=this.h[2]>>>0&255,_[$+5]=this.h[2]>>>8&255,_[$+6]=this.h[3]>>>0&255,_[$+7]=this.h[3]>>>8&255,_[$+8]=this.h[4]>>>0&255,_[$+9]=this.h[4]>>>8&255,_[$+10]=this.h[5]>>>0&255,_[$+11]=this.h[5]>>>8&255,_[$+12]=this.h[6]>>>0&255,_[$+13]=this.h[6]>>>8&255,_[$+14]=this.h[7]>>>0&255,_[$+15]=this.h[7]>>>8&255},N.prototype.update=function(_,$,P){var v,U;if(this.leftover){for(U=16-this.leftover,U>P&&(U=P),v=0;v<U;v++)this.buffer[this.leftover+v]=_[$+v];if(P-=U,$+=U,this.leftover+=U,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(P>=16&&(U=P-P%16,this.blocks(_,$,U),$+=U,P-=U),P){for(v=0;v<P;v++)this.buffer[this.leftover+v]=_[$+v];this.leftover+=P}};function L(_,$,P,v,U,ie){var ce=new N(ie);return ce.update(P,v,U),ce.finish(_,$),0}function j(_,$,P,v,U,ie){var ce=new Uint8Array(16);return L(ce,0,P,v,U,ie),w(_,$,ce,0)}function B(_,$,P,v,U){var ie;if(P<32)return-1;for(F(_,0,$,0,P,v,U),L(_,16,_,32,P-32,_),ie=0;ie<16;ie++)_[ie]=0;return 0}function O(_,$,P,v,U){var ie,ce=new Uint8Array(32);if(P<32||(C(ce,0,32,v,U),j($,16,$,32,P-32,ce)!==0))return-1;for(F(_,0,$,0,P,v,U),ie=0;ie<32;ie++)_[ie]=0;return 0}function R(_,$){var P;for(P=0;P<16;P++)_[P]=$[P]|0}function D(_){var $,P,v=1;for($=0;$<16;$++)P=_[$]+v+65535,v=Math.floor(P/65536),_[$]=P-v*65536;_[0]+=v-1+37*(v-1)}function T(_,$,P){for(var v,U=~(P-1),ie=0;ie<16;ie++)v=U&(_[ie]^$[ie]),_[ie]^=v,$[ie]^=v}function I(_,$){var P,v,U,ie=n(),ce=n();for(P=0;P<16;P++)ce[P]=$[P];for(D(ce),D(ce),D(ce),v=0;v<2;v++){for(ie[0]=ce[0]-65517,P=1;P<15;P++)ie[P]=ce[P]-65535-(ie[P-1]>>16&1),ie[P-1]&=65535;ie[15]=ce[15]-32767-(ie[14]>>16&1),U=ie[15]>>16&1,ie[14]&=65535,T(ce,ie,1-U)}for(P=0;P<16;P++)_[2*P]=ce[P]&255,_[2*P+1]=ce[P]>>8}function M(_,$){var P=new Uint8Array(32),v=new Uint8Array(32);return I(P,_),I(v,$),y(P,0,v,0)}function Y(_){var $=new Uint8Array(32);return I($,_),$[0]&1}function X(_,$){var P;for(P=0;P<16;P++)_[P]=$[2*P]+($[2*P+1]<<8);_[15]&=32767}function Z(_,$,P){for(var v=0;v<16;v++)_[v]=$[v]+P[v]}function le(_,$,P){for(var v=0;v<16;v++)_[v]=$[v]-P[v]}function ae(_,$,P){var v,U,ie=0,ce=0,we=0,Te=0,Ve=0,Fe=0,Ot=0,Ke=0,yt=0,bt=0,mt=0,kt=0,vt=0,St=0,xt=0,Qe=0,st=0,Ze=0,et=0,Xe=0,Ge=0,he=0,pe=0,ke=0,be=0,ve=0,Ie=0,lt=0,Et=0,Rt=0,At=0,G=P[0],Lt=P[1],qt=P[2],Vt=P[3],Pt=P[4],Kt=P[5],Ht=P[6],Ln=P[7],Zt=P[8],dn=P[9],Dn=P[10],$n=P[11],gn=P[12],br=P[13],vr=P[14],xr=P[15];v=$[0],ie+=v*G,ce+=v*Lt,we+=v*qt,Te+=v*Vt,Ve+=v*Pt,Fe+=v*Kt,Ot+=v*Ht,Ke+=v*Ln,yt+=v*Zt,bt+=v*dn,mt+=v*Dn,kt+=v*$n,vt+=v*gn,St+=v*br,xt+=v*vr,Qe+=v*xr,v=$[1],ce+=v*G,we+=v*Lt,Te+=v*qt,Ve+=v*Vt,Fe+=v*Pt,Ot+=v*Kt,Ke+=v*Ht,yt+=v*Ln,bt+=v*Zt,mt+=v*dn,kt+=v*Dn,vt+=v*$n,St+=v*gn,xt+=v*br,Qe+=v*vr,st+=v*xr,v=$[2],we+=v*G,Te+=v*Lt,Ve+=v*qt,Fe+=v*Vt,Ot+=v*Pt,Ke+=v*Kt,yt+=v*Ht,bt+=v*Ln,mt+=v*Zt,kt+=v*dn,vt+=v*Dn,St+=v*$n,xt+=v*gn,Qe+=v*br,st+=v*vr,Ze+=v*xr,v=$[3],Te+=v*G,Ve+=v*Lt,Fe+=v*qt,Ot+=v*Vt,Ke+=v*Pt,yt+=v*Kt,bt+=v*Ht,mt+=v*Ln,kt+=v*Zt,vt+=v*dn,St+=v*Dn,xt+=v*$n,Qe+=v*gn,st+=v*br,Ze+=v*vr,et+=v*xr,v=$[4],Ve+=v*G,Fe+=v*Lt,Ot+=v*qt,Ke+=v*Vt,yt+=v*Pt,bt+=v*Kt,mt+=v*Ht,kt+=v*Ln,vt+=v*Zt,St+=v*dn,xt+=v*Dn,Qe+=v*$n,st+=v*gn,Ze+=v*br,et+=v*vr,Xe+=v*xr,v=$[5],Fe+=v*G,Ot+=v*Lt,Ke+=v*qt,yt+=v*Vt,bt+=v*Pt,mt+=v*Kt,kt+=v*Ht,vt+=v*Ln,St+=v*Zt,xt+=v*dn,Qe+=v*Dn,st+=v*$n,Ze+=v*gn,et+=v*br,Xe+=v*vr,Ge+=v*xr,v=$[6],Ot+=v*G,Ke+=v*Lt,yt+=v*qt,bt+=v*Vt,mt+=v*Pt,kt+=v*Kt,vt+=v*Ht,St+=v*Ln,xt+=v*Zt,Qe+=v*dn,st+=v*Dn,Ze+=v*$n,et+=v*gn,Xe+=v*br,Ge+=v*vr,he+=v*xr,v=$[7],Ke+=v*G,yt+=v*Lt,bt+=v*qt,mt+=v*Vt,kt+=v*Pt,vt+=v*Kt,St+=v*Ht,xt+=v*Ln,Qe+=v*Zt,st+=v*dn,Ze+=v*Dn,et+=v*$n,Xe+=v*gn,Ge+=v*br,he+=v*vr,pe+=v*xr,v=$[8],yt+=v*G,bt+=v*Lt,mt+=v*qt,kt+=v*Vt,vt+=v*Pt,St+=v*Kt,xt+=v*Ht,Qe+=v*Ln,st+=v*Zt,Ze+=v*dn,et+=v*Dn,Xe+=v*$n,Ge+=v*gn,he+=v*br,pe+=v*vr,ke+=v*xr,v=$[9],bt+=v*G,mt+=v*Lt,kt+=v*qt,vt+=v*Vt,St+=v*Pt,xt+=v*Kt,Qe+=v*Ht,st+=v*Ln,Ze+=v*Zt,et+=v*dn,Xe+=v*Dn,Ge+=v*$n,he+=v*gn,pe+=v*br,ke+=v*vr,be+=v*xr,v=$[10],mt+=v*G,kt+=v*Lt,vt+=v*qt,St+=v*Vt,xt+=v*Pt,Qe+=v*Kt,st+=v*Ht,Ze+=v*Ln,et+=v*Zt,Xe+=v*dn,Ge+=v*Dn,he+=v*$n,pe+=v*gn,ke+=v*br,be+=v*vr,ve+=v*xr,v=$[11],kt+=v*G,vt+=v*Lt,St+=v*qt,xt+=v*Vt,Qe+=v*Pt,st+=v*Kt,Ze+=v*Ht,et+=v*Ln,Xe+=v*Zt,Ge+=v*dn,he+=v*Dn,pe+=v*$n,ke+=v*gn,be+=v*br,ve+=v*vr,Ie+=v*xr,v=$[12],vt+=v*G,St+=v*Lt,xt+=v*qt,Qe+=v*Vt,st+=v*Pt,Ze+=v*Kt,et+=v*Ht,Xe+=v*Ln,Ge+=v*Zt,he+=v*dn,pe+=v*Dn,ke+=v*$n,be+=v*gn,ve+=v*br,Ie+=v*vr,lt+=v*xr,v=$[13],St+=v*G,xt+=v*Lt,Qe+=v*qt,st+=v*Vt,Ze+=v*Pt,et+=v*Kt,Xe+=v*Ht,Ge+=v*Ln,he+=v*Zt,pe+=v*dn,ke+=v*Dn,be+=v*$n,ve+=v*gn,Ie+=v*br,lt+=v*vr,Et+=v*xr,v=$[14],xt+=v*G,Qe+=v*Lt,st+=v*qt,Ze+=v*Vt,et+=v*Pt,Xe+=v*Kt,Ge+=v*Ht,he+=v*Ln,pe+=v*Zt,ke+=v*dn,be+=v*Dn,ve+=v*$n,Ie+=v*gn,lt+=v*br,Et+=v*vr,Rt+=v*xr,v=$[15],Qe+=v*G,st+=v*Lt,Ze+=v*qt,et+=v*Vt,Xe+=v*Pt,Ge+=v*Kt,he+=v*Ht,pe+=v*Ln,ke+=v*Zt,be+=v*dn,ve+=v*Dn,Ie+=v*$n,lt+=v*gn,Et+=v*br,Rt+=v*vr,At+=v*xr,ie+=38*st,ce+=38*Ze,we+=38*et,Te+=38*Xe,Ve+=38*Ge,Fe+=38*he,Ot+=38*pe,Ke+=38*ke,yt+=38*be,bt+=38*ve,mt+=38*Ie,kt+=38*lt,vt+=38*Et,St+=38*Rt,xt+=38*At,U=1,v=ie+U+65535,U=Math.floor(v/65536),ie=v-U*65536,v=ce+U+65535,U=Math.floor(v/65536),ce=v-U*65536,v=we+U+65535,U=Math.floor(v/65536),we=v-U*65536,v=Te+U+65535,U=Math.floor(v/65536),Te=v-U*65536,v=Ve+U+65535,U=Math.floor(v/65536),Ve=v-U*65536,v=Fe+U+65535,U=Math.floor(v/65536),Fe=v-U*65536,v=Ot+U+65535,U=Math.floor(v/65536),Ot=v-U*65536,v=Ke+U+65535,U=Math.floor(v/65536),Ke=v-U*65536,v=yt+U+65535,U=Math.floor(v/65536),yt=v-U*65536,v=bt+U+65535,U=Math.floor(v/65536),bt=v-U*65536,v=mt+U+65535,U=Math.floor(v/65536),mt=v-U*65536,v=kt+U+65535,U=Math.floor(v/65536),kt=v-U*65536,v=vt+U+65535,U=Math.floor(v/65536),vt=v-U*65536,v=St+U+65535,U=Math.floor(v/65536),St=v-U*65536,v=xt+U+65535,U=Math.floor(v/65536),xt=v-U*65536,v=Qe+U+65535,U=Math.floor(v/65536),Qe=v-U*65536,ie+=U-1+37*(U-1),U=1,v=ie+U+65535,U=Math.floor(v/65536),ie=v-U*65536,v=ce+U+65535,U=Math.floor(v/65536),ce=v-U*65536,v=we+U+65535,U=Math.floor(v/65536),we=v-U*65536,v=Te+U+65535,U=Math.floor(v/65536),Te=v-U*65536,v=Ve+U+65535,U=Math.floor(v/65536),Ve=v-U*65536,v=Fe+U+65535,U=Math.floor(v/65536),Fe=v-U*65536,v=Ot+U+65535,U=Math.floor(v/65536),Ot=v-U*65536,v=Ke+U+65535,U=Math.floor(v/65536),Ke=v-U*65536,v=yt+U+65535,U=Math.floor(v/65536),yt=v-U*65536,v=bt+U+65535,U=Math.floor(v/65536),bt=v-U*65536,v=mt+U+65535,U=Math.floor(v/65536),mt=v-U*65536,v=kt+U+65535,U=Math.floor(v/65536),kt=v-U*65536,v=vt+U+65535,U=Math.floor(v/65536),vt=v-U*65536,v=St+U+65535,U=Math.floor(v/65536),St=v-U*65536,v=xt+U+65535,U=Math.floor(v/65536),xt=v-U*65536,v=Qe+U+65535,U=Math.floor(v/65536),Qe=v-U*65536,ie+=U-1+37*(U-1),_[0]=ie,_[1]=ce,_[2]=we,_[3]=Te,_[4]=Ve,_[5]=Fe,_[6]=Ot,_[7]=Ke,_[8]=yt,_[9]=bt,_[10]=mt,_[11]=kt,_[12]=vt,_[13]=St,_[14]=xt,_[15]=Qe}function ye(_,$){ae(_,$,$)}function Ee(_,$){var P=n(),v;for(v=0;v<16;v++)P[v]=$[v];for(v=253;v>=0;v--)ye(P,P),v!==2&&v!==4&&ae(P,P,$);for(v=0;v<16;v++)_[v]=P[v]}function ee(_,$){var P=n(),v;for(v=0;v<16;v++)P[v]=$[v];for(v=250;v>=0;v--)ye(P,P),v!==1&&ae(P,P,$);for(v=0;v<16;v++)_[v]=P[v]}function te(_,$,P){var v=new Uint8Array(32),U=new Float64Array(80),ie,ce,we=n(),Te=n(),Ve=n(),Fe=n(),Ot=n(),Ke=n();for(ce=0;ce<31;ce++)v[ce]=$[ce];for(v[31]=$[31]&127|64,v[0]&=248,X(U,P),ce=0;ce<16;ce++)Te[ce]=U[ce],Fe[ce]=we[ce]=Ve[ce]=0;for(we[0]=Fe[0]=1,ce=254;ce>=0;--ce)ie=v[ce>>>3]>>>(ce&7)&1,T(we,Te,ie),T(Ve,Fe,ie),Z(Ot,we,Ve),le(we,we,Ve),Z(Ve,Te,Fe),le(Te,Te,Fe),ye(Fe,Ot),ye(Ke,we),ae(we,Ve,we),ae(Ve,Te,Ot),Z(Ot,we,Ve),le(we,we,Ve),ye(Te,we),le(Ve,Fe,Ke),ae(we,Ve,c),Z(we,we,Fe),ae(Ve,Ve,we),ae(we,Fe,Ke),ae(Fe,Te,U),ye(Te,Ot),T(we,Te,ie),T(Ve,Fe,ie);for(ce=0;ce<16;ce++)U[ce+16]=we[ce],U[ce+32]=Ve[ce],U[ce+48]=Te[ce],U[ce+64]=Fe[ce];var yt=U.subarray(32),bt=U.subarray(16);return Ee(yt,yt),ae(bt,bt,yt),I(_,bt),0}function J(_,$){return te(_,$,s)}function Q(_,$){return r($,32),J(_,$)}function oe(_,$,P){var v=new Uint8Array(32);return te(v,P,$),E(_,i,v,A)}var W=B,V=O;function se(_,$,P,v,U,ie){var ce=new Uint8Array(32);return oe(ce,U,ie),W(_,$,P,v,ce)}function Re(_,$,P,v,U,ie){var ce=new Uint8Array(32);return oe(ce,U,ie),V(_,$,P,v,ce)}var Pe=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ze(_,$,P,v){for(var U=new Int32Array(16),ie=new Int32Array(16),ce,we,Te,Ve,Fe,Ot,Ke,yt,bt,mt,kt,vt,St,xt,Qe,st,Ze,et,Xe,Ge,he,pe,ke,be,ve,Ie,lt=_[0],Et=_[1],Rt=_[2],At=_[3],G=_[4],Lt=_[5],qt=_[6],Vt=_[7],Pt=$[0],Kt=$[1],Ht=$[2],Ln=$[3],Zt=$[4],dn=$[5],Dn=$[6],$n=$[7],gn=0;v>=128;){for(Xe=0;Xe<16;Xe++)Ge=8*Xe+gn,U[Xe]=P[Ge+0]<<24|P[Ge+1]<<16|P[Ge+2]<<8|P[Ge+3],ie[Xe]=P[Ge+4]<<24|P[Ge+5]<<16|P[Ge+6]<<8|P[Ge+7];for(Xe=0;Xe<80;Xe++)if(ce=lt,we=Et,Te=Rt,Ve=At,Fe=G,Ot=Lt,Ke=qt,yt=Vt,bt=Pt,mt=Kt,kt=Ht,vt=Ln,St=Zt,xt=dn,Qe=Dn,st=$n,he=Vt,pe=$n,ke=pe&65535,be=pe>>>16,ve=he&65535,Ie=he>>>16,he=(G>>>14|Zt<<18)^(G>>>18|Zt<<14)^(Zt>>>9|G<<23),pe=(Zt>>>14|G<<18)^(Zt>>>18|G<<14)^(G>>>9|Zt<<23),ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,he=G&Lt^~G&qt,pe=Zt&dn^~Zt&Dn,ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,he=Pe[Xe*2],pe=Pe[Xe*2+1],ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,he=U[Xe%16],pe=ie[Xe%16],ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,be+=ke>>>16,ve+=be>>>16,Ie+=ve>>>16,Ze=ve&65535|Ie<<16,et=ke&65535|be<<16,he=Ze,pe=et,ke=pe&65535,be=pe>>>16,ve=he&65535,Ie=he>>>16,he=(lt>>>28|Pt<<4)^(Pt>>>2|lt<<30)^(Pt>>>7|lt<<25),pe=(Pt>>>28|lt<<4)^(lt>>>2|Pt<<30)^(lt>>>7|Pt<<25),ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,he=lt&Et^lt&Rt^Et&Rt,pe=Pt&Kt^Pt&Ht^Kt&Ht,ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,be+=ke>>>16,ve+=be>>>16,Ie+=ve>>>16,yt=ve&65535|Ie<<16,st=ke&65535|be<<16,he=Ve,pe=vt,ke=pe&65535,be=pe>>>16,ve=he&65535,Ie=he>>>16,he=Ze,pe=et,ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,be+=ke>>>16,ve+=be>>>16,Ie+=ve>>>16,Ve=ve&65535|Ie<<16,vt=ke&65535|be<<16,Et=ce,Rt=we,At=Te,G=Ve,Lt=Fe,qt=Ot,Vt=Ke,lt=yt,Kt=bt,Ht=mt,Ln=kt,Zt=vt,dn=St,Dn=xt,$n=Qe,Pt=st,Xe%16===15)for(Ge=0;Ge<16;Ge++)he=U[Ge],pe=ie[Ge],ke=pe&65535,be=pe>>>16,ve=he&65535,Ie=he>>>16,he=U[(Ge+9)%16],pe=ie[(Ge+9)%16],ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,Ze=U[(Ge+1)%16],et=ie[(Ge+1)%16],he=(Ze>>>1|et<<31)^(Ze>>>8|et<<24)^Ze>>>7,pe=(et>>>1|Ze<<31)^(et>>>8|Ze<<24)^(et>>>7|Ze<<25),ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,Ze=U[(Ge+14)%16],et=ie[(Ge+14)%16],he=(Ze>>>19|et<<13)^(et>>>29|Ze<<3)^Ze>>>6,pe=(et>>>19|Ze<<13)^(Ze>>>29|et<<3)^(et>>>6|Ze<<26),ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,be+=ke>>>16,ve+=be>>>16,Ie+=ve>>>16,U[Ge]=ve&65535|Ie<<16,ie[Ge]=ke&65535|be<<16;he=lt,pe=Pt,ke=pe&65535,be=pe>>>16,ve=he&65535,Ie=he>>>16,he=_[0],pe=$[0],ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,be+=ke>>>16,ve+=be>>>16,Ie+=ve>>>16,_[0]=lt=ve&65535|Ie<<16,$[0]=Pt=ke&65535|be<<16,he=Et,pe=Kt,ke=pe&65535,be=pe>>>16,ve=he&65535,Ie=he>>>16,he=_[1],pe=$[1],ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,be+=ke>>>16,ve+=be>>>16,Ie+=ve>>>16,_[1]=Et=ve&65535|Ie<<16,$[1]=Kt=ke&65535|be<<16,he=Rt,pe=Ht,ke=pe&65535,be=pe>>>16,ve=he&65535,Ie=he>>>16,he=_[2],pe=$[2],ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,be+=ke>>>16,ve+=be>>>16,Ie+=ve>>>16,_[2]=Rt=ve&65535|Ie<<16,$[2]=Ht=ke&65535|be<<16,he=At,pe=Ln,ke=pe&65535,be=pe>>>16,ve=he&65535,Ie=he>>>16,he=_[3],pe=$[3],ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,be+=ke>>>16,ve+=be>>>16,Ie+=ve>>>16,_[3]=At=ve&65535|Ie<<16,$[3]=Ln=ke&65535|be<<16,he=G,pe=Zt,ke=pe&65535,be=pe>>>16,ve=he&65535,Ie=he>>>16,he=_[4],pe=$[4],ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,be+=ke>>>16,ve+=be>>>16,Ie+=ve>>>16,_[4]=G=ve&65535|Ie<<16,$[4]=Zt=ke&65535|be<<16,he=Lt,pe=dn,ke=pe&65535,be=pe>>>16,ve=he&65535,Ie=he>>>16,he=_[5],pe=$[5],ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,be+=ke>>>16,ve+=be>>>16,Ie+=ve>>>16,_[5]=Lt=ve&65535|Ie<<16,$[5]=dn=ke&65535|be<<16,he=qt,pe=Dn,ke=pe&65535,be=pe>>>16,ve=he&65535,Ie=he>>>16,he=_[6],pe=$[6],ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,be+=ke>>>16,ve+=be>>>16,Ie+=ve>>>16,_[6]=qt=ve&65535|Ie<<16,$[6]=Dn=ke&65535|be<<16,he=Vt,pe=$n,ke=pe&65535,be=pe>>>16,ve=he&65535,Ie=he>>>16,he=_[7],pe=$[7],ke+=pe&65535,be+=pe>>>16,ve+=he&65535,Ie+=he>>>16,be+=ke>>>16,ve+=be>>>16,Ie+=ve>>>16,_[7]=Vt=ve&65535|Ie<<16,$[7]=$n=ke&65535|be<<16,gn+=128,v-=128}return v}function ht(_,$,P){var v=new Int32Array(8),U=new Int32Array(8),ie=new Uint8Array(256),ce,we=P;for(v[0]=1779033703,v[1]=3144134277,v[2]=1013904242,v[3]=2773480762,v[4]=1359893119,v[5]=2600822924,v[6]=528734635,v[7]=1541459225,U[0]=4089235720,U[1]=2227873595,U[2]=4271175723,U[3]=1595750129,U[4]=2917565137,U[5]=725511199,U[6]=4215389547,U[7]=327033209,ze(v,U,$,P),P%=128,ce=0;ce<P;ce++)ie[ce]=$[we-P+ce];for(ie[P]=128,P=256-128*(P<112?1:0),ie[P-9]=0,p(ie,P-8,we/536870912|0,we<<3),ze(v,U,ie,P),ce=0;ce<8;ce++)p(_,8*ce,v[ce],U[ce]);return 0}function pt(_,$){var P=n(),v=n(),U=n(),ie=n(),ce=n(),we=n(),Te=n(),Ve=n(),Fe=n();le(P,_[1],_[0]),le(Fe,$[1],$[0]),ae(P,P,Fe),Z(v,_[0],_[1]),Z(Fe,$[0],$[1]),ae(v,v,Fe),ae(U,_[3],$[3]),ae(U,U,u),ae(ie,_[2],$[2]),Z(ie,ie,ie),le(ce,v,P),le(we,ie,U),Z(Te,ie,U),Z(Ve,v,P),ae(_[0],ce,we),ae(_[1],Ve,Te),ae(_[2],Te,we),ae(_[3],ce,Ve)}function Qn(_,$,P){var v;for(v=0;v<4;v++)T(_[v],$[v],P)}function ct(_,$){var P=n(),v=n(),U=n();Ee(U,$[2]),ae(P,$[0],U),ae(v,$[1],U),I(_,v),_[31]^=Y(P)<<7}function or(_,$,P){var v,U;for(R(_[0],o),R(_[1],a),R(_[2],a),R(_[3],o),U=255;U>=0;--U)v=P[U/8|0]>>(U&7)&1,Qn(_,$,v),pt($,_),pt(_,_),Qn(_,$,v)}function $r(_,$){var P=[n(),n(),n(),n()];R(P[0],d),R(P[1],f),R(P[2],a),ae(P[3],d,f),or(_,P,$)}function Si(_,$,P){var v=new Uint8Array(64),U=[n(),n(),n(),n()],ie;for(P||r($,32),ht(v,$,32),v[0]&=248,v[31]&=127,v[31]|=64,$r(U,v),ct(_,U),ie=0;ie<32;ie++)$[ie+32]=_[ie];return 0}var Qs=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function os(_,$){var P,v,U,ie;for(v=63;v>=32;--v){for(P=0,U=v-32,ie=v-12;U<ie;++U)$[U]+=P-16*$[v]*Qs[U-(v-32)],P=Math.floor(($[U]+128)/256),$[U]-=P*256;$[U]+=P,$[v]=0}for(P=0,U=0;U<32;U++)$[U]+=P-($[31]>>4)*Qs[U],P=$[U]>>8,$[U]&=255;for(U=0;U<32;U++)$[U]-=P*Qs[U];for(v=0;v<32;v++)$[v+1]+=$[v]>>8,_[v]=$[v]&255}function eo(_){var $=new Float64Array(64),P;for(P=0;P<64;P++)$[P]=_[P];for(P=0;P<64;P++)_[P]=0;os(_,$)}function Cs(_,$,P,v){var U=new Uint8Array(64),ie=new Uint8Array(64),ce=new Uint8Array(64),we,Te,Ve=new Float64Array(64),Fe=[n(),n(),n(),n()];ht(U,v,32),U[0]&=248,U[31]&=127,U[31]|=64;var Ot=P+64;for(we=0;we<P;we++)_[64+we]=$[we];for(we=0;we<32;we++)_[32+we]=U[32+we];for(ht(ce,_.subarray(32),P+32),eo(ce),$r(Fe,ce),ct(_,Fe),we=32;we<64;we++)_[we]=v[we];for(ht(ie,_,P+64),eo(ie),we=0;we<64;we++)Ve[we]=0;for(we=0;we<32;we++)Ve[we]=ce[we];for(we=0;we<32;we++)for(Te=0;Te<32;Te++)Ve[we+Te]+=ie[we]*U[Te];return os(_.subarray(32),Ve),Ot}function Br(_,$){var P=n(),v=n(),U=n(),ie=n(),ce=n(),we=n(),Te=n();return R(_[2],a),X(_[1],$),ye(U,_[1]),ae(ie,U,l),le(U,U,_[2]),Z(ie,_[2],ie),ye(ce,ie),ye(we,ce),ae(Te,we,ce),ae(P,Te,U),ae(P,P,ie),ee(P,P),ae(P,P,U),ae(P,P,ie),ae(P,P,ie),ae(_[0],P,ie),ye(v,_[0]),ae(v,v,ie),M(v,U)&&ae(_[0],_[0],h),ye(v,_[0]),ae(v,v,ie),M(v,U)?-1:(Y(_[0])===$[31]>>7&&le(_[0],o,_[0]),ae(_[3],_[0],_[1]),0)}function to(_,$,P,v){var U,ie=new Uint8Array(32),ce=new Uint8Array(64),we=[n(),n(),n(),n()],Te=[n(),n(),n(),n()];if(P<64||Br(Te,v))return-1;for(U=0;U<P;U++)_[U]=$[U];for(U=0;U<32;U++)_[U+32]=v[U];if(ht(ce,_,P),eo(ce),or(we,Te,ce),$r(Te,$.subarray(32)),pt(we,Te),ct(ie,we),P-=64,y($,0,ie,0)){for(U=0;U<P;U++)_[U]=0;return-1}for(U=0;U<P;U++)_[U]=$[U+64];return P}var nc=32,rc=24,no=32,as=16,Ro=32,pa=32,To=32,ii=32,ic=32,gl=rc,ml=no,wl=as,Mr=64,_i=32,cs=64,K=32,q=64;e.lowlevel={crypto_core_hsalsa20:E,crypto_stream_xor:F,crypto_stream:C,crypto_stream_salsa20_xor:k,crypto_stream_salsa20:S,crypto_onetimeauth:L,crypto_onetimeauth_verify:j,crypto_verify_16:w,crypto_verify_32:y,crypto_secretbox:B,crypto_secretbox_open:O,crypto_scalarmult:te,crypto_scalarmult_base:J,crypto_box_beforenm:oe,crypto_box_afternm:W,crypto_box:se,crypto_box_open:Re,crypto_box_keypair:Q,crypto_hash:ht,crypto_sign:Cs,crypto_sign_keypair:Si,crypto_sign_open:to,crypto_secretbox_KEYBYTES:nc,crypto_secretbox_NONCEBYTES:rc,crypto_secretbox_ZEROBYTES:no,crypto_secretbox_BOXZEROBYTES:as,crypto_scalarmult_BYTES:Ro,crypto_scalarmult_SCALARBYTES:pa,crypto_box_PUBLICKEYBYTES:To,crypto_box_SECRETKEYBYTES:ii,crypto_box_BEFORENMBYTES:ic,crypto_box_NONCEBYTES:gl,crypto_box_ZEROBYTES:ml,crypto_box_BOXZEROBYTES:wl,crypto_sign_BYTES:Mr,crypto_sign_PUBLICKEYBYTES:_i,crypto_sign_SECRETKEYBYTES:cs,crypto_sign_SEEDBYTES:K,crypto_hash_BYTES:q,gf:n,D:l,L:Qs,pack:ct,pack25519:I,unpack25519:X,M:ae,A:Z,S:ye,Z:le,pow2523:ee,add:pt,set25519:R,modL:os,scalarmult:or,scalarbase:$r};function De(_,$){if(_.length!==nc)throw new Error("bad key size");if($.length!==rc)throw new Error("bad nonce size")}function $e(_,$){if(_.length!==To)throw new Error("bad public key size");if($.length!==ii)throw new Error("bad secret key size")}function qe(){for(var _=0;_<arguments.length;_++)if(!(arguments[_]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function er(_){for(var $=0;$<_.length;$++)_[$]=0}e.randomBytes=function(_){var $=new Uint8Array(_);return r($,_),$},e.secretbox=function(_,$,P){qe(_,$,P),De(P,$);for(var v=new Uint8Array(no+_.length),U=new Uint8Array(v.length),ie=0;ie<_.length;ie++)v[ie+no]=_[ie];return B(U,v,v.length,$,P),U.subarray(as)},e.secretbox.open=function(_,$,P){qe(_,$,P),De(P,$);for(var v=new Uint8Array(as+_.length),U=new Uint8Array(v.length),ie=0;ie<_.length;ie++)v[ie+as]=_[ie];return v.length<32||O(U,v,v.length,$,P)!==0?null:U.subarray(no)},e.secretbox.keyLength=nc,e.secretbox.nonceLength=rc,e.secretbox.overheadLength=as,e.scalarMult=function(_,$){if(qe(_,$),_.length!==pa)throw new Error("bad n size");if($.length!==Ro)throw new Error("bad p size");var P=new Uint8Array(Ro);return te(P,_,$),P},e.scalarMult.base=function(_){if(qe(_),_.length!==pa)throw new Error("bad n size");var $=new Uint8Array(Ro);return J($,_),$},e.scalarMult.scalarLength=pa,e.scalarMult.groupElementLength=Ro,e.box=function(_,$,P,v){var U=e.box.before(P,v);return e.secretbox(_,$,U)},e.box.before=function(_,$){qe(_,$),$e(_,$);var P=new Uint8Array(ic);return oe(P,_,$),P},e.box.after=e.secretbox,e.box.open=function(_,$,P,v){var U=e.box.before(P,v);return e.secretbox.open(_,$,U)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var _=new Uint8Array(To),$=new Uint8Array(ii);return Q(_,$),{publicKey:_,secretKey:$}},e.box.keyPair.fromSecretKey=function(_){if(qe(_),_.length!==ii)throw new Error("bad secret key size");var $=new Uint8Array(To);return J($,_),{publicKey:$,secretKey:new Uint8Array(_)}},e.box.publicKeyLength=To,e.box.secretKeyLength=ii,e.box.sharedKeyLength=ic,e.box.nonceLength=gl,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(_,$){if(qe(_,$),$.length!==cs)throw new Error("bad secret key size");var P=new Uint8Array(Mr+_.length);return Cs(P,_,_.length,$),P},e.sign.open=function(_,$){if(qe(_,$),$.length!==_i)throw new Error("bad public key size");var P=new Uint8Array(_.length),v=to(P,_,_.length,$);if(v<0)return null;for(var U=new Uint8Array(v),ie=0;ie<U.length;ie++)U[ie]=P[ie];return U},e.sign.detached=function(_,$){for(var P=e.sign(_,$),v=new Uint8Array(Mr),U=0;U<v.length;U++)v[U]=P[U];return v},e.sign.detached.verify=function(_,$,P){if(qe(_,$,P),$.length!==Mr)throw new Error("bad signature size");if(P.length!==_i)throw new Error("bad public key size");var v=new Uint8Array(Mr+_.length),U=new Uint8Array(Mr+_.length),ie;for(ie=0;ie<Mr;ie++)v[ie]=$[ie];for(ie=0;ie<_.length;ie++)v[ie+Mr]=_[ie];return to(U,v,v.length,P)>=0},e.sign.keyPair=function(){var _=new Uint8Array(_i),$=new Uint8Array(cs);return Si(_,$),{publicKey:_,secretKey:$}},e.sign.keyPair.fromSecretKey=function(_){if(qe(_),_.length!==cs)throw new Error("bad secret key size");for(var $=new Uint8Array(_i),P=0;P<$.length;P++)$[P]=_[32+P];return{publicKey:$,secretKey:new Uint8Array(_)}},e.sign.keyPair.fromSeed=function(_){if(qe(_),_.length!==K)throw new Error("bad seed size");for(var $=new Uint8Array(_i),P=new Uint8Array(cs),v=0;v<32;v++)P[v]=_[v];return Si($,P,!0),{publicKey:$,secretKey:P}},e.sign.publicKeyLength=_i,e.sign.secretKeyLength=cs,e.sign.seedLength=K,e.sign.signatureLength=Mr,e.hash=function(_){qe(_);var $=new Uint8Array(q);return ht($,_,_.length),$},e.hash.hashLength=q,e.verify=function(_,$){return qe(_,$),_.length===0||$.length===0||_.length!==$.length?!1:g(_,0,$,0,_.length)===0},e.setPRNG=function(_){r=_},function(){var _=typeof self<"u"?self.crypto||self.msCrypto:null;if(_&&_.getRandomValues){var $=65536;e.setPRNG(function(P,v){var U,ie=new Uint8Array(v);for(U=0;U<v;U+=$)_.getRandomValues(ie.subarray(U,U+Math.min(v-U,$)));for(U=0;U<v;U++)P[U]=ie[U];er(ie)})}else typeof Mv<"u"&&(_=DD(),_&&_.randomBytes&&e.setPRNG(function(P,v){var U,ie=_.randomBytes(v);for(U=0;U<v;U++)P[U]=ie[U];er(ie)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})})(_P);var Wj=_P.exports;const kP=vi(Wj),vl=kP.lowlevel;function qj(t){let e;typeof t=="string"?e=Ne.from(t,"hex"):e=t;const n=new Uint8Array(64),r=[vl.gf(),vl.gf(),vl.gf(),vl.gf()],i=new Uint8Array([...new Uint8Array(e),...new Uint8Array(32)]),s=new Uint8Array(32);vl.crypto_hash(n,i,32),n[0]&=248,n[31]&=127,n[31]|=64,vl.scalarbase(r,n),vl.pack(s,r);for(let o=0;o<32;o+=1)i[o+32]=s[o];return{sk:Ne.from(i),pk:Ne.from(s)}}var Vj={exports:{}},ab={exports:{}};let Gj=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let n="";for(let r=0;r<e.length;r++)n+=`    ${e[r].stack}
`;super(n),this.name="AggregateError",this.errors=e}};var qn={AggregateError:Gj,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array},AP={exports:{}},IP={format(t,...e){return t.replace(/%([sdifj])/g,function(...[n,r]){const i=e.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}};const{format:Yj,inspect:mm}=IP,{AggregateError:Jj}=qn,Zj=globalThis.AggregateError||Jj,Xj=Symbol("kIsNodeError"),Qj=["string","function","number","object","Function","Object","boolean","bigint","symbol"],eF=/^([A-Z][a-z0-9]*)+$/,tF="__node_internal_",Iw={};function Gl(t,e){if(!t)throw new Iw.ERR_INTERNAL_ASSERTION(e)}function q_(t){let e="",n=t.length;const r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function nF(t,e,n){if(typeof e=="function")return Gl(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);const r=(e.match(/%[dfijoOs]/g)||[]).length;return Gl(r===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?e:Yj(e,...n)}function ei(t,e,n){n||(n=Error);class r extends n{constructor(...s){super(nF(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=t,r.prototype[Xj]=!0,Iw[t]=r}function V_(t){const e=tF+t.name;return Object.defineProperty(t,"name",{value:e}),t}function rF(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;const n=new Zj([e,t],e.message);return n.code=e.code,n}return t||e}let iF=class extends Error{constructor(e="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new Iw.ERR_INVALID_ARG_TYPE("options","Object",n);super(e,n),this.code="ABORT_ERR",this.name="AbortError"}};ei("ERR_ASSERTION","%s",Error);ei("ERR_INVALID_ARG_TYPE",(t,e,n)=>{Gl(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";const i=[],s=[],o=[];for(const c of e)Gl(typeof c=="string","All expected entries have to be of type string"),Qj.includes(c)?i.push(c.toLowerCase()):eF.test(c)?s.push(c):(Gl(c!=="object",'The value "object" should be written as "Object"'),o.push(c));if(s.length>0){const c=i.indexOf("object");c!==-1&&(i.splice(i,c,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{const c=i.pop();r+=`one of type ${i.join(", ")}, or ${c}`}}(s.length>0||o.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{const c=s.pop();r+=`an instance of ${s.join(", ")}, or ${c}`}}o.length>0&&(r+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(r+="an "),r+=`${o[0]}`;break;case 2:r+=`one of ${o[0]} or ${o[1]}`;break;default:{const c=o.pop();r+=`one of ${o.join(", ")}, or ${c}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var a;if((a=n.constructor)!==null&&a!==void 0&&a.name)r+=`. Received an instance of ${n.constructor.name}`;else{const c=mm(n,{depth:-1});r+=`. Received ${c}`}}else{let c=mm(n,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),r+=`. Received type ${typeof n} (${c})`}return r},TypeError);ei("ERR_INVALID_ARG_VALUE",(t,e,n="is invalid")=>{let r=mm(e);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`},TypeError);ei("ERR_INVALID_RETURN_VALUE",(t,e,n)=>{var r;const i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);ei("ERR_MISSING_ARGS",(...t)=>{Gl(t.length>0,"At least one arg needs to be specified");let e;const n=t.length;switch(t=(Array.isArray(t)?t:[t]).map(r=>`"${r}"`).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const r=t.pop();e+=`The ${t.join(", ")}, and ${r} arguments`}break}return`${e} must be specified`},TypeError);ei("ERR_OUT_OF_RANGE",(t,e,n)=>{Gl(e,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=q_(String(n));else if(typeof n=="bigint"){r=String(n);const i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=q_(r)),r+="n"}else r=mm(n);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError);ei("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ei("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ei("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ei("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ei("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ei("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ei("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ei("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ei("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ei("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ei("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Mi={AbortError:iF,aggregateTwoErrors:V_(rF),hideStackFrames:V_,codes:Iw},Df={exports:{}},G_;function tp(){if(G_)return Df.exports;G_=1;const{AbortController:t,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Df.exports=t,Df.exports.AbortSignal=e,Df.exports.default=t,Df.exports}(function(t){const e=al,{format:n,inspect:r}=IP,{codes:{ERR_INVALID_ARG_TYPE:i}}=Mi,{kResistStopPropagation:s,AggregateError:o,SymbolDispose:a}=qn,c=globalThis.AbortSignal||tp().AbortSignal,l=globalThis.AbortController||tp().AbortController,u=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||e.Blob,f=typeof d<"u"?function(w){return w instanceof d}:function(w){return!1},h=(g,w)=>{if(g!==void 0&&(g===null||typeof g!="object"||!("aborted"in g)))throw new i(w,"AbortSignal",g)},p=(g,w)=>{if(typeof g!="function")throw new i(w,"Function",g)};t.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(g){let w=!1;return function(...y){w||(w=!0,g.apply(this,y))}},createDeferredPromise:function(){let g,w;return{promise:new Promise((b,m)=>{g=b,w=m}),resolve:g,reject:w}},promisify(g){return new Promise((w,y)=>{g((b,...m)=>b?y(b):w(...m))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(g){return g instanceof u},isArrayBufferView(g){return ArrayBuffer.isView(g)}},isBlob:f,deprecate(g,w){return g},addAbortListener:xi.addAbortListener||function(w,y){if(w===void 0)throw new i("signal","AbortSignal",w);h(w,"signal"),p(y,"listener");let b;return w.aborted?queueMicrotask(()=>y()):(w.addEventListener("abort",y,{__proto__:null,once:!0,[s]:!0}),b=()=>{w.removeEventListener("abort",y)}),{__proto__:null,[a](){var m;(m=b)===null||m===void 0||m()}}},AbortSignalAny:c.any||function(w){if(w.length===1)return w[0];const y=new l,b=()=>y.abort();return w.forEach(m=>{h(m,"signals"),m.addEventListener("abort",b,{once:!0})}),y.signal.addEventListener("abort",()=>{w.forEach(m=>m.removeEventListener("abort",b))},{once:!0}),y.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(AP);var is=AP.exports,RE={};const{ArrayIsArray:CP,ArrayPrototypeIncludes:sF,ArrayPrototypeJoin:oF,ArrayPrototypeMap:aF,NumberIsInteger:TE,NumberIsNaN:t0e,NumberMAX_SAFE_INTEGER:cF,NumberMIN_SAFE_INTEGER:lF,NumberParseInt:n0e,ObjectPrototypeHasOwnProperty:uF,RegExpPrototypeExec:r0e,String:dF,StringPrototypeToUpperCase:i0e,StringPrototypeTrim:s0e}=qn,{hideStackFrames:Zs,codes:{ERR_SOCKET_BAD_PORT:o0e,ERR_INVALID_ARG_TYPE:Xs,ERR_INVALID_ARG_VALUE:RP,ERR_OUT_OF_RANGE:Od,ERR_UNKNOWN_SIGNAL:a0e}}=Mi,{normalizeEncoding:c0e}=is,{isAsyncFunction:fF,isArrayBufferView:hF}=is.types,pF=Zs((t,e,n=lF,r=cF)=>{if(typeof t!="number")throw new Xs(e,"number",t);if(!TE(t))throw new Od(e,"an integer",t);if(t<n||t>r)throw new Od(e,`>= ${n} && <= ${r}`,t)});Zs((t,e,n=-2147483648,r=2147483647)=>{if(typeof t!="number")throw new Xs(e,"number",t);if(!TE(t))throw new Od(e,"an integer",t);if(t<n||t>r)throw new Od(e,`>= ${n} && <= ${r}`,t)});Zs((t,e,n=!1)=>{if(typeof t!="number")throw new Xs(e,"number",t);if(!TE(t))throw new Od(e,"an integer",t);const r=n?1:0,i=4294967295;if(t<r||t>i)throw new Od(e,`>= ${r} && <= ${i}`,t)});Zs((t,e,n)=>{if(!sF(n,t)){const i="must be one of: "+oF(aF(n,s=>typeof s=="string"?`'${s}'`:dF(s)),", ");throw new RP(e,t,i)}});function gF(t,e){if(typeof t!="boolean")throw new Xs(e,"boolean",t)}function cb(t,e,n){return t==null||!uF(t,e)?n:t[e]}const mF=Zs((t,e,n=null)=>{const r=cb(n,"allowArray",!1),i=cb(n,"allowFunction",!1);if(!cb(n,"nullable",!1)&&t===null||!r&&CP(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Xs(e,"Object",t)});Zs((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Xs(e,"a dictionary",t)});Zs((t,e,n=0)=>{if(!CP(t))throw new Xs(e,"Array",t);if(t.length<n){const r=`must be longer than ${n}`;throw new RP(e,t,r)}});Zs((t,e="buffer")=>{if(!hF(t))throw new Xs(e,["Buffer","TypedArray","DataView"],t)});const wF=Zs((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Xs(e,"AbortSignal",t)}),yF=Zs((t,e)=>{if(typeof t!="function")throw new Xs(e,"Function",t)});Zs((t,e)=>{if(typeof t!="function"||fF(t))throw new Xs(e,"Function",t)});Zs((t,e)=>{if(t!==void 0)throw new Xs(e,"undefined",t)});var Np={validateBoolean:gF,validateFunction:yF,validateInteger:pF,validateObject:mF,validateAbortSignal:wF},OE={exports:{}},dl={};(function(t){Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function e(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}var n={exports:{}},r=n.exports={},i,s;function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=o}catch{i=o}try{typeof clearTimeout=="function"?s=clearTimeout:s=a}catch{s=a}})();function c(x){if(i===setTimeout)return setTimeout(x,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(x,0);try{return i(x,0)}catch{try{return i.call(null,x,0)}catch{return i.call(this,x,0)}}}function l(x){if(s===clearTimeout)return clearTimeout(x);if((s===a||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(x);try{return s(x)}catch{try{return s.call(null,x)}catch{return s.call(this,x)}}}var u=[],d=!1,f,h=-1;function p(){!d||!f||(d=!1,f.length?u=f.concat(u):h=-1,u.length&&g())}function g(){if(!d){var x=c(p);d=!0;for(var E=u.length;E;){for(f=u,u=[];++h<E;)f&&f[h].run();h=-1,E=u.length}f=null,d=!1,l(x)}}r.nextTick=function(x){var E=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)E[A-1]=arguments[A];u.push(new w(x,E)),u.length===1&&!d&&c(g)};function w(x,E){this.fun=x,this.array=E}w.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function y(){}r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(x){return[]},r.binding=function(x){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(x){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var b=n.exports;const m=e(b);t.default=m,t.process=m})(dl);const{SymbolAsyncIterator:Y_,SymbolIterator:J_,SymbolFor:yu}=qn,TP=yu("nodejs.stream.destroyed"),bF=yu("nodejs.stream.errored"),Z_=yu("nodejs.stream.readable"),X_=yu("nodejs.stream.writable"),vF=yu("nodejs.stream.disturbed"),xF=yu("nodejs.webstream.isClosedPromise"),EF=yu("nodejs.webstream.controllerErrorFunction");function PE(t,e=!1){var n;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((n=t._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!t._writableState||t._readableState))}function Cw(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function SF(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function ua(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function OP(t){return!!(t&&!ua(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function PP(t){return!!(t&&!ua(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function NP(t){return!!(t&&!ua(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function _F(t){return OP(t)||PP(t)||NP(t)}function kF(t,e){return t==null?!1:e===!0?typeof t[Y_]=="function":e===!1?typeof t[J_]=="function":typeof t[Y_]=="function"||typeof t[J_]=="function"}function Rw(t){if(!ua(t))return null;const e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[TP]||r!=null&&r.destroyed)}function AF(t){if(!Cw(t))return null;if(t.writableEnded===!0)return!0;const e=t._writableState;return e!=null&&e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function IF(t,e){if(!Cw(t))return null;if(t.writableFinished===!0)return!0;const n=t._writableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.finished)!="boolean"?null:!!(n.finished||e===!1&&n.ended===!0&&n.length===0)}function LP(t,e){if(!PE(t))return null;const n=t._readableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.endEmitted)!="boolean"?null:!!(n.endEmitted||e===!1&&n.ended===!0&&n.length===0)}function DP(t){return t&&t[Z_]!=null?t[Z_]:typeof(t==null?void 0:t.readable)!="boolean"?null:Rw(t)?!1:PE(t)&&t.readable&&!LP(t)}function $P(t){return t&&t[X_]!=null?t[X_]:typeof(t==null?void 0:t.writable)!="boolean"?null:Rw(t)?!1:Cw(t)&&t.writable&&!AF(t)}function CF(t,e){return ua(t)?Rw(t)?!0:!((e==null?void 0:e.readable)!==!1&&DP(t)||(e==null?void 0:e.writable)!==!1&&$P(t)):null}function RF(t){var e,n;return ua(t)?t.writableErrored?t.writableErrored:(e=(n=t._writableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function TF(t){var e,n;return ua(t)?t.readableErrored?t.readableErrored:(e=(n=t._readableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function OF(t){if(!ua(t))return null;if(typeof t.closed=="boolean")return t.closed;const e=t._writableState,n=t._readableState;return typeof(e==null?void 0:e.closed)=="boolean"||typeof(n==null?void 0:n.closed)=="boolean"?(e==null?void 0:e.closed)||(n==null?void 0:n.closed):typeof t._closed=="boolean"&&BP(t)?t._closed:null}function BP(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function PF(t){return typeof t._sent100=="boolean"&&BP(t)}function NF(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function LF(t){if(!ua(t))return null;const e=t._writableState,n=t._readableState,r=e||n;return!r&&PF(t)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function DF(t){var e;return!!(t&&((e=t[vF])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function $F(t){var e,n,r,i,s,o,a,c,l,u;return!!(t&&((e=(n=(r=(i=(s=(o=t[bF])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&r!==void 0?r:(c=t._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&n!==void 0?n:(l=t._readableState)===null||l===void 0?void 0:l.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}var tc={isDestroyed:Rw,kIsDestroyed:TP,isDisturbed:DF,isErrored:$F,isReadable:DP,kIsClosedPromise:xF,kControllerErrorFunction:EF,isClosed:OF,isDuplexNodeStream:SF,isFinished:CF,isIterable:kF,isReadableNodeStream:PE,isReadableStream:OP,isReadableFinished:LP,isReadableErrored:TF,isNodeStream:ua,isWebStream:_F,isWritable:$P,isWritableNodeStream:Cw,isWritableStream:PP,isWritableFinished:IF,isWritableErrored:RF,isServerRequest:NF,willEmitClose:LF,isTransformStream:NP};const Ec=dl,{AbortError:MP,codes:BF}=Mi,{ERR_INVALID_ARG_TYPE:MF,ERR_STREAM_PREMATURE_CLOSE:Q_}=BF,{kEmptyObject:qv,once:Vv}=is,{validateAbortSignal:UF,validateFunction:jF,validateObject:FF,validateBoolean:zF}=Np,{Promise:KF,PromisePrototypeThen:HF,SymbolDispose:UP}=qn,{isClosed:WF,isReadable:ek,isReadableNodeStream:lb,isReadableStream:qF,isReadableFinished:tk,isReadableErrored:nk,isWritable:rk,isWritableNodeStream:ik,isWritableStream:VF,isWritableFinished:sk,isWritableErrored:ok,isNodeStream:GF,willEmitClose:YF,kIsClosedPromise:JF}=tc;let yd;function ZF(t){return t.setHeader&&typeof t.abort=="function"}const Gv=()=>{};function jP(t,e,n){var r,i;if(arguments.length===2?(n=e,e=qv):e==null?e=qv:FF(e,"options"),jF(n,"callback"),UF(e.signal,"options.signal"),n=Vv(n),qF(t)||VF(t))return XF(t,e,n);if(!GF(t))throw new MF("stream",["ReadableStream","WritableStream","Stream"],t);const s=(r=e.readable)!==null&&r!==void 0?r:lb(t),o=(i=e.writable)!==null&&i!==void 0?i:ik(t),a=t._writableState,c=t._readableState,l=()=>{t.writable||f()};let u=YF(t)&&lb(t)===s&&ik(t)===o,d=sk(t,!1);const f=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||h)&&n.call(t)};let h=tk(t,!1);const p=()=>{h=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&n.call(t)},g=E=>{n.call(t,E)};let w=WF(t);const y=()=>{w=!0;const E=ok(t)||nk(t);if(E&&typeof E!="boolean")return n.call(t,E);if(s&&!h&&lb(t,!0)&&!tk(t,!1))return n.call(t,new Q_);if(o&&!d&&!sk(t,!1))return n.call(t,new Q_);n.call(t)},b=()=>{w=!0;const E=ok(t)||nk(t);if(E&&typeof E!="boolean")return n.call(t,E);n.call(t)},m=()=>{t.req.on("finish",f)};ZF(t)?(t.on("complete",f),u||t.on("abort",y),t.req?m():t.on("request",m)):o&&!a&&(t.on("end",l),t.on("close",l)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",y),t.on("end",p),t.on("finish",f),e.error!==!1&&t.on("error",g),t.on("close",y),w?Ec.nextTick(y):a!=null&&a.errorEmitted||c!=null&&c.errorEmitted?u||Ec.nextTick(b):(!s&&(!u||ek(t))&&(d||rk(t)===!1)||!o&&(!u||rk(t))&&(h||ek(t)===!1)||c&&t.req&&t.aborted)&&Ec.nextTick(b);const x=()=>{n=Gv,t.removeListener("aborted",y),t.removeListener("complete",f),t.removeListener("abort",y),t.removeListener("request",m),t.req&&t.req.removeListener("finish",f),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",f),t.removeListener("end",p),t.removeListener("error",g),t.removeListener("close",y)};if(e.signal&&!w){const E=()=>{const A=n;x(),A.call(t,new MP(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Ec.nextTick(E);else{yd=yd||is.addAbortListener;const A=yd(e.signal,E),k=n;n=Vv((...S)=>{A[UP](),k.apply(t,S)})}}return x}function XF(t,e,n){let r=!1,i=Gv;if(e.signal)if(i=()=>{r=!0,n.call(t,new MP(void 0,{cause:e.signal.reason}))},e.signal.aborted)Ec.nextTick(i);else{yd=yd||is.addAbortListener;const o=yd(e.signal,i),a=n;n=Vv((...c)=>{o[UP](),a.apply(t,c)})}const s=(...o)=>{r||Ec.nextTick(()=>n.apply(t,o))};return HF(t[JF].promise,s,s),Gv}function QF(t,e){var n;let r=!1;return e===null&&(e=qv),(n=e)!==null&&n!==void 0&&n.cleanup&&(zF(e.cleanup,"cleanup"),r=e.cleanup),new KF((i,s)=>{const o=jP(t,e,a=>{r&&o(),a?s(a):i()})})}OE.exports=jP;OE.exports.finished=QF;var fl=OE.exports;const ta=dl,{aggregateTwoErrors:ez,codes:{ERR_MULTIPLE_CALLBACK:tz},AbortError:nz}=Mi,{Symbol:FP}=qn,{kIsDestroyed:rz,isDestroyed:iz,isFinished:sz,isServerRequest:oz}=tc,zP=FP("kDestroy"),Yv=FP("kConstruct");function KP(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function az(t,e){const n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof e=="function"&&e(),this):(KP(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?ak(this,t,e):this.once(zP,function(s){ak(this,ez(s,t),e)}),this)}function ak(t,e,n){let r=!1;function i(s){if(r)return;r=!0;const o=t._readableState,a=t._writableState;KP(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof n=="function"&&n(s),s?ta.nextTick(cz,t,s):ta.nextTick(HP,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function cz(t,e){Jv(t,e),HP(t)}function HP(t){const e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(n!=null&&n.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function Jv(t,e){const n=t._readableState,r=t._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function lz(){const t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function Zv(t,e,n){const r=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),r&&!r.errored&&(r.errored=e),n?ta.nextTick(Jv,t,e):Jv(t,e))}function uz(t,e){if(typeof t._construct!="function")return;const n=t._readableState,r=t._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),t.once(Yv,e),!(t.listenerCount(Yv)>1)&&ta.nextTick(dz,t)}function dz(t){let e=!1;function n(r){if(e){Zv(t,r??new tz);return}e=!0;const i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(zP,r):r?Zv(t,r,!0):ta.nextTick(fz,t)}try{t._construct(r=>{ta.nextTick(n,r)})}catch(r){ta.nextTick(n,r)}}function fz(t){t.emit(Yv)}function ck(t){return(t==null?void 0:t.setHeader)&&typeof t.abort=="function"}function WP(t){t.emit("close")}function hz(t,e){t.emit("error",e),ta.nextTick(WP,t)}function pz(t,e){!t||iz(t)||(!e&&!sz(t)&&(e=new nz),oz(t)?(t.socket=null,t.destroy(e)):ck(t)?t.abort():ck(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?ta.nextTick(hz,t,e):ta.nextTick(WP,t),t.destroyed||(t[rz]=!0))}var rf={construct:uz,destroyer:pz,destroy:az,undestroy:lz,errorOrDestroy:Zv};const{ArrayIsArray:gz,ObjectSetPrototypeOf:qP}=qn,{EventEmitter:Tw}=xi;function Ow(t){Tw.call(this,t)}qP(Ow.prototype,Tw.prototype);qP(Ow,Tw);Ow.prototype.pipe=function(t,e){const n=this;function r(u){t.writable&&t.write(u)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",o),n.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function c(u){l(),Tw.listenerCount(this,"error")===0&&this.emit("error",u)}Xv(n,"error",c),Xv(t,"error",c);function l(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t};function Xv(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):gz(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}var NE={Stream:Ow,prependListener:Xv},VP={exports:{}};(function(t){const{SymbolDispose:e}=qn,{AbortError:n,codes:r}=Mi,{isNodeStream:i,isWebStream:s,kControllerErrorFunction:o}=tc,a=fl,{ERR_INVALID_ARG_TYPE:c}=r;let l;const u=(d,f)=>{if(typeof d!="object"||!("aborted"in d))throw new c(f,"AbortSignal",d)};t.exports.addAbortSignal=function(f,h){if(u(f,"signal"),!i(h)&&!s(h))throw new c("stream",["ReadableStream","WritableStream","Stream"],h);return t.exports.addAbortSignalNoValidate(f,h)},t.exports.addAbortSignalNoValidate=function(d,f){if(typeof d!="object"||!("aborted"in d))return f;const h=i(f)?()=>{f.destroy(new n(void 0,{cause:d.reason}))}:()=>{f[o](new n(void 0,{cause:d.reason}))};if(d.aborted)h();else{l=l||is.addAbortListener;const p=l(d,h);a(f,p[e])}return f}})(VP);var Pw=VP.exports;const{StringPrototypeSlice:lk,SymbolIterator:mz,TypedArrayPrototypeSet:Ng,Uint8Array:wz}=qn,{Buffer:ub}=al,{inspect:yz}=is;var bz=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(e){const n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=e+n.data;return r}concat(e){if(this.length===0)return ub.alloc(0);const n=ub.allocUnsafe(e>>>0);let r=this.head,i=0;for(;r;)Ng(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(e,n){const r=this.head.data;if(e<r.length){const i=r.slice(0,e);return this.head.data=r.slice(e),i}return e===r.length?this.shift():n?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[mz](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let n="",r=this.head,i=0;do{const s=r.data;if(e>s.length)n+=s,e-=s.length;else{e===s.length?(n+=s,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=lk(s,0,e),this.head=r,r.data=lk(s,e));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(e){const n=ub.allocUnsafe(e),r=e;let i=this.head,s=0;do{const o=i.data;if(e>o.length)Ng(n,o,r-e),e-=o.length;else{e===o.length?(Ng(n,o,r-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(Ng(n,new wz(o.buffer,o.byteOffset,e),r-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,n}[Symbol.for("nodejs.util.inspect.custom")](e,n){return yz(this,{...n,depth:0,customInspect:!1})}};const{MathFloor:vz,NumberIsInteger:xz}=qn,{validateInteger:Ez}=Np,{ERR_INVALID_ARG_VALUE:Sz}=Mi.codes;let GP=16*1024,YP=16;function _z(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function JP(t){return t?YP:GP}function kz(t,e){Ez(e,"value",0),t?YP=e:GP=e}function Az(t,e,n,r){const i=_z(e,r,n);if(i!=null){if(!xz(i)||i<0){const s=r?`options.${n}`:"options.highWaterMark";throw new Sz(s,i)}return vz(i)}return JP(t.objectMode)}var Nw={getHighWaterMark:Az,getDefaultHighWaterMark:JP,setDefaultHighWaterMark:kz};const uk=dl,{PromisePrototypeThen:Iz,SymbolAsyncIterator:dk,SymbolIterator:fk}=qn,{Buffer:Cz}=al,{ERR_INVALID_ARG_TYPE:Rz,ERR_STREAM_NULL_VALUES:Tz}=Mi.codes;function Oz(t,e,n){let r;if(typeof e=="string"||e instanceof Cz)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});let i;if(e&&e[dk])i=!0,r=e[dk]();else if(e&&e[fk])i=!1,r=e[fk]();else throw new Rz("iterable",["Iterable"],e);const s=new t({objectMode:!0,highWaterMark:1,...n});let o=!1;s._read=function(){o||(o=!0,c())},s._destroy=function(l,u){Iz(a(l),()=>uk.nextTick(u,l),d=>uk.nextTick(u,d||l))};async function a(l){const u=l!=null,d=typeof r.throw=="function";if(u&&d){const{value:f,done:h}=await r.throw(l);if(await f,h)return}if(typeof r.return=="function"){const{value:f}=await r.return();await f}}async function c(){for(;;){try{const{value:l,done:u}=i?await r.next():r.next();if(u)s.push(null);else{const d=l&&typeof l.then=="function"?await l:l;if(d===null)throw o=!1,new Tz;if(s.push(d))continue;o=!1}}catch(l){s.destroy(l)}break}}return s}var ZP=Oz,db,hk;function Lw(){if(hk)return db;hk=1;const t=dl,{ArrayPrototypeIndexOf:e,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:i,ObjectDefineProperties:s,ObjectKeys:o,ObjectSetPrototypeOf:a,Promise:c,SafeSet:l,SymbolAsyncDispose:u,SymbolAsyncIterator:d,Symbol:f}=qn;db=ct,ct.ReadableState=Qn;const{EventEmitter:h}=xi,{Stream:p,prependListener:g}=NE,{Buffer:w}=al,{addAbortSignal:y}=Pw,b=fl;let m=is.debuglog("stream",K=>{m=K});const x=bz,E=rf,{getHighWaterMark:A,getDefaultHighWaterMark:k}=Nw,{aggregateTwoErrors:S,codes:{ERR_INVALID_ARG_TYPE:C,ERR_METHOD_NOT_IMPLEMENTED:F,ERR_OUT_OF_RANGE:N,ERR_STREAM_PUSH_AFTER_EOF:L,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:j},AbortError:B}=Mi,{validateObject:O}=Np,R=f("kPaused"),{StringDecoder:D}=$D,T=ZP;a(ct.prototype,p.prototype),a(ct,p);const I=()=>{},{errorOrDestroy:M}=E,Y=1,X=2,Z=4,le=8,ae=16,ye=32,Ee=64,ee=128,te=256,J=512,Q=1024,oe=2048,W=4096,V=8192,se=16384,Re=32768,Pe=65536,ze=1<<17,ht=1<<18;function pt(K){return{enumerable:!1,get(){return(this.state&K)!==0},set(q){q?this.state|=K:this.state&=~K}}}s(Qn.prototype,{objectMode:pt(Y),ended:pt(X),endEmitted:pt(Z),reading:pt(le),constructed:pt(ae),sync:pt(ye),needReadable:pt(Ee),emittedReadable:pt(ee),readableListening:pt(te),resumeScheduled:pt(J),errorEmitted:pt(Q),emitClose:pt(oe),autoDestroy:pt(W),destroyed:pt(V),closed:pt(se),closeEmitted:pt(Re),multiAwaitDrain:pt(Pe),readingMore:pt(ze),dataEmitted:pt(ht)});function Qn(K,q,De){typeof De!="boolean"&&(De=q instanceof Za()),this.state=oe|W|ae|ye,K&&K.objectMode&&(this.state|=Y),De&&K&&K.readableObjectMode&&(this.state|=Y),this.highWaterMark=K?A(this,K,"readableHighWaterMark",De):k(!1),this.buffer=new x,this.length=0,this.pipes=[],this.flowing=null,this[R]=null,K&&K.emitClose===!1&&(this.state&=-2049),K&&K.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=K&&K.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,K&&K.encoding&&(this.decoder=new D(K.encoding),this.encoding=K.encoding)}function ct(K){if(!(this instanceof ct))return new ct(K);const q=this instanceof Za();this._readableState=new Qn(K,this,q),K&&(typeof K.read=="function"&&(this._read=K.read),typeof K.destroy=="function"&&(this._destroy=K.destroy),typeof K.construct=="function"&&(this._construct=K.construct),K.signal&&!q&&y(K.signal,this)),p.call(this,K),E.construct(this,()=>{this._readableState.needReadable&&to(this,this._readableState)})}ct.prototype.destroy=E.destroy,ct.prototype._undestroy=E.undestroy,ct.prototype._destroy=function(K,q){q(K)},ct.prototype[h.captureRejectionSymbol]=function(K){this.destroy(K)},ct.prototype[u]=function(){let K;return this.destroyed||(K=this.readableEnded?null:new B,this.destroy(K)),new c((q,De)=>b(this,$e=>$e&&$e!==K?De($e):q(null)))},ct.prototype.push=function(K,q){return or(this,K,q,!1)},ct.prototype.unshift=function(K,q){return or(this,K,q,!0)};function or(K,q,De,$e){m("readableAddChunk",q);const qe=K._readableState;let er;if(qe.state&Y||(typeof q=="string"?(De=De||qe.defaultEncoding,qe.encoding!==De&&($e&&qe.encoding?q=w.from(q,De).toString(qe.encoding):(q=w.from(q,De),De=""))):q instanceof w?De="":p._isUint8Array(q)?(q=p._uint8ArrayToBuffer(q),De=""):q!=null&&(er=new C("chunk",["string","Buffer","Uint8Array"],q))),er)M(K,er);else if(q===null)qe.state&=-9,eo(K,qe);else if(qe.state&Y||q&&q.length>0)if($e)if(qe.state&Z)M(K,new j);else{if(qe.destroyed||qe.errored)return!1;$r(K,qe,q,!0)}else if(qe.ended)M(K,new L);else{if(qe.destroyed||qe.errored)return!1;qe.state&=-9,qe.decoder&&!De?(q=qe.decoder.write(q),qe.objectMode||q.length!==0?$r(K,qe,q,!1):to(K,qe)):$r(K,qe,q,!1)}else $e||(qe.state&=-9,to(K,qe));return!qe.ended&&(qe.length<qe.highWaterMark||qe.length===0)}function $r(K,q,De,$e){q.flowing&&q.length===0&&!q.sync&&K.listenerCount("data")>0?(q.state&Pe?q.awaitDrainWriters.clear():q.awaitDrainWriters=null,q.dataEmitted=!0,K.emit("data",De)):(q.length+=q.objectMode?1:De.length,$e?q.buffer.unshift(De):q.buffer.push(De),q.state&Ee&&Cs(K)),to(K,q)}ct.prototype.isPaused=function(){const K=this._readableState;return K[R]===!0||K.flowing===!1},ct.prototype.setEncoding=function(K){const q=new D(K);this._readableState.decoder=q,this._readableState.encoding=this._readableState.decoder.encoding;const De=this._readableState.buffer;let $e="";for(const qe of De)$e+=q.write(qe);return De.clear(),$e!==""&&De.push($e),this._readableState.length=$e.length,this};const Si=1073741824;function Qs(K){if(K>Si)throw new N("size","<= 1GiB",K);return K--,K|=K>>>1,K|=K>>>2,K|=K>>>4,K|=K>>>8,K|=K>>>16,K++,K}function os(K,q){return K<=0||q.length===0&&q.ended?0:q.state&Y?1:r(K)?q.flowing&&q.length?q.buffer.first().length:q.length:K<=q.length?K:q.ended?q.length:0}ct.prototype.read=function(K){m("read",K),K===void 0?K=NaN:n(K)||(K=i(K,10));const q=this._readableState,De=K;if(K>q.highWaterMark&&(q.highWaterMark=Qs(K)),K!==0&&(q.state&=-129),K===0&&q.needReadable&&((q.highWaterMark!==0?q.length>=q.highWaterMark:q.length>0)||q.ended))return m("read: emitReadable",q.length,q.ended),q.length===0&&q.ended?ml(this):Cs(this),null;if(K=os(K,q),K===0&&q.ended)return q.length===0&&ml(this),null;let $e=(q.state&Ee)!==0;if(m("need readable",$e),(q.length===0||q.length-K<q.highWaterMark)&&($e=!0,m("length less than watermark",$e)),q.ended||q.reading||q.destroyed||q.errored||!q.constructed)$e=!1,m("reading, ended or constructing",$e);else if($e){m("do read"),q.state|=le|ye,q.length===0&&(q.state|=Ee);try{this._read(q.highWaterMark)}catch(er){M(this,er)}q.state&=-33,q.reading||(K=os(De,q))}let qe;return K>0?qe=gl(K,q):qe=null,qe===null?(q.needReadable=q.length<=q.highWaterMark,K=0):(q.length-=K,q.multiAwaitDrain?q.awaitDrainWriters.clear():q.awaitDrainWriters=null),q.length===0&&(q.ended||(q.needReadable=!0),De!==K&&q.ended&&ml(this)),qe!==null&&!q.errorEmitted&&!q.closeEmitted&&(q.dataEmitted=!0,this.emit("data",qe)),qe};function eo(K,q){if(m("onEofChunk"),!q.ended){if(q.decoder){const De=q.decoder.end();De&&De.length&&(q.buffer.push(De),q.length+=q.objectMode?1:De.length)}q.ended=!0,q.sync?Cs(K):(q.needReadable=!1,q.emittedReadable=!0,Br(K))}}function Cs(K){const q=K._readableState;m("emitReadable",q.needReadable,q.emittedReadable),q.needReadable=!1,q.emittedReadable||(m("emitReadable",q.flowing),q.emittedReadable=!0,t.nextTick(Br,K))}function Br(K){const q=K._readableState;m("emitReadable_",q.destroyed,q.length,q.ended),!q.destroyed&&!q.errored&&(q.length||q.ended)&&(K.emit("readable"),q.emittedReadable=!1),q.needReadable=!q.flowing&&!q.ended&&q.length<=q.highWaterMark,To(K)}function to(K,q){!q.readingMore&&q.constructed&&(q.readingMore=!0,t.nextTick(nc,K,q))}function nc(K,q){for(;!q.reading&&!q.ended&&(q.length<q.highWaterMark||q.flowing&&q.length===0);){const De=q.length;if(m("maybeReadMore read 0"),K.read(0),De===q.length)break}q.readingMore=!1}ct.prototype._read=function(K){throw new F("_read()")},ct.prototype.pipe=function(K,q){const De=this,$e=this._readableState;$e.pipes.length===1&&($e.multiAwaitDrain||($e.multiAwaitDrain=!0,$e.awaitDrainWriters=new l($e.awaitDrainWriters?[$e.awaitDrainWriters]:[]))),$e.pipes.push(K),m("pipe count=%d opts=%j",$e.pipes.length,q);const er=(!q||q.end!==!1)&&K!==t.stdout&&K!==t.stderr?$:Fe;$e.endEmitted?t.nextTick(er):De.once("end",er),K.on("unpipe",_);function _(Ot,Ke){m("onunpipe"),Ot===De&&Ke&&Ke.hasUnpiped===!1&&(Ke.hasUnpiped=!0,U())}function $(){m("onend"),K.end()}let P,v=!1;function U(){m("cleanup"),K.removeListener("close",Te),K.removeListener("finish",Ve),P&&K.removeListener("drain",P),K.removeListener("error",we),K.removeListener("unpipe",_),De.removeListener("end",$),De.removeListener("end",Fe),De.removeListener("data",ce),v=!0,P&&$e.awaitDrainWriters&&(!K._writableState||K._writableState.needDrain)&&P()}function ie(){v||($e.pipes.length===1&&$e.pipes[0]===K?(m("false write response, pause",0),$e.awaitDrainWriters=K,$e.multiAwaitDrain=!1):$e.pipes.length>1&&$e.pipes.includes(K)&&(m("false write response, pause",$e.awaitDrainWriters.size),$e.awaitDrainWriters.add(K)),De.pause()),P||(P=rc(De,K),K.on("drain",P))}De.on("data",ce);function ce(Ot){m("ondata");const Ke=K.write(Ot);m("dest.write",Ke),Ke===!1&&ie()}function we(Ot){if(m("onerror",Ot),Fe(),K.removeListener("error",we),K.listenerCount("error")===0){const Ke=K._writableState||K._readableState;Ke&&!Ke.errorEmitted?M(K,Ot):K.emit("error",Ot)}}g(K,"error",we);function Te(){K.removeListener("finish",Ve),Fe()}K.once("close",Te);function Ve(){m("onfinish"),K.removeListener("close",Te),Fe()}K.once("finish",Ve);function Fe(){m("unpipe"),De.unpipe(K)}return K.emit("pipe",De),K.writableNeedDrain===!0?ie():$e.flowing||(m("pipe resume"),De.resume()),K};function rc(K,q){return function(){const $e=K._readableState;$e.awaitDrainWriters===q?(m("pipeOnDrain",1),$e.awaitDrainWriters=null):$e.multiAwaitDrain&&(m("pipeOnDrain",$e.awaitDrainWriters.size),$e.awaitDrainWriters.delete(q)),(!$e.awaitDrainWriters||$e.awaitDrainWriters.size===0)&&K.listenerCount("data")&&K.resume()}}ct.prototype.unpipe=function(K){const q=this._readableState,De={hasUnpiped:!1};if(q.pipes.length===0)return this;if(!K){const qe=q.pipes;q.pipes=[],this.pause();for(let er=0;er<qe.length;er++)qe[er].emit("unpipe",this,{hasUnpiped:!1});return this}const $e=e(q.pipes,K);return $e===-1?this:(q.pipes.splice($e,1),q.pipes.length===0&&this.pause(),K.emit("unpipe",this,De),this)},ct.prototype.on=function(K,q){const De=p.prototype.on.call(this,K,q),$e=this._readableState;return K==="data"?($e.readableListening=this.listenerCount("readable")>0,$e.flowing!==!1&&this.resume()):K==="readable"&&!$e.endEmitted&&!$e.readableListening&&($e.readableListening=$e.needReadable=!0,$e.flowing=!1,$e.emittedReadable=!1,m("on readable",$e.length,$e.reading),$e.length?Cs(this):$e.reading||t.nextTick(as,this)),De},ct.prototype.addListener=ct.prototype.on,ct.prototype.removeListener=function(K,q){const De=p.prototype.removeListener.call(this,K,q);return K==="readable"&&t.nextTick(no,this),De},ct.prototype.off=ct.prototype.removeListener,ct.prototype.removeAllListeners=function(K){const q=p.prototype.removeAllListeners.apply(this,arguments);return(K==="readable"||K===void 0)&&t.nextTick(no,this),q};function no(K){const q=K._readableState;q.readableListening=K.listenerCount("readable")>0,q.resumeScheduled&&q[R]===!1?q.flowing=!0:K.listenerCount("data")>0?K.resume():q.readableListening||(q.flowing=null)}function as(K){m("readable nexttick read 0"),K.read(0)}ct.prototype.resume=function(){const K=this._readableState;return K.flowing||(m("resume"),K.flowing=!K.readableListening,Ro(this,K)),K[R]=!1,this};function Ro(K,q){q.resumeScheduled||(q.resumeScheduled=!0,t.nextTick(pa,K,q))}function pa(K,q){m("resume",q.reading),q.reading||K.read(0),q.resumeScheduled=!1,K.emit("resume"),To(K),q.flowing&&!q.reading&&K.read(0)}ct.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[R]=!0,this};function To(K){const q=K._readableState;for(m("flow",q.flowing);q.flowing&&K.read()!==null;);}ct.prototype.wrap=function(K){let q=!1;K.on("data",$e=>{!this.push($e)&&K.pause&&(q=!0,K.pause())}),K.on("end",()=>{this.push(null)}),K.on("error",$e=>{M(this,$e)}),K.on("close",()=>{this.destroy()}),K.on("destroy",()=>{this.destroy()}),this._read=()=>{q&&K.resume&&(q=!1,K.resume())};const De=o(K);for(let $e=1;$e<De.length;$e++){const qe=De[$e];this[qe]===void 0&&typeof K[qe]=="function"&&(this[qe]=K[qe].bind(K))}return this},ct.prototype[d]=function(){return ii(this)},ct.prototype.iterator=function(K){return K!==void 0&&O(K,"options"),ii(this,K)};function ii(K,q){typeof K.read!="function"&&(K=ct.wrap(K,{objectMode:!0}));const De=ic(K,q);return De.stream=K,De}async function*ic(K,q){let De=I;function $e(_){this===K?(De(),De=I):De=_}K.on("readable",$e);let qe;const er=b(K,{writable:!1},_=>{qe=_?S(qe,_):null,De(),De=I});try{for(;;){const _=K.destroyed?null:K.read();if(_!==null)yield _;else{if(qe)throw qe;if(qe===null)return;await new c($e)}}}catch(_){throw qe=S(qe,_),qe}finally{(qe||(q==null?void 0:q.destroyOnReturn)!==!1)&&(qe===void 0||K._readableState.autoDestroy)?E.destroyer(K,null):(K.off("readable",$e),er())}}s(ct.prototype,{readable:{__proto__:null,get(){const K=this._readableState;return!!K&&K.readable!==!1&&!K.destroyed&&!K.errorEmitted&&!K.endEmitted},set(K){this._readableState&&(this._readableState.readable=!!K)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(K){this._readableState&&(this._readableState.flowing=K)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(K){this._readableState&&(this._readableState.destroyed=K)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(Qn.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[R]!==!1},set(K){this[R]=!!K}}}),ct._fromList=gl;function gl(K,q){if(q.length===0)return null;let De;return q.objectMode?De=q.buffer.shift():!K||K>=q.length?(q.decoder?De=q.buffer.join(""):q.buffer.length===1?De=q.buffer.first():De=q.buffer.concat(q.length),q.buffer.clear()):De=q.buffer.consume(K,q.decoder),De}function ml(K){const q=K._readableState;m("endReadable",q.endEmitted),q.endEmitted||(q.ended=!0,t.nextTick(wl,q,K))}function wl(K,q){if(m("endReadableNT",K.endEmitted,K.length),!K.errored&&!K.closeEmitted&&!K.endEmitted&&K.length===0){if(K.endEmitted=!0,q.emit("end"),q.writable&&q.allowHalfOpen===!1)t.nextTick(Mr,q);else if(K.autoDestroy){const De=q._writableState;(!De||De.autoDestroy&&(De.finished||De.writable===!1))&&q.destroy()}}}function Mr(K){K.writable&&!K.writableEnded&&!K.destroyed&&K.end()}ct.from=function(K,q){return T(ct,K,q)};let _i;function cs(){return _i===void 0&&(_i={}),_i}return ct.fromWeb=function(K,q){return cs().newStreamReadableFromReadableStream(K,q)},ct.toWeb=function(K,q){return cs().newReadableStreamFromStreamReadable(K,q)},ct.wrap=function(K,q){var De,$e;return new ct({objectMode:(De=($e=K.readableObjectMode)!==null&&$e!==void 0?$e:K.objectMode)!==null&&De!==void 0?De:!0,...q,destroy(qe,er){E.destroyer(K,qe),er(qe)}}).wrap(K)},db}var fb,pk;function LE(){if(pk)return fb;pk=1;const t=dl,{ArrayPrototypeSlice:e,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:i,ObjectDefineProperties:s,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:a,Symbol:c,SymbolHasInstance:l}=qn;fb=O,O.WritableState=j;const{EventEmitter:u}=xi,d=NE.Stream,{Buffer:f}=al,h=rf,{addAbortSignal:p}=Pw,{getHighWaterMark:g,getDefaultHighWaterMark:w}=Nw,{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_MULTIPLE_CALLBACK:m,ERR_STREAM_CANNOT_PIPE:x,ERR_STREAM_DESTROYED:E,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:k,ERR_STREAM_WRITE_AFTER_END:S,ERR_UNKNOWN_ENCODING:C}=Mi.codes,{errorOrDestroy:F}=h;o(O.prototype,d.prototype),o(O,d);function N(){}const L=c("kOnFinished");function j(W,V,se){typeof se!="boolean"&&(se=V instanceof Za()),this.objectMode=!!(W&&W.objectMode),se&&(this.objectMode=this.objectMode||!!(W&&W.writableObjectMode)),this.highWaterMark=W?g(this,W,"writableHighWaterMark",se):w(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Re=!!(W&&W.decodeStrings===!1);this.decodeStrings=!Re,this.defaultEncoding=W&&W.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=M.bind(void 0,V),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,B(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!W||W.emitClose!==!1,this.autoDestroy=!W||W.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[L]=[]}function B(W){W.buffered=[],W.bufferedIndex=0,W.allBuffers=!0,W.allNoop=!0}j.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},i(j.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function O(W){const V=this instanceof Za();if(!V&&!r(O,this))return new O(W);this._writableState=new j(W,this,V),W&&(typeof W.write=="function"&&(this._write=W.write),typeof W.writev=="function"&&(this._writev=W.writev),typeof W.destroy=="function"&&(this._destroy=W.destroy),typeof W.final=="function"&&(this._final=W.final),typeof W.construct=="function"&&(this._construct=W.construct),W.signal&&p(W.signal,this)),d.call(this,W),h.construct(this,()=>{const se=this._writableState;se.writing||le(this,se),ee(this,se)})}i(O,l,{__proto__:null,value:function(W){return r(this,W)?!0:this!==O?!1:W&&W._writableState instanceof j}}),O.prototype.pipe=function(){F(this,new x)};function R(W,V,se,Re){const Pe=W._writableState;if(typeof se=="function")Re=se,se=Pe.defaultEncoding;else{if(!se)se=Pe.defaultEncoding;else if(se!=="buffer"&&!f.isEncoding(se))throw new C(se);typeof Re!="function"&&(Re=N)}if(V===null)throw new k;if(!Pe.objectMode)if(typeof V=="string")Pe.decodeStrings!==!1&&(V=f.from(V,se),se="buffer");else if(V instanceof f)se="buffer";else if(d._isUint8Array(V))V=d._uint8ArrayToBuffer(V),se="buffer";else throw new y("chunk",["string","Buffer","Uint8Array"],V);let ze;return Pe.ending?ze=new S:Pe.destroyed&&(ze=new E("write")),ze?(t.nextTick(Re,ze),F(W,ze,!0),ze):(Pe.pendingcb++,D(W,Pe,V,se,Re))}O.prototype.write=function(W,V,se){return R(this,W,V,se)===!0},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){const W=this._writableState;W.corked&&(W.corked--,W.writing||le(this,W))},O.prototype.setDefaultEncoding=function(V){if(typeof V=="string"&&(V=a(V)),!f.isEncoding(V))throw new C(V);return this._writableState.defaultEncoding=V,this};function D(W,V,se,Re,Pe){const ze=V.objectMode?1:se.length;V.length+=ze;const ht=V.length<V.highWaterMark;return ht||(V.needDrain=!0),V.writing||V.corked||V.errored||!V.constructed?(V.buffered.push({chunk:se,encoding:Re,callback:Pe}),V.allBuffers&&Re!=="buffer"&&(V.allBuffers=!1),V.allNoop&&Pe!==N&&(V.allNoop=!1)):(V.writelen=ze,V.writecb=Pe,V.writing=!0,V.sync=!0,W._write(se,Re,V.onwrite),V.sync=!1),ht&&!V.errored&&!V.destroyed}function T(W,V,se,Re,Pe,ze,ht){V.writelen=Re,V.writecb=ht,V.writing=!0,V.sync=!0,V.destroyed?V.onwrite(new E("write")):se?W._writev(Pe,V.onwrite):W._write(Pe,ze,V.onwrite),V.sync=!1}function I(W,V,se,Re){--V.pendingcb,Re(se),Z(V),F(W,se)}function M(W,V){const se=W._writableState,Re=se.sync,Pe=se.writecb;if(typeof Pe!="function"){F(W,new m);return}se.writing=!1,se.writecb=null,se.length-=se.writelen,se.writelen=0,V?(V.stack,se.errored||(se.errored=V),W._readableState&&!W._readableState.errored&&(W._readableState.errored=V),Re?t.nextTick(I,W,se,V,Pe):I(W,se,V,Pe)):(se.buffered.length>se.bufferedIndex&&le(W,se),Re?se.afterWriteTickInfo!==null&&se.afterWriteTickInfo.cb===Pe?se.afterWriteTickInfo.count++:(se.afterWriteTickInfo={count:1,cb:Pe,stream:W,state:se},t.nextTick(Y,se.afterWriteTickInfo)):X(W,se,1,Pe))}function Y({stream:W,state:V,count:se,cb:Re}){return V.afterWriteTickInfo=null,X(W,V,se,Re)}function X(W,V,se,Re){for(!V.ending&&!W.destroyed&&V.length===0&&V.needDrain&&(V.needDrain=!1,W.emit("drain"));se-- >0;)V.pendingcb--,Re();V.destroyed&&Z(V),ee(W,V)}function Z(W){if(W.writing)return;for(let Pe=W.bufferedIndex;Pe<W.buffered.length;++Pe){var V;const{chunk:ze,callback:ht}=W.buffered[Pe],pt=W.objectMode?1:ze.length;W.length-=pt,ht((V=W.errored)!==null&&V!==void 0?V:new E("write"))}const se=W[L].splice(0);for(let Pe=0;Pe<se.length;Pe++){var Re;se[Pe]((Re=W.errored)!==null&&Re!==void 0?Re:new E("end"))}B(W)}function le(W,V){if(V.corked||V.bufferProcessing||V.destroyed||!V.constructed)return;const{buffered:se,bufferedIndex:Re,objectMode:Pe}=V,ze=se.length-Re;if(!ze)return;let ht=Re;if(V.bufferProcessing=!0,ze>1&&W._writev){V.pendingcb-=ze-1;const pt=V.allNoop?N:ct=>{for(let or=ht;or<se.length;++or)se[or].callback(ct)},Qn=V.allNoop&&ht===0?se:e(se,ht);Qn.allBuffers=V.allBuffers,T(W,V,!0,V.length,Qn,"",pt),B(V)}else{do{const{chunk:pt,encoding:Qn,callback:ct}=se[ht];se[ht++]=null;const or=Pe?1:pt.length;T(W,V,!1,or,pt,Qn,ct)}while(ht<se.length&&!V.writing);ht===se.length?B(V):ht>256?(se.splice(0,ht),V.bufferedIndex=0):V.bufferedIndex=ht}V.bufferProcessing=!1}O.prototype._write=function(W,V,se){if(this._writev)this._writev([{chunk:W,encoding:V}],se);else throw new b("_write()")},O.prototype._writev=null,O.prototype.end=function(W,V,se){const Re=this._writableState;typeof W=="function"?(se=W,W=null,V=null):typeof V=="function"&&(se=V,V=null);let Pe;if(W!=null){const ze=R(this,W,V);ze instanceof n&&(Pe=ze)}return Re.corked&&(Re.corked=1,this.uncork()),Pe||(!Re.errored&&!Re.ending?(Re.ending=!0,ee(this,Re,!0),Re.ended=!0):Re.finished?Pe=new A("end"):Re.destroyed&&(Pe=new E("end"))),typeof se=="function"&&(Pe||Re.finished?t.nextTick(se,Pe):Re[L].push(se)),this};function ae(W){return W.ending&&!W.destroyed&&W.constructed&&W.length===0&&!W.errored&&W.buffered.length===0&&!W.finished&&!W.writing&&!W.errorEmitted&&!W.closeEmitted}function ye(W,V){let se=!1;function Re(Pe){if(se){F(W,Pe??m());return}if(se=!0,V.pendingcb--,Pe){const ze=V[L].splice(0);for(let ht=0;ht<ze.length;ht++)ze[ht](Pe);F(W,Pe,V.sync)}else ae(V)&&(V.prefinished=!0,W.emit("prefinish"),V.pendingcb++,t.nextTick(te,W,V))}V.sync=!0,V.pendingcb++;try{W._final(Re)}catch(Pe){Re(Pe)}V.sync=!1}function Ee(W,V){!V.prefinished&&!V.finalCalled&&(typeof W._final=="function"&&!V.destroyed?(V.finalCalled=!0,ye(W,V)):(V.prefinished=!0,W.emit("prefinish")))}function ee(W,V,se){ae(V)&&(Ee(W,V),V.pendingcb===0&&(se?(V.pendingcb++,t.nextTick((Re,Pe)=>{ae(Pe)?te(Re,Pe):Pe.pendingcb--},W,V)):ae(V)&&(V.pendingcb++,te(W,V))))}function te(W,V){V.pendingcb--,V.finished=!0;const se=V[L].splice(0);for(let Re=0;Re<se.length;Re++)se[Re]();if(W.emit("finish"),V.autoDestroy){const Re=W._readableState;(!Re||Re.autoDestroy&&(Re.endEmitted||Re.readable===!1))&&W.destroy()}}s(O.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(W){this._writableState&&(this._writableState.destroyed=W)}},writable:{__proto__:null,get(){const W=this._writableState;return!!W&&W.writable!==!1&&!W.destroyed&&!W.errored&&!W.ending&&!W.ended},set(W){this._writableState&&(this._writableState.writable=!!W)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const W=this._writableState;return W?!W.destroyed&&!W.ending&&W.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const J=h.destroy;O.prototype.destroy=function(W,V){const se=this._writableState;return!se.destroyed&&(se.bufferedIndex<se.buffered.length||se[L].length)&&t.nextTick(Z,se),J.call(this,W,V),this},O.prototype._undestroy=h.undestroy,O.prototype._destroy=function(W,V){V(W)},O.prototype[u.captureRejectionSymbol]=function(W){this.destroy(W)};let Q;function oe(){return Q===void 0&&(Q={}),Q}return O.fromWeb=function(W,V){return oe().newStreamWritableFromWritableStream(W,V)},O.toWeb=function(W){return oe().newWritableStreamFromStreamWritable(W)},fb}var hb,gk;function Pz(){if(gk)return hb;gk=1;const t=dl,e=al,{isReadable:n,isWritable:r,isIterable:i,isNodeStream:s,isReadableNodeStream:o,isWritableNodeStream:a,isDuplexNodeStream:c,isReadableStream:l,isWritableStream:u}=tc,d=fl,{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:p}}=Mi,{destroyer:g}=rf,w=Za(),y=Lw(),b=LE(),{createDeferredPromise:m}=is,x=ZP,E=globalThis.Blob||e.Blob,A=typeof E<"u"?function(j){return j instanceof E}:function(j){return!1},k=globalThis.AbortController||tp().AbortController,{FunctionPrototypeCall:S}=qn;class C extends w{constructor(j){super(j),(j==null?void 0:j.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(j==null?void 0:j.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}hb=function L(j,B){if(c(j))return j;if(o(j))return N({readable:j});if(a(j))return N({writable:j});if(s(j))return N({writable:!1,readable:!1});if(l(j))return N({readable:y.fromWeb(j)});if(u(j))return N({writable:b.fromWeb(j)});if(typeof j=="function"){const{value:R,write:D,final:T,destroy:I}=F(j);if(i(R))return x(C,R,{objectMode:!0,write:D,final:T,destroy:I});const M=R==null?void 0:R.then;if(typeof M=="function"){let Y;const X=S(M,R,Z=>{if(Z!=null)throw new p("nully","body",Z)},Z=>{g(Y,Z)});return Y=new C({objectMode:!0,readable:!1,write:D,final(Z){T(async()=>{try{await X,t.nextTick(Z,null)}catch(le){t.nextTick(Z,le)}})},destroy:I})}throw new p("Iterable, AsyncIterable or AsyncFunction",B,R)}if(A(j))return L(j.arrayBuffer());if(i(j))return x(C,j,{objectMode:!0,writable:!1});if(l(j==null?void 0:j.readable)&&u(j==null?void 0:j.writable))return C.fromWeb(j);if(typeof(j==null?void 0:j.writable)=="object"||typeof(j==null?void 0:j.readable)=="object"){const R=j!=null&&j.readable?o(j==null?void 0:j.readable)?j==null?void 0:j.readable:L(j.readable):void 0,D=j!=null&&j.writable?a(j==null?void 0:j.writable)?j==null?void 0:j.writable:L(j.writable):void 0;return N({readable:R,writable:D})}const O=j==null?void 0:j.then;if(typeof O=="function"){let R;return S(O,j,D=>{D!=null&&R.push(D),R.push(null)},D=>{g(R,D)}),R=new C({objectMode:!0,writable:!1,read(){}})}throw new h(B,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],j)};function F(L){let{promise:j,resolve:B}=m();const O=new k,R=O.signal;return{value:L(async function*(){for(;;){const T=j;j=null;const{chunk:I,done:M,cb:Y}=await T;if(t.nextTick(Y),M)return;if(R.aborted)throw new f(void 0,{cause:R.reason});({promise:j,resolve:B}=m()),yield I}}(),{signal:R}),write(T,I,M){const Y=B;B=null,Y({chunk:T,done:!1,cb:M})},final(T){const I=B;B=null,I({done:!0,cb:T})},destroy(T,I){O.abort(),I(T)}}}function N(L){const j=L.readable&&typeof L.readable.read!="function"?y.wrap(L.readable):L.readable,B=L.writable;let O=!!n(j),R=!!r(B),D,T,I,M,Y;function X(Z){const le=M;M=null,le?le(Z):Z&&Y.destroy(Z)}return Y=new C({readableObjectMode:!!(j!=null&&j.readableObjectMode),writableObjectMode:!!(B!=null&&B.writableObjectMode),readable:O,writable:R}),R&&(d(B,Z=>{R=!1,Z&&g(j,Z),X(Z)}),Y._write=function(Z,le,ae){B.write(Z,le)?ae():D=ae},Y._final=function(Z){B.end(),T=Z},B.on("drain",function(){if(D){const Z=D;D=null,Z()}}),B.on("finish",function(){if(T){const Z=T;T=null,Z()}})),O&&(d(j,Z=>{O=!1,Z&&g(j,Z),X(Z)}),j.on("readable",function(){if(I){const Z=I;I=null,Z()}}),j.on("end",function(){Y.push(null)}),Y._read=function(){for(;;){const Z=j.read();if(Z===null){I=Y._read;return}if(!Y.push(Z))return}}),Y._destroy=function(Z,le){!Z&&M!==null&&(Z=new f),I=null,D=null,T=null,M===null?le(Z):(M=le,g(B,Z),g(j,Z))},Y}return hb}var pb,mk;function Za(){if(mk)return pb;mk=1;const{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:n,ObjectSetPrototypeOf:r}=qn;pb=o;const i=Lw(),s=LE();r(o.prototype,i.prototype),r(o,i);{const u=n(s.prototype);for(let d=0;d<u.length;d++){const f=u[d];o.prototype[f]||(o.prototype[f]=s.prototype[f])}}function o(u){if(!(this instanceof o))return new o(u);i.call(this,u),s.call(this,u),u?(this.allowHalfOpen=u.allowHalfOpen!==!1,u.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),u.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(o.prototype,{writable:{__proto__:null,...e(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(s.prototype,"writableLength")},writableFinished:{__proto__:null,...e(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(u){this._readableState&&this._writableState&&(this._readableState.destroyed=u,this._writableState.destroyed=u)}}});let a;function c(){return a===void 0&&(a={}),a}o.fromWeb=function(u,d){return c().newStreamDuplexFromReadableWritablePair(u,d)},o.toWeb=function(u){return c().newReadableWritablePairFromDuplex(u)};let l;return o.from=function(u){return l||(l=Pz()),l(u,"body")},pb}const{ObjectSetPrototypeOf:XP,Symbol:Nz}=qn;var QP=Xa;const{ERR_METHOD_NOT_IMPLEMENTED:Lz}=Mi.codes,DE=Za(),{getHighWaterMark:Dz}=Nw;XP(Xa.prototype,DE.prototype);XP(Xa,DE);const bh=Nz("kCallback");function Xa(t){if(!(this instanceof Xa))return new Xa(t);const e=t?Dz(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),DE.call(this,t),this._readableState.sync=!1,this[bh]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",$z)}function Qv(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,n)=>{if(e){t?t(e):this.destroy(e);return}n!=null&&this.push(n),this.push(null),t&&t()}):(this.push(null),t&&t())}function $z(){this._final!==Qv&&Qv.call(this)}Xa.prototype._final=Qv;Xa.prototype._transform=function(t,e,n){throw new Lz("_transform()")};Xa.prototype._write=function(t,e,n){const r=this._readableState,i=this._writableState,s=r.length;this._transform(t,e,(o,a)=>{if(o){n(o);return}a!=null&&this.push(a),i.ended||s===r.length||r.length<r.highWaterMark?n():this[bh]=n})};Xa.prototype._read=function(){if(this[bh]){const t=this[bh];this[bh]=null,t()}};const{ObjectSetPrototypeOf:eN}=qn;var tN=Pd;const $E=QP;eN(Pd.prototype,$E.prototype);eN(Pd,$E);function Pd(t){if(!(this instanceof Pd))return new Pd(t);$E.call(this,t)}Pd.prototype._transform=function(t,e,n){n(null,t)};const sh=dl,{ArrayIsArray:Bz,Promise:Mz,SymbolAsyncIterator:Uz,SymbolDispose:jz}=qn,wm=fl,{once:Fz}=is,zz=rf,wk=Za(),{aggregateTwoErrors:Kz,codes:{ERR_INVALID_ARG_TYPE:e2,ERR_INVALID_RETURN_VALUE:gb,ERR_MISSING_ARGS:Hz,ERR_STREAM_DESTROYED:Wz,ERR_STREAM_PREMATURE_CLOSE:qz},AbortError:Vz}=Mi,{validateFunction:Gz,validateAbortSignal:Yz}=Np,{isIterable:Cl,isReadable:mb,isReadableNodeStream:C0,isNodeStream:yk,isTransformStream:Hu,isWebStream:Jz,isReadableStream:wb,isReadableFinished:Zz}=tc,Xz=globalThis.AbortController||tp().AbortController;let yb,bb,vb;function bk(t,e,n){let r=!1;t.on("close",()=>{r=!0});const i=wm(t,{readable:e,writable:n},s=>{r=!s});return{destroy:s=>{r||(r=!0,zz.destroyer(t,s||new Wz("pipe")))},cleanup:i}}function Qz(t){return Gz(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function xb(t){if(Cl(t))return t;if(C0(t))return eK(t);throw new e2("val",["Readable","Iterable","AsyncIterable"],t)}async function*eK(t){bb||(bb=Lw()),yield*bb.prototype[Uz].call(t)}async function Lg(t,e,n,{end:r}){let i,s=null;const o=l=>{if(l&&(i=l),s){const u=s;s=null,u()}},a=()=>new Mz((l,u)=>{i?u(i):s=()=>{i?u(i):l()}});e.on("drain",o);const c=wm(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(const l of t)e.write(l)||await a();r&&(e.end(),await a()),n()}catch(l){n(i!==l?Kz(i,l):l)}finally{c(),e.off("drain",o)}}async function Eb(t,e,n,{end:r}){Hu(e)&&(e=e.writable);const i=e.getWriter();try{for await(const s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(s){try{await i.abort(s),n(s)}catch(o){n(o)}}}function tK(...t){return nN(t,Fz(Qz(t)))}function nN(t,e,n){if(t.length===1&&Bz(t[0])&&(t=t[0]),t.length<2)throw new Hz("streams");const r=new Xz,i=r.signal,s=n==null?void 0:n.signal,o=[];Yz(s,"options.signal");function a(){p(new Vz)}vb=vb||is.addAbortListener;let c;s&&(c=vb(s,a));let l,u;const d=[];let f=0;function h(b){p(b,--f===0)}function p(b,m){var x;if(b&&(!l||l.code==="ERR_STREAM_PREMATURE_CLOSE")&&(l=b),!(!l&&!m)){for(;d.length;)d.shift()(l);(x=c)===null||x===void 0||x[jz](),r.abort(),m&&(l||o.forEach(E=>E()),sh.nextTick(e,l,u))}}let g;for(let b=0;b<t.length;b++){const m=t[b],x=b<t.length-1,E=b>0,A=x||(n==null?void 0:n.end)!==!1,k=b===t.length-1;if(yk(m)){let S=function(C){C&&C.name!=="AbortError"&&C.code!=="ERR_STREAM_PREMATURE_CLOSE"&&h(C)};if(A){const{destroy:C,cleanup:F}=bk(m,x,E);d.push(C),mb(m)&&k&&o.push(F)}m.on("error",S),mb(m)&&k&&o.push(()=>{m.removeListener("error",S)})}if(b===0)if(typeof m=="function"){if(g=m({signal:i}),!Cl(g))throw new gb("Iterable, AsyncIterable or Stream","source",g)}else Cl(m)||C0(m)||Hu(m)?g=m:g=wk.from(m);else if(typeof m=="function"){if(Hu(g)){var w;g=xb((w=g)===null||w===void 0?void 0:w.readable)}else g=xb(g);if(g=m(g,{signal:i}),x){if(!Cl(g,!0))throw new gb("AsyncIterable",`transform[${b-1}]`,g)}else{var y;yb||(yb=tN);const S=new yb({objectMode:!0}),C=(y=g)===null||y===void 0?void 0:y.then;if(typeof C=="function")f++,C.call(g,L=>{u=L,L!=null&&S.write(L),A&&S.end(),sh.nextTick(h)},L=>{S.destroy(L),sh.nextTick(h,L)});else if(Cl(g,!0))f++,Lg(g,S,h,{end:A});else if(wb(g)||Hu(g)){const L=g.readable||g;f++,Lg(L,S,h,{end:A})}else throw new gb("AsyncIterable or Promise","destination",g);g=S;const{destroy:F,cleanup:N}=bk(g,!1,!0);d.push(F),k&&o.push(N)}}else if(yk(m)){if(C0(g)){f+=2;const S=nK(g,m,h,{end:A});mb(m)&&k&&o.push(S)}else if(Hu(g)||wb(g)){const S=g.readable||g;f++,Lg(S,m,h,{end:A})}else if(Cl(g))f++,Lg(g,m,h,{end:A});else throw new e2("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],g);g=m}else if(Jz(m)){if(C0(g))f++,Eb(xb(g),m,h,{end:A});else if(wb(g)||Cl(g))f++,Eb(g,m,h,{end:A});else if(Hu(g))f++,Eb(g.readable,m,h,{end:A});else throw new e2("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],g);g=m}else g=wk.from(m)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&sh.nextTick(a),g}function nK(t,e,n,{end:r}){let i=!1;if(e.on("close",()=>{i||n(new qz)}),t.pipe(e,{end:!1}),r){let s=function(){i=!0,e.end()};Zz(t)?sh.nextTick(s):t.once("end",s)}else n();return wm(t,{readable:!0,writable:!1},s=>{const o=t._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&o&&o.ended&&!o.errored&&!o.errorEmitted?t.once("end",n).once("error",n):n(s)}),wm(e,{readable:!1,writable:!0},n)}var BE={pipelineImpl:nN,pipeline:tK};const{pipeline:rK}=BE,Dg=Za(),{destroyer:iK}=rf,{isNodeStream:$g,isReadable:vk,isWritable:xk,isWebStream:Sb,isTransformStream:xl,isWritableStream:Ek,isReadableStream:Sk}=tc,{AbortError:sK,codes:{ERR_INVALID_ARG_VALUE:_k,ERR_MISSING_ARGS:oK}}=Mi,aK=fl;var rN=function(...e){if(e.length===0)throw new oK("streams");if(e.length===1)return Dg.from(e[0]);const n=[...e];if(typeof e[0]=="function"&&(e[0]=Dg.from(e[0])),typeof e[e.length-1]=="function"){const h=e.length-1;e[h]=Dg.from(e[h])}for(let h=0;h<e.length;++h)if(!(!$g(e[h])&&!Sb(e[h]))){if(h<e.length-1&&!(vk(e[h])||Sk(e[h])||xl(e[h])))throw new _k(`streams[${h}]`,n[h],"must be readable");if(h>0&&!(xk(e[h])||Ek(e[h])||xl(e[h])))throw new _k(`streams[${h}]`,n[h],"must be writable")}let r,i,s,o,a;function c(h){const p=o;o=null,p?p(h):h?a.destroy(h):!f&&!d&&a.destroy()}const l=e[0],u=rK(e,c),d=!!(xk(l)||Ek(l)||xl(l)),f=!!(vk(u)||Sk(u)||xl(u));if(a=new Dg({writableObjectMode:!!(l!=null&&l.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:f}),d){if($g(l))a._write=function(p,g,w){l.write(p,g)?w():r=w},a._final=function(p){l.end(),i=p},l.on("drain",function(){if(r){const p=r;r=null,p()}});else if(Sb(l)){const g=(xl(l)?l.writable:l).getWriter();a._write=async function(w,y,b){try{await g.ready,g.write(w).catch(()=>{}),b()}catch(m){b(m)}},a._final=async function(w){try{await g.ready,g.close().catch(()=>{}),i=w}catch(y){w(y)}}}const h=xl(u)?u.readable:u;aK(h,()=>{if(i){const p=i;i=null,p()}})}if(f){if($g(u))u.on("readable",function(){if(s){const h=s;s=null,h()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){const h=u.read();if(h===null){s=a._read;return}if(!a.push(h))return}};else if(Sb(u)){const p=(xl(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{const{value:g,done:w}=await p.read();if(!a.push(g))return;if(w){a.push(null);return}}catch{return}}}}return a._destroy=function(h,p){!h&&o!==null&&(h=new sK),s=null,r=null,i=null,o===null?p(h):(o=p,$g(u)&&iK(u,h))},a};const cK=globalThis.AbortController||tp().AbortController,{codes:{ERR_INVALID_ARG_VALUE:lK,ERR_INVALID_ARG_TYPE:Lp,ERR_MISSING_ARGS:uK,ERR_OUT_OF_RANGE:dK},AbortError:oa}=Mi,{validateAbortSignal:bu,validateInteger:kk,validateObject:vu}=Np,fK=qn.Symbol("kWeak"),hK=qn.Symbol("kResistStopPropagation"),{finished:pK}=fl,gK=rN,{addAbortSignalNoValidate:mK}=Pw,{isWritable:wK,isNodeStream:yK}=tc,{deprecate:bK}=is,{ArrayPrototypePush:vK,Boolean:xK,MathFloor:Ak,Number:EK,NumberIsNaN:SK,Promise:Ik,PromiseReject:Ck,PromiseResolve:_K,PromisePrototypeThen:Rk,Symbol:iN}=qn,ym=iN("kEmpty"),Tk=iN("kEof");function kK(t,e){if(e!=null&&vu(e,"options"),(e==null?void 0:e.signal)!=null&&bu(e.signal,"options.signal"),yK(t)&&!wK(t))throw new lK("stream",t,"must be writable");const n=gK(this,t);return e!=null&&e.signal&&mK(e.signal,n),n}function Dw(t,e){if(typeof t!="function")throw new Lp("fn",["Function","AsyncFunction"],t);e!=null&&vu(e,"options"),(e==null?void 0:e.signal)!=null&&bu(e.signal,"options.signal");let n=1;(e==null?void 0:e.concurrency)!=null&&(n=Ak(e.concurrency));let r=n-1;return(e==null?void 0:e.highWaterMark)!=null&&(r=Ak(e.highWaterMark)),kk(n,"options.concurrency",1),kk(r,"options.highWaterMark",0),r+=n,(async function*(){const s=is.AbortSignalAny([e==null?void 0:e.signal].filter(xK)),o=this,a=[],c={signal:s};let l,u,d=!1,f=0;function h(){d=!0,p()}function p(){f-=1,g()}function g(){u&&!d&&f<n&&a.length<r&&(u(),u=null)}async function w(){try{for await(let y of o){if(d)return;if(s.aborted)throw new oa;try{if(y=t(y,c),y===ym)continue;y=_K(y)}catch(b){y=Ck(b)}f+=1,Rk(y,p,h),a.push(y),l&&(l(),l=null),!d&&(a.length>=r||f>=n)&&await new Ik(b=>{u=b})}a.push(Tk)}catch(y){const b=Ck(y);Rk(b,p,h),a.push(b)}finally{d=!0,l&&(l(),l=null)}}w();try{for(;;){for(;a.length>0;){const y=await a[0];if(y===Tk)return;if(s.aborted)throw new oa;y!==ym&&(yield y),a.shift(),g()}await new Ik(y=>{l=y})}}finally{d=!0,u&&(u(),u=null)}}).call(this)}function AK(t=void 0){return t!=null&&vu(t,"options"),(t==null?void 0:t.signal)!=null&&bu(t.signal,"options.signal"),(async function*(){let n=0;for await(const i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new oa({cause:t.signal.reason});yield[n++,i]}}).call(this)}async function sN(t,e=void 0){for await(const n of ME.call(this,t,e))return!0;return!1}async function IK(t,e=void 0){if(typeof t!="function")throw new Lp("fn",["Function","AsyncFunction"],t);return!await sN.call(this,async(...n)=>!await t(...n),e)}async function CK(t,e){for await(const n of ME.call(this,t,e))return n}async function RK(t,e){if(typeof t!="function")throw new Lp("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i),ym}for await(const r of Dw.call(this,n,e));}function ME(t,e){if(typeof t!="function")throw new Lp("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i)?r:ym}return Dw.call(this,n,e)}class TK extends uK{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function OK(t,e,n){var r;if(typeof t!="function")throw new Lp("reducer",["Function","AsyncFunction"],t);n!=null&&vu(n,"options"),(n==null?void 0:n.signal)!=null&&bu(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){const l=new oa(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await pK(this.destroy(l)),l}const s=new cK,o=s.signal;if(n!=null&&n.signal){const l={once:!0,[fK]:this,[hK]:!0};n.signal.addEventListener("abort",()=>s.abort(),l)}let a=!1;try{for await(const l of this){var c;if(a=!0,n!=null&&(c=n.signal)!==null&&c!==void 0&&c.aborted)throw new oa;i?e=await t(e,l,{signal:o}):(e=l,i=!0)}if(!a&&!i)throw new TK}finally{s.abort()}return e}async function PK(t){t!=null&&vu(t,"options"),(t==null?void 0:t.signal)!=null&&bu(t.signal,"options.signal");const e=[];for await(const r of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new oa(void 0,{cause:t.signal.reason});vK(e,r)}return e}function NK(t,e){const n=Dw.call(this,t,e);return(async function*(){for await(const i of n)yield*i}).call(this)}function oN(t){if(t=EK(t),SK(t))return 0;if(t<0)throw new dK("number",">= 0",t);return t}function LK(t,e=void 0){return e!=null&&vu(e,"options"),(e==null?void 0:e.signal)!=null&&bu(e.signal,"options.signal"),t=oN(t),(async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new oa;for await(const s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new oa;t--<=0&&(yield s)}}).call(this)}function DK(t,e=void 0){return e!=null&&vu(e,"options"),(e==null?void 0:e.signal)!=null&&bu(e.signal,"options.signal"),t=oN(t),(async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new oa;for await(const s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new oa;if(t-- >0&&(yield s),t<=0)return}}).call(this)}RE.streamReturningOperators={asIndexedPairs:bK(AK,"readable.asIndexedPairs will be removed in a future version."),drop:LK,filter:ME,flatMap:NK,map:Dw,take:DK,compose:kK};RE.promiseReturningOperators={every:IK,forEach:RK,reduce:OK,toArray:PK,some:sN,find:CK};var _b,Ok;function aN(){if(Ok)return _b;Ok=1;const{ArrayPrototypePop:t,Promise:e}=qn,{isIterable:n,isNodeStream:r,isWebStream:i}=tc,{pipelineImpl:s}=BE,{finished:o}=fl;cN();function a(...c){return new e((l,u)=>{let d,f;const h=c[c.length-1];if(h&&typeof h=="object"&&!r(h)&&!n(h)&&!i(h)){const p=t(c);d=p.signal,f=p.end}s(c,(p,g)=>{p?u(p):l(g)},{signal:d,end:f})})}return _b={finished:o,pipeline:a},_b}var Pk;function cN(){if(Pk)return ab.exports;Pk=1;const{Buffer:t}=al,{ObjectDefineProperty:e,ObjectKeys:n,ReflectApply:r}=qn,{promisify:{custom:i}}=is,{streamReturningOperators:s,promiseReturningOperators:o}=RE,{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=Mi,c=rN,{setDefaultHighWaterMark:l,getDefaultHighWaterMark:u}=Nw,{pipeline:d}=BE,{destroyer:f}=rf,h=fl,p=aN(),g=tc,w=ab.exports=NE.Stream;w.isDestroyed=g.isDestroyed,w.isDisturbed=g.isDisturbed,w.isErrored=g.isErrored,w.isReadable=g.isReadable,w.isWritable=g.isWritable,w.Readable=Lw();for(const b of n(s)){let x=function(...E){if(new.target)throw a();return w.Readable.from(r(m,this,E))};const m=s[b];e(x,"name",{__proto__:null,value:m.name}),e(x,"length",{__proto__:null,value:m.length}),e(w.Readable.prototype,b,{__proto__:null,value:x,enumerable:!1,configurable:!0,writable:!0})}for(const b of n(o)){let x=function(...E){if(new.target)throw a();return r(m,this,E)};const m=o[b];e(x,"name",{__proto__:null,value:m.name}),e(x,"length",{__proto__:null,value:m.length}),e(w.Readable.prototype,b,{__proto__:null,value:x,enumerable:!1,configurable:!0,writable:!0})}w.Writable=LE(),w.Duplex=Za(),w.Transform=QP,w.PassThrough=tN,w.pipeline=d;const{addAbortSignal:y}=Pw;return w.addAbortSignal=y,w.finished=h,w.destroy=f,w.compose=c,w.setDefaultHighWaterMark=l,w.getDefaultHighWaterMark=u,e(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return p}}),e(d,i,{__proto__:null,enumerable:!0,get(){return p.pipeline}}),e(h,i,{__proto__:null,enumerable:!0,get(){return p.finished}}),w.Stream=w,w._isUint8Array=function(m){return m instanceof Uint8Array},w._uint8ArrayToBuffer=function(m){return t.from(m.buffer,m.byteOffset,m.byteLength)},ab.exports}(function(t){const e=cN(),n=aN(),r=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=r,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return n}}),t.exports.Stream=e.Stream,t.exports.default=t.exports})(Vj);function Nk(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout(()=>{throw r})}}function $K(t){const e=t.length,n=new Array(e);for(let r=0;r<e;r+=1)n[r]=t[r];return n}class rl extends xi.EventEmitter{emit(e,...n){let r=e==="error";const i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){let o;if(n.length>0&&([o]=n),o instanceof Error)throw o;const a=new Error(`Unhandled error.${o?` (${o.message})`:""}`);throw a.context=o,a}const s=i[e];if(s===void 0)return!1;if(typeof s=="function")Nk(s,this,n);else{const o=s.length,a=$K(s);for(let c=0;c<o;c+=1)Nk(a[c],this,n)}return!0}}class $f extends Error{constructor({code:e,message:n,data:r}){if(!Number.isInteger(e))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n),me(this,"code",void 0),me(this,"data",void 0),this.code=e,r!==void 0&&(this.data=r)}toString(){return YO({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const qr={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Lk={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},Dk=qr.rpc.internal,BK="Unspecified error message. This is a bug, please report it.",MK="Unspecified server error.";function lN(t){return Number.isInteger(t)}function $k(t){return typeof t=="string"&&t.length>0}function bm(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}function UK(t){if(typeof t!="object"||t===null)return!1;try{let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}catch{return!1}}function jK(t){return t>=-32099&&t<=-32e3}function uN(t){const e=t;return!(!e||!lN(e.code)||!$k(e.message)||e.stack&&!$k(e.stack))}function $w(t,e=BK){if(lN(t)){const n=t.toString();if(Object.hasOwn(Lk,n))return Lk[n].message;if(jK(t))return MK}return e}const FK={code:Dk,message:$w(Dk)};function t2(t){try{JSON.parse(JSON.stringify(t,(e,n)=>{if(e==="__proto__"||e==="constructor")throw new Error("Not valid json");if(typeof n=="function"||typeof n=="symbol")throw new Error("Not valid json");return n}),(e,n)=>{if(!(e==="__proto__"||e==="constructor"))return n})}catch{return!1}return!0}function Bk(t){return Object.getOwnPropertyNames(t).reduce((e,n)=>{const r=t[n];return t2(r)&&(e[n]=r),e},{})}function dN(t){return Array.isArray(t)?t.map(e=>t2(e)?e:bm(e)?Bk(e):null):bm(t)?Bk(t):t2(t)?t:null}function zK(t,e){if(t&&typeof t=="object"&&"serialize"in t&&typeof t.serialize=="function")return t.serialize();if(uN(t))return t;const n=dN(t);return fe(fe({},e),{},{data:{cause:n}})}function n2(t,{fallbackError:e=FK,shouldIncludeStack:n=!0}={}){if(!uN(e))throw new Error("Must provide fallback error with integer number code and string message.");const r=zK(t,e);return n||delete r.stack,r}function KK(t){return bm(t)&&Object.hasOwn(t,"cause")&&bm(t.cause)}function HK(t){return Number.isInteger(t)&&t>=1e3&&t<=4999}function WK(t,e){if(e!=="[Circular]")return e}class fN extends Error{constructor(e,n,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a non-empty string.');KK(r)?(super(n,{cause:r.cause}),me(this,"cause",void 0),me(this,"code",void 0),me(this,"data",void 0),Object.hasOwn(this,"cause")||Object.assign(this,{cause:r.cause})):(super(n),me(this,"cause",void 0),me(this,"code",void 0),me(this,"data",void 0)),r!==void 0&&(this.data=r),this.code=e,this.cause=r==null?void 0:r.cause}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data,UK(this.data)&&(e.data.cause=dN(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return YO(this.serialize(),{replacer:WK,space:2})}}class hN extends fN{constructor(e,n,r){if(!HK(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,n,r)}}function pN(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:n}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e??void 0,n]}}return[]}function Os(t,e){const[n,r]=pN(e);return new fN(t,n??$w(t),r)}function Bf(t,e){const[n,r]=pN(e);return new hN(t,n??$w(t),r)}const _t={parse:t=>Os(qr.rpc.parse,t),invalidRequest:t=>Os(qr.rpc.invalidRequest,t),invalidParams:t=>Os(qr.rpc.invalidParams,t),methodNotFound:t=>Os(qr.rpc.methodNotFound,t),internal:t=>Os(qr.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Os(e,t)},invalidInput:t=>Os(qr.rpc.invalidInput,t),resourceNotFound:t=>Os(qr.rpc.resourceNotFound,t),resourceUnavailable:t=>Os(qr.rpc.resourceUnavailable,t),transactionRejected:t=>Os(qr.rpc.transactionRejected,t),methodNotSupported:t=>Os(qr.rpc.methodNotSupported,t),limitExceeded:t=>Os(qr.rpc.limitExceeded,t)},Ws={userRejectedRequest:t=>Bf(qr.provider.userRejectedRequest,t),unauthorized:t=>Bf(qr.provider.unauthorized,t),unsupportedMethod:t=>Bf(qr.provider.unsupportedMethod,t),disconnected:t=>Bf(qr.provider.disconnected,t),chainDisconnected:t=>Bf(qr.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:n,data:r}=t;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new hN(e,n,r)}};function UE(t){return(e,n,r,i)=>{const s=t[e.method];return s===void 0?r():typeof s=="function"?s(e,n,r,i):(n.result=s,i())}}function Vr(t){return async(e,n,r,i)=>{let s;const o=new Promise(u=>{s=u});let a=null,c=!1;const l=async()=>{c=!0,r(u=>{a=u,s()}),await o};try{await t(e,n,l),c?(await o,a(null)):i(null)}catch(u){const d=u;a?a(d):i(d)}}}function r2(t){const{message:e="",code:n=-32603,stack:r="Stack trace is not available.",data:i=""}=t,s=parseInt((n==null?void 0:n.toString())||"-32603");return{message:e||(t==null?void 0:t.toString())||$w(s),code:s,stack:r,data:i||e||(t==null?void 0:t.toString())}}class Hi extends rl{constructor(){super(),me(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,n,r){const i=[];let s=null,o=!1;for(const a of r)if([s,o]=await Hi._runMiddleware(e,n,a,i),o)break;return[s,o,i.reverse()]}static _runMiddleware(e,n,r,i){return new Promise(s=>{const o=c=>{const l=c||n.error;l&&(typeof l=="object"&&Object.keys(l).includes("stack")===!1&&(l.stack="Stack trace is not available."),ou.error(l),n.error=n2(l,{shouldIncludeStack:!0,fallbackError:r2(l)})),s([l,!0])},a=c=>{n.error?o(n.error):(c&&(typeof c!="function"&&o(new $f({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),i.push(c)),s([null,!1]))};try{r(e,n,a,o)}catch(c){o(c)}})}static async _runReturnHandlers(e){for(const n of e)await new Promise((r,i)=>{n(s=>s?i(s):r())})}static _checkForCompletion(e,n,r){if(!("result"in n)&&!("error"in n))throw new $f({code:-32603,message:"Response has no error or result for request"});if(!r)throw new $f({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,n){if(n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?n?this._handleBatch(e,n):this._handleBatch(e):n?this._handle(e,n):this._promiseHandle(e)}asMiddleware(){return async(e,n,r,i)=>{try{const[s,o,a]=await Hi._runAllMiddleware(e,n,this._middleware);return o?(await Hi._runReturnHandlers(a),i(s)):r(async c=>{try{await Hi._runReturnHandlers(a)}catch(l){return c(l)}return c()})}catch(s){return i(s)}}}async _handleBatch(e,n){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return n?n(null,r):r}catch(r){if(n)return n(r);throw r}}_promiseHandle(e){return new Promise((n,r)=>{this._handle(e,(i,s)=>{i&&s===void 0?r(i):n(s)}).catch(r)})}async _handle(e,n){if(!e||Array.isArray(e)||typeof e!="object"){const o=new $f({code:-32603,message:"request must be plain object"});return n(o,{id:void 0,jsonrpc:"2.0",error:o})}if(typeof e.method!="string"){const o=new $f({code:-32603,message:"method must be string"});return n(o,{id:e.id,jsonrpc:"2.0",error:o})}const r=fe({},e),i={id:r.id,jsonrpc:r.jsonrpc};let s=null;try{await this._processRequest(r,i)}catch(o){s=o}return s&&(delete i.result,i.error||(typeof s=="object"&&Object.keys(s).includes("stack")===!1&&(s.stack="Stack trace is not available."),ou.error(s),i.error=n2(s,{shouldIncludeStack:!0,fallbackError:r2(s)}))),n(s,i)}async _processRequest(e,n){const[r,i,s]=await Hi._runAllMiddleware(e,n,this._middleware);if(Hi._checkForCompletion(e,n,i),await Hi._runReturnHandlers(s),r)throw r}}function hl(t){const e=new Hi;return t.forEach(n=>{e.push(n)}),e.asMiddleware()}function np(t){const e=new rl;return e.sendAsync=async n=>{const r=await t.handle(n);if(r.error){typeof r.error=="object"&&Object.keys(r.error).includes("stack")===!1&&(r.error.stack="Stack trace is not available."),ou.error(r.error);const i=n2(r.error,{fallbackError:r2(r.error),shouldIncludeStack:!0});throw _t.internal(i)}return r.result},e.send=(n,r)=>{if(typeof r!="function")throw new Error('Must provide callback to "send" method.');t.handle(n,r)},t.on&&t.on("notification",n=>{e.emit("data",null,n)}),e.request=async n=>{const r=fe(fe({},n),{},{id:Math.random().toString(36).slice(2),jsonrpc:"2.0"});return await e.sendAsync(r)},e}const Ns={en:"en",ja:"ja",ko:"ko",de:"de",zh:"zh",es:"es",fr:"fr",pt:"pt",nl:"nl",tr:"tr"},qK={en:"english",ja:"japanese",ko:"korean",de:"german",zh:"mandarin",es:"spanish",fr:"french",pt:"portuguese",nl:"dutch",tr:"turkish"};var gN={exports:{}},mN={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},wN={exports:{}},VK=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},GK=VK,YK=Array.prototype.concat,JK=Array.prototype.slice,Mk=wN.exports=function(e){for(var n=[],r=0,i=e.length;r<i;r++){var s=e[r];GK(s)?n=YK.call(n,JK.call(s)):n.push(s)}return n};Mk.wrap=function(t){return function(){return t(Mk(arguments))}};var ZK=wN.exports,vh=mN,Dp=ZK,yN=Object.hasOwnProperty,bN=Object.create(null);for(var kb in vh)yN.call(vh,kb)&&(bN[vh[kb]]=kb);var xs=gN.exports={to:{},get:{}};xs.get=function(t){var e=t.substring(0,3).toLowerCase(),n,r;switch(e){case"hsl":n=xs.get.hsl(t),r="hsl";break;case"hwb":n=xs.get.hwb(t),r="hwb";break;default:n=xs.get.rgb(t),r="rgb";break}return n?{model:r,value:n}:null};xs.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,n=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,o=[0,0,0,1],a,c,l;if(a=t.match(n)){for(l=a[2],a=a[1],c=0;c<3;c++){var u=c*2;o[c]=parseInt(a.slice(u,u+2),16)}l&&(o[3]=parseInt(l,16)/255)}else if(a=t.match(e)){for(a=a[1],l=a[3],c=0;c<3;c++)o[c]=parseInt(a[c]+a[c],16);l&&(o[3]=parseInt(l+l,16)/255)}else if(a=t.match(r)){for(c=0;c<3;c++)o[c]=parseInt(a[c+1],0);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else if(a=t.match(i)){for(c=0;c<3;c++)o[c]=Math.round(parseFloat(a[c+1])*2.55);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else return(a=t.match(s))?a[1]==="transparent"?[0,0,0,0]:yN.call(vh,a[1])?(o=vh[a[1]],o[3]=1,o):null:null;for(c=0;c<3;c++)o[c]=Vc(o[c],0,255);return o[3]=Vc(o[3],0,1),o};xs.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,s=Vc(parseFloat(n[2]),0,100),o=Vc(parseFloat(n[3]),0,100),a=Vc(isNaN(r)?1:r,0,1);return[i,s,o,a]}return null};xs.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,s=Vc(parseFloat(n[2]),0,100),o=Vc(parseFloat(n[3]),0,100),a=Vc(isNaN(r)?1:r,0,1);return[i,s,o,a]}return null};xs.to.hex=function(){var t=Dp(arguments);return"#"+Bg(t[0])+Bg(t[1])+Bg(t[2])+(t[3]<1?Bg(Math.round(t[3]*255)):"")};xs.to.rgb=function(){var t=Dp(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};xs.to.rgb.percent=function(){var t=Dp(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"};xs.to.hsl=function(){var t=Dp(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};xs.to.hwb=function(){var t=Dp(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};xs.to.keyword=function(t){return bN[t.slice(0,3)]};function Vc(t,e,n){return Math.min(Math.max(e,t),n)}function Bg(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}var XK=gN.exports;const rp=mN,vN={};for(const t of Object.keys(rp))vN[rp[t]]=t;const ot={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var xN=ot;for(const t of Object.keys(ot)){if(!("channels"in ot[t]))throw new Error("missing channels property: "+t);if(!("labels"in ot[t]))throw new Error("missing channel labels property: "+t);if(ot[t].labels.length!==ot[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:n}=ot[t];delete ot[t].channels,delete ot[t].labels,Object.defineProperty(ot[t],"channels",{value:e}),Object.defineProperty(ot[t],"labels",{value:n})}ot.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=s-i;let a,c;s===i?a=0:e===s?a=(n-r)/o:n===s?a=2+(r-e)/o:r===s&&(a=4+(e-n)/o),a=Math.min(a*60,360),a<0&&(a+=360);const l=(i+s)/2;return s===i?c=0:l<=.5?c=o/(s+i):c=o/(2-s-i),[a,c*100,l*100]};ot.rgb.hsv=function(t){let e,n,r,i,s;const o=t[0]/255,a=t[1]/255,c=t[2]/255,l=Math.max(o,a,c),u=l-Math.min(o,a,c),d=function(f){return(l-f)/6/u+1/2};return u===0?(i=0,s=0):(s=u/l,e=d(o),n=d(a),r=d(c),o===l?i=r-n:a===l?i=1/3+e-r:c===l&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,l*100]};ot.rgb.hwb=function(t){const e=t[0],n=t[1];let r=t[2];const i=ot.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(n,r));return r=1-1/255*Math.max(e,Math.max(n,r)),[i,s*100,r*100]};ot.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(1-e,1-n,1-r),s=(1-e-i)/(1-i)||0,o=(1-n-i)/(1-i)||0,a=(1-r-i)/(1-i)||0;return[s*100,o*100,a*100,i*100]};function QK(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}ot.rgb.keyword=function(t){const e=vN[t];if(e)return e;let n=1/0,r;for(const i of Object.keys(rp)){const s=rp[i],o=QK(t,s);o<n&&(n=o,r=i)}return r};ot.keyword.rgb=function(t){return rp[t]};ot.rgb.xyz=function(t){let e=t[0]/255,n=t[1]/255,r=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const i=e*.4124+n*.3576+r*.1805,s=e*.2126+n*.7152+r*.0722,o=e*.0193+n*.1192+r*.9505;return[i*100,s*100,o*100]};ot.rgb.lab=function(t){const e=ot.rgb.xyz(t);let n=e[0],r=e[1],i=e[2];n/=95.047,r/=100,i/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const s=116*r-16,o=500*(n-r),a=200*(r-i);return[s,o,a]};ot.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;let i,s,o;if(n===0)return o=r*255,[o,o,o];r<.5?i=r*(1+n):i=r+n-r*n;const a=2*r-i,c=[0,0,0];for(let l=0;l<3;l++)s=e+1/3*-(l-1),s<0&&s++,s>1&&s--,6*s<1?o=a+(i-a)*6*s:2*s<1?o=i:3*s<2?o=a+(i-a)*(2/3-s)*6:o=a,c[l]=o*255;return c};ot.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,r=t[2]/100,i=n;const s=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=s<=1?s:2-s;const o=(r+n)/2,a=r===0?2*i/(s+i):2*n/(r+n);return[e,a*100,o*100]};ot.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let r=t[2]/100;const i=Math.floor(e)%6,s=e-Math.floor(e),o=255*r*(1-n),a=255*r*(1-n*s),c=255*r*(1-n*(1-s));switch(r*=255,i){case 0:return[r,c,o];case 1:return[a,r,o];case 2:return[o,r,c];case 3:return[o,a,r];case 4:return[c,o,r];case 5:return[r,o,a]}};ot.hsv.hsl=function(t){const e=t[0],n=t[1]/100,r=t[2]/100,i=Math.max(r,.01);let s,o;o=(2-n)*r;const a=(2-n)*i;return s=n*i,s/=a<=1?a:2-a,s=s||0,o/=2,[e,s*100,o*100]};ot.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,r=t[2]/100;const i=n+r;let s;i>1&&(n/=i,r/=i);const o=Math.floor(6*e),a=1-r;s=6*e-o,o&1&&(s=1-s);const c=n+s*(a-n);let l,u,d;switch(o){default:case 6:case 0:l=a,u=c,d=n;break;case 1:l=c,u=a,d=n;break;case 2:l=n,u=a,d=c;break;case 3:l=n,u=c,d=a;break;case 4:l=c,u=n,d=a;break;case 5:l=a,u=n,d=c;break}return[l*255,u*255,d*255]};ot.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100,s=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,n*(1-i)+i),a=1-Math.min(1,r*(1-i)+i);return[s*255,o*255,a*255]};ot.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100;let i,s,o;return i=e*3.2406+n*-1.5372+r*-.4986,s=e*-.9689+n*1.8758+r*.0415,o=e*.0557+n*-.204+r*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[i*255,s*255,o*255]};ot.xyz.lab=function(t){let e=t[0],n=t[1],r=t[2];e/=95.047,n/=100,r/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;const i=116*n-16,s=500*(e-n),o=200*(n-r);return[i,s,o]};ot.lab.xyz=function(t){const e=t[0],n=t[1],r=t[2];let i,s,o;s=(e+16)/116,i=n/500+s,o=s-r/200;const a=s**3,c=i**3,l=o**3;return s=a>.008856?a:(s-16/116)/7.787,i=c>.008856?c:(i-16/116)/7.787,o=l>.008856?l:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};ot.lab.lch=function(t){const e=t[0],n=t[1],r=t[2];let i;i=Math.atan2(r,n)*360/2/Math.PI,i<0&&(i+=360);const o=Math.sqrt(n*n+r*r);return[e,o,i]};ot.lch.lab=function(t){const e=t[0],n=t[1],i=t[2]/360*2*Math.PI,s=n*Math.cos(i),o=n*Math.sin(i);return[e,s,o]};ot.rgb.ansi16=function(t,e=null){const[n,r,i]=t;let s=e===null?ot.rgb.hsv(t)[2]:e;if(s=Math.round(s/50),s===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return s===2&&(o+=60),o};ot.hsv.ansi16=function(t){return ot.rgb.ansi16(ot.hsv.rgb(t),t[2])};ot.rgb.ansi256=function(t){const e=t[0],n=t[1],r=t[2];return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)};ot.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=(~~(t>50)+1)*.5,r=(e&1)*n*255,i=(e>>1&1)*n*255,s=(e>>2&1)*n*255;return[r,i,s]};ot.ansi256.rgb=function(t){if(t>=232){const s=(t-232)*10+8;return[s,s,s]}t-=16;let e;const n=Math.floor(t/36)/5*255,r=Math.floor((e=t%36)/6)/5*255,i=e%6/5*255;return[n,r,i]};ot.rgb.hex=function(t){const n=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(n.length)+n};ot.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let n=e[0];e[0].length===3&&(n=n.split("").map(a=>a+a).join(""));const r=parseInt(n,16),i=r>>16&255,s=r>>8&255,o=r&255;return[i,s,o]};ot.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.max(Math.max(e,n),r),s=Math.min(Math.min(e,n),r),o=i-s;let a,c;return o<1?a=s/(1-o):a=0,o<=0?c=0:i===e?c=(n-r)/o%6:i===n?c=2+(r-e)/o:c=4+(e-n)/o,c/=6,c%=1,[c*360,o*100,a*100]};ot.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=n<.5?2*e*n:2*e*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[t[0],r*100,i*100]};ot.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=e*n;let i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],r*100,i*100]};ot.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;if(n===0)return[r*255,r*255,r*255];const i=[0,0,0],s=e%1*6,o=s%1,a=1-o;let c=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return c=(1-n)*r,[(n*i[0]+c)*255,(n*i[1]+c)*255,(n*i[2]+c)*255]};ot.hcg.hsv=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);let i=0;return r>0&&(i=e/r),[t[0],i*100,r*100]};ot.hcg.hsl=function(t){const e=t[1]/100,r=t[2]/100*(1-e)+.5*e;let i=0;return r>0&&r<.5?i=e/(2*r):r>=.5&&r<1&&(i=e/(2*(1-r))),[t[0],i*100,r*100]};ot.hcg.hwb=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);return[t[0],(r-e)*100,(1-r)*100]};ot.hwb.hcg=function(t){const e=t[1]/100,r=1-t[2]/100,i=r-e;let s=0;return i<1&&(s=(r-i)/(1-i)),[t[0],i*100,s*100]};ot.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};ot.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};ot.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};ot.gray.hsl=function(t){return[0,0,t[0]]};ot.gray.hsv=ot.gray.hsl;ot.gray.hwb=function(t){return[0,100,t[0]]};ot.gray.cmyk=function(t){return[0,0,0,t[0]]};ot.gray.lab=function(t){return[t[0],0,0]};ot.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(r.length)+r};ot.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const vm=xN;function eH(){const t={},e=Object.keys(vm);for(let n=e.length,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}function tH(t){const e=eH(),n=[t];for(e[t].distance=0;n.length;){const r=n.pop(),i=Object.keys(vm[r]);for(let s=i.length,o=0;o<s;o++){const a=i[o],c=e[a];c.distance===-1&&(c.distance=e[r].distance+1,c.parent=r,n.unshift(a))}}return e}function nH(t,e){return function(n){return e(t(n))}}function rH(t,e){const n=[e[t].parent,t];let r=vm[e[t].parent][t],i=e[t].parent;for(;e[i].parent;)n.unshift(e[i].parent),r=nH(vm[e[i].parent][i],r),i=e[i].parent;return r.conversion=n,r}var iH=function(t){const e=tH(t),n={},r=Object.keys(e);for(let i=r.length,s=0;s<i;s++){const o=r[s];e[o].parent!==null&&(n[o]=rH(o,e))}return n};const i2=xN,sH=iH,Wu={},oH=Object.keys(i2);function aH(t){const e=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),t(n))};return"conversion"in t&&(e.conversion=t.conversion),e}function cH(t){const e=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const i=t(n);if(typeof i=="object")for(let s=i.length,o=0;o<s;o++)i[o]=Math.round(i[o]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}oH.forEach(t=>{Wu[t]={},Object.defineProperty(Wu[t],"channels",{value:i2[t].channels}),Object.defineProperty(Wu[t],"labels",{value:i2[t].labels});const e=sH(t);Object.keys(e).forEach(r=>{const i=e[r];Wu[t][r]=cH(i),Wu[t][r].raw=aH(i)})});var lH=Wu;const qu=XK,ws=lH,EN=["keyword","gray","hex"],s2={};for(const t of Object.keys(ws))s2[[...ws[t].labels].sort().join("")]=t;const xm={};function Tr(t,e){if(!(this instanceof Tr))return new Tr(t,e);if(e&&e in EN&&(e=null),e&&!(e in ws))throw new Error("Unknown model: "+e);let n,r;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof Tr)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const i=qu.get(t);if(i===null)throw new Error("Unable to parse color from string: "+t);this.model=i.model,r=ws[this.model].channels,this.color=i.value.slice(0,r),this.valpha=typeof i.value[r]=="number"?i.value[r]:1}else if(t.length>0){this.model=e||"rgb",r=ws[this.model].channels;const i=Array.prototype.slice.call(t,0,r);this.color=o2(i,r),this.valpha=typeof t[r]=="number"?t[r]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(t);"alpha"in t&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const s=i.sort().join("");if(!(s in s2))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=s2[s];const{labels:o}=ws[this.model],a=[];for(n=0;n<o.length;n++)a.push(t[o[n]]);this.color=o2(a)}if(xm[this.model])for(r=ws[this.model].channels,n=0;n<r;n++){const i=xm[this.model][n];i&&(this.color[n]=i(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Tr.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in qu.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);const n=e.valpha===1?e.color:[...e.color,this.valpha];return qu.to[e.model](n)},percentString(t){const e=this.rgb().round(typeof t=="number"?t:1),n=e.valpha===1?e.color:[...e.color,this.valpha];return qu.to.rgb.percent(n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:e}=ws[this.model],{labels:n}=ws[this.model];for(let r=0;r<e;r++)t[n[r]]=this.color[r];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new Tr([...this.color.map(dH(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new Tr([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:Gn("rgb",0,pr(255)),green:Gn("rgb",1,pr(255)),blue:Gn("rgb",2,pr(255)),hue:Gn(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:Gn("hsl",1,pr(100)),lightness:Gn("hsl",2,pr(100)),saturationv:Gn("hsv",1,pr(100)),value:Gn("hsv",2,pr(100)),chroma:Gn("hcg",1,pr(100)),gray:Gn("hcg",2,pr(100)),white:Gn("hwb",1,pr(100)),wblack:Gn("hwb",2,pr(100)),cyan:Gn("cmyk",0,pr(100)),magenta:Gn("cmyk",1,pr(100)),yellow:Gn("cmyk",2,pr(100)),black:Gn("cmyk",3,pr(100)),x:Gn("xyz",0,pr(95.047)),y:Gn("xyz",1,pr(100)),z:Gn("xyz",2,pr(108.833)),l:Gn("lab",0,pr(100)),a:Gn("lab",1),b:Gn("lab",2),keyword(t){return t!==void 0?new Tr(t):ws[this.model].keyword(this.color)},hex(t){return t!==void 0?new Tr(t):qu.to.hex(this.rgb().round().color)},hexa(t){if(t!==void 0)return new Tr(t);const e=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),qu.to.hex(e)+n},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,e=[];for(const[n,r]of t.entries()){const i=r/255;e[n]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){const e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level(t){const e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){const e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){const e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){const e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){const e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){const e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){const e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){const t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return Tr.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const e=this.hsl();let n=e.color[0];return n=(n+t)%360,n=n<0?360+n:n,e.color[0]=n,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const n=t.rgb(),r=this.rgb(),i=e===void 0?.5:e,s=2*i-1,o=n.alpha()-r.alpha(),a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2,c=1-a;return Tr.rgb(a*n.red()+c*r.red(),a*n.green()+c*r.green(),a*n.blue()+c*r.blue(),n.alpha()*i+r.alpha()*(1-i))}};for(const t of Object.keys(ws)){if(EN.includes(t))continue;const{channels:e}=ws[t];Tr.prototype[t]=function(...n){return this.model===t?new Tr(this):n.length>0?new Tr(n,t):new Tr([...fH(ws[this.model][t].raw(this.color)),this.valpha],t)},Tr[t]=function(...n){let r=n[0];return typeof r=="number"&&(r=o2(n,e)),new Tr(r,t)}}function uH(t,e){return Number(t.toFixed(e))}function dH(t){return function(e){return uH(e,t)}}function Gn(t,e,n){t=Array.isArray(t)?t:[t];for(const r of t)(xm[r]||(xm[r]=[]))[e]=n;return t=t[0],function(r){let i;return r!==void 0?(n&&(r=n(r)),i=this[t](),i.color[e]=r,i):(i=this[t]().color[e],n&&(i=n(i)),i)}}function pr(t){return function(e){return Math.max(0,Math.min(t,e))}}function fH(t){return Array.isArray(t)?t:[t]}function o2(t,e){for(let n=0;n<e;n++)typeof t[n]!="number"&&(t[n]=0);return t}var hH=Tr;const Uk=vi(hH);function jk(t=3,e=50,n="black",r=0,i=20,s="#0346ff"){const o=[];let a;for(a=0;a<t;a+=1)o.push(Uk(s).rotate((a+1)/t*-r).saturate((a+1)/t*(i/100)).mix(Uk(n),e/100*(a+1)/t).hex());return o}function pH(t){const e=jk(3,50,"black",0,20,t),n=jk(6,85,"white",0,20,t);return[...e.reverse(),t,...n]}function gH(t,e){if(e.primary){const n=pH(e.primary);t.style.setProperty("--app-primary-900",n[0]),t.style.setProperty("--app-primary-800",n[1]),t.style.setProperty("--app-primary-700",n[2]),t.style.setProperty("--app-primary-600",n[3]),t.style.setProperty("--app-primary-500",n[4]),t.style.setProperty("--app-primary-400",n[5]),t.style.setProperty("--app-primary-300",n[6]),t.style.setProperty("--app-primary-200",n[7]),t.style.setProperty("--app-primary-100",n[8]),t.style.setProperty("--app-primary-50",n[9])}e.onPrimary&&t.style.setProperty("--app-on-primary",e.onPrimary)}class mH extends rl{constructor({config:e={},state:n={}}){super(),me(this,"defaultConfig",{}),me(this,"defaultState",{}),me(this,"disabled",!1),me(this,"name","BaseController"),me(this,"initialConfig",void 0),me(this,"initialState",void 0),me(this,"internalConfig",this.defaultConfig),me(this,"internalState",this.defaultState),this.initialState=n,this.initialConfig=e}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,n=!1,r=!0){if(r){this.internalConfig=n?e:Object.assign(this.internalConfig,e);for(const i in this.internalConfig)typeof this.internalConfig[i]<"u"&&(this[i]=this.internalConfig[i])}else for(const i in e)typeof this.internalConfig[i]<"u"&&(this.internalConfig[i]=e[i],this[i]=e[i])}update(e,n=!1){this.internalState=fe(n?{}:fe({},this.internalState),e),this.emit("store",this.internalState)}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}}const wH=()=>!0,yH=["newListener","removeListener"],bH=t=>!yH.includes(t);function vH(t,e){return typeof t.rawListeners<"u"?t.rawListeners(e):t.listeners(e)}function SN(t,e){let r={}.eventFilter||wH;if(typeof r=="string"&&r==="skipInternal"&&(r=bH),typeof r!="function")throw new Error("createEventEmitterProxy - Invalid eventFilter");let i=t,s=a=>{if(i===a)return;const c=i;i=a,c.eventNames().filter(r).forEach(u=>{vH(c,u).forEach(d=>{a.on(u,d)})}),c.removeAllListeners()};return new Proxy({},{get:(a,c)=>c==="setTarget"?s:i[c],set:(a,c,l)=>c==="setTarget"?(s=l,!0):(i[c]=l,!0),has:(a,c)=>c[0]==="_"?!1:c in i})}const xH=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function EH(t){switch(t.status){case 405:throw _t.methodNotFound();case 418:throw _t.internal({message:"Request is being rate limited.",data:{cause:t}});case 503:case 504:throw _t.internal({message:"Gateway timeout. The request took too long to process.This can happen when querying over too wide a block range.",data:{cause:t}})}}function SH(t){return new Promise(e=>{setTimeout(e,t)})}function _H(t,e){if(t.status!==200)throw _t.internal({message:`Non-200 status code: '${t.status}'`,data:e});if(e.error){var n;throw _t.internal({data:e.error,message:(n=e.error)===null||n===void 0?void 0:n.message})}return e.result}function kH({req:t,rpcTarget:e,originHttpHeaderKey:n}){const r=new URL(e),i={id:t.id,jsonrpc:t.jsonrpc,method:t.method,params:t.params},s=t.origin,o=JSON.stringify(i),a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:o};return n&&s&&(a.headers[n]=s),{fetchUrl:r.href,fetchParams:a}}function jE({rpcTarget:t,originHttpHeaderKey:e}){return Vr(async(n,r,i)=>{const{fetchUrl:s,fetchParams:o}=kH({req:n,rpcTarget:t,originHttpHeaderKey:e}),a=5,c=1e3;for(let l=0;l<a;l++){try{const u=await fetch(s,o);EH(u);const d=await u.json(),f=_H(u,d);r.result=f;return}catch(u){const d=(u.message||u).toString();if(!xH.some(h=>d.includes(h)))throw u}await SH(c)}})}function xh(t){try{return structuredClone(t)}catch{return JSON.parse(JSON.stringify(t,(n,r)=>typeof r=="bigint"?r.toString():r))}}class oh extends Error{}oh.prototype.name="InvalidTokenError";function AH(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function IH(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return AH(e)}catch{return atob(e)}}function CH(t,e){if(typeof t!="string")throw new oh("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new oh(`Invalid token specified: missing part #${n+1}`);let i;try{i=IH(r)}catch(s){throw new oh(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new oh(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const _N="https://authjs.web3auth.io",kN=async(t,e)=>{const s={payload:t,header:{t:e==="solana"?"sip99":"eip191"},network:e==="solana"?"solana":"ethereum"},o=await Pp(`${_N}/siww/get`,s);if(!o.success)throw new Error("Failed to authenticate user, Please reach out to Web3Auth Support team");return o.challenge},AN=async(t,e,n,r,i,s,o,a,c)=>{var l;const d=fe({signature:{s:e,t:t==="solana"?"sip99":"eip191"},message:n,issuer:r,audience:typeof window<"u"&&((l=window.location)===null||l===void 0?void 0:l.hostname)||"com://reactnative",timeout:i},{}),f=await Pp(`${_N}/siww/verify`,d,{headers:{client_id:s,wallet_provider:r,web3auth_network:o}});if(!f.success)throw Tp.error("Failed to authenticate user, ,message verification failed",f.error),new Error("Failed to authenticate user, ,message verification failed");return f.token},Eh={AUTH:"auth",WALLET_CONNECT_V2:"wallet-connect-v2",SFA:"sfa"},ip=fe({TORUS_SOLANA:"torus-solana"},Eh),Gc=fe({TORUS_EVM:"torus-evm",COINBASE:"coinbase"},Eh),Wt=fe(fe({},Gc),ip),IN={[Eh.AUTH]:"Auth",[Eh.WALLET_CONNECT_V2]:"Wallet Connect v2",[Eh.SFA]:"SFA",[ip.TORUS_SOLANA]:"Torus",[Gc.TORUS_EVM]:"Torus",[Gc.COINBASE]:"Coinbase Smart Wallet"},ho={EXTERNAL:"external",IN_APP:"in_app"},Le={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},It=fe(fe({},Le),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated",CACHE_CLEAR:"cache_clear"});class FE extends rl{constructor(e={}){super(),me(this,"adapterData",{}),me(this,"sessionTime",86400),me(this,"clientId",void 0),me(this,"web3AuthNetwork",Ka.MAINNET),me(this,"useCoreKitKey",void 0),me(this,"rehydrated",!1),me(this,"chainConfig",null),me(this,"knownChainConfigs",{}),me(this,"adapterNamespace",void 0),me(this,"currentChainNamespace",void 0),me(this,"type",void 0),me(this,"name",void 0),me(this,"status",void 0),this.setAdapterSettings(e)}get chainConfigProxy(){return this.chainConfig?fe({},this.chainConfig):null}get connnected(){return this.status===Le.CONNECTED}setAdapterSettings(e){if(this.status===Le.READY)return;e!=null&&e.sessionTime&&(this.sessionTime=e.sessionTime),e!=null&&e.clientId&&(this.clientId=e.clientId),e!=null&&e.web3AuthNetwork&&(this.web3AuthNetwork=e.web3AuthNetwork),(e==null?void 0:e.useCoreKitKey)!==void 0&&(this.useCoreKitKey=e.useCoreKitKey);const n=e.chainConfig;if(n){if(!n.chainNamespace)throw Ue.notReady("ChainNamespace is required while setting chainConfig");this.currentChainNamespace=n.chainNamespace;const r=nl(n.chainNamespace,n.chainId,this.clientId),i=fe(fe({},r||{}),n);this.chainConfig=i,this.addChainConfig(i)}}checkConnectionRequirements(){if(!(this.name===Wt.WALLET_CONNECT_V2&&this.status===Le.CONNECTING)){if(this.status===Le.CONNECTING)throw Ue.notReady("Already connecting");if(this.status===Le.CONNECTED)throw ut.connectionError("Already connected");if(this.status!==Le.READY)throw ut.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function")}}checkInitializationRequirements(){if(!this.clientId)throw Ue.invalidParams("Please initialize Web3Auth with a valid clientId in constructor");if(!this.chainConfig||!this.chainConfig.rpcTarget&&this.chainConfig.chainNamespace!==wt.OTHER)throw Ue.invalidParams("rpcTarget is required in chainConfig");if(!this.chainConfig.chainId&&this.chainConfig.chainNamespace!==wt.OTHER)throw Ue.invalidParams("chainID is required in chainConfig");if(this.status!==Le.NOT_READY){if(this.status===Le.CONNECTED)throw Ue.notReady("Already connected");if(this.status===Le.READY)throw Ue.notReady("Adapter is already initialized")}}checkDisconnectionRequirements(){if(this.status!==Le.CONNECTED)throw ut.disconnectionError("Not connected with wallet")}checkAddChainRequirements(e,n=!1){if(!n&&!this.provider)throw ut.notConnectedError("Not connected with wallet.");if(this.currentChainNamespace!==e.chainNamespace)throw Ks.chainNamespaceNotAllowed("This adapter doesn't support this chainNamespace")}checkSwitchChainRequirements({chainId:e},n=!1){if(!n&&!this.provider)throw ut.notConnectedError("Not connected with wallet.");if(!this.knownChainConfigs[e])throw ut.chainConfigNotAdded("Invalid chainId")}updateAdapterData(e){this.adapterData=e,this.emit(It.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}addChainConfig(e){const n=this.knownChainConfigs[e.chainId];this.knownChainConfigs[e.chainId]=fe(fe({},n||{}),e)}getChainConfig(e){return this.knownChainConfigs[e]||null}}function Cc(t){let e=!1,n=0,r;try{r=window[t],e=!0,n=r.length;const i="__storage_test__";return r.setItem(i,i),r.removeItem(i),!0}catch(i){const s=i;return!!(s&&(s.code===22||s.code===1014||s.name==="QuotaExceededError"||s.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&n!==0)}}const RH=t=>a9[t??Ka.SAPPHIRE_MAINNET],CN=async(t,e,n)=>{const r=new URL(`${RH(e)}/api/configuration`);return r.searchParams.append("project_id",t),r.searchParams.append("network",e),r.searchParams.append("whitelist","true"),n&&r.searchParams.append("aa_provider",n),await Ew(r.href)},TH=async t=>await Ew(t),OH=t=>{let e=t.toLowerCase();return e=e.split("|")[0],e=e.replace(/-/g," "),e=e.replace(/\s+/g," "),e=e.replace(/wallet$/i,"").trim(),e=e.replace(/\s/g,"-"),e},RN=t=>{const e=CH(t);return!e.exp||e.exp<Math.floor(Date.now()/1e3)},TN=(t,e)=>Cc("localStorage")?localStorage.getItem(`${t.toLowerCase()}_${e}`):null,ON=(t,e,n)=>Cc("localStorage")?localStorage.setItem(`${t.toLowerCase()}_${e}`,n):null,PH=(t,e)=>Cc("localStorage")?localStorage.removeItem(`${t.toLowerCase()}_${e}`):null,NH=fe(fe({},wt),{},{MULTICHAIN:"multichain"}),PN={READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"};fe({},PN);const LH={WALLET_SERVICES:"wallet-services",NFT_CHECKOUT:"nft-checkout"},DH={SOLANA:"solana"};fe(fe({},LH),DH);wt.SOLANA,ip.TORUS_SOLANA+"",ip.AUTH+"";wt.EIP155,Gc.TORUS_EVM+"",Gc.AUTH+"",Gc.WALLET_CONNECT_V2+"";wt.SOLANA,ip.AUTH+"";wt.EIP155,Gc.AUTH+"";const $H={chainNamespace:wt.OTHER,adapters:{[Gc.AUTH]:{label:"Auth",showOnModal:!0,showOnMobile:!0,showOnDesktop:!0}}},BH="https://assets.web3auth.io/v1/wallet-registry.json",NN=()=>({adapterSettings:{network:Ka.SAPPHIRE_MAINNET,clientId:"",uxMode:Ko.POPUP},loginSettings:{},privateKeyProvider:void 0});class MH extends FE{constructor(e={}){super(e),me(this,"name",Wt.AUTH),me(this,"adapterNamespace",Zh.MULTICHAIN),me(this,"type",ho.IN_APP),me(this,"authInstance",null),me(this,"status",Le.NOT_READY),me(this,"currentChainNamespace",wt.EIP155),me(this,"privateKeyProvider",null),me(this,"authOptions",void 0),me(this,"loginSettings",{loginProvider:""}),this.setAdapterSettings(fe(fe({},e.adapterSettings),{},{chainConfig:e.chainConfig,clientId:e.clientId||"",sessionTime:e.sessionTime,web3AuthNetwork:e.web3AuthNetwork,useCoreKitKey:e.useCoreKitKey,privateKeyProvider:e.privateKeyProvider})),this.loginSettings=e.loginSettings||{loginProvider:""},this.privateKeyProvider=e.privateKeyProvider||null}get chainConfigProxy(){return this.chainConfig?fe({},this.chainConfig):null}get provider(){return this.status!==Le.NOT_READY&&this.privateKeyProvider?this.privateKeyProvider:null}set provider(e){throw new Error("Not implemented")}async init(e){if(super.checkInitializationRequirements(),!this.clientId)throw Ue.invalidParams("clientId is required before auth's initialization");if(!this.authOptions)throw Ue.invalidParams("authOptions is required before auth's initialization");const n=this.authOptions.uxMode===Ko.REDIRECT;if(this.authOptions=fe(fe({},this.authOptions),{},{replaceUrlOnRedirect:n,useCoreKitKey:this.useCoreKitKey}),this.authInstance=new Hj(fe(fe({},this.authOptions),{},{clientId:this.clientId,network:this.authOptions.network||this.web3AuthNetwork||Ka.SAPPHIRE_MAINNET})),We.debug("initializing auth adapter init"),await this.authInstance.init(),!this.chainConfig)throw Ue.invalidParams("chainConfig is required before initialization");this.status=Le.READY,this.emit(It.READY,Wt.AUTH);try{We.debug("initializing auth adapter"),this._getFinalPrivKey()&&(e.autoConnect||n)&&(this.rehydrated=!0,await this.connect())}catch(r){We.error("Failed to connect with cached auth provider",r),this.emit(It.ERRORED,r)}}async connect(e={loginProvider:""}){super.checkConnectionRequirements(),this.status=Le.CONNECTING,this.emit(It.CONNECTING,fe(fe({},e),{},{adapter:Wt.AUTH}));try{return await this.connectWithProvider(e),this.provider}catch(n){throw We.error("Failed to connect with auth provider",n),this.status=Le.READY,this.emit(It.ERRORED,n),n!=null&&n.message.includes("user closed popup")?ut.popupClosed():n instanceof Wc?n:ut.connectionError("Failed to login with auth",n)}}async enableMFA(e={loginProvider:""}){if(this.status!==Le.CONNECTED)throw ut.notConnectedError("Not connected with wallet");if(!this.authInstance)throw Ue.notReady("authInstance is not ready");try{await this.authInstance.enableMFA(e)}catch(n){throw We.error("Failed to enable MFA with auth provider",n),n instanceof Wc?n:ut.connectionError("Failed to enable MFA with auth",n)}}async manageMFA(e={loginProvider:""}){if(this.status!==Le.CONNECTED)throw ut.notConnectedError("Not connected with wallet");if(!this.authInstance)throw Ue.notReady("authInstance is not ready");try{await this.authInstance.manageMFA(e)}catch(n){throw We.error("Failed to manage MFA with auth provider",n),n instanceof Wc?n:ut.connectionError("Failed to manage MFA with auth",n)}}async disconnect(e={cleanup:!1}){if(this.status!==Le.CONNECTED)throw ut.notConnectedError("Not connected with wallet");if(!this.authInstance)throw Ue.notReady("authInstance is not ready");await this.authInstance.logout(),e.cleanup?(this.status=Le.NOT_READY,this.authInstance=null,this.privateKeyProvider=null):this.status=Le.READY,this.rehydrated=!1,this.emit(It.DISCONNECTED)}async authenticateUser(){if(this.status!==Le.CONNECTED)throw ut.notConnectedError("Not connected with wallet, Please login/connect first");return{idToken:(await this.getUserInfo()).idToken}}async getUserInfo(){if(this.status!==Le.CONNECTED)throw ut.notConnectedError("Not connected with wallet");if(!this.authInstance)throw Ue.notReady("authInstance is not ready");return this.authInstance.getUserInfo()}setAdapterSettings(e){super.setAdapterSettings(e);const n=NN();We.info("setting adapter settings",e),this.authOptions=_o.all([n.adapterSettings,this.authOptions||{},e||{}]),e.web3AuthNetwork&&(this.authOptions.network=e.web3AuthNetwork),e.privateKeyProvider&&(this.privateKeyProvider=e.privateKeyProvider)}async addChain(e,n=!1){var r;super.checkAddChainRequirements(e,n),(r=this.privateKeyProvider)===null||r===void 0||r.addChain(e),this.addChainConfig(e)}async switchChain(e,n=!1){var r;super.checkSwitchChainRequirements(e,n),await((r=this.privateKeyProvider)===null||r===void 0?void 0:r.switchChain(e)),this.setAdapterSettings({chainConfig:this.getChainConfig(e.chainId)})}_getFinalPrivKey(){if(!this.authInstance)return"";let e=this.authInstance.privKey;if(this.useCoreKitKey){if(this.authInstance.privKey&&!this.authInstance.coreKitKey)throw ut.coreKitKeyNotFound();e=this.authInstance.coreKitKey}return e}_getFinalEd25519PrivKey(){if(!this.authInstance)return"";let e=this.authInstance.ed25519PrivKey;if(this.useCoreKitKey){if(this.authInstance.ed25519PrivKey&&!this.authInstance.coreKitEd25519Key)throw ut.coreKitKeyNotFound();e=this.authInstance.coreKitEd25519Key}return e}async connectWithProvider(e={loginProvider:""}){var n;if(!this.privateKeyProvider)throw Ue.invalidParams("PrivateKey Provider is required before initialization");if(!this.authInstance)throw Ue.notReady("authInstance is not ready");if(!this._getFinalPrivKey()||(n=e.extraLoginOptions)!==null&&n!==void 0&&n.id_token){var i;if(this.loginSettings.curve=Mj.OTHER,!e.loginProvider&&!this.loginSettings.loginProvider)throw Ue.invalidParams("loginProvider is required for login");await this.authInstance.login(_o.all([this.loginSettings,e,{extraLoginOptions:fe(fe({},e.extraLoginOptions||{}),{},{login_hint:e.login_hint||((i=e.extraLoginOptions)===null||i===void 0?void 0:i.login_hint)})}]))}let s=this._getFinalPrivKey();s&&(this.currentChainNamespace===wt.SOLANA&&(s=this._getFinalEd25519PrivKey()),await this.privateKeyProvider.setupProvider(s),this.status=Le.CONNECTED,this.emit(It.CONNECTED,{adapter:Wt.AUTH,reconnected:this.rehydrated,provider:this.provider}))}}class Bw extends mH{constructor({config:e,state:n}){if(super({config:e,state:n}),me(this,"_providerEngineProxy",null),me(this,"keyExportFlagSetByCode",!1),!e.chainConfig)throw Ue.invalidProviderConfigError("Please provide chainConfig");if(!e.chainConfig.chainId)throw Ue.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!e.chainConfig.rpcTarget)throw Ue.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");typeof e.keyExportEnabled=="boolean"&&(this.keyExportFlagSetByCode=!0),this.defaultState={chainId:"loading"},this.defaultConfig={chainConfig:e.chainConfig,networks:{[e.chainConfig.chainId]:e.chainConfig},keyExportEnabled:typeof e.keyExportEnabled=="boolean"?e.keyExportEnabled:!0},super.initialize()}get currentChainConfig(){return this.config.chainConfig}get provider(){return this._providerEngineProxy}get chainId(){return this.state.chainId}set provider(e){throw new Error("Method not implemented.")}async request(e){var n;if(!e||typeof e!="object"||Array.isArray(e))throw _t.invalidRequest({message:Ra.invalidRequestArgs().message,data:fe(fe({},e||{}),{},{cause:Ra.invalidRequestArgs().message})});const{method:r,params:i}=e;if(typeof r!="string"||r.length===0)throw _t.invalidRequest({message:Ra.invalidRequestMethod().message,data:fe(fe({},e||{}),{},{cause:Ra.invalidRequestMethod().message})});if(i!==void 0&&!Array.isArray(i)&&(typeof i!="object"||i===null))throw _t.invalidRequest({message:Ra.invalidRequestParams().message,data:fe(fe({},e||{}),{},{cause:Ra.invalidRequestParams().message})});return(n=this.provider)===null||n===void 0?void 0:n.request(e)}sendAsync(e,n){return n?this.send(e,n):this.request(e)}send(e,n){this.request(e).then(r=>n(null,{result:r})).catch(r=>n(r,null))}addChain(e){if(!e.chainId||!e.rpcTarget)throw _t.invalidParams("chainId is required");this.configure({networks:fe(fe({},this.config.networks),{},{[e.chainId]:e})})}getChainConfig(e){var n;const r=(n=this.config.networks)===null||n===void 0?void 0:n[e];if(!r)throw _t.invalidRequest(`Chain ${e} is not supported, please add chainConfig for it`);return r}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=SN(e)}setKeyExportFlag(e){this.keyExportFlagSetByCode||this.configure({keyExportEnabled:e})}getProviderEngineProxy(){return this._providerEngineProxy}}function UH(t){return(e,n,r,i)=>e.method==="chainId"?(n.result=t,i()):r()}function jH(t){return(e,n,r,i)=>e.method==="provider_config"?(n.result=t,i()):r()}function FH(t){const{chainId:e,rpcTarget:n}=t,r=jE({rpcTarget:n});return{networkMiddleware:hl([UH(e),jH(t),r]),fetchMiddleware:r}}var LN;class Mw extends Bw{constructor({config:e,state:n}){super({config:e,state:n})}async setupProvider(){const{networkMiddleware:e}=FH(this.config.chainConfig),n=new Hi;n.push(e);const r=np(n);this.updateProviderEngineProxy(r);const i=this.config.chainConfig.chainId;this.state.chainId!==i&&(this.emit("chainChanged",i),this.emit("connect",{chainId:i})),this.update({chainId:this.config.chainConfig.chainId})}async switchChain(e){if(!this._providerEngineProxy)throw Ws.custom({message:"Provider is not initialized",code:4902});const n=this.getChainConfig(e.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:n}),await this.setupProvider()}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=SN(e)}getProviderEngineProxy(){return this._providerEngineProxy}lookupNetwork(){throw new Error("Method not implemented.")}}LN=Mw;me(Mw,"getProviderInstance",async t=>{const e=new LN({config:{chainConfig:t.chainConfig}});return await e.setupProvider(),e});const Mg="Web3Auth-cachedAdapter";class zH extends rl{constructor(e){var n,r,i,s;if(super(),me(this,"coreOptions",void 0),me(this,"connectedAdapterName",null),me(this,"status",Le.NOT_READY),me(this,"cachedAdapter",null),me(this,"walletAdapters",{}),me(this,"commonJRPCProvider",null),me(this,"plugins",{}),me(this,"storage","localStorage"),!e.clientId)throw Ue.invalidParams("Please provide a valid clientId in constructor");if(e.enableLogging?We.enableAll():We.setLevel("error"),!e.privateKeyProvider&&!e.chainConfig)throw Ue.invalidParams("Please provide chainConfig or privateKeyProvider");if(e.chainConfig=e.chainConfig||e.privateKeyProvider.currentChainConfig,!((n=e.chainConfig)!==null&&n!==void 0&&n.chainNamespace)||!Object.values(wt).includes((r=e.chainConfig)===null||r===void 0?void 0:r.chainNamespace))throw Ue.invalidParams("Please provide a valid chainNamespace in chainConfig");e.storageKey==="session"&&(this.storage="sessionStorage"),this.cachedAdapter=Cc(this.storage)?window[this.storage].getItem(Mg):null,this.coreOptions=fe(fe({},e),{},{chainConfig:fe(fe({},nl((i=e.chainConfig)===null||i===void 0?void 0:i.chainNamespace,(s=e.chainConfig)===null||s===void 0?void 0:s.chainId,e.clientId)||{}),e.chainConfig)}),this.subscribeToAdapterEvents=this.subscribeToAdapterEvents.bind(this)}get connected(){return!!this.connectedAdapterName}get provider(){return this.status!==Le.NOT_READY&&this.commonJRPCProvider?this.commonJRPCProvider:null}set provider(e){throw new Error("Not implemented")}async init(){this.commonJRPCProvider=await Mw.getProviderInstance({chainConfig:this.coreOptions.chainConfig});let e;try{var n;e=await CN(this.coreOptions.clientId,this.coreOptions.web3AuthNetwork,(n=this.coreOptions.accountAbstractionProvider)===null||n===void 0?void 0:n.config.smartAccountInit.name)}catch(i){throw We.error("Failed to fetch project configurations",i),Ue.notReady("failed to fetch project configurations",i)}const r=Object.keys(this.walletAdapters).map(async i=>{if(this.subscribeToAdapterEvents(this.walletAdapters[i]),this.walletAdapters[i].chainConfigProxy)this.walletAdapters[i].setAdapterSettings({sessionTime:this.coreOptions.sessionTime,clientId:this.coreOptions.clientId,web3AuthNetwork:this.coreOptions.web3AuthNetwork,useCoreKitKey:this.coreOptions.useCoreKitKey});else{const s=this.coreOptions.chainConfig;if(!s.chainNamespace)throw Ue.invalidParams("Please provide chainNamespace in chainConfig");this.walletAdapters[i].setAdapterSettings({chainConfig:s,sessionTime:this.coreOptions.sessionTime,clientId:this.coreOptions.clientId,web3AuthNetwork:this.coreOptions.web3AuthNetwork,useCoreKitKey:this.coreOptions.useCoreKitKey})}if(i===Wt.AUTH){const s=this.walletAdapters[i],{whitelabel:o}=e;this.coreOptions.uiConfig=_o(xh(o||{}),this.coreOptions.uiConfig||{}),this.coreOptions.uiConfig.mode||(this.coreOptions.uiConfig.mode="light");const{sms_otp_enabled:a,whitelist:c,key_export_enabled:l}=e;if(a!==void 0&&s.setAdapterSettings({loginConfig:{[un.SMS_PASSWORDLESS]:{showOnModal:a,showOnDesktop:a,showOnMobile:a,showOnSocialBackupFactor:a}}}),c&&s.setAdapterSettings({originData:c.signed_urls}),typeof l=="boolean"&&(this.coreOptions.privateKeyProvider.setKeyExportFlag(l),this.commonJRPCProvider.setKeyExportFlag(l)),this.coreOptions.privateKeyProvider){if(s.currentChainNamespace!==this.coreOptions.privateKeyProvider.currentChainConfig.chainNamespace)throw Ue.incompatibleChainNameSpace("private key provider is not compatible with provided chainNamespace for auth adapter");s.setAdapterSettings({privateKeyProvider:this.coreOptions.privateKeyProvider})}if(s.setAdapterSettings({whiteLabel:this.coreOptions.uiConfig}),!s.privateKeyProvider)throw Ue.invalidParams("privateKeyProvider is required for auth adapter")}else if(i===Wt.WALLET_CONNECT_V2){const s=this.walletAdapters[i],{wallet_connect_enabled:o,wallet_connect_project_id:a}=e;if(o===!1)throw Ue.invalidParams("Please enable wallet connect v2 addon on dashboard");if(!a)throw Ue.invalidParams("Invalid wallet connect project id. Please configure it on the dashboard");s.setAdapterSettings({adapterSettings:{walletConnectInitOptions:{projectId:a}}})}return this.walletAdapters[i].init({autoConnect:this.cachedAdapter===i}).catch(s=>We.error(s,i))});await Promise.all(r),this.status===Le.NOT_READY&&(this.status=Le.READY,this.emit(It.READY))}getAdapter(e){return this.walletAdapters[e]||null}configureAdapter(e){this.checkInitRequirements();const n=this.coreOptions.chainConfig;if(!n.chainNamespace)throw Ue.invalidParams("Please provide chainNamespace in chainConfig");if(this.walletAdapters[e.name])throw Ue.duplicateAdapterError(`Wallet adapter for ${e.name} already exists`);if(e.adapterNamespace!==Zh.MULTICHAIN&&e.adapterNamespace!==n.chainNamespace)throw Ue.incompatibleChainNameSpace(`This wallet adapter belongs to ${e.adapterNamespace} which is incompatible with currently used namespace: ${n.chainNamespace}`);return e.adapterNamespace===Zh.MULTICHAIN&&e.currentChainNamespace&&n.chainNamespace!==e.currentChainNamespace&&e.setAdapterSettings({chainConfig:n}),this.walletAdapters[e.name]=e,this}clearCache(){Cc(this.storage)&&(window[this.storage].removeItem(Mg),this.cachedAdapter=null)}async addChain(e){if(this.status===Le.CONNECTED&&this.connectedAdapterName)return this.walletAdapters[this.connectedAdapterName].addChain(e);if(this.commonJRPCProvider)return this.commonJRPCProvider.addChain(e);throw Ue.notReady("No wallet is ready")}async switchChain(e){if(this.status===Le.CONNECTED&&this.connectedAdapterName)return this.walletAdapters[this.connectedAdapterName].switchChain(e);if(this.commonJRPCProvider)return this.commonJRPCProvider.switchChain(e);throw Ue.notReady("No wallet is ready")}async connectTo(e,n){if(!this.walletAdapters[e]||!this.commonJRPCProvider)throw Ue.notFound(`Please add wallet adapter for ${e} wallet, before connecting`);return new Promise((r,i)=>{this.once(It.CONNECTED,s=>{r(this.provider)}),this.once(It.ERRORED,s=>{i(s)}),this.walletAdapters[e].connect(n)})}async logout(e={cleanup:!1}){if(this.status!==Le.CONNECTED||!this.connectedAdapterName)throw ut.notConnectedError("No wallet is connected");await this.walletAdapters[this.connectedAdapterName].disconnect(e)}async getUserInfo(){if(We.debug("Getting user info",this.status,this.connectedAdapterName),this.status!==Le.CONNECTED||!this.connectedAdapterName)throw ut.notConnectedError("No wallet is connected");return this.walletAdapters[this.connectedAdapterName].getUserInfo()}async enableMFA(e){if(this.status!==Le.CONNECTED||!this.connectedAdapterName)throw ut.notConnectedError("No wallet is connected");if(this.connectedAdapterName!==Wt.AUTH)throw ut.unsupportedOperation("EnableMFA is not supported for this adapter.");return this.walletAdapters[this.connectedAdapterName].enableMFA(e)}async manageMFA(e){if(this.status!==Le.CONNECTED||!this.connectedAdapterName)throw ut.notConnectedError("No wallet is connected");if(this.connectedAdapterName!==Wt.AUTH)throw ut.unsupportedOperation("ManageMFA is not supported for this adapter.");return this.walletAdapters[this.connectedAdapterName].manageMFA(e)}async authenticateUser(){if(this.status!==Le.CONNECTED||!this.connectedAdapterName)throw ut.notConnectedError("No wallet is connected");return this.walletAdapters[this.connectedAdapterName].authenticateUser()}addPlugin(e){if(this.plugins[e.name])throw Ue.duplicateAdapterError(`Plugin ${e.name} already exist`);if(e.pluginNamespace!==NH.MULTICHAIN&&e.pluginNamespace!==this.coreOptions.chainConfig.chainNamespace)throw Ue.incompatibleChainNameSpace(`This plugin belongs to ${e.pluginNamespace} namespace which is incompatible with currently used namespace: ${this.coreOptions.chainConfig.chainNamespace}`);return this.plugins[e.name]=e,this.status===Le.CONNECTED&&this.connectedAdapterName&&this.connectToPlugins({adapter:this.connectedAdapterName}),this}getPlugin(e){return this.plugins[e]||null}subscribeToAdapterEvents(e){e.on(It.CONNECTED,async n=>{if(!this.commonJRPCProvider)throw Ue.notFound("CommonJrpcProvider not found");const{provider:r}=n;let i=r.provider||r;this.coreOptions.accountAbstractionProvider&&(n.adapter===Wt.AUTH||n.adapter!==Wt.AUTH&&this.coreOptions.useAAWithExternalWallet)&&(await this.coreOptions.accountAbstractionProvider.setupProvider(r),i=this.coreOptions.accountAbstractionProvider),this.commonJRPCProvider.updateProviderEngineProxy(i),this.connectedAdapterName=n.adapter,this.status=Le.CONNECTED,this.cacheWallet(n.adapter),We.debug("connected",this.status,this.connectedAdapterName),this.connectToPlugins(n),this.emit(It.CONNECTED,fe({},n))}),e.on(It.DISCONNECTED,async()=>{if(this.status=Le.READY,Cc(this.storage)){const n=window[this.storage].getItem(Mg);this.connectedAdapterName===n&&this.clearCache()}We.debug("disconnected",this.status,this.connectedAdapterName),await Promise.all(Object.values(this.plugins).map(n=>n.disconnect().catch(r=>{r.code!==5211&&We.error(r)}))),this.connectedAdapterName=null,this.emit(It.DISCONNECTED)}),e.on(It.CONNECTING,n=>{this.status=Le.CONNECTING,this.emit(It.CONNECTING,n),We.debug("connecting",this.status,this.connectedAdapterName)}),e.on(It.ERRORED,n=>{this.status=Le.ERRORED,this.clearCache(),this.emit(It.ERRORED,n),We.debug("errored",this.status,this.connectedAdapterName)}),e.on(It.ADAPTER_DATA_UPDATED,n=>{We.debug("adapter data updated",n),this.emit(It.ADAPTER_DATA_UPDATED,n)}),e.on(It.CACHE_CLEAR,n=>{We.debug("adapter cache clear",n),Cc(this.storage)&&this.clearCache()})}checkInitRequirements(){if(this.status===Le.CONNECTING)throw Ue.notReady("Already pending connection");if(this.status===Le.CONNECTED)throw Ue.notReady("Already connected");if(this.status===Le.READY)throw Ue.notReady("Adapter is already initialized")}cacheWallet(e){Cc(this.storage)&&(window[this.storage].setItem(Mg,e),this.cachedAdapter=e)}connectToPlugins(e){Object.values(this.plugins).map(async n=>{try{if(!n.SUPPORTED_ADAPTERS.includes("all")&&!n.SUPPORTED_ADAPTERS.includes(e.adapter)||n.status===PN.CONNECTED)return;const{authInstance:r}=this.walletAdapters[this.connectedAdapterName],{options:i,sessionId:s,sessionNamespace:o}=r||{};await n.initWithWeb3Auth(this,i==null?void 0:i.whiteLabel),await n.connect({sessionId:s,sessionNamespace:o})}catch(r){if(r.code===5211)return;We.error(r)}})}}function zE(t){return t.charAt(0).toUpperCase()+t.slice(1)}const KH=new Set([un.AUTHENTICATOR,un.PASSKEYS,un.JWT,un.WEBAUTHN]),KE=Object.values(un).filter(t=>!KH.has(t)),HH=KE.reduce((t,e)=>(e==="email_passwordless"?t[e]="Email":e==="sms_passwordless"?t[e]="Mobile":t[e]=zE(e),t),{}),wo={INIT_EXTERNAL_WALLETS:"INIT_EXTERNAL_WALLETS",LOGIN:"LOGIN",DISCONNECT:"DISCONNECT",MODAL_VISIBILITY:"MODAL_VISIBILITY"},Zn={INITIALIZED:"initialized",CONNECTED:"connected",CONNECTING:"connecting",ERRORED:"errored"},DN="https://images.web3auth.io/web3auth-logo-w.svg",$N="https://images.web3auth.io/web3auth-logo-w-light.svg",WH="https://images.web3auth.io/login-wallet-connect.svg",qH="modulepreload",VH=function(t){return"/"+t},Fk={},Ds=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=VH(c),c in Fk)return;Fk[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":qH,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function BN(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var GH=`@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap");.w3a-parent-container *,.w3a-parent-container :after,.w3a-parent-container :before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#3b82f680;--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.w3a-parent-container ::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#3b82f680;--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }
/*! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com*/.w3a-parent-container *,.w3a-parent-container :after,.w3a-parent-container :before{border:0 solid;box-sizing:border-box}.w3a-parent-container :after,.w3a-parent-container :before{--tw-content:""}.w3a-parent-container :host,.w3a-parent-container html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;tab-size:4}.w3a-parent-container body{line-height:inherit;margin:0}.w3a-parent-container hr{border-top-width:1px;color:inherit;height:0}.w3a-parent-container abbr:where([title]){text-decoration:underline dotted}.w3a-parent-container h1,.w3a-parent-container h2,.w3a-parent-container h3,.w3a-parent-container h4,.w3a-parent-container h5,.w3a-parent-container h6{font-size:inherit;font-weight:inherit}.w3a-parent-container a{color:inherit;text-decoration:inherit}.w3a-parent-container b,.w3a-parent-container strong{font-weight:bolder}.w3a-parent-container code,.w3a-parent-container kbd,.w3a-parent-container pre,.w3a-parent-container samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}.w3a-parent-container small{font-size:80%}.w3a-parent-container sub,.w3a-parent-container sup{font-size:75%;line-height:0;position:relative;vertical-align:initial}.w3a-parent-container sub{bottom:-.25em}.w3a-parent-container sup{top:-.5em}.w3a-parent-container table{border-collapse:collapse;border-color:inherit;text-indent:0}.w3a-parent-container button,.w3a-parent-container input,.w3a-parent-container optgroup,.w3a-parent-container select,.w3a-parent-container textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}.w3a-parent-container button,.w3a-parent-container select{text-transform:none}.w3a-parent-container button,.w3a-parent-container input:where([type=button]),.w3a-parent-container input:where([type=reset]),.w3a-parent-container input:where([type=submit]){-webkit-appearance:button;background-color:initial;background-image:none}.w3a-parent-container :-moz-focusring{outline:auto}.w3a-parent-container :-moz-ui-invalid{box-shadow:none}.w3a-parent-container progress{vertical-align:initial}.w3a-parent-container ::-webkit-inner-spin-button,.w3a-parent-container ::-webkit-outer-spin-button{height:auto}.w3a-parent-container [type=search]{-webkit-appearance:textfield;outline-offset:-2px}.w3a-parent-container ::-webkit-search-decoration{-webkit-appearance:none}.w3a-parent-container ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.w3a-parent-container summary{display:list-item}.w3a-parent-container blockquote,.w3a-parent-container dd,.w3a-parent-container dl,.w3a-parent-container figure,.w3a-parent-container h1,.w3a-parent-container h2,.w3a-parent-container h3,.w3a-parent-container h4,.w3a-parent-container h5,.w3a-parent-container h6,.w3a-parent-container hr,.w3a-parent-container p,.w3a-parent-container pre{margin:0}.w3a-parent-container fieldset{margin:0;padding:0}.w3a-parent-container legend{padding:0}.w3a-parent-container menu,.w3a-parent-container ol,.w3a-parent-container ul{list-style:none;margin:0;padding:0}.w3a-parent-container dialog{padding:0}.w3a-parent-container textarea{resize:vertical}.w3a-parent-container input::placeholder,.w3a-parent-container textarea::placeholder{color:#9ca3af;opacity:1}.w3a-parent-container [role=button],.w3a-parent-container button{cursor:pointer}.w3a-parent-container :disabled{cursor:default}.w3a-parent-container audio,.w3a-parent-container canvas,.w3a-parent-container embed,.w3a-parent-container iframe,.w3a-parent-container img,.w3a-parent-container object,.w3a-parent-container svg,.w3a-parent-container video{display:block;vertical-align:middle}.w3a-parent-container img,.w3a-parent-container video{height:auto;max-width:100%}.w3a-parent-container [hidden]:where(:not([hidden=until-found])){display:none}.w3a-parent-container{--app-on-primary:#fff;--app-primary-50:#ebf5ff;--app-primary-100:#e1effe;--app-primary-200:#c3ddfd;--app-primary-300:#a4cafe;--app-primary-400:#76a9fa;--app-primary-500:#3f83f8;--app-primary-600:#0346ff;--app-primary-700:#1a56db;--app-primary-800:#1e429f;--app-primary-900:#233876;--app-gray-50:#f9fafb;--app-gray-100:#f3f4f6;--app-gray-200:#e5e7eb;--app-gray-300:#d1d5db;--app-gray-400:#9ca3af;--app-gray-500:#6b7280;--app-gray-600:#4b5563;--app-gray-700:#374151;--app-gray-800:#1f2a37;--app-gray-900:#111928;--app-blue-50:#ebf5ff;--app-blue-100:#e1effe;--app-blue-200:#c3ddfd;--app-blue-300:#a4cafe;--app-blue-400:#76a9fa;--app-blue-500:#3f83f8;--app-blue-600:#0346ff;--app-blue-700:#1a56db;--app-blue-800:#1e429f;--app-blue-900:#233876;--app-red-50:#fdf2f2;--app-red-100:#fde8e8;--app-red-200:#fbd5d5;--app-red-300:#f8b4b4;--app-red-400:#f98080;--app-red-500:#f05252;--app-red-600:#e02424;--app-red-700:#c81e1e;--app-red-800:#9b1c1c;--app-red-900:#771d1d;--app-green-50:#f3faf7;--app-green-100:#def7ec;--app-green-200:#bcf0da;--app-green-300:#84e1bc;--app-green-400:#31c48d;--app-green-500:#0e9f6e;--app-green-600:#057a55;--app-green-700:#046c4e;--app-green-800:#03543f;--app-green-900:#014737;--app-yellow-50:#fdfdea;--app-yellow-100:#fdf6b2;--app-yellow-200:#fce96a;--app-yellow-300:#faca15;--app-yellow-400:#e3a008;--app-yellow-500:#c27803;--app-yellow-600:#9f580a;--app-yellow-700:#8e4b10;--app-yellow-800:#723b13;--app-yellow-900:#633112;--app-success:#30cca4;--app-warning:#fbc94a;--app-error:#fb4a61;--app-info:#d4d4d4;--app-white:#fff;--app-black:#000}.w3a-parent-container .w3a--absolute{position:absolute}.w3a-parent-container .w3a--relative{position:relative}.w3a-parent-container .w3a--left-20{left:5rem}.w3a-parent-container .w3a--left-8{left:2rem}.w3a-parent-container .w3a--left-\\[calc\\(50\\%_-_8px\\)\\]{left:calc(50% - 8px)}.w3a-parent-container .w3a--top-4{top:1rem}.w3a-parent-container .w3a--top-\\[100\\%\\]{top:100%}.w3a-parent-container .w3a--z-20{z-index:20}.w3a-parent-container .w3a--col-span-2{grid-column:span 2/span 2}.w3a-parent-container .w3a--col-span-3{grid-column:span 3/span 3}.w3a-parent-container .w3a--col-span-6{grid-column:span 6/span 6}.w3a-parent-container .w3a--mx-auto{margin-left:auto;margin-right:auto}.w3a-parent-container .w3a--my-4{margin-bottom:1rem;margin-top:1rem}.w3a-parent-container .w3a--my-6{margin-bottom:1.5rem;margin-top:1.5rem}.w3a-parent-container .-w3a--mb-2{margin-bottom:-.5rem}.w3a-parent-container .-w3a--ml-\\[100px\\]{margin-left:-100px}.w3a-parent-container .w3a--mb-1{margin-bottom:.25rem}.w3a-parent-container .w3a--mb-2{margin-bottom:.5rem}.w3a-parent-container .w3a--mb-4{margin-bottom:1rem}.w3a-parent-container .w3a--mb-5{margin-bottom:1.25rem}.w3a-parent-container .w3a--ml-2{margin-left:.5rem}.w3a-parent-container .w3a--ml-\\[3px\\]{margin-left:3px}.w3a-parent-container .w3a--ml-auto{margin-left:auto}.w3a-parent-container .w3a--mr-6{margin-right:1.5rem}.w3a-parent-container .w3a--mr-auto{margin-right:auto}.w3a-parent-container .w3a--mt-4{margin-top:1rem}.w3a-parent-container .w3a--block{display:block}.w3a-parent-container .w3a--flex{display:flex}.w3a-parent-container .w3a--inline-flex{display:inline-flex}.w3a-parent-container .w3a--hidden{display:none}.w3a-parent-container .w3a--h-10{height:2.5rem}.w3a-parent-container .w3a--h-3{height:.75rem}.w3a-parent-container .w3a--h-4{height:1rem}.w3a-parent-container .w3a--h-auto{height:auto}.w3a-parent-container .w3a--h-full{height:100%}.w3a-parent-container .w3a--w-10{width:2.5rem}.w3a-parent-container .w3a--w-3{width:.75rem}.w3a-parent-container .w3a--w-\\[270px\\]{width:270px}.w3a-parent-container .w3a--w-\\[300px\\]{width:300px}.w3a-parent-container .w3a--w-auto{width:auto}.w3a-parent-container .w3a--w-full{width:100%}.w3a-parent-container .w3a--flex-shrink{flex-shrink:1}.w3a-parent-container .w3a--flex-shrink-0{flex-shrink:0}.w3a-parent-container .w3a--flex-grow-0{flex-grow:0}.w3a-parent-container .w3a--translate-x-\\[-16px\\]{--tw-translate-x:-16px}.w3a-parent-container .w3a--rotate-45,.w3a-parent-container .w3a--translate-x-\\[-16px\\]{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .w3a--rotate-45{--tw-rotate:45deg}.w3a-parent-container .w3a--cursor-pointer{cursor:pointer}.w3a-parent-container .w3a--flex-row{flex-direction:row}.w3a-parent-container .w3a--flex-col{flex-direction:column}.w3a-parent-container .w3a--items-center{align-items:center}.w3a-parent-container .\\!w3a--justify-start{justify-content:flex-start!important}.w3a-parent-container .w3a--justify-start{justify-content:flex-start}.w3a-parent-container .w3a--justify-end{justify-content:flex-end}.w3a-parent-container .w3a--justify-center{justify-content:center}.w3a-parent-container .\\!w3a--justify-between{justify-content:space-between!important}.w3a-parent-container .w3a--justify-between{justify-content:space-between}.w3a-parent-container .w3a--gap-1{gap:.25rem}.w3a-parent-container .w3a--gap-2{gap:.5rem}.w3a-parent-container .w3a--gap-3{gap:.75rem}.w3a-parent-container .w3a--gap-y-0\\.5{row-gap:.125rem}.w3a-parent-container .w3a--truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.w3a-parent-container .w3a--rounded{border-radius:.25rem}.w3a-parent-container .w3a--rounded-full{border-radius:9999px}.w3a-parent-container .w3a--rounded-lg{border-radius:.5rem}.w3a-parent-container .w3a--rounded-md{border-radius:.375rem}.w3a-parent-container .w3a--rounded-xl{border-radius:.75rem}.w3a-parent-container .w3a--border-8{border-width:8px}.w3a-parent-container .w3a--border-b-0{border-bottom-width:0}.w3a-parent-container .w3a--border-l-transparent{border-left-color:#0000}.w3a-parent-container .w3a--border-r-transparent{border-right-color:#0000}.w3a-parent-container .w3a--border-t-app-gray-900{border-top-color:var(--app-gray-900)}.w3a-parent-container .w3a--bg-app-gray-50{background-color:var(--app-gray-50)}.w3a-parent-container .w3a--bg-app-primary-100{background-color:var(--app-primary-100)}.w3a-parent-container .w3a--object-contain{object-fit:contain}.w3a-parent-container .w3a--p-4{padding:1rem}.w3a-parent-container .w3a--p-6{padding:1.5rem}.w3a-parent-container .w3a--px-2{padding-left:.5rem;padding-right:.5rem}.w3a-parent-container .w3a--px-3{padding-left:.75rem;padding-right:.75rem}.w3a-parent-container .w3a--py-1{padding-bottom:.25rem;padding-top:.25rem}.w3a-parent-container .w3a--py-2{padding-bottom:.5rem;padding-top:.5rem}.w3a-parent-container .w3a--py-4{padding-bottom:1rem;padding-top:1rem}.w3a-parent-container .w3a--py-6{padding-bottom:1.5rem;padding-top:1.5rem}.w3a-parent-container .w3a--pt-7{padding-top:1.75rem}.w3a-parent-container .w3a--text-left{text-align:left}.w3a-parent-container .w3a--text-center{text-align:center}.w3a-parent-container .w3a--text-right{text-align:right}.w3a-parent-container .w3a--text-sm{font-size:.875rem;line-height:1.25rem}.w3a-parent-container .w3a--text-xs{font-size:.75rem;line-height:1rem}.w3a-parent-container .w3a--font-medium{font-weight:500}.w3a-parent-container .w3a--leading-none{line-height:1}.w3a-parent-container .w3a--text-app-gray-300{color:var(--app-gray-300)}.w3a-parent-container .w3a--text-app-gray-400{color:var(--app-gray-400)}.w3a-parent-container .w3a--text-app-gray-500{color:var(--app-gray-500)}.w3a-parent-container .w3a--text-app-gray-900{color:var(--app-gray-900)}.w3a-parent-container .w3a--text-app-primary-800{color:var(--app-primary-800)}.w3a-parent-container .w3a--text-app-white{color:var(--app-white)}.w3a-parent-container .w3a--shadow-lg{--tw-shadow:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a;--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container input[type=number]::-webkit-inner-spin-button,.w3a-parent-container input[type=number]::-webkit-outer-spin-button{appearance:none}@keyframes shake{0%,to{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-5px)}20%,40%,60%,80%{transform:translateX(5px)}}@keyframes tilt{0%{opacity:0;transform:scale(.9) rotate(0deg)}30%{opacity:1;transform:scale(1.05) rotate(-5deg)}60%{transform:scale(1.05) rotate(5deg)}to{transform:scale(1) rotate(0deg)}}@keyframes open-modal{0%{opacity:0;transform:scale(.8) rotate(-5deg)}60%{opacity:1;transform:scale(1.05) rotate(2deg)}to{transform:scale(1) rotate(0deg)}}@keyframes bounce{0%{opacity:0;transform:scale(.9) translateY(-50%)}30%{opacity:1;transform:scale(1.05) translateY(0)}50%{transform:scale(.95) translateY(-10%)}70%{transform:scale(1.02) translateY(0)}85%{transform:scale(.98) translateY(-5%)}to{transform:scale(1) translateY(0)}}@keyframes subtleAppear{0%{opacity:0;transform:scale(.9)}60%{opacity:1;transform:scale(1.02)}to{transform:scale(1)}}.w3a-parent-container .transition-wrapper{height:100%;position:relative;width:100%}.w3a-parent-container .fade-in{opacity:1;transition:opacity .3s}.w3a-parent-container .fade-out{opacity:0;transition:opacity .3s}.w3a-parent-container .slide-enter{opacity:0;transform:translateX(100%)}.w3a-parent-container .slide-enter-active{opacity:1;transform:translateX(0);transition:transform .3s ease-in-out,opacity .3s ease-in-out}.w3a-parent-container .slide-exit{opacity:1;transform:translateX(0)}.w3a-parent-container .slide-exit-active{opacity:0;transform:translateX(-100%);transition:transform .3s ease-in-out,opacity .3s ease-in-out}.w3a-parent-container .tooltip{--tw-translate-x:-50%;--tw-translate-y:-50%;--tw-shadow:0 4px 6px -1px #0000001a,0 2px 4px -2px #0000001a;--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color);background-color:var(--app-gray-900);border-radius:.5rem;bottom:58%;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);color:var(--app-white);font-size:.875rem;left:50%;line-height:1.25rem;padding:.25rem .5rem;position:absolute;text-align:center;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));width:max-content}.w3a-parent-container #w3a-modal{align-items:center;box-sizing:border-box;display:flex;font-family:Inter;inset:0;justify-content:center;padding:1rem;position:fixed}.w3a-parent-container #w3a-modal.w3a-modal--hidden{display:none}.w3a-parent-container #w3a-modal:before{background-color:var(--app-black);content:"";inset:0;opacity:0;position:fixed;transition:opacity .2s ease-in-out}.w3a-parent-container #w3a-modal .w3a-modal__inner{--tw-shadow:0px 4px 16px #00000014;--tw-shadow-colored:0px 4px 16px var(--tw-shadow-color);background-color:var(--app-white);border-color:var(--app-gray-100);border-radius:32px;border-width:1px;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);display:flex;flex-direction:column;max-height:95%;max-width:392px;opacity:0;overflow-x:hidden;overflow-y:hidden;position:relative;width:100%}.w3a-parent-container #w3a-modal .w3a-modal__inner:is(.w3a--dark *){background-color:var(--app-gray-800);border-color:var(--app-gray-800)}.w3a-parent-container #w3a-modal .w3a-modal__inner{transform:scale(.8) rotate(-5deg);transform-origin:center center;transition:all .15s cubic-bezier(.92,0,1,.67)}.w3a-parent-container #w3a-modal .w3a-modal__inner.w3a-modal__inner--active{animation:subtleAppear .5s ease-out forwards;opacity:1;transform-origin:center center;transition:none}.w3a-parent-container #w3a-modal.w3a-modal--active:before{opacity:.5}.w3a-parent-container #w3a-modal .w3a-modal__header{padding:0 2rem .5rem;position:relative}.w3a-parent-container #w3a-modal .w3a-modal__content{overflow-y:auto;padding:1rem 2rem}.w3a-parent-container #w3a-modal .w3a-modal__content_external_wallet{overflow-y:auto;padding-left:2rem;padding-right:2rem;padding-top:1.5rem}.w3a-parent-container #w3a-modal .w3a-modal__footer{align-items:center;justify-content:center;margin-top:auto;padding:1rem 2rem;text-align:center}.w3a-parent-container #w3a-modal .w3a-header{align-items:center;display:flex;padding-top:2rem}.w3a-parent-container #w3a-modal .w3a-header__logo{margin-bottom:1rem}.w3a-parent-container #w3a-modal .w3a-header__logo img{height:auto;width:2.5rem}.w3a-parent-container #w3a-modal .w3a-header__title{color:var(--app-gray-900);font-size:1.25rem;font-weight:700;line-height:1.75rem}.w3a-parent-container #w3a-modal .w3a-header__title:is(.w3a--dark *){color:var(--app-white)}.w3a-parent-container #w3a-modal div.w3a-header__subtitle{align-items:center;color:var(--app-gray-500);display:flex;font-size:.875rem;font-weight:400;line-height:1.25rem}.w3a-parent-container #w3a-modal div.w3a-header__subtitle:is(.w3a--dark *){color:var(--app-gray-400)}.w3a-parent-container #w3a-modal div.w3a-header__subtitle img{height:14px;margin-left:.25rem;width:14px}.w3a-parent-container #w3a-modal button.w3a-header__button{align-items:center;border-radius:9999px;border-width:0;cursor:pointer;display:flex;height:1.5rem;justify-content:center;padding:0;position:absolute;right:1.75rem;top:1.7rem;width:1.5rem}.w3a-parent-container #w3a-modal button.w3a-header__button:hover{background-color:var(--app-gray-100)}.w3a-parent-container #w3a-modal button.w3a-header__button:active,.w3a-parent-container #w3a-modal button.w3a-header__button:focus{outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal button.w3a-header__button:hover:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container #w3a-modal button.w3a-header__button:focus:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal button.w3a-header__button:active:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal button.w3a-header__button_wallet{align-items:center;border-radius:9999px;border-width:0;cursor:pointer;display:flex;height:1.5rem;justify-content:center;padding:0;position:absolute;right:1.75rem;top:1.6rem;width:1.5rem}.w3a-parent-container #w3a-modal button.w3a-header__button_wallet:hover{background-color:var(--app-gray-100)}.w3a-parent-container #w3a-modal button.w3a-header__button_wallet:active,.w3a-parent-container #w3a-modal button.w3a-header__button_wallet:focus{outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal button.w3a-header__button_wallet:hover:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container #w3a-modal button.w3a-header__button_wallet:focus:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal button.w3a-header__button_wallet:active:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal div.w3a-social__policy{color:var(--app-gray-500);font-size:.75rem;font-weight:500;line-height:1rem;margin-top:1rem;text-align:left}.w3a-parent-container #w3a-modal div.w3a-social__policy:is(.w3a--dark *){color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .w3a-group{margin-bottom:1rem}.w3a-parent-container #w3a-modal .w3a-group-loader-height{align-items:center;display:flex;height:200px;justify-content:center}.w3a-parent-container #w3a-modal .w3a-group:last-child{margin-bottom:0}.w3a-parent-container #w3a-modal .w3ajs-passwordless div.w3a-group__title{align-items:center;display:flex}.w3a-parent-container #w3a-modal .w3ajs-passwordless div.w3a-group__title img{height:14px;margin-left:.25rem;width:14px}.w3a-parent-container #w3a-modal .w3a-group.w3a-group--email-hidden,.w3a-parent-container #w3a-modal .w3a-group.w3a-group--ext-wallet-hidden,.w3a-parent-container #w3a-modal .w3a-group.w3a-group--hidden,.w3a-parent-container #w3a-modal .w3a-group.w3a-group--social-hidden{display:none}.w3a-parent-container #w3a-modal div.w3a-group__title{color:var(--app-gray-900);font-size:.875rem;font-weight:500;line-height:1.25rem;margin-bottom:.5rem}.w3a-parent-container #w3a-modal div.w3a-group__title:is(.w3a--dark *){color:var(--app-white)}.w3a-parent-container #w3a-modal div.w3a-adapter-list-container{height:362px;overflow-y:auto;scrollbar-width:none}.w3a-parent-container #w3a-modal ul.w3a-adapter-list{display:grid;gap:8px;grid-template-columns:repeat(6,minmax(0,1fr));max-height:500px;overflow-y:auto;padding:1px;scrollbar-width:none;transition:max-height .35s;transition-timing-function:cubic-bezier(.92,0,.74,1)}.w3a-parent-container #w3a-modal ul.w3a-adapter-list.w3a-adapter-list--shrink{max-height:100px;overflow-y:hidden;transition:max-height .3s;transition-timing-function:cubic-bezier(0,.73,.71,1)}.w3a-parent-container #w3a-modal ul.w3a-adapter-list.w3a-adapter-list--hidden{display:none}.w3a-parent-container #w3a-modal li.w3a-adapter-item{list-style-type:none}.w3a-parent-container #w3a-modal li.w3a-adapter-item--full{grid-column:span 6/span 6}.w3a-parent-container #w3a-modal .w3a-adapter-item--hide{display:none}.w3a-parent-container #w3a-modal .w3a-external-toggle{display:block;width:100%!important}.w3a-parent-container #w3a-modal .w3a-external-toggle.w3a-external-toggle--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-external-container{display:block;margin-bottom:0}.w3a-parent-container #w3a-modal .w3a-external-container.w3a-external-container--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-external-group{display:flex;flex-wrap:wrap;gap:.75rem;margin-bottom:1rem}.w3a-parent-container #w3a-modal .w3a-external-group__left{flex-grow:1}.w3a-parent-container #w3a-modal button.w3a-external-back{align-items:center;background-image:none;border-radius:9999px;border-width:0;color:var(--app-gray-500);cursor:pointer;display:flex;height:1.5rem;justify-content:center;padding:0;width:1.5rem}.w3a-parent-container #w3a-modal button.w3a-external-back:hover{background-color:var(--app-gray-100);color:var(--app-gray-900)}.w3a-parent-container #w3a-modal button.w3a-external-back:active,.w3a-parent-container #w3a-modal button.w3a-external-back:focus{outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal button.w3a-external-back:is(.w3a--dark *){color:var(--app-gray-400)}.w3a-parent-container #w3a-modal button.w3a-external-back:hover:is(.w3a--dark *){background-color:var(--app-gray-700);color:var(--app-white)}.w3a-parent-container #w3a-modal button.w3a-external-back:focus:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal button.w3a-external-back:active:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-external-back .w3a-group__title{color:var(--app-gray-400);margin-bottom:0;margin-left:5px}.w3a-parent-container #w3a-modal .w3a-external-loader{display:flex;justify-content:center}.w3a-parent-container #w3a-modal .w3a-wallet-connect{display:block;margin-bottom:.625rem;text-align:center}.w3a-parent-container #w3a-modal .w3a-wallet-connect.w3a-wallet-connect--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container{background-color:var(--app-white);border-radius:10px;color:var(--app-gray-500);font-size:.625rem;margin-left:auto;margin-right:auto;min-width:250px;padding-bottom:.625rem;padding-top:.625rem;width:fit-content}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container:is(.w3a--dark *){background-color:var(--app-gray-800);color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-android,.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-desktop{margin:auto}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-btn-group{display:flex;gap:18px}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-ios{box-sizing:border-box;column-gap:1.25rem;display:flex;flex-wrap:wrap;padding:0 0 1.75rem;row-gap:30px}.w3a-parent-container #w3a-modal .w3a-wallet-connect-qr>canvas,.w3a-parent-container #w3a-modal .w3a-wallet-connect-qr>svg{margin:auto}.w3a-parent-container #w3a-modal .w3a-wallet-connect__container-android a{text-decoration-line:none}.w3a-parent-container #w3a-modal .w3a-wallet-connect__logo>img{margin:0 auto 1rem;width:115px}.w3a-parent-container #w3a-modal .w3a-footer{align-items:center;color:var(--app-gray-400);display:flex;font-size:.75rem;justify-content:center;line-height:1rem}.w3a-parent-container #w3a-modal .w3a-footer__links a:active,.w3a-parent-container #w3a-modal .w3a-footer__links a:focus{outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal .w3a-footer__links a:focus:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-footer__links a:active:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-footer__links span{margin:0 4px}.w3a-parent-container #w3a-modal.w3a-modal--light .w3a-footer__links a:focus-visible{outline:1px solid #0f1222}.w3a-parent-container #w3a-modal.w3a-modal--light .w3a-external-back:focus-visible{outline:1px solid #0f1222}.w3a-parent-container #w3a-modal .hover-icon{display:none;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}.w3a-parent-container #w3a-modal .w3a-text-field{background-color:var(--app-gray-50);border-color:var(--app-gray-300);border-radius:9999px;border-width:1px;color:var(--app-gray-900);font-size:.875rem;line-height:1.25rem;margin-top:.5rem;padding:.75rem 1.5rem}.w3a-parent-container #w3a-modal .w3a-text-field::placeholder{color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-text-field{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000);outline-width:0}.w3a-parent-container #w3a-modal .w3a-text-field:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);border-color:#0000;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .w3a-text-field:disabled{cursor:not-allowed}.w3a-parent-container #w3a-modal .w3a-text-field:disabled::placeholder{color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .w3a-text-field:is(.w3a--dark *){background-color:var(--app-gray-600);border-color:var(--app-gray-500);color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-text-field:is(.w3a--dark *)::placeholder{color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .w3a-text-field:focus:is(.w3a--dark *){--tw-ring-color:var(--app-primary-500);border-color:#0000}.w3a-parent-container #w3a-modal .w3a-text-field:disabled:is(.w3a--dark *)::placeholder{color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-text-field{line-height:1.25em}.w3a-parent-container #w3a-modal .w3a-text-field--country-code{display:flex;justify-content:space-between;padding-left:1rem;padding-right:1rem;width:100%}.w3a-parent-container #w3a-modal .w3a-text-field--number{appearance:none}.w3a-parent-container #w3a-modal .w3a-sms-field--error{color:var(--app-red-500);font-size:.875rem;line-height:1.25rem;margin-bottom:.5rem;margin-left:.375rem;margin-top:-.5rem}.w3a-parent-container #w3a-container #w3a-modal input.w3a-text-field:-webkit-autofill,.w3a-parent-container #w3a-container #w3a-modal input.w3a-text-field:-webkit-autofill:active,.w3a-parent-container #w3a-container #w3a-modal input.w3a-text-field:-webkit-autofill:focus,.w3a-parent-container #w3a-container #w3a-modal input.w3a-text-field:-webkit-autofill:hover{--tw-shadow:0 0 0 30px #f9fafb inset;--tw-shadow-colored:inset 0 0 0 30px var(--tw-shadow-color);-webkit-text-fill-color:#111928!important;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container #w3a-container.dark #w3a-modal input.w3a-text-field:-webkit-autofill,.w3a-parent-container #w3a-container.dark #w3a-modal input.w3a-text-field:-webkit-autofill:active,.w3a-parent-container #w3a-container.dark #w3a-modal input.w3a-text-field:-webkit-autofill:focus,.w3a-parent-container #w3a-container.dark #w3a-modal input.w3a-text-field:-webkit-autofill:hover{--tw-shadow:0 0 0 30px #374151 inset;--tw-shadow-colored:inset 0 0 0 30px var(--tw-shadow-color);-webkit-text-fill-color:#fff!important;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container #w3a-modal .w3a-button{background-color:var(--app-gray-100);border-radius:9999px;color:var(--app-gray-900);font-size:1rem;font-weight:500;line-height:1.5rem;padding:.75rem 1.5rem}.w3a-parent-container #w3a-modal .w3a-button:hover{background-color:var(--app-gray-300)}.w3a-parent-container #w3a-modal .w3a-button:focus{background-color:var(--app-gray-100);color:var(--app-gray-700);outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal .w3a-button:active{outline-color:var(--app-gray-50)}.w3a-parent-container #w3a-modal .w3a-button:disabled{background-color:var(--app-gray-50);color:var(--app-gray-300)}.w3a-parent-container #w3a-modal .w3a-button:is(.w3a--dark *){background-color:var(--app-gray-900);color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-button:hover:is(.w3a--dark *){background-color:var(--app-gray-800)}.w3a-parent-container #w3a-modal .w3a-button:focus:is(.w3a--dark *){background-color:var(--app-gray-900);color:var(--app-white);outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-button:active:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-button:disabled:is(.w3a--dark *){--tw-bg-opacity:1;background-color:rgb(59 69 85/var(--tw-bg-opacity,1));color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-button--primary{background-color:var(--app-primary-600);color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-button--primary:hover{background-color:var(--app-primary-800)}.w3a-parent-container #w3a-modal .w3a-button--primary:focus{background-color:var(--app-primary-600);color:var(--app-white);outline-color:var(--app-primary-300)}.w3a-parent-container #w3a-modal .w3a-button--primary:active{outline-color:var(--app-primary-300)}.w3a-parent-container #w3a-modal .w3a-button--primary:disabled{--tw-text-opacity:1;background-color:var(--app-primary-200);color:rgb(235 245 255/var(--tw-text-opacity,1))}.w3a-parent-container #w3a-modal .w3a-button--primary:is(.w3a--dark *){background-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .w3a-button--primary:hover:is(.w3a--dark *){background-color:var(--app-primary-800)}.w3a-parent-container #w3a-modal .w3a-button--primary:focus:is(.w3a--dark *){background-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .w3a-button--primary:disabled:is(.w3a--dark *){--tw-bg-opacity:1;background-color:rgb(45 72 116/var(--tw-bg-opacity,1));color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-button--login{align-items:center;display:inline-flex;height:2.75rem;justify-content:center}.w3a-parent-container #w3a-modal button.w3a-button--login:hover>.hover-icon{display:block;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}.w3a-parent-container #w3a-modal button.w3a-button--login:hover>.image-icon{display:none;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}.w3a-parent-container #w3a-modal button.w3a-button-expand{color:var(--app-primary-600);font-size:.875rem;height:auto;line-height:1.25rem;margin-left:auto;margin-top:1rem;width:auto}.w3a-parent-container #w3a-modal button.w3a-button-expand:hover{color:var(--app-primary-800)}.w3a-parent-container #w3a-modal button.w3a-button-expand:focus-visible{outline-color:var(--app-gray-50);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal button.w3a-button-expand:is(.w3a--dark *){color:var(--app-primary-500)}.w3a-parent-container #w3a-modal button.w3a-button-expand:hover:is(.w3a--dark *){color:var(--app-primary-400)}.w3a-parent-container #w3a-modal button.w3a-button-expand:focus-visible:is(.w3a--dark *){outline-color:var(--app-gray-400);outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .w3a-sms-field__container{display:grid;gap:.5rem;grid-template-columns:repeat(12,minmax(0,1fr))}.w3a-parent-container #w3a-modal .w3a-sms-field__code-selected{display:flex}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown{height:185px;position:absolute;width:120px;z-index:10}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown>:not([hidden])~:not([hidden]){--tw-divide-y-reverse:0;border-bottom-width:calc(1px*var(--tw-divide-y-reverse));border-color:var(--app-gray-100);border-top-width:calc(1px*(1 - var(--tw-divide-y-reverse)))}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown{--tw-shadow:0px 4px 16px #00000014;--tw-shadow-colored:0px 4px 16px var(--tw-shadow-color);background-color:var(--app-white);border-radius:.5rem;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);overflow-y:scroll}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown{transform:translateY(-230px)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown ul{color:var(--app-gray-700);font-size:.875rem;line-height:1.25rem;padding-bottom:.5rem;padding-top:.5rem}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown ul:is(.w3a--dark *){color:var(--app-gray-200)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li{cursor:pointer;padding:0}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li:hover{background-color:var(--app-gray-100)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li:hover:is(.w3a--dark *){background-color:var(--app-gray-900);color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li button{height:100%;padding:.5rem 1rem;text-align:left;width:100%}.w3a-parent-container #w3a-modal .w3a-sms-field__code-dropdown li button div{align-items:center;display:flex}.w3a-parent-container #w3a-modal .w3a-sms-field__code{grid-column:span 5/span 5}.w3a-parent-container #w3a-modal .w3a-sms-field__number{grid-column:span 7/span 7}.w3a-parent-container #w3a-modal .w3a-modal__loader{background-color:var(--app-white);display:flex;inset:0;justify-content:center;position:absolute;z-index:10}.w3a-parent-container #w3a-modal .w3a-modal__loader:is(.w3a--dark *){background-color:var(--app-gray-800)}.w3a-parent-container #w3a-modal .w3a-modal__loader.w3a-modal__loader--hidden{display:none}.w3a-parent-container #w3a-modal .w3a-modal__loader-content{display:flex;flex-direction:column;position:relative;text-align:center}.w3a-parent-container #w3a-modal .w3a-modal__loader-info{align-items:center;display:flex;flex-direction:column;flex-grow:1;justify-content:center;padding:0 30px}.w3a-parent-container #w3a-modal .w3a-spinner-label{color:var(--app-primary-600);font-size:1rem;font-weight:500;line-height:1.5rem;margin-top:10px}.w3a-parent-container #w3a-modal .w3a-spinner-label:is(.w3a--dark *){color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .w3a-spinner-message{color:var(--app-gray-500);font-size:1rem;line-height:1.5rem;margin-top:10px}.w3a-parent-container #w3a-modal .w3a-spinner-message:first-letter{text-transform:capitalize}.w3a-parent-container #w3a-modal .w3a-spinner-message:is(.w3a--dark *){color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-spinner-message.w3a-spinner-message--error{color:var(--app-red-500)}.w3a-parent-container #w3a-modal .w3a-spinner-power{--tw-text-opacity:1;color:rgb(183 184 189/var(--tw-text-opacity,1));font-size:.75rem;line-height:1rem;margin-top:auto}.w3a-parent-container #w3a-modal .w3a-spinner-power>img{display:inline;height:2rem;width:auto}.w3a-parent-container #w3a-modal .w3a-spinner{display:inline-flex;height:60px;position:relative;width:60px}.w3a-parent-container #w3a-modal .w3a-spinner__spinner{position:absolute}@keyframes w3a--spin{to{transform:rotate(1turn)}}.w3a-parent-container #w3a-modal .w3a-spinner__spinner{animation:w3a--spin 1s linear infinite;background-image:conic-gradient(from 0deg at 50% 50%,var(--app-primary-600) 0,#e5e7ebcc 90deg,#e5e7ebcc 270deg,var(--app-primary-600) 1turn);background-position:0 0;background-size:100% 100%;border-radius:100vw;display:inline-block;height:100%;-webkit-mask:radial-gradient(farthest-side,#000 98%,#0000) center/85% 85% no-repeat,linear-gradient(#000 0 0);-webkit-mask-composite:destination-out;mask:radial-gradient(farthest-side,#000 98%,#0000) center/85% 85% no-repeat,linear-gradient(#000 0 0);mask-composite:exclude;width:100%}.w3a-parent-container .dark #w3a-modal .w3a-spinner__spinner{background-image:conic-gradient(from 0deg at 50% 50%,var(--app-primary-500) 0,#e5e7eb33 90deg,#e5e7eb33 270deg,var(--app-primary-500) 1turn)}.w3a-parent-container #w3a-modal .w3a-modal__loader-bridge{align-items:center;display:flex;justify-content:center;margin-bottom:14px}.w3a-parent-container #w3a-modal .w3a-modal__loader-bridge-message{color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .w3a-modal__loader-bridge-message:first-letter{text-transform:capitalize}.w3a-parent-container #w3a-modal .w3a-modal__loader-bridge-message:is(.w3a--dark *){color:var(--app-white)}.w3a-parent-container #w3a-modal .w3a-modal__loader-app-logo{display:flex;padding:.5rem}.w3a-parent-container #w3a-modal .w3a-modal__loader-app-logo img{height:3rem;max-height:3rem;max-width:3rem;object-fit:contain;width:3rem}.w3a-parent-container #w3a-modal .w3a-modal__loader-social-logo{align-items:center;border-radius:9999px;display:flex;height:3.5rem;justify-content:center;padding:.25rem;width:3.5rem}.w3a-parent-container #w3a-modal .w3a-modal__loader-social-logo img{height:2.5rem;max-height:2.5rem;max-width:2.5rem;object-fit:contain;width:2.5rem}.w3a-parent-container #w3a-modal .w3a-modal__loader-adapter img{height:auto;width:84px}.w3a-parent-container #w3a-modal .w3a-modal__connector{align-items:center;display:flex}.w3a-parent-container .w3a-modal__connector-beat{display:inline-block;height:80px;position:relative;width:80px}.w3a-parent-container .w3a-modal__connector-beat div{animation-timing-function:cubic-bezier(0,1,1,0);background:grey;border-radius:50%;height:13px;position:absolute;top:33px;width:13px}@keyframes w3a--pulse{50%{opacity:.5}}.w3a-parent-container .w3a-modal__connector-beat div{animation:w3a--pulse 2s cubic-bezier(.4,0,.6,1) infinite;background-color:var(--app-gray-200)}.w3a-parent-container .w3a-modal__connector-beat div:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container .w3a-modal__connector-beat div:first-child{animation:beat1 2.4s infinite;left:8px}.w3a-parent-container .w3a-modal__connector-beat div:nth-child(2){animation:beat2 2.4s infinite;left:8px}.w3a-parent-container .w3a-modal__connector-beat div:nth-child(3){animation:beat3 2.4s infinite;left:8px}.w3a-parent-container .w3a-modal__connector-beat div:nth-child(4){animation:beat4 2.4s infinite;left:32px}.w3a-parent-container .w3a-modal__connector-beat div:nth-child(5){animation:beat5 2.4s infinite;left:56px}.w3a-parent-container .wallet-btn{background-color:var(--app-gray-100)}.w3a-parent-container .wallet-btn:hover{background-color:var(--app-gray-200)}.w3a-parent-container .wallet-btn:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container .wallet-btn:hover:is(.w3a--dark *){background-color:var(--app-gray-800)}.w3a-parent-container .wallet-link-btn{color:var(--app-gray-900)}.w3a-parent-container .wallet-link-btn:is(.w3a--dark *){background-color:var(--app-gray-700);color:var(--app-white)}.w3a-parent-container .wallet-link-btn:hover:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container .wallet-link-btn img{height:1.75rem;width:1.75rem}.w3a-parent-container .wallet-adapter-container{height:551px}@keyframes beat1{0%{transform:scale(0)}25%{transform:scale(0)}50%{transform:scale(1)}75%{transform:scale(0)}to{transform:scale(0)}}@keyframes beat2{0%{transform:scale(0)}25%{transform:scale(1)}50%{transform:translate(24px)}75%{transform:translate(0)}to{transform:translate(0) scale(0)}}@keyframes beat3{0%{transform:translate(0)}25%{transform:translate(24px)}50%{transform:translate(48px)}75%{transform:translate(24px)}to{transform:translate(0)}}@keyframes beat4{0%{transform:translate(0)}25%{transform:translate(24px)}50%{transform:translate(24px) scale(0)}75%{transform:translate(24px) scale(1)}to{transform:translate(0)}}@keyframes beat5{0%{transform:scale(1)}25%{transform:scale(0)}50%{transform:scale(0)}75%{transform:scale(0)}to{transform:scale(1)}}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--flex{display:flex}.w3a-parent-container .dark\\:w3a--block:is(.w3a--dark *){display:block}.w3a-parent-container .dark\\:w3a--hidden:is(.w3a--dark *){display:none}.w3a-parent-container .dark\\:w3a--bg-app-gray-600:is(.w3a--dark *){background-color:var(--app-gray-600)}.w3a-parent-container .dark\\:w3a--bg-app-gray-700:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container .dark\\:w3a--text-app-gray-400:is(.w3a--dark *){color:var(--app-gray-400)}.w3a-parent-container .dark\\:w3a--text-app-gray-500:is(.w3a--dark *){color:var(--app-gray-500)}.w3a-parent-container .dark\\:w3a--text-app-white:is(.w3a--dark *){color:var(--app-white)}`;BN(GH);const YH=(t,e,n,r)=>{var s,o,a,c;const i=[n,{code:e,...r||{}}];if((o=(s=t==null?void 0:t.services)==null?void 0:s.logger)!=null&&o.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);Yl(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(c=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&c.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},zk={},a2=(t,e,n,r)=>{Yl(n)&&zk[n]||(Yl(n)&&(zk[n]=new Date),YH(t,e,n,r))},MN=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},c2=(t,e,n)=>{t.loadNamespaces(e,MN(t,n))},Kk=(t,e,n,r)=>{if(Yl(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return c2(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,MN(t,r))},JH=(t,e,n={})=>!e.languages||!e.languages.length?(a2(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{var s;if(((s=n.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),Yl=t=>typeof t=="string",ZH=t=>typeof t=="object"&&t!==null,XH=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,QH={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},eW=t=>QH[t],tW=t=>t.replace(XH,eW);let l2={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:tW};const nW=(t={})=>{l2={...l2,...t}},rW=()=>l2;let UN;const iW=t=>{UN=t},sW=()=>UN,oW={type:"3rdParty",init(t){nW(t.options.react),iW(t)}},aW=ne.createContext();class cW{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const lW=(t,e)=>{const n=ne.useRef();return ne.useEffect(()=>{n.current=t},[t,e]),n.current},jN=(t,e,n,r)=>t.getFixedT(e,n,r),uW=(t,e,n,r)=>ne.useCallback(jN(t,e,n,r),[t,e,n,r]),Io=(t,e={})=>{var x,E,A,k;const{i18n:n}=e,{i18n:r,defaultNS:i}=ne.useContext(aW)||{},s=n||r||sW();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new cW),!s){a2(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const S=(F,N)=>Yl(N)?N:ZH(N)&&Yl(N.defaultValue)?N.defaultValue:Array.isArray(F)?F[F.length-1]:F,C=[S,{},!1];return C.t=S,C.i18n={},C.ready=!1,C}(x=s.options.react)!=null&&x.wait&&a2(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...rW(),...s.options.react,...e},{useSuspense:a,keyPrefix:c}=o;let l=i||((E=s.options)==null?void 0:E.defaultNS);l=Yl(l)?[l]:l||["translation"],(k=(A=s.reportNamespaces).addUsedNamespaces)==null||k.call(A,l);const u=(s.isInitialized||s.initializedStoreOnce)&&l.every(S=>JH(S,s,o)),d=uW(s,e.lng||null,o.nsMode==="fallback"?l:l[0],c),f=()=>d,h=()=>jN(s,e.lng||null,o.nsMode==="fallback"?l:l[0],c),[p,g]=ne.useState(f);let w=l.join();e.lng&&(w=`${e.lng}${w}`);const y=lW(w),b=ne.useRef(!0);ne.useEffect(()=>{const{bindI18n:S,bindI18nStore:C}=o;b.current=!0,!u&&!a&&(e.lng?Kk(s,e.lng,l,()=>{b.current&&g(h)}):c2(s,l,()=>{b.current&&g(h)})),u&&y&&y!==w&&b.current&&g(h);const F=()=>{b.current&&g(h)};return S&&(s==null||s.on(S,F)),C&&(s==null||s.store.on(C,F)),()=>{b.current=!1,s&&(S==null||S.split(" ").forEach(N=>s.off(N,F))),C&&s&&C.split(" ").forEach(N=>s.store.off(N,F))}},[s,w]),ne.useEffect(()=>{b.current&&u&&g(f)},[s,c,u]);const m=[p,s,u];if(m.t=p,m.i18n=s,m.ready=u,u||!u&&!a)return m;throw new Promise(S=>{e.lng?Kk(s,e.lng,l,()=>S()):c2(s,l,()=>S())})},Ct=t=>typeof t=="string",Mf=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},Hk=t=>t==null?"":""+t,dW=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},fW=/###/g,Wk=t=>t&&t.indexOf("###")>-1?t.replace(fW,"."):t,qk=t=>!t||Ct(t),Sh=(t,e,n)=>{const r=Ct(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(qk(t))return{};const s=Wk(r[i]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++i}return qk(t)?{}:{obj:t,k:Wk(r[i])}},Vk=(t,e,n)=>{const{obj:r,k:i}=Sh(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],o=e.slice(0,e.length-1),a=Sh(t,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=Sh(t,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},hW=(t,e,n,r)=>{const{obj:i,k:s}=Sh(t,e,Object);i[s]=i[s]||[],i[s].push(n)},Em=(t,e)=>{const{obj:n,k:r}=Sh(t,e);if(n)return n[r]},pW=(t,e,n)=>{const r=Em(t,n);return r!==void 0?r:Em(e,n)},FN=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?Ct(t[r])||t[r]instanceof String||Ct(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):FN(t[r],e[r],n):t[r]=e[r]);return t},Tu=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var gW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const mW=t=>Ct(t)?t.replace(/[&<>"'\/]/g,e=>gW[e]):t;class wW{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const yW=[" ",",","?","!",";"],bW=new wW(20),vW=(t,e,n)=>{e=e||"",n=n||"";const r=yW.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=bW.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(t);if(!s){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s},u2=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,a="";for(let c=s;c<r.length;++c)if(c!==s&&(a+=n),a+=r[c],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<r.length-1)continue;s+=c-s+1;break}i=o}return i},Sm=t=>t&&t.replace("_","-"),xW={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class _m{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||xW,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(Ct(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new _m(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new _m(this.logger,e)}}var Xo=new _m;let Uw=class{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[a,c]=o;for(let l=0;l<c;l++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,c]=o;for(let l=0;l<c;l++)a.apply(a,[e,...r])})}};class Gk extends Uw{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):Ct(r)&&s?a.push(...r.split(s)):a.push(r)));const c=Em(this.data,a);return!c&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),c||!o||!Ct(r)?c:u2(this.data&&this.data[e]&&this.data[e][n],r,s)}addResource(e,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),i=n,n=a[1]),this.addNamespaces(n),Vk(this.data,a,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(Ct(r[s])||Array.isArray(r[s]))&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let c=Em(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?FN(c,r,s):c={...c,...r},Vk(this.data,a,c),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var zN={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{this.processors[s]&&(e=this.processors[s].process(e,n,r,i))}),e}};const Yk={};class km extends Uw{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),dW(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Xo.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!vW(e,r,i);if(o&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Ct(s)?[s]:s};const l=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(l[0])>-1)&&(s=l.shift()),e=l.join(i)}return{key:e,namespaces:Ct(s)?[s]:s}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],n),c=a[a.length-1],l=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&l.toLowerCase()==="cimode"){if(u){const x=n.nsSeparator||this.options.nsSeparator;return i?{res:`${c}${x}${o}`,usedKey:o,exactUsedKey:o,usedLng:l,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:`${c}${x}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:l,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:o}const d=this.resolve(e,n);let f=d&&d.res;const h=d&&d.usedKey||o,p=d&&d.exactUsedKey||o,g=Object.prototype.toString.apply(f),w=["[object Number]","[object Function]","[object RegExp]"],y=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,m=!Ct(f)&&typeof f!="boolean"&&typeof f!="number";if(b&&f&&m&&w.indexOf(g)<0&&!(Ct(y)&&Array.isArray(f))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const x=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,f,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(d.res=x,d.usedParams=this.getUsedParamsDetails(n),d):x}if(s){const x=Array.isArray(f),E=x?[]:{},A=x?p:h;for(const k in f)if(Object.prototype.hasOwnProperty.call(f,k)){const S=`${A}${s}${k}`;E[k]=this.translate(S,{...n,joinArrays:!1,ns:a}),E[k]===S&&(E[k]=f[k])}f=E}}else if(b&&Ct(y)&&Array.isArray(f))f=f.join(y),f&&(f=this.extendTranslation(f,e,n,r));else{let x=!1,E=!1;const A=n.count!==void 0&&!Ct(n.count),k=km.hasDefaultValue(n),S=A?this.pluralResolver.getSuffix(l,n.count,n):"",C=n.ordinal&&A?this.pluralResolver.getSuffix(l,n.count,{ordinal:!1}):"",F=A&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),N=F&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${S}`]||n[`defaultValue${C}`]||n.defaultValue;!this.isValidLookup(f)&&k&&(x=!0,f=N),this.isValidLookup(f)||(E=!0,f=o);const j=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&E?void 0:f,B=k&&N!==f&&this.options.updateMissing;if(E||x||B){if(this.logger.log(B?"updateKey":"missingKey",l,c,o,B?N:f),s){const T=this.resolve(o,{...n,keySeparator:!1});T&&T.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let O=[];const R=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&R&&R[0])for(let T=0;T<R.length;T++)O.push(R[T]);else this.options.saveMissingTo==="all"?O=this.languageUtils.toResolveHierarchy(n.lng||this.language):O.push(n.lng||this.language);const D=(T,I,M)=>{const Y=k&&M!==f?M:j;this.options.missingKeyHandler?this.options.missingKeyHandler(T,c,I,Y,B,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(T,c,I,Y,B,n),this.emit("missingKey",T,c,I,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&A?O.forEach(T=>{const I=this.pluralResolver.getSuffixes(T,n);F&&n[`defaultValue${this.options.pluralSeparator}zero`]&&I.indexOf(`${this.options.pluralSeparator}zero`)<0&&I.push(`${this.options.pluralSeparator}zero`),I.forEach(M=>{D([T],o+M,n[`defaultValue${M}`]||N)})}):D(O,o,N))}f=this.extendTranslation(f,e,n,d,r),E&&f===o&&this.options.appendNamespaceToMissingKey&&(f=`${c}:${o}`),(E||x)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${o}`:o,x?f:void 0):f=this.options.parseMissingKeyHandler(f))}return i?(d.res=f,d.usedParams=this.getUsedParamsDetails(n),d):f}extendTranslation(e,n,r,i,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const l=Ct(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(l){const f=e.match(this.interpolator.nestingRegexp);u=f&&f.length}let d=r.replace&&!Ct(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language||i.usedLng,r),l){const f=e.match(this.interpolator.nestingRegexp),h=f&&f.length;u<h&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];return s&&s[0]===h[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${n[0]}`),null):o.translate(...h,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,c=Ct(a)?[a]:a;return e!=null&&c&&c.length&&r.applyPostProcessor!==!1&&(e=zN.handle(c,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,o,a;return Ct(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const l=this.extractFromKey(c,n),u=l.key;i=u;let d=l.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const f=n.count!==void 0&&!Ct(n.count),h=f&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),p=n.context!==void 0&&(Ct(n.context)||typeof n.context=="number")&&n.context!=="",g=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(w=>{this.isValidLookup(r)||(a=w,!Yk[`${g[0]}-${w}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(Yk[`${g[0]}-${w}`]=!0,this.logger.warn(`key "${i}" for languages "${g.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(y=>{if(this.isValidLookup(r))return;o=y;const b=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(b,u,y,w,n);else{let x;f&&(x=this.pluralResolver.getSuffix(y,n.count,n));const E=`${this.options.pluralSeparator}zero`,A=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(b.push(u+x),n.ordinal&&x.indexOf(A)===0&&b.push(u+x.replace(A,this.options.pluralSeparator)),h&&b.push(u+E)),p){const k=`${u}${this.options.contextSeparator}${n.context}`;b.push(k),f&&(b.push(k+x),n.ordinal&&x.indexOf(A)===0&&b.push(k+x.replace(A,this.options.pluralSeparator)),h&&b.push(k+E))}}let m;for(;m=b.pop();)this.isValidLookup(r)||(s=m,r=this.getResource(y,w,m,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Ct(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const Ab=t=>t.charAt(0).toUpperCase()+t.slice(1);class Jk{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Xo.create("languageUtils")}getScriptPartFromCode(e){if(e=Sm(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Sm(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(Ct(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(e)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Ab(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Ab(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Ab(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),Ct(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Ct(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):Ct(e)&&s(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}let EW=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],SW={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const _W=["v1","v2","v3"],kW=["v4"],Zk={zero:0,one:1,two:2,few:3,many:4,other:5},AW=()=>{const t={};return EW.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:SW[e.fc]}})}),t};class IW{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Xo.create("pluralResolver"),(!this.options.compatibilityJSON||kW.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=AW(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=Sm(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(r,{type:i})}catch{if(!e.match(/-|_/))return;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,n)}return this.pluralRulesCache[s]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,s)=>Zk[i]-Zk[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(e,i,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let i=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!_W.includes(this.options.compatibilityJSON)}}const Xk=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=pW(t,e,n);return!s&&i&&Ct(n)&&(s=u2(t,n,r),s===void 0&&(s=u2(e,n,r))),s},Ib=t=>t.replace(/\$/g,"$$$$");class CW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Xo.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:c,formatSeparator:l,unescapeSuffix:u,unescapePrefix:d,nestingPrefix:f,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:g,nestingOptionsSeparator:w,maxReplaces:y,alwaysFormat:b}=e.interpolation;this.escape=n!==void 0?n:mW,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?Tu(s):o||"{{",this.suffix=a?Tu(a):c||"}}",this.formatSeparator=l||",",this.unescapePrefix=u?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=f?Tu(f):h||Tu("$t("),this.nestingSuffix=p?Tu(p):g||Tu(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=y||1e3,this.alwaysFormat=b!==void 0?b:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let s,o,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=h=>{if(h.indexOf(this.formatSeparator)<0){const y=Xk(n,c,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,r,{...i,...n,interpolationkey:h}):y}const p=h.split(this.formatSeparator),g=p.shift().trim(),w=p.join(this.formatSeparator).trim();return this.format(Xk(n,c,g,this.options.keySeparator,this.options.ignoreJSONStructure),w,r,{...i,...n,interpolationkey:g})};this.resetRegExp();const u=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,d=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:h=>Ib(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?Ib(this.escape(h)):Ib(h)}].forEach(h=>{for(a=0;s=h.regex.exec(e);){const p=s[1].trim();if(o=l(p),o===void 0)if(typeof u=="function"){const w=u(e,s,i);o=Ct(w)?w:""}else if(i&&Object.prototype.hasOwnProperty.call(i,p))o="";else if(d){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${e}`),o="";else!Ct(o)&&!this.useRawValueToEscape&&(o=Hk(o));const g=h.safeValue(o);if(e=e.replace(s[0],g),d?(h.regex.lastIndex+=o.length,h.regex.lastIndex-=s[0].length):h.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,o;const a=(c,l)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const d=c.split(new RegExp(`${u}[ ]*{`));let f=`{${d[1]}`;c=d[0],f=this.interpolate(f,o);const h=f.match(/'/g),p=f.match(/"/g);(h&&h.length%2===0&&!p||p.length%2!==0)&&(f=f.replace(/'/g,'"'));try{o=JSON.parse(f),l&&(o={...l,...o})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,g),`${c}${u}${f}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;i=this.nestingRegexp.exec(e);){let c=[];o={...r},o=o.replace&&!Ct(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let l=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const u=i[1].split(this.formatSeparator).map(d=>d.trim());i[1]=u.shift(),c=u,l=!0}if(s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===e&&!Ct(s))return s;Ct(s)||(s=Hk(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),l&&(s=c.reduce((u,d)=>this.format(u,d,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const RW=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[a,...c]=o.split(":"),l=c.join(":").trim().replace(/^'+|'+$/g,""),u=a.trim();n[u]||(n[u]=l),l==="false"&&(n[u]=!1),l==="true"&&(n[u]=!0),isNaN(l)||(n[u]=parseInt(l,10))}})}return{formatName:e,formatOptions:n}},Ou=t=>{const e={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const o=r+JSON.stringify(s);let a=e[o];return a||(a=t(Sm(r),i),e[o]=a),a(n)}};class TW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Xo.create("formatter"),this.options=e,this.formats={number:Ou((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return s=>i.format(s)}),currency:Ou((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>i.format(s)}),datetime:Ou((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return s=>i.format(s)}),relativetime:Ou((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return s=>i.format(s,r.range||"day")}),list:Ou((n,r)=>{const i=new Intl.ListFormat(n,{...r});return s=>i.format(s)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Ou(n)}format(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){const a=s.findIndex(c=>c.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,c)=>{const{formatName:l,formatOptions:u}=RW(c);if(this.formats[l]){let d=a;try{const f=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},h=f.locale||f.lng||i.locale||i.lng||r;d=this.formats[l](a,h,{...u,...i,...f})}catch(f){this.logger.warn(f)}return d}else this.logger.warn(`there was no format function for ${l}`);return a},e)}}const OW=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class PW extends Uw{constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Xo.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(e,n,r,i){const s={},o={},a={},c={};return e.forEach(l=>{let u=!0;n.forEach(d=>{const f=`${l}|${d}`;!r.reload&&this.store.hasResourceBundle(l,d)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?o[f]===void 0&&(o[f]=!0):(this.state[f]=1,u=!1,o[f]===void 0&&(o[f]=!0),s[f]===void 0&&(s[f]=!0),c[d]===void 0&&(c[d]=!0)))}),u||(a[l]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,n,r){const i=e.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),!n&&r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(c=>{hW(c.loaded,[s],o),OW(c,e),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(l=>{a[l]||(a[l]={});const u=c.loaded[l];u.length&&u.forEach(d=>{a[l][d]===void 0&&(a[l][d]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(l,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(l&&u&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,o)},s);return}o(l,u)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const l=c(e,n);l&&typeof l.then=="function"?l.then(u=>a(null,u)).catch(a):a(null,l)}catch(l){a(l)}return}return c(e,n,a)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Ct(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ct(n)&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const c={...o,isUpdate:s},l=this.backend.create.bind(this.backend);if(l.length<6)try{let u;l.length===5?u=l(e,n,r,i,c):u=l(e,n,r,i),u&&typeof u.then=="function"?u.then(d=>a(null,d)).catch(a):a(null,u)}catch(u){a(u)}else l(e,n,r,i,a,c)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const Qk=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Ct(t[1])&&(e.defaultValue=t[1]),Ct(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),eA=t=>(Ct(t.ns)&&(t.ns=[t.ns]),Ct(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Ct(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),Ug=()=>{},NW=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class sp extends Uw{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=eA(e),this.services={},this.logger=Xo,this.modules={external:[]},NW(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(Ct(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=Qk();this.options={...i,...this.options,...eA(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Xo.init(s(this.modules.logger),this.options):Xo.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=TW);const d=new Jk(this.options);this.store=new Gk(this.options.resources,this.options);const f=this.services;f.logger=Xo,f.resourceStore=this.store,f.languageUtils=d,f.pluralResolver=new IW(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(f.formatter=s(u),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new CW(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new PW(s(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(h){for(var p=arguments.length,g=new Array(p>1?p-1:0),w=1;w<p;w++)g[w-1]=arguments[w];e.emit(h,...g)}),this.modules.languageDetector&&(f.languageDetector=s(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=s(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new km(this.services,this.options),this.translator.on("*",function(h){for(var p=arguments.length,g=new Array(p>1?p-1:0),w=1;w<p;w++)g[w-1]=arguments[w];e.emit(h,...g)}),this.modules.external.forEach(h=>{h.init&&h.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Ug),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const c=Mf(),l=()=>{const u=(d,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(f),r(d,f)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),c}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ug;const i=Ct(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(l=>{l!=="cimode"&&s.indexOf(l)<0&&s.push(l)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const i=Mf();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Ug),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&zN.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const i=Mf();this.emit("languageChanging",e);const s=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,l)=>{l?(s(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(c,function(){return r.t(...arguments)})},a=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const l=Ct(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);l&&(this.language||s(l),this.translator.language||this.translator.changeLanguage(l),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(l)),this.loadResources(l,u=>{o(u,l)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),i}getFixedT(e,n,r){var i=this;const s=function(o,a){let c;if(typeof a!="object"){for(var l=arguments.length,u=new Array(l>2?l-2:0),d=2;d<l;d++)u[d-2]=arguments[d];c=i.options.overloadTranslationOptionHandler([o,a].concat(u))}else c={...a};c.lng=c.lng||s.lng,c.lngs=c.lngs||s.lngs,c.ns=c.ns||s.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||s.keyPrefix);const f=i.options.keySeparator||".";let h;return c.keyPrefix&&Array.isArray(o)?h=o.map(p=>`${c.keyPrefix}${f}${p}`):h=c.keyPrefix?`${c.keyPrefix}${f}${o}`:o,i.t(h,c)};return Ct(e)?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,c)=>{const l=this.services.backendConnector.state[`${a}|${c}`];return l===-1||l===0||l===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(s,e)))}loadNamespaces(e,n){const r=Mf();return this.options.ns?(Ct(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Mf();Ct(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new Jk(Qk());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new sp(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ug;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new sp(i);return(e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new Gk(this.store.data,i),s.services.resourceStore=s.store),s.translator=new km(s.services,i),s.translator.on("*",function(a){for(var c=arguments.length,l=new Array(c>1?c-1:0),u=1;u<c;u++)l[u-1]=arguments[u];s.emit(a,...l)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ei=sp.createInstance();Ei.createInstance=sp.createInstance;Ei.createInstance;Ei.dir;Ei.init;Ei.loadResources;Ei.reloadResources;Ei.use;Ei.changeLanguage;Ei.getFixedT;Ei.t;Ei.exists;Ei.setDefaultNamespace;Ei.hasLoadedNamespace;Ei.loadNamespaces;Ei.loadLanguages;var KN={"adapter-loader.message":"Verify your {{adapter}} account to continue","adapter-loader.message1":"Verify your {{adapter}}","adapter-loader.message2":"account to continue","errors-invalid-email":"Invalid Email","errors-invalid-number":"Invalid Phone Number","errors-invalid-number-email":"Invalid Email or Phone Number","errors-required":"Required","external.back":"Back","external.connect":"Continue with a wallet","external.search-text":"Don't see your wallet?","external.search-subtext":"Try search instead","external.connect-wallet":"Connect Wallet","external.continue":"Continue with external wallet","external.dont-have":"Don't have","external.get":"Get","external.get-wallet":"Get Wallet","external.install-browser-extension":"Install {{browser}} extension","external.install-mobile-app":"Install {{os}} app","external.installed":"Installed","external.no-wallets-found":"No wallets found","external.search-wallet":"Search through {{count}} wallets...","external.title":"External Wallet","external.walletconnect-connect":"Connect","external.walletconnect-copy":"Scan with a WalletConnect-supported wallet or click the QR code to copy to your clipboard.","external.walletconnect-subtitle":"Scan the QR code with a WalletConnect-compatible wallet","footer.message":"Self-custodial login by","footer.message-new":"Self-custody via","footer.policy":"Privacy Policy","footer.terms":"Terms of Use","footer.terms-service":"Terms of Service","footer.version":"Version","header-subtitle":"Select one of the following options to continue","header-subtitle-name":"Your {{appName}} wallet with one click","header-subtitle-new":"Your blockchain wallet with one click","header-title":"Sign in","header-tooltip-desc":"The wallet serves as an account to store and manage your digital assets on the blockchain.","header-tooltip-title":"Wallet","network.add-request":"This site is requesting to add a network","network.cancel":"Cancel","network.from":"From","network.proceed":"Proceed","network.switch-request":"This site is requesting to switch networks","network.to":"To","passkey.add":"Add Passkey","passkey.haveExisting":"Have an existing passkey?","passkey.learn-more":"Learn more","passkey.or":"or","passkey.register-desc":"With passkeys, you can verify your identity through your face, fingerprint, or security keys.","passkey.register-title":"Register Passkey","passkey.use":"I have a passkey","popup.phone-body":"Your country code will be detected automatically, but if you're using a phone number from a different country, you'll need to enter the correct country code manually.","popup.phone-header":"Phone number and country code","post-loading.connected":"You are connected with your account","post-loading.something-wrong":"Something went wrong!","social.continue":"Continue with","social.continueCustom":"Continue with {{adapter}}","social.email":"Email","social.email-continue":"Continue with Email","social.email-new":"name@example.com","social.passwordless-cta":"Continue","social.passwordless-login":"Login","social.passwordless-title":"Email or Phone","social.phone":"Phone","social.policy":"We do not store any data related to your social logins.","social.sms":"Mobile","social.sms-continue":"Continue with Mobile","social.sms-invalid-number":"Invalid phone number","social.sms-placeholder-text":"E.g.:","social.view-less":"View less","social.view-less-socials":"View less socials","social.view-more":"View more","social.view-more-socials":"View more socials"},HN={modal:KN};const LW=Object.freeze(Object.defineProperty({__proto__:null,default:HN,modal:KN},Symbol.toStringTag,{value:"Module"})),rn=Ei.createInstance();rn.use(oW).init({resources:{en:{translation:HN}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1},debug:!1,react:{useSuspense:!0}});var DW="data:image/svg+xml,%3Csvg%20width%3D%2220%22%20height%3D%2220%22%20viewBox%3D%220%200%2020%2020%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M8.33333%2015.8333L2.5%209.99992M2.5%209.99992L8.33333%204.16659M2.5%209.99992L17.5%209.99992%22%20stroke%3D%22%239CA3AF%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3C%2Fsvg%3E",$W="data:image/svg+xml,%3Csvg%20width%3D%2220%22%20height%3D%2220%22%20viewBox%3D%220%200%2020%2020%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M8.33333%2015.8333L2.5%209.99995M2.5%209.99995L8.33333%204.16662M2.5%209.99995L17.5%209.99995%22%20stroke%3D%22%236B7280%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3C%2Fsvg%3E",BW="data:image/svg+xml,%3Csvg%20width%3D%2213%22%20height%3D%2213%22%20viewBox%3D%220%200%2013%2013%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M0.292787%201.29299C0.480314%201.10552%200.734622%201.0002%200.999786%201.0002C1.26495%201.0002%201.51926%201.10552%201.70679%201.29299L5.99979%205.58599L10.2928%201.29299C10.385%201.19748%2010.4954%201.1213%2010.6174%201.06889C10.7394%201.01648%2010.8706%200.988893%2011.0034%200.987739C11.1362%200.986585%2011.2678%201.01189%2011.3907%201.06217C11.5136%201.11245%2011.6253%201.1867%2011.7192%201.28059C11.8131%201.37449%2011.8873%201.48614%2011.9376%201.60904C11.9879%201.73193%2012.0132%201.86361%2012.012%201.99639C12.0109%202.12917%2011.9833%202.26039%2011.9309%202.38239C11.8785%202.5044%2011.8023%202.61474%2011.7068%202.70699L7.41379%206.99999L11.7068%2011.293C11.8889%2011.4816%2011.9897%2011.7342%2011.9875%2011.9964C11.9852%2012.2586%2011.88%2012.5094%2011.6946%2012.6948C11.5092%2012.8802%2011.2584%2012.9854%2010.9962%2012.9877C10.734%2012.9899%2010.4814%2012.8891%2010.2928%2012.707L5.99979%208.41399L1.70679%2012.707C1.51818%2012.8891%201.26558%2012.9899%201.00339%2012.9877C0.741188%2012.9854%200.490376%2012.8802%200.304968%2012.6948C0.11956%2012.5094%200.0143906%2012.2586%200.0121121%2011.9964C0.00983372%2011.7342%200.110629%2011.4816%200.292787%2011.293L4.58579%206.99999L0.292787%202.70699C0.105316%202.51946%200%202.26515%200%201.99999C0%201.73483%200.105316%201.48052%200.292787%201.29299V1.29299Z%22%20fill%3D%22%239CA3AF%22%2F%3E%3C%2Fsvg%3E",MW="data:image/svg+xml,%3Csvg%20width%3D%2213%22%20height%3D%2213%22%20viewBox%3D%220%200%2013%2013%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M0.292787%201.29299C0.480314%201.10552%200.734622%201.0002%200.999786%201.0002C1.26495%201.0002%201.51926%201.10552%201.70679%201.29299L5.99979%205.58599L10.2928%201.29299C10.385%201.19748%2010.4954%201.1213%2010.6174%201.06889C10.7394%201.01648%2010.8706%200.988893%2011.0034%200.987739C11.1362%200.986585%2011.2678%201.01189%2011.3907%201.06217C11.5136%201.11245%2011.6253%201.1867%2011.7192%201.28059C11.8131%201.37449%2011.8873%201.48614%2011.9376%201.60904C11.9879%201.73193%2012.0132%201.86361%2012.012%201.99639C12.0109%202.12917%2011.9833%202.26039%2011.9309%202.38239C11.8785%202.5044%2011.8023%202.61474%2011.7068%202.70699L7.41379%206.99999L11.7068%2011.293C11.8889%2011.4816%2011.9897%2011.7342%2011.9875%2011.9964C11.9852%2012.2586%2011.88%2012.5094%2011.6946%2012.6948C11.5092%2012.8802%2011.2584%2012.9854%2010.9962%2012.9877C10.734%2012.9899%2010.4814%2012.8891%2010.2928%2012.707L5.99979%208.41399L1.70679%2012.707C1.51818%2012.8891%201.26558%2012.9899%201.00339%2012.9877C0.741188%2012.9854%200.490376%2012.8802%200.304968%2012.6948C0.11956%2012.5094%200.0143906%2012.2586%200.0121121%2011.9964C0.00983372%2011.7342%200.110629%2011.4816%200.292787%2011.293L4.58579%206.99999L0.292787%202.70699C0.105316%202.51946%200%202.26515%200%201.99999C0%201.73483%200.105316%201.48052%200.292787%201.29299V1.29299Z%22%20fill%3D%22%236B7280%22%2F%3E%3C%2Fsvg%3E";const jg={"arrow-left":{image:"https://images.web3auth.io/circle-arrow-left.svg"},close:{image:"https://images.web3auth.io/close.svg"},"expand-light":{image:"https://images.web3auth.io/expand-light.svg"},expand:{image:"https://images.web3auth.io/expand.svg"},connected:{image:"https://images.web3auth.io/connected.svg"},"information-circle-light":{image:"https://images.web3auth.io/information-circle-light.svg"},"information-circle":{image:"https://images.web3auth.io/information-circle.svg"},"arrow-left-light":{image:$W},"x-light":{image:MW},"arrow-left-dark":{image:DW},"x-dark":{image:BW}};function il(t){const{iconName:e,iconTitle:n="",height:r="auto",width:i="auto",darkIconName:s=""}=t,o=r==="auto"?"w3a--h-auto":`w3a--h-[${r}px]`,a=i==="auto"?"w3a--w-auto":`w3a--w-[${i}px]`;return z.jsxs(z.Fragment,{children:[jg[e]&&z.jsx("img",{className:`${n?"w3a--cursor-pointer":""} dark:w3a--hidden w3a--block ${o} ${a}`,height:r,width:i,src:jg[e].image,alt:e,title:n}),jg[s]&&z.jsx("img",{className:`${n?"w3a--cursor-pointer":""} w3a--hidden dark:w3a--block ${o} ${a}`,height:r,width:i,src:jg[s].image,alt:s,title:n})]})}const jw=ne.createContext({isDark:!0});function Yc(t){const{hoverImageId:e,darkHoverImageId:n,imageId:r,darkImageId:i,isButton:s=!1,height:o="auto",width:a="auto",fallbackImageId:c,extension:l="svg"}=t,{isDark:u}=ne.useContext(jw),d=u&&i?i:r,f=u&&n?n:e;return z.jsxs(z.Fragment,{children:[z.jsx("img",{src:`https://images.web3auth.io/${d}.${l}`,height:o,width:a,alt:r,className:"image-icon w3a--object-contain w3a--rounded",onError:({currentTarget:h})=>{c&&(h.onerror=null,h.src=`https://images.web3auth.io/${c}.svg`)}}),s?z.jsx("img",{src:`https://images.web3auth.io/${f}.${l}`,height:o,width:a,alt:e,className:"hover-icon w3a--object-contain w3a--rounded"}):null]})}const UW=z.jsx(il,{iconName:"x-light",darkIconName:"close"});function jW(t){const{adapter:e,appLogo:n,message:r,modalStatus:i,adapterName:s,onClose:o}=t,a=e==="twitter"?z.jsx(Yc,{imageId:"login-x-dark"}):z.jsx(Yc,{imageId:`login-${e}`,height:"30",width:"30"}),[c]=Io(void 0,{i18n:rn});return ne.useEffect(()=>{We.debug("adapter loader re-rendering"),i===Zn.CONNECTED&&setTimeout(()=>{o()},3e3)},[i,o]),i!==Zn.INITIALIZED?z.jsxs("div",{className:"w3ajs-modal-loader w3a-modal__loader w3a--h-full",children:[z.jsx("div",{className:"w3a-modal__loader-content",children:z.jsxs("div",{className:"w3a-modal__loader-info",children:[i===Zn.CONNECTING&&z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:"w3a-modal__loader-bridge",children:[z.jsxs("div",{className:"w3a-modal__loader-app-logo",children:[z.jsx("img",{src:n,className:"w3a--block dark:w3a--hidden w3a--h-10 w3a--w-10",alt:""}),z.jsx("img",{src:n,className:"w3a--hidden dark:w3a--block w3a--h-10 w3a--w-10",alt:""})]}),z.jsx("div",{className:"w3a-modal__connector",children:z.jsxs("div",{className:"w3a-modal__connector-beat",children:[z.jsx("div",{}),z.jsx("div",{}),z.jsx("div",{}),z.jsx("div",{}),z.jsx("div",{})]})}),z.jsx("div",{className:"w3a-modal__loader-social-logo",children:a})]}),z.jsxs("div",{children:[z.jsx("div",{className:"w3a-modal__loader-bridge-message",children:c("modal.adapter-loader.message1",{adapter:s})}),z.jsx("div",{className:"w3a-modal__loader-bridge-message",children:c("modal.adapter-loader.message2",{adapter:s})})]})]}),i===Le.CONNECTED&&z.jsxs("div",{className:"w3a--flex w3a--flex-col w3a--items-center",children:[z.jsx(il,{iconName:"connected"}),z.jsx("div",{className:"w3ajs-modal-loader__message w3a-spinner-message w3a--mt-4",children:r})]}),i===Le.ERRORED&&z.jsx("div",{className:"w3ajs-modal-loader__message w3a-spinner-message w3a-spinner-message--error",children:r})]})}),(i===Le.CONNECTED||i===Le.ERRORED)&&z.jsx("button",{type:"button",className:"w3a-header__button w3ajs-loader-close-btn",onClick:o,children:UW})]}):null}var FW=".w3a-parent-container #w3a-modal button.t-btn,.w3a-parent-container a.t-btn{align-items:center;display:flex;justify-content:center;transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:linear}.w3a-parent-container #w3a-modal button.t-btn:not(.t-btn-text):disabled,.w3a-parent-container a.t-btn:not(.t-btn-text):disabled{background-color:var(--app-gray-300);border-width:0;color:var(--app-gray-400)}.w3a-parent-container #w3a-modal button.t-btn:not(.t-btn-text):hover:disabled,.w3a-parent-container a.t-btn:not(.t-btn-text):hover:disabled{background-color:var(--app-gray-300);border-color:var(--app-gray-300);color:var(--app-gray-400)}.w3a-parent-container #w3a-modal button.t-btn:not(.t-btn-text):active:disabled,.w3a-parent-container a.t-btn:not(.t-btn-text):active:disabled{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-offset-width:0px;background-color:var(--app-gray-300);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000);outline-width:0}.w3a-parent-container #w3a-modal button.t-btn:not(.t-btn-text):disabled:is(.w3a--dark *),.w3a-parent-container a.t-btn:not(.t-btn-text):disabled:is(.w3a--dark *){background-color:var(--app-gray-700);color:var(--app-gray-600)}.w3a-parent-container #w3a-modal .size-xs{font-size:.75rem;height:32px;line-height:1rem;padding:.5rem .75rem}.w3a-parent-container #w3a-modal .size-sm{font-size:.875rem;height:36px;line-height:1.25rem;padding:.5rem .75rem}.w3a-parent-container #w3a-modal .size-md{font-size:.875rem;height:42px;line-height:1.25rem;padding:.625rem 1.25rem}.w3a-parent-container #w3a-modal .size-lg{font-size:1rem;height:48px;line-height:1.5rem;padding:.75rem 1.25rem}.w3a-parent-container #w3a-modal .size-xl{font-size:1rem;height:52px;line-height:1.5rem;padding:.875rem 1rem}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary{background-color:var(--app-primary-600);color:var(--app-on-primary);outline:2px solid #0000;outline-offset:2px}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:hover{background-color:var(--app-primary-700)}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:focus-visible{outline-color:var(--app-primary-600);outline-offset:1px;outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:active{background-color:var(--app-primary-600);outline-color:var(--app-primary-600);outline-offset:1px;outline-style:solid;outline-width:1px}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:is(.w3a--dark *){background-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:hover:is(.w3a--dark *){background-color:var(--app-primary-400)}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:focus-visible:is(.w3a--dark *){outline-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-primary:active:is(.w3a--dark *){background-color:var(--app-primary-500);outline-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary{background-color:initial;border-color:var(--app-gray-500);border-width:1px;color:var(--app-gray-600);outline:2px solid #0000;outline-offset:2px}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:hover{background-color:var(--app-gray-200)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);background-color:initial;border-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:active{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);background-color:initial;border-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:is(.w3a--dark *){border-color:var(--app-gray-300);color:var(--app-white)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:hover:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:focus-visible:is(.w3a--dark *){--tw-ring-color:var(--app-primary-500);background-color:initial;border-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-secondary:active:is(.w3a--dark *){--tw-ring-color:var(--app-primary-500);background-color:initial;border-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary{background-color:var(--app-gray-200);color:var(--app-gray-800)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:hover{background-color:var(--app-gray-300)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:active{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);background-color:var(--app-gray-200);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:is(.w3a--dark *){background-color:var(--app-gray-500);color:var(--app-white)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:hover:is(.w3a--dark *){background-color:var(--app-gray-400)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:focus-visible:is(.w3a--dark *){--tw-ring-color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-tertiary:active:is(.w3a--dark *){--tw-ring-color:var(--app-primary-500);background-color:var(--app-gray-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text{color:var(--app-primary-600)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:hover{color:var(--app-primary-800);text-decoration-line:underline}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:active{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);--tw-ring-color:var(--app-primary-600);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000);color:var(--app-primary-600)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:disabled{color:var(--app-gray-400);text-decoration-line:none}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:is(.w3a--dark *){color:var(--app-primary-500)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:hover:is(.w3a--dark *){color:var(--app-primary-400)}.w3a-parent-container #w3a-modal .t-btn.t-btn-text:disabled:is(.w3a--dark *){color:var(--app-gray-600)}.w3a-parent-container #w3a-modal .btn-link{text-decoration-line:none}.w3a-parent-container #w3a-modal button.t-btn:hover>.hover-icon{display:block;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}.w3a-parent-container #w3a-modal button.t-btn:hover>.image-icon{display:none;transition:display .15s;transition-timing-function:cubic-bezier(0,.54,.63,.99)}";BN(FW);function zW(t){const{variant:e="primary",onClick:n,children:r,title:i,className:s,style:o,size:a="md",disabled:c,type:l="button"}=t,u=`size-${a}`;return z.jsx("button",{disabled:c,type:l,className:`t-btn t-btn-${e} w3a--rounded-full ${u} ${s}`,onClick:n,title:i,style:o,children:r})}var sl=ne.memo(zW);function Cb(t){const{button:e,handleWalletClick:n}=t,[r]=Io(void 0,{i18n:rn});return z.jsxs(sl,{variant:"tertiary",type:"button",onClick:()=>n(e),className:"w3a--w-full w3a--rounded-xl w3a--size-xl !w3a--justify-between w3a--items-center wallet-btn",title:e.name,children:[z.jsxs("div",{className:"w3a--flex w3a--items-center",children:[z.jsx(Yc,{imageId:`login-${e.name}`,hoverImageId:`login-${e.name}`,fallbackImageId:"wallet",height:"24",width:"24",isButton:!0,extension:e.imgExtension}),z.jsx("p",{className:"w3a--ml-2 w3a--text-left w3a--text-sm",children:e.displayName})]}),e.hasInjectedWallet&&z.jsx("span",{className:"w3a--inline-flex w3a--items-center w3a--rounded-lg w3a--px-2 w3a--py-1 w3a--text-xs w3a--font-medium w3a--bg-app-primary-100 w3a--text-app-primary-800",children:r("modal.external.installed")})]})}const KW=z.jsx(il,{iconName:"close"});function WN(t){const{message:e,modalStatus:n,label:r,onClose:i,canEmit:s=!0}=t;return ne.useEffect(()=>{We.debug("loader re-rendering"),n===Zn.CONNECTED&&s&&setTimeout(()=>{i()},3e3)},[s,n,i]),n!==Zn.INITIALIZED?z.jsxs("div",{className:"w3ajs-modal-loader w3a-modal__loader",children:[z.jsx("div",{className:"w3a-modal__loader-content",children:z.jsxs("div",{className:"w3a-modal__loader-info",children:[n===Zn.CONNECTING&&z.jsx("div",{className:"w3ajs-modal-loader__spinner w3a-spinner",children:z.jsx("div",{className:"w3a-spinner__spinner"})}),z.jsx("div",{className:"w3ajs-modal-loader__label w3a-spinner-label",children:r}),n===Le.CONNECTED&&z.jsx("div",{className:"w3ajs-modal-loader__message w3a-spinner-message",children:e}),n===Le.ERRORED&&z.jsx("div",{className:"w3ajs-modal-loader__message w3a-spinner-message w3a-spinner-message--error",children:e})]})}),(n===Le.CONNECTED||n===Le.ERRORED)&&z.jsx("button",{type:"button",className:"w3a-header__button w3ajs-loader-close-btn",onClick:i,children:KW})]}):null}var HW=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],r=0;r<t.rangeCount;r++)n.push(t.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||n.forEach(function(i){t.addRange(i)}),e&&e.focus()}},WW=HW,tA={"text/plain":"Text","text/html":"Url",default:"Text"},qW="Copy to clipboard: #{key}, Enter";function VW(t){var e=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}function GW(t,e){var n,r,i,s,o,a,c=!1;e||(e={}),n=e.debug||!1;try{i=WW(),s=document.createRange(),o=document.getSelection(),a=document.createElement("span"),a.textContent=t,a.ariaHidden="true",a.style.all="unset",a.style.position="fixed",a.style.top=0,a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",a.style.webkitUserSelect="text",a.style.MozUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text",a.addEventListener("copy",function(u){if(u.stopPropagation(),e.format)if(u.preventDefault(),typeof u.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var d=tA[e.format]||tA.default;window.clipboardData.setData(d,t)}else u.clipboardData.clearData(),u.clipboardData.setData(e.format,t);e.onCopy&&(u.preventDefault(),e.onCopy(u.clipboardData))}),document.body.appendChild(a),s.selectNodeContents(a),o.addRange(s);var l=document.execCommand("copy");if(!l)throw new Error("copy command was unsuccessful");c=!0}catch(u){n&&console.error("unable to copy using execCommand: ",u),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),c=!0}catch(d){n&&console.error("unable to copy using clipboardData: ",d),n&&console.error("falling back to prompt"),r=VW("message"in e?e.message:qW),window.prompt(r,t)}}finally{o&&(typeof o.removeRange=="function"?o.removeRange(s):o.removeAllRanges()),a&&document.body.removeChild(a),i()}return c}var YW=GW;const nA=vi(YW);var HE={},Am={exports:{}};Am.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",w="[object Number]",y="[object Null]",b="[object Object]",m="[object Promise]",x="[object Proxy]",E="[object RegExp]",A="[object Set]",k="[object String]",S="[object Symbol]",C="[object Undefined]",F="[object WeakMap]",N="[object ArrayBuffer]",L="[object DataView]",j="[object Float32Array]",B="[object Float64Array]",O="[object Int8Array]",R="[object Int16Array]",D="[object Int32Array]",T="[object Uint8Array]",I="[object Uint8ClampedArray]",M="[object Uint16Array]",Y="[object Uint32Array]",X=/[\\^$.*+?()[\]{}|]/g,Z=/^\[object .+?Constructor\]$/,le=/^(?:0|[1-9]\d*)$/,ae={};ae[j]=ae[B]=ae[O]=ae[R]=ae[D]=ae[T]=ae[I]=ae[M]=ae[Y]=!0,ae[a]=ae[c]=ae[N]=ae[u]=ae[L]=ae[d]=ae[f]=ae[h]=ae[g]=ae[w]=ae[b]=ae[E]=ae[A]=ae[k]=ae[F]=!1;var ye=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Ee=typeof self=="object"&&self&&self.Object===Object&&self,ee=ye||Ee||Function("return this")(),te=e&&!e.nodeType&&e,J=te&&!0&&t&&!t.nodeType&&t,Q=J&&J.exports===te,oe=Q&&ye.process,W=function(){try{return oe&&oe.binding&&oe.binding("util")}catch{}}(),V=W&&W.isTypedArray;function se(H,re){for(var _e=-1,tt=H==null?0:H.length,Rn=0,Dt=[];++_e<tt;){var Vn=H[_e];re(Vn,_e,H)&&(Dt[Rn++]=Vn)}return Dt}function Re(H,re){for(var _e=-1,tt=re.length,Rn=H.length;++_e<tt;)H[Rn+_e]=re[_e];return H}function Pe(H,re){for(var _e=-1,tt=H==null?0:H.length;++_e<tt;)if(re(H[_e],_e,H))return!0;return!1}function ze(H,re){for(var _e=-1,tt=Array(H);++_e<H;)tt[_e]=re(_e);return tt}function ht(H){return function(re){return H(re)}}function pt(H,re){return H.has(re)}function Qn(H,re){return H==null?void 0:H[re]}function ct(H){var re=-1,_e=Array(H.size);return H.forEach(function(tt,Rn){_e[++re]=[Rn,tt]}),_e}function or(H,re){return function(_e){return H(re(_e))}}function $r(H){var re=-1,_e=Array(H.size);return H.forEach(function(tt){_e[++re]=tt}),_e}var Si=Array.prototype,Qs=Function.prototype,os=Object.prototype,eo=ee["__core-js_shared__"],Cs=Qs.toString,Br=os.hasOwnProperty,to=function(){var H=/[^.]+$/.exec(eo&&eo.keys&&eo.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}(),nc=os.toString,rc=RegExp("^"+Cs.call(Br).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),no=Q?ee.Buffer:void 0,as=ee.Symbol,Ro=ee.Uint8Array,pa=os.propertyIsEnumerable,To=Si.splice,ii=as?as.toStringTag:void 0,ic=Object.getOwnPropertySymbols,gl=no?no.isBuffer:void 0,ml=or(Object.keys,Object),wl=dn(ee,"DataView"),Mr=dn(ee,"Map"),_i=dn(ee,"Promise"),cs=dn(ee,"Set"),K=dn(ee,"WeakMap"),q=dn(Object,"create"),De=yl(wl),$e=yl(Mr),qe=yl(_i),er=yl(cs),_=yl(K),$=as?as.prototype:void 0,P=$?$.valueOf:void 0;function v(H){var re=-1,_e=H==null?0:H.length;for(this.clear();++re<_e;){var tt=H[re];this.set(tt[0],tt[1])}}function U(){this.__data__=q?q(null):{},this.size=0}function ie(H){var re=this.has(H)&&delete this.__data__[H];return this.size-=re?1:0,re}function ce(H){var re=this.__data__;if(q){var _e=re[H];return _e===r?void 0:_e}return Br.call(re,H)?re[H]:void 0}function we(H){var re=this.__data__;return q?re[H]!==void 0:Br.call(re,H)}function Te(H,re){var _e=this.__data__;return this.size+=this.has(H)?0:1,_e[H]=q&&re===void 0?r:re,this}v.prototype.clear=U,v.prototype.delete=ie,v.prototype.get=ce,v.prototype.has=we,v.prototype.set=Te;function Ve(H){var re=-1,_e=H==null?0:H.length;for(this.clear();++re<_e;){var tt=H[re];this.set(tt[0],tt[1])}}function Fe(){this.__data__=[],this.size=0}function Ot(H){var re=this.__data__,_e=Ie(re,H);if(_e<0)return!1;var tt=re.length-1;return _e==tt?re.pop():To.call(re,_e,1),--this.size,!0}function Ke(H){var re=this.__data__,_e=Ie(re,H);return _e<0?void 0:re[_e][1]}function yt(H){return Ie(this.__data__,H)>-1}function bt(H,re){var _e=this.__data__,tt=Ie(_e,H);return tt<0?(++this.size,_e.push([H,re])):_e[tt][1]=re,this}Ve.prototype.clear=Fe,Ve.prototype.delete=Ot,Ve.prototype.get=Ke,Ve.prototype.has=yt,Ve.prototype.set=bt;function mt(H){var re=-1,_e=H==null?0:H.length;for(this.clear();++re<_e;){var tt=H[re];this.set(tt[0],tt[1])}}function kt(){this.size=0,this.__data__={hash:new v,map:new(Mr||Ve),string:new v}}function vt(H){var re=Zt(this,H).delete(H);return this.size-=re?1:0,re}function St(H){return Zt(this,H).get(H)}function xt(H){return Zt(this,H).has(H)}function Qe(H,re){var _e=Zt(this,H),tt=_e.size;return _e.set(H,re),this.size+=_e.size==tt?0:1,this}mt.prototype.clear=kt,mt.prototype.delete=vt,mt.prototype.get=St,mt.prototype.has=xt,mt.prototype.set=Qe;function st(H){var re=-1,_e=H==null?0:H.length;for(this.__data__=new mt;++re<_e;)this.add(H[re])}function Ze(H){return this.__data__.set(H,r),this}function et(H){return this.__data__.has(H)}st.prototype.add=st.prototype.push=Ze,st.prototype.has=et;function Xe(H){var re=this.__data__=new Ve(H);this.size=re.size}function Ge(){this.__data__=new Ve,this.size=0}function he(H){var re=this.__data__,_e=re.delete(H);return this.size=re.size,_e}function pe(H){return this.__data__.get(H)}function ke(H){return this.__data__.has(H)}function be(H,re){var _e=this.__data__;if(_e instanceof Ve){var tt=_e.__data__;if(!Mr||tt.length<n-1)return tt.push([H,re]),this.size=++_e.size,this;_e=this.__data__=new mt(tt)}return _e.set(H,re),this.size=_e.size,this}Xe.prototype.clear=Ge,Xe.prototype.delete=he,Xe.prototype.get=pe,Xe.prototype.has=ke,Xe.prototype.set=be;function ve(H,re){var _e=ig(H),tt=!_e&&SD(H),Rn=!_e&&!tt&&Iy(H),Dt=!_e&&!tt&&!Rn&&s3(H),Vn=_e||tt||Rn||Dt,Er=Vn?ze(H.length,String):[],Ur=Er.length;for(var Un in H)Br.call(H,Un)&&!(Vn&&(Un=="length"||Rn&&(Un=="offset"||Un=="parent")||Dt&&(Un=="buffer"||Un=="byteLength"||Un=="byteOffset")||br(Un,Ur)))&&Er.push(Un);return Er}function Ie(H,re){for(var _e=H.length;_e--;)if(t3(H[_e][0],re))return _e;return-1}function lt(H,re,_e){var tt=re(H);return ig(H)?tt:Re(tt,_e(H))}function Et(H){return H==null?H===void 0?C:y:ii&&ii in Object(H)?Dn(H):ED(H)}function Rt(H){return Ef(H)&&Et(H)==a}function At(H,re,_e,tt,Rn){return H===re?!0:H==null||re==null||!Ef(H)&&!Ef(re)?H!==H&&re!==re:G(H,re,_e,tt,At,Rn)}function G(H,re,_e,tt,Rn,Dt){var Vn=ig(H),Er=ig(re),Ur=Vn?c:gn(H),Un=Er?c:gn(re);Ur=Ur==a?b:Ur,Un=Un==a?b:Un;var ls=Ur==b,ro=Un==b,si=Ur==Un;if(si&&Iy(H)){if(!Iy(re))return!1;Vn=!0,ls=!1}if(si&&!ls)return Dt||(Dt=new Xe),Vn||s3(H)?Pt(H,re,_e,tt,Rn,Dt):Kt(H,re,Ur,_e,tt,Rn,Dt);if(!(_e&i)){var Rs=ls&&Br.call(H,"__wrapped__"),Ts=ro&&Br.call(re,"__wrapped__");if(Rs||Ts){var sc=Rs?H.value():H,ga=Ts?re.value():re;return Dt||(Dt=new Xe),Rn(sc,ga,_e,tt,Dt)}}return si?(Dt||(Dt=new Xe),Ht(H,re,_e,tt,Rn,Dt)):!1}function Lt(H){if(!i3(H)||xr(H))return!1;var re=n3(H)?rc:Z;return re.test(yl(H))}function qt(H){return Ef(H)&&r3(H.length)&&!!ae[Et(H)]}function Vt(H){if(!xD(H))return ml(H);var re=[];for(var _e in Object(H))Br.call(H,_e)&&_e!="constructor"&&re.push(_e);return re}function Pt(H,re,_e,tt,Rn,Dt){var Vn=_e&i,Er=H.length,Ur=re.length;if(Er!=Ur&&!(Vn&&Ur>Er))return!1;var Un=Dt.get(H);if(Un&&Dt.get(re))return Un==re;var ls=-1,ro=!0,si=_e&s?new st:void 0;for(Dt.set(H,re),Dt.set(re,H);++ls<Er;){var Rs=H[ls],Ts=re[ls];if(tt)var sc=Vn?tt(Ts,Rs,ls,re,H,Dt):tt(Rs,Ts,ls,H,re,Dt);if(sc!==void 0){if(sc)continue;ro=!1;break}if(si){if(!Pe(re,function(ga,bl){if(!pt(si,bl)&&(Rs===ga||Rn(Rs,ga,_e,tt,Dt)))return si.push(bl)})){ro=!1;break}}else if(!(Rs===Ts||Rn(Rs,Ts,_e,tt,Dt))){ro=!1;break}}return Dt.delete(H),Dt.delete(re),ro}function Kt(H,re,_e,tt,Rn,Dt,Vn){switch(_e){case L:if(H.byteLength!=re.byteLength||H.byteOffset!=re.byteOffset)return!1;H=H.buffer,re=re.buffer;case N:return!(H.byteLength!=re.byteLength||!Dt(new Ro(H),new Ro(re)));case u:case d:case w:return t3(+H,+re);case f:return H.name==re.name&&H.message==re.message;case E:case k:return H==re+"";case g:var Er=ct;case A:var Ur=tt&i;if(Er||(Er=$r),H.size!=re.size&&!Ur)return!1;var Un=Vn.get(H);if(Un)return Un==re;tt|=s,Vn.set(H,re);var ls=Pt(Er(H),Er(re),tt,Rn,Dt,Vn);return Vn.delete(H),ls;case S:if(P)return P.call(H)==P.call(re)}return!1}function Ht(H,re,_e,tt,Rn,Dt){var Vn=_e&i,Er=Ln(H),Ur=Er.length,Un=Ln(re),ls=Un.length;if(Ur!=ls&&!Vn)return!1;for(var ro=Ur;ro--;){var si=Er[ro];if(!(Vn?si in re:Br.call(re,si)))return!1}var Rs=Dt.get(H);if(Rs&&Dt.get(re))return Rs==re;var Ts=!0;Dt.set(H,re),Dt.set(re,H);for(var sc=Vn;++ro<Ur;){si=Er[ro];var ga=H[si],bl=re[si];if(tt)var o3=Vn?tt(bl,ga,si,re,H,Dt):tt(ga,bl,si,H,re,Dt);if(!(o3===void 0?ga===bl||Rn(ga,bl,_e,tt,Dt):o3)){Ts=!1;break}sc||(sc=si=="constructor")}if(Ts&&!sc){var sg=H.constructor,og=re.constructor;sg!=og&&"constructor"in H&&"constructor"in re&&!(typeof sg=="function"&&sg instanceof sg&&typeof og=="function"&&og instanceof og)&&(Ts=!1)}return Dt.delete(H),Dt.delete(re),Ts}function Ln(H){return lt(H,AD,$n)}function Zt(H,re){var _e=H.__data__;return vr(re)?_e[typeof re=="string"?"string":"hash"]:_e.map}function dn(H,re){var _e=Qn(H,re);return Lt(_e)?_e:void 0}function Dn(H){var re=Br.call(H,ii),_e=H[ii];try{H[ii]=void 0;var tt=!0}catch{}var Rn=nc.call(H);return tt&&(re?H[ii]=_e:delete H[ii]),Rn}var $n=ic?function(H){return H==null?[]:(H=Object(H),se(ic(H),function(re){return pa.call(H,re)}))}:ID,gn=Et;(wl&&gn(new wl(new ArrayBuffer(1)))!=L||Mr&&gn(new Mr)!=g||_i&&gn(_i.resolve())!=m||cs&&gn(new cs)!=A||K&&gn(new K)!=F)&&(gn=function(H){var re=Et(H),_e=re==b?H.constructor:void 0,tt=_e?yl(_e):"";if(tt)switch(tt){case De:return L;case $e:return g;case qe:return m;case er:return A;case _:return F}return re});function br(H,re){return re=re??o,!!re&&(typeof H=="number"||le.test(H))&&H>-1&&H%1==0&&H<re}function vr(H){var re=typeof H;return re=="string"||re=="number"||re=="symbol"||re=="boolean"?H!=="__proto__":H===null}function xr(H){return!!to&&to in H}function xD(H){var re=H&&H.constructor,_e=typeof re=="function"&&re.prototype||os;return H===_e}function ED(H){return nc.call(H)}function yl(H){if(H!=null){try{return Cs.call(H)}catch{}try{return H+""}catch{}}return""}function t3(H,re){return H===re||H!==H&&re!==re}var SD=Rt(function(){return arguments}())?Rt:function(H){return Ef(H)&&Br.call(H,"callee")&&!pa.call(H,"callee")},ig=Array.isArray;function _D(H){return H!=null&&r3(H.length)&&!n3(H)}var Iy=gl||CD;function kD(H,re){return At(H,re)}function n3(H){if(!i3(H))return!1;var re=Et(H);return re==h||re==p||re==l||re==x}function r3(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=o}function i3(H){var re=typeof H;return H!=null&&(re=="object"||re=="function")}function Ef(H){return H!=null&&typeof H=="object"}var s3=V?ht(V):qt;function AD(H){return _D(H)?ve(H):Vt(H)}function ID(){return[]}function CD(){return!1}t.exports=kD})(Am,Am.exports);var JW=Am.exports,qN={exports:{}};(function(t,e){var n=function(){var r=function(E,A){var k=236,S=17,C=E,F=s[A],N=null,L=0,j=null,B=[],O={},R=function(ee,te){L=C*4+17,N=function(J){for(var Q=new Array(J),oe=0;oe<J;oe+=1){Q[oe]=new Array(J);for(var W=0;W<J;W+=1)Q[oe][W]=null}return Q}(L),D(0,0),D(L-7,0),D(0,L-7),M(),I(),X(ee,te),C>=7&&Y(ee),j==null&&(j=ae(C,F,B)),Z(j,te)},D=function(ee,te){for(var J=-1;J<=7;J+=1)if(!(ee+J<=-1||L<=ee+J))for(var Q=-1;Q<=7;Q+=1)te+Q<=-1||L<=te+Q||(0<=J&&J<=6&&(Q==0||Q==6)||0<=Q&&Q<=6&&(J==0||J==6)||2<=J&&J<=4&&2<=Q&&Q<=4?N[ee+J][te+Q]=!0:N[ee+J][te+Q]=!1)},T=function(){for(var ee=0,te=0,J=0;J<8;J+=1){R(!0,J);var Q=a.getLostPoint(O);(J==0||ee>Q)&&(ee=Q,te=J)}return te},I=function(){for(var ee=8;ee<L-8;ee+=1)N[ee][6]==null&&(N[ee][6]=ee%2==0);for(var te=8;te<L-8;te+=1)N[6][te]==null&&(N[6][te]=te%2==0)},M=function(){for(var ee=a.getPatternPosition(C),te=0;te<ee.length;te+=1)for(var J=0;J<ee.length;J+=1){var Q=ee[te],oe=ee[J];if(N[Q][oe]==null)for(var W=-2;W<=2;W+=1)for(var V=-2;V<=2;V+=1)W==-2||W==2||V==-2||V==2||W==0&&V==0?N[Q+W][oe+V]=!0:N[Q+W][oe+V]=!1}},Y=function(ee){for(var te=a.getBCHTypeNumber(C),J=0;J<18;J+=1){var Q=!ee&&(te>>J&1)==1;N[Math.floor(J/3)][J%3+L-8-3]=Q}for(var J=0;J<18;J+=1){var Q=!ee&&(te>>J&1)==1;N[J%3+L-8-3][Math.floor(J/3)]=Q}},X=function(ee,te){for(var J=F<<3|te,Q=a.getBCHTypeInfo(J),oe=0;oe<15;oe+=1){var W=!ee&&(Q>>oe&1)==1;oe<6?N[oe][8]=W:oe<8?N[oe+1][8]=W:N[L-15+oe][8]=W}for(var oe=0;oe<15;oe+=1){var W=!ee&&(Q>>oe&1)==1;oe<8?N[8][L-oe-1]=W:oe<9?N[8][15-oe-1+1]=W:N[8][15-oe-1]=W}N[L-8][8]=!ee},Z=function(ee,te){for(var J=-1,Q=L-1,oe=7,W=0,V=a.getMaskFunction(te),se=L-1;se>0;se-=2)for(se==6&&(se-=1);;){for(var Re=0;Re<2;Re+=1)if(N[Q][se-Re]==null){var Pe=!1;W<ee.length&&(Pe=(ee[W]>>>oe&1)==1);var ze=V(Q,se-Re);ze&&(Pe=!Pe),N[Q][se-Re]=Pe,oe-=1,oe==-1&&(W+=1,oe=7)}if(Q+=J,Q<0||L<=Q){Q-=J,J=-J;break}}},le=function(ee,te){for(var J=0,Q=0,oe=0,W=new Array(te.length),V=new Array(te.length),se=0;se<te.length;se+=1){var Re=te[se].dataCount,Pe=te[se].totalCount-Re;Q=Math.max(Q,Re),oe=Math.max(oe,Pe),W[se]=new Array(Re);for(var ze=0;ze<W[se].length;ze+=1)W[se][ze]=255&ee.getBuffer()[ze+J];J+=Re;var ht=a.getErrorCorrectPolynomial(Pe),pt=l(W[se],ht.getLength()-1),Qn=pt.mod(ht);V[se]=new Array(ht.getLength()-1);for(var ze=0;ze<V[se].length;ze+=1){var ct=ze+Qn.getLength()-V[se].length;V[se][ze]=ct>=0?Qn.getAt(ct):0}}for(var or=0,ze=0;ze<te.length;ze+=1)or+=te[ze].totalCount;for(var $r=new Array(or),Si=0,ze=0;ze<Q;ze+=1)for(var se=0;se<te.length;se+=1)ze<W[se].length&&($r[Si]=W[se][ze],Si+=1);for(var ze=0;ze<oe;ze+=1)for(var se=0;se<te.length;se+=1)ze<V[se].length&&($r[Si]=V[se][ze],Si+=1);return $r},ae=function(ee,te,J){for(var Q=u.getRSBlocks(ee,te),oe=d(),W=0;W<J.length;W+=1){var V=J[W];oe.put(V.getMode(),4),oe.put(V.getLength(),a.getLengthInBits(V.getMode(),ee)),V.write(oe)}for(var se=0,W=0;W<Q.length;W+=1)se+=Q[W].dataCount;if(oe.getLengthInBits()>se*8)throw"code length overflow. ("+oe.getLengthInBits()+">"+se*8+")";for(oe.getLengthInBits()+4<=se*8&&oe.put(0,4);oe.getLengthInBits()%8!=0;)oe.putBit(!1);for(;!(oe.getLengthInBits()>=se*8||(oe.put(k,8),oe.getLengthInBits()>=se*8));)oe.put(S,8);return le(oe,Q)};O.addData=function(ee,te){te=te||"Byte";var J=null;switch(te){case"Numeric":J=f(ee);break;case"Alphanumeric":J=h(ee);break;case"Byte":J=p(ee);break;case"Kanji":J=g(ee);break;default:throw"mode:"+te}B.push(J),j=null},O.isDark=function(ee,te){if(ee<0||L<=ee||te<0||L<=te)throw ee+","+te;return N[ee][te]},O.getModuleCount=function(){return L},O.make=function(){if(C<1){for(var ee=1;ee<40;ee++){for(var te=u.getRSBlocks(ee,F),J=d(),Q=0;Q<B.length;Q++){var oe=B[Q];J.put(oe.getMode(),4),J.put(oe.getLength(),a.getLengthInBits(oe.getMode(),ee)),oe.write(J)}for(var W=0,Q=0;Q<te.length;Q++)W+=te[Q].dataCount;if(J.getLengthInBits()<=W*8)break}C=ee}R(!1,T())},O.createTableTag=function(ee,te){ee=ee||2,te=typeof te>"u"?ee*4:te;var J="";J+='<table style="',J+=" border-width: 0px; border-style: none;",J+=" border-collapse: collapse;",J+=" padding: 0px; margin: "+te+"px;",J+='">',J+="<tbody>";for(var Q=0;Q<O.getModuleCount();Q+=1){J+="<tr>";for(var oe=0;oe<O.getModuleCount();oe+=1)J+='<td style="',J+=" border-width: 0px; border-style: none;",J+=" border-collapse: collapse;",J+=" padding: 0px; margin: 0px;",J+=" width: "+ee+"px;",J+=" height: "+ee+"px;",J+=" background-color: ",J+=O.isDark(Q,oe)?"#000000":"#ffffff",J+=";",J+='"/>';J+="</tr>"}return J+="</tbody>",J+="</table>",J},O.createSvgTag=function(ee,te,J,Q){var oe={};typeof arguments[0]=="object"&&(oe=arguments[0],ee=oe.cellSize,te=oe.margin,J=oe.alt,Q=oe.title),ee=ee||2,te=typeof te>"u"?ee*4:te,J=typeof J=="string"?{text:J}:J||{},J.text=J.text||null,J.id=J.text?J.id||"qrcode-description":null,Q=typeof Q=="string"?{text:Q}:Q||{},Q.text=Q.text||null,Q.id=Q.text?Q.id||"qrcode-title":null;var W=O.getModuleCount()*ee+te*2,V,se,Re,Pe,ze="",ht;for(ht="l"+ee+",0 0,"+ee+" -"+ee+",0 0,-"+ee+"z ",ze+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',ze+=oe.scalable?"":' width="'+W+'px" height="'+W+'px"',ze+=' viewBox="0 0 '+W+" "+W+'" ',ze+=' preserveAspectRatio="xMinYMin meet"',ze+=Q.text||J.text?' role="img" aria-labelledby="'+ye([Q.id,J.id].join(" ").trim())+'"':"",ze+=">",ze+=Q.text?'<title id="'+ye(Q.id)+'">'+ye(Q.text)+"</title>":"",ze+=J.text?'<description id="'+ye(J.id)+'">'+ye(J.text)+"</description>":"",ze+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',ze+='<path d="',Re=0;Re<O.getModuleCount();Re+=1)for(Pe=Re*ee+te,V=0;V<O.getModuleCount();V+=1)O.isDark(Re,V)&&(se=V*ee+te,ze+="M"+se+","+Pe+ht);return ze+='" stroke="transparent" fill="black"/>',ze+="</svg>",ze},O.createDataURL=function(ee,te){ee=ee||2,te=typeof te>"u"?ee*4:te;var J=O.getModuleCount()*ee+te*2,Q=te,oe=J-te;return x(J,J,function(W,V){if(Q<=W&&W<oe&&Q<=V&&V<oe){var se=Math.floor((W-Q)/ee),Re=Math.floor((V-Q)/ee);return O.isDark(Re,se)?0:1}else return 1})},O.createImgTag=function(ee,te,J){ee=ee||2,te=typeof te>"u"?ee*4:te;var Q=O.getModuleCount()*ee+te*2,oe="";return oe+="<img",oe+=' src="',oe+=O.createDataURL(ee,te),oe+='"',oe+=' width="',oe+=Q,oe+='"',oe+=' height="',oe+=Q,oe+='"',J&&(oe+=' alt="',oe+=ye(J),oe+='"'),oe+="/>",oe};var ye=function(ee){for(var te="",J=0;J<ee.length;J+=1){var Q=ee.charAt(J);switch(Q){case"<":te+="&lt;";break;case">":te+="&gt;";break;case"&":te+="&amp;";break;case'"':te+="&quot;";break;default:te+=Q;break}}return te},Ee=function(ee){var te=1;ee=typeof ee>"u"?te*2:ee;var J=O.getModuleCount()*te+ee*2,Q=ee,oe=J-ee,W,V,se,Re,Pe,ze={"":""," ":""," ":"","  ":" "},ht={"":""," ":""," ":" ","  ":" "},pt="";for(W=0;W<J;W+=2){for(se=Math.floor((W-Q)/te),Re=Math.floor((W+1-Q)/te),V=0;V<J;V+=1)Pe="",Q<=V&&V<oe&&Q<=W&&W<oe&&O.isDark(se,Math.floor((V-Q)/te))&&(Pe=" "),Q<=V&&V<oe&&Q<=W+1&&W+1<oe&&O.isDark(Re,Math.floor((V-Q)/te))?Pe+=" ":Pe+="",pt+=ee<1&&W+1>=oe?ht[Pe]:ze[Pe];pt+=`
`}return J%2&&ee>0?pt.substring(0,pt.length-J-1)+Array(J+1).join(""):pt.substring(0,pt.length-1)};return O.createASCII=function(ee,te){if(ee=ee||1,ee<2)return Ee(te);ee-=1,te=typeof te>"u"?ee*2:te;var J=O.getModuleCount()*ee+te*2,Q=te,oe=J-te,W,V,se,Re,Pe=Array(ee+1).join(""),ze=Array(ee+1).join("  "),ht="",pt="";for(W=0;W<J;W+=1){for(se=Math.floor((W-Q)/ee),pt="",V=0;V<J;V+=1)Re=1,Q<=V&&V<oe&&Q<=W&&W<oe&&O.isDark(se,Math.floor((V-Q)/ee))&&(Re=0),pt+=Re?Pe:ze;for(se=0;se<ee;se+=1)ht+=pt+`
`}return ht.substring(0,ht.length-1)},O.renderTo2dContext=function(ee,te){te=te||2;for(var J=O.getModuleCount(),Q=0;Q<J;Q++)for(var oe=0;oe<J;oe++)ee.fillStyle=O.isDark(Q,oe)?"black":"white",ee.fillRect(Q*te,oe*te,te,te)},O};r.stringToBytesFuncs={default:function(E){for(var A=[],k=0;k<E.length;k+=1){var S=E.charCodeAt(k);A.push(S&255)}return A}},r.stringToBytes=r.stringToBytesFuncs.default,r.createStringToBytes=function(E,A){var k=function(){for(var C=b(E),F=function(){var I=C.read();if(I==-1)throw"eof";return I},N=0,L={};;){var j=C.read();if(j==-1)break;var B=F(),O=F(),R=F(),D=String.fromCharCode(j<<8|B),T=O<<8|R;L[D]=T,N+=1}if(N!=A)throw N+" != "+A;return L}(),S=63;return function(C){for(var F=[],N=0;N<C.length;N+=1){var L=C.charCodeAt(N);if(L<128)F.push(L);else{var j=k[C.charAt(N)];typeof j=="number"?(j&255)==j?F.push(j):(F.push(j>>>8),F.push(j&255)):F.push(S)}}return F}};var i={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},s={L:1,M:0,Q:3,H:2},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a=function(){var E=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],A=1335,k=7973,S=21522,C={},F=function(N){for(var L=0;N!=0;)L+=1,N>>>=1;return L};return C.getBCHTypeInfo=function(N){for(var L=N<<10;F(L)-F(A)>=0;)L^=A<<F(L)-F(A);return(N<<10|L)^S},C.getBCHTypeNumber=function(N){for(var L=N<<12;F(L)-F(k)>=0;)L^=k<<F(L)-F(k);return N<<12|L},C.getPatternPosition=function(N){return E[N-1]},C.getMaskFunction=function(N){switch(N){case o.PATTERN000:return function(L,j){return(L+j)%2==0};case o.PATTERN001:return function(L,j){return L%2==0};case o.PATTERN010:return function(L,j){return j%3==0};case o.PATTERN011:return function(L,j){return(L+j)%3==0};case o.PATTERN100:return function(L,j){return(Math.floor(L/2)+Math.floor(j/3))%2==0};case o.PATTERN101:return function(L,j){return L*j%2+L*j%3==0};case o.PATTERN110:return function(L,j){return(L*j%2+L*j%3)%2==0};case o.PATTERN111:return function(L,j){return(L*j%3+(L+j)%2)%2==0};default:throw"bad maskPattern:"+N}},C.getErrorCorrectPolynomial=function(N){for(var L=l([1],0),j=0;j<N;j+=1)L=L.multiply(l([1,c.gexp(j)],0));return L},C.getLengthInBits=function(N,L){if(1<=L&&L<10)switch(N){case i.MODE_NUMBER:return 10;case i.MODE_ALPHA_NUM:return 9;case i.MODE_8BIT_BYTE:return 8;case i.MODE_KANJI:return 8;default:throw"mode:"+N}else if(L<27)switch(N){case i.MODE_NUMBER:return 12;case i.MODE_ALPHA_NUM:return 11;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 10;default:throw"mode:"+N}else if(L<41)switch(N){case i.MODE_NUMBER:return 14;case i.MODE_ALPHA_NUM:return 13;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 12;default:throw"mode:"+N}else throw"type:"+L},C.getLostPoint=function(N){for(var L=N.getModuleCount(),j=0,B=0;B<L;B+=1)for(var O=0;O<L;O+=1){for(var R=0,D=N.isDark(B,O),T=-1;T<=1;T+=1)if(!(B+T<0||L<=B+T))for(var I=-1;I<=1;I+=1)O+I<0||L<=O+I||T==0&&I==0||D==N.isDark(B+T,O+I)&&(R+=1);R>5&&(j+=3+R-5)}for(var B=0;B<L-1;B+=1)for(var O=0;O<L-1;O+=1){var M=0;N.isDark(B,O)&&(M+=1),N.isDark(B+1,O)&&(M+=1),N.isDark(B,O+1)&&(M+=1),N.isDark(B+1,O+1)&&(M+=1),(M==0||M==4)&&(j+=3)}for(var B=0;B<L;B+=1)for(var O=0;O<L-6;O+=1)N.isDark(B,O)&&!N.isDark(B,O+1)&&N.isDark(B,O+2)&&N.isDark(B,O+3)&&N.isDark(B,O+4)&&!N.isDark(B,O+5)&&N.isDark(B,O+6)&&(j+=40);for(var O=0;O<L;O+=1)for(var B=0;B<L-6;B+=1)N.isDark(B,O)&&!N.isDark(B+1,O)&&N.isDark(B+2,O)&&N.isDark(B+3,O)&&N.isDark(B+4,O)&&!N.isDark(B+5,O)&&N.isDark(B+6,O)&&(j+=40);for(var Y=0,O=0;O<L;O+=1)for(var B=0;B<L;B+=1)N.isDark(B,O)&&(Y+=1);var X=Math.abs(100*Y/L/L-50)/5;return j+=X*10,j},C}(),c=function(){for(var E=new Array(256),A=new Array(256),k=0;k<8;k+=1)E[k]=1<<k;for(var k=8;k<256;k+=1)E[k]=E[k-4]^E[k-5]^E[k-6]^E[k-8];for(var k=0;k<255;k+=1)A[E[k]]=k;var S={};return S.glog=function(C){if(C<1)throw"glog("+C+")";return A[C]},S.gexp=function(C){for(;C<0;)C+=255;for(;C>=256;)C-=255;return E[C]},S}();function l(E,A){if(typeof E.length>"u")throw E.length+"/"+A;var k=function(){for(var C=0;C<E.length&&E[C]==0;)C+=1;for(var F=new Array(E.length-C+A),N=0;N<E.length-C;N+=1)F[N]=E[N+C];return F}(),S={};return S.getAt=function(C){return k[C]},S.getLength=function(){return k.length},S.multiply=function(C){for(var F=new Array(S.getLength()+C.getLength()-1),N=0;N<S.getLength();N+=1)for(var L=0;L<C.getLength();L+=1)F[N+L]^=c.gexp(c.glog(S.getAt(N))+c.glog(C.getAt(L)));return l(F,0)},S.mod=function(C){if(S.getLength()-C.getLength()<0)return S;for(var F=c.glog(S.getAt(0))-c.glog(C.getAt(0)),N=new Array(S.getLength()),L=0;L<S.getLength();L+=1)N[L]=S.getAt(L);for(var L=0;L<C.getLength();L+=1)N[L]^=c.gexp(c.glog(C.getAt(L))+F);return l(N,0).mod(C)},S}var u=function(){var E=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],A=function(C,F){var N={};return N.totalCount=C,N.dataCount=F,N},k={},S=function(C,F){switch(F){case s.L:return E[(C-1)*4+0];case s.M:return E[(C-1)*4+1];case s.Q:return E[(C-1)*4+2];case s.H:return E[(C-1)*4+3];default:return}};return k.getRSBlocks=function(C,F){var N=S(C,F);if(typeof N>"u")throw"bad rs block @ typeNumber:"+C+"/errorCorrectionLevel:"+F;for(var L=N.length/3,j=[],B=0;B<L;B+=1)for(var O=N[B*3+0],R=N[B*3+1],D=N[B*3+2],T=0;T<O;T+=1)j.push(A(R,D));return j},k}(),d=function(){var E=[],A=0,k={};return k.getBuffer=function(){return E},k.getAt=function(S){var C=Math.floor(S/8);return(E[C]>>>7-S%8&1)==1},k.put=function(S,C){for(var F=0;F<C;F+=1)k.putBit((S>>>C-F-1&1)==1)},k.getLengthInBits=function(){return A},k.putBit=function(S){var C=Math.floor(A/8);E.length<=C&&E.push(0),S&&(E[C]|=128>>>A%8),A+=1},k},f=function(E){var A=i.MODE_NUMBER,k=E,S={};S.getMode=function(){return A},S.getLength=function(N){return k.length},S.write=function(N){for(var L=k,j=0;j+2<L.length;)N.put(C(L.substring(j,j+3)),10),j+=3;j<L.length&&(L.length-j==1?N.put(C(L.substring(j,j+1)),4):L.length-j==2&&N.put(C(L.substring(j,j+2)),7))};var C=function(N){for(var L=0,j=0;j<N.length;j+=1)L=L*10+F(N.charAt(j));return L},F=function(N){if("0"<=N&&N<="9")return N.charCodeAt(0)-48;throw"illegal char :"+N};return S},h=function(E){var A=i.MODE_ALPHA_NUM,k=E,S={};S.getMode=function(){return A},S.getLength=function(F){return k.length},S.write=function(F){for(var N=k,L=0;L+1<N.length;)F.put(C(N.charAt(L))*45+C(N.charAt(L+1)),11),L+=2;L<N.length&&F.put(C(N.charAt(L)),6)};var C=function(F){if("0"<=F&&F<="9")return F.charCodeAt(0)-48;if("A"<=F&&F<="Z")return F.charCodeAt(0)-65+10;switch(F){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+F}};return S},p=function(E){var A=i.MODE_8BIT_BYTE,k=r.stringToBytes(E),S={};return S.getMode=function(){return A},S.getLength=function(C){return k.length},S.write=function(C){for(var F=0;F<k.length;F+=1)C.put(k[F],8)},S},g=function(E){var A=i.MODE_KANJI,k=r.stringToBytesFuncs.SJIS;if(!k)throw"sjis not supported.";(function(F,N){var L=k(F);if(L.length!=2||(L[0]<<8|L[1])!=N)throw"sjis not supported."})("",38726);var S=k(E),C={};return C.getMode=function(){return A},C.getLength=function(F){return~~(S.length/2)},C.write=function(F){for(var N=S,L=0;L+1<N.length;){var j=(255&N[L])<<8|255&N[L+1];if(33088<=j&&j<=40956)j-=33088;else if(57408<=j&&j<=60351)j-=49472;else throw"illegal char at "+(L+1)+"/"+j;j=(j>>>8&255)*192+(j&255),F.put(j,13),L+=2}if(L<N.length)throw"illegal char at "+(L+1)},C},w=function(){var E=[],A={};return A.writeByte=function(k){E.push(k&255)},A.writeShort=function(k){A.writeByte(k),A.writeByte(k>>>8)},A.writeBytes=function(k,S,C){S=S||0,C=C||k.length;for(var F=0;F<C;F+=1)A.writeByte(k[F+S])},A.writeString=function(k){for(var S=0;S<k.length;S+=1)A.writeByte(k.charCodeAt(S))},A.toByteArray=function(){return E},A.toString=function(){var k="";k+="[";for(var S=0;S<E.length;S+=1)S>0&&(k+=","),k+=E[S];return k+="]",k},A},y=function(){var E=0,A=0,k=0,S="",C={},F=function(L){S+=String.fromCharCode(N(L&63))},N=function(L){if(!(L<0)){if(L<26)return 65+L;if(L<52)return 97+(L-26);if(L<62)return 48+(L-52);if(L==62)return 43;if(L==63)return 47}throw"n:"+L};return C.writeByte=function(L){for(E=E<<8|L&255,A+=8,k+=1;A>=6;)F(E>>>A-6),A-=6},C.flush=function(){if(A>0&&(F(E<<6-A),E=0,A=0),k%3!=0)for(var L=3-k%3,j=0;j<L;j+=1)S+="="},C.toString=function(){return S},C},b=function(E){var A=E,k=0,S=0,C=0,F={};F.read=function(){for(;C<8;){if(k>=A.length){if(C==0)return-1;throw"unexpected end of file./"+C}var L=A.charAt(k);if(k+=1,L=="=")return C=0,-1;if(L.match(/^\s$/))continue;S=S<<6|N(L.charCodeAt(0)),C+=6}var j=S>>>C-8&255;return C-=8,j};var N=function(L){if(65<=L&&L<=90)return L-65;if(97<=L&&L<=122)return L-97+26;if(48<=L&&L<=57)return L-48+52;if(L==43)return 62;if(L==47)return 63;throw"c:"+L};return F},m=function(E,A){var k=E,S=A,C=new Array(E*A),F={};F.setPixel=function(B,O,R){C[O*k+B]=R},F.write=function(B){B.writeString("GIF87a"),B.writeShort(k),B.writeShort(S),B.writeByte(128),B.writeByte(0),B.writeByte(0),B.writeByte(0),B.writeByte(0),B.writeByte(0),B.writeByte(255),B.writeByte(255),B.writeByte(255),B.writeString(","),B.writeShort(0),B.writeShort(0),B.writeShort(k),B.writeShort(S),B.writeByte(0);var O=2,R=L(O);B.writeByte(O);for(var D=0;R.length-D>255;)B.writeByte(255),B.writeBytes(R,D,255),D+=255;B.writeByte(R.length-D),B.writeBytes(R,D,R.length-D),B.writeByte(0),B.writeString(";")};var N=function(B){var O=B,R=0,D=0,T={};return T.write=function(I,M){if(I>>>M)throw"length over";for(;R+M>=8;)O.writeByte(255&(I<<R|D)),M-=8-R,I>>>=8-R,D=0,R=0;D=I<<R|D,R=R+M},T.flush=function(){R>0&&O.writeByte(D)},T},L=function(B){for(var O=1<<B,R=(1<<B)+1,D=B+1,T=j(),I=0;I<O;I+=1)T.add(String.fromCharCode(I));T.add(String.fromCharCode(O)),T.add(String.fromCharCode(R));var M=w(),Y=N(M);Y.write(O,D);var X=0,Z=String.fromCharCode(C[X]);for(X+=1;X<C.length;){var le=String.fromCharCode(C[X]);X+=1,T.contains(Z+le)?Z=Z+le:(Y.write(T.indexOf(Z),D),T.size()<4095&&(T.size()==1<<D&&(D+=1),T.add(Z+le)),Z=le)}return Y.write(T.indexOf(Z),D),Y.write(R,D),Y.flush(),M.toByteArray()},j=function(){var B={},O=0,R={};return R.add=function(D){if(R.contains(D))throw"dup key:"+D;B[D]=O,O+=1},R.size=function(){return O},R.indexOf=function(D){return B[D]},R.contains=function(D){return typeof B[D]<"u"},R};return F},x=function(E,A,k){for(var S=m(E,A),C=0;C<A;C+=1)for(var F=0;F<E;F+=1)S.setPixel(F,C,k(F,C));var N=w();S.write(N);for(var L=y(),j=N.toByteArray(),B=0;B<j.length;B+=1)L.writeByte(j[B]);return L.flush(),"data:image/gif;base64,"+L};return r}();(function(){n.stringToBytesFuncs["UTF-8"]=function(r){function i(s){for(var o=[],a=0;a<s.length;a++){var c=s.charCodeAt(a);c<128?o.push(c):c<2048?o.push(192|c>>6,128|c&63):c<55296||c>=57344?o.push(224|c>>12,128|c>>6&63,128|c&63):(a++,c=65536+((c&1023)<<10|s.charCodeAt(a)&1023),o.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63))}return o}return i(r)}})(),function(r){t.exports=r()}(function(){return n})})(qN);var ZW=qN.exports,XW=Li&&Li.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),d2=Li&&Li.__assign||function(){return d2=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},d2.apply(this,arguments)};Object.defineProperty(HE,"__esModule",{value:!0});var VN=HE.QRCode=void 0,QW=JW,eq=ZW,Rb=ne,tq=function(t){XW(e,t);function e(n){var r=t.call(this,n)||this;return r.canvasRef=Rb.createRef(),r}return e.prototype.download=function(n,r){if(this.canvasRef.current){var i=void 0;switch(n){case"jpg":i="image/jpeg";break;case"webp":i="image/webp";break;case"png":default:i="image/png";break}var s=this.canvasRef.current.toDataURL(i,1),o=document.createElement("a");o.download=r??"react-qrcode-logo",o.href=s,o.click()}},e.prototype.utf16to8=function(n){var r="",i,s,o=n.length;for(i=0;i<o;i++)s=n.charCodeAt(i),s>=1&&s<=127?r+=n.charAt(i):s>2047?(r+=String.fromCharCode(224|s>>12&15),r+=String.fromCharCode(128|s>>6&63),r+=String.fromCharCode(128|s>>0&63)):(r+=String.fromCharCode(192|s>>6&31),r+=String.fromCharCode(128|s>>0&63));return r},e.prototype.drawRoundedSquare=function(n,r,i,s,o,a,c,l){l.lineWidth=n,l.fillStyle=o,l.strokeStyle=o,i+=n/2,r+=n/2,s-=n,Array.isArray(a)||(a=[a,a,a,a]),a=a.map(function(p){return p=Math.min(p,s/2),p<0?0:p});var u=a[0]||0,d=a[1]||0,f=a[2]||0,h=a[3]||0;l.beginPath(),l.moveTo(r+u,i),l.lineTo(r+s-d,i),d&&l.quadraticCurveTo(r+s,i,r+s,i+d),l.lineTo(r+s,i+s-f),f&&l.quadraticCurveTo(r+s,i+s,r+s-f,i+s),l.lineTo(r+h,i+s),h&&l.quadraticCurveTo(r,i+s,r,i+s-h),l.lineTo(r,i+u),u&&l.quadraticCurveTo(r,i,r+u,i),l.closePath(),l.stroke(),c&&l.fill()},e.prototype.drawPositioningPattern=function(n,r,i,s,o,a,c){c===void 0&&(c=[0,0,0,0]);var l=Math.ceil(r),u,d;typeof c!="number"&&!Array.isArray(c)?(u=c.outer||0,d=c.inner||0):(u=c,d=u);var f,h;typeof a!="string"?(f=a.outer,h=a.inner):(f=a,h=a);var p=s*r+i,g=o*r+i,w=r*7;this.drawRoundedSquare(l,g,p,w,f,u,!1,n),w=r*3,p+=r*2,g+=r*2,this.drawRoundedSquare(l,g,p,w,h,d,!0,n)},e.prototype.isInPositioninZone=function(n,r,i){return i.some(function(s){return r>=s.row&&r<=s.row+7&&n>=s.col&&n<=s.col+7})},e.prototype.transformPixelLengthIntoNumberOfCells=function(n,r){return n/r},e.prototype.isCoordinateInImage=function(n,r,i,s,o,a,c,l){if(l){var u=2,d=this.transformPixelLengthIntoNumberOfCells(o,c),f=this.transformPixelLengthIntoNumberOfCells(a,c),h=this.transformPixelLengthIntoNumberOfCells(i,c)-1,p=this.transformPixelLengthIntoNumberOfCells(s,c)-1;return r>=d-u&&r<=d+h+u&&n>=f-u&&n<=f+p+u}else return!1},e.prototype.shouldComponentUpdate=function(n){return!QW(this.props,n)},e.prototype.componentDidMount=function(){this.update()},e.prototype.componentDidUpdate=function(){this.update()},e.prototype.update=function(){var n,r=this.props,i=r.value,s=r.ecLevel,o=r.enableCORS,a=r.bgColor,c=r.fgColor,l=r.logoImage,u=r.logoOpacity,d=r.logoOnLoad,f=r.removeQrCodeBehindLogo,h=r.qrStyle,p=r.eyeRadius,g=r.eyeColor,w=r.logoPaddingStyle,y=+this.props.size,b=+this.props.quietZone,m=this.props.logoWidth?+this.props.logoWidth:0,x=this.props.logoHeight?+this.props.logoHeight:0,E=this.props.logoPadding?+this.props.logoPadding:0,A=eq(0,s);A.addData(this.utf16to8(i)),A.make();var k=(n=this.canvasRef)===null||n===void 0?void 0:n.current,S=k.getContext("2d"),C=y+2*b,F=A.getModuleCount(),N=y/F,L=window.devicePixelRatio||1;k.height=k.width=C*L,S.scale(L,L),S.fillStyle=a,S.fillRect(0,0,C,C);var j=b,B=[{row:0,col:0},{row:0,col:F-7},{row:F-7,col:0}];if(S.strokeStyle=c,h==="dots"){S.fillStyle=c;for(var O=N/2,R=0;R<F;R++)for(var D=0;D<F;D++)A.isDark(R,D)&&!this.isInPositioninZone(R,D,B)&&(S.beginPath(),S.arc(Math.round(D*N)+O+j,Math.round(R*N)+O+j,O/100*75,0,2*Math.PI,!1),S.closePath(),S.fill())}else if(h==="fluid"){for(var O=Math.ceil(N/2),R=0;R<F;R++)for(var D=0;D<F;D++)if(A.isDark(R,D)&&!this.isInPositioninZone(R,D,B)){var T=[!1,!1,!1,!1];R>0&&!A.isDark(R-1,D)&&D>0&&!A.isDark(R,D-1)&&(T[0]=!0),R>0&&!A.isDark(R-1,D)&&D<F-1&&!A.isDark(R,D+1)&&(T[1]=!0),R<F-1&&!A.isDark(R+1,D)&&D<F-1&&!A.isDark(R,D+1)&&(T[2]=!0),R<F-1&&!A.isDark(R+1,D)&&D>0&&!A.isDark(R,D-1)&&(T[3]=!0);var I=Math.ceil((D+1)*N)-Math.floor(D*N),M=Math.ceil((R+1)*N)-Math.floor(R*N);S.fillStyle=c,S.beginPath(),S.arc(Math.round(D*N)+O+j,Math.round(R*N)+O+j,O,0,2*Math.PI,!1),S.closePath(),S.fill(),T[0]||S.fillRect(Math.round(D*N)+j,Math.round(R*N)+j,I/2,M/2),T[1]||S.fillRect(Math.round(D*N)+j+Math.floor(I/2),Math.round(R*N)+j,I/2,M/2),T[2]||S.fillRect(Math.round(D*N)+j+Math.floor(I/2),Math.round(R*N)+j+Math.floor(M/2),I/2,M/2),T[3]||S.fillRect(Math.round(D*N)+j,Math.round(R*N)+j+Math.floor(M/2),I/2,M/2)}}else for(var R=0;R<F;R++)for(var D=0;D<F;D++)if(A.isDark(R,D)&&!this.isInPositioninZone(R,D,B)){S.fillStyle=c;var I=Math.ceil((D+1)*N)-Math.floor(D*N),M=Math.ceil((R+1)*N)-Math.floor(R*N);S.fillRect(Math.round(D*N)+j,Math.round(R*N)+j,I,M)}for(var Y=0;Y<3;Y++){var X=B[Y],R=X.row,D=X.col,Z=p,le=void 0;Array.isArray(Z)&&(Z=Z[Y]),typeof Z=="number"&&(Z=[Z,Z,Z,Z]),g?Array.isArray(g)?le=g[Y]:le=g:le=c,this.drawPositioningPattern(S,N,j,R,D,le,Z)}if(l){var ae=new Image;o&&(ae.crossOrigin="Anonymous"),ae.onload=function(ye){S.save();var Ee=m||y*.2,ee=x||Ee,te=(y-Ee)/2,J=(y-ee)/2;if(f||E){S.beginPath(),S.strokeStyle=a,S.fillStyle=a;var Q=Ee+2*E,oe=ee+2*E,W=te+j-E,V=J+j-E;if(w==="circle"){var se=W+Q/2,Re=V+oe/2;S.ellipse(se,Re,Q/2,oe/2,0,0,2*Math.PI),S.stroke(),S.fill()}else S.fillRect(W,V,Q,oe)}S.globalAlpha=u,S.drawImage(ae,te+j,J+j,Ee,ee),S.restore(),d&&d(ye)},ae.src=l}},e.prototype.render=function(){var n,r=+this.props.size+2*+this.props.quietZone;return Rb.createElement("canvas",{id:(n=this.props.id)!==null&&n!==void 0?n:"react-qrcode-logo",height:r,width:r,style:d2({height:r+"px",width:r+"px"},this.props.style),ref:this.canvasRef})},e.defaultProps={value:"https://reactjs.org/",ecLevel:"M",enableCORS:!1,size:150,quietZone:10,bgColor:"#FFFFFF",fgColor:"#000000",logoOpacity:1,qrStyle:"squares",eyeRadius:[0,0,0],logoPaddingStyle:"square"},e}(Rb.Component);VN=HE.QRCode=tq;function nq(t){var e;const{walletConnectUri:n,logoImage:r,primaryColor:i}=t,{isDark:s}=ne.useContext(jw),o=ne.useMemo(()=>Vl.getParser(window.navigator.userAgent).getPlatformType()==="desktop",[]),[a]=Io(void 0,{i18n:rn}),[c,l]=ne.useState(!1),u=()=>{nA(n),l(!0),setTimeout(()=>{l(!1)},3e3)},d=document.documentElement,f="#FFFFFF",h="#000000",p=((e=getComputedStyle(d))===null||e===void 0||(e=e.getPropertyValue("--app-gray-800"))===null||e===void 0?void 0:e.trim())||"#1f2a37",g=i.toLowerCase()==="#ffffff"?"#000000":i;return z.jsx("div",{className:"w3ajs-wallet-connect w3a-wallet-connect",children:z.jsx("div",{className:"w3ajs-wallet-connect__container w3a-wallet-connect__container",children:z.jsxs("div",{className:"w3a-wallet-connect__container-desktop",children:[z.jsxs("div",{className:"w3ajs-wallet-connect-qr w3a-wallet-connect-qr w3a--rounded-md w3a--mb-2",tabIndex:0,role:"button",onClick:u,onKeyDown:()=>nA(n),children:[c&&z.jsxs("div",{className:"tooltip",children:["Copied",z.jsx("div",{className:"w3a--absolute w3a--border-8 w3a--border-b-0 w3a--border-r-transparent w3a--border-t-app-gray-900 w3a--border-l-transparent w3a--top-[100%] w3a--left-[calc(50%_-_8px)]"})]}),z.jsx(VN,{size:o?300:260,eyeRadius:5,qrStyle:"dots",removeQrCodeBehindLogo:!0,logoImage:r||WH,value:n,logoHeight:32,logoWidth:32,logoPadding:10,eyeColor:s?f:g,bgColor:s?p:f,fgColor:s?f:h})]}),z.jsx("div",{className:"text-xs",children:a("modal.external.walletconnect-copy")})]})})})}var rq=ne.memo(nq);function WE(t){const{title:e,goBack:n,closeModal:r,disableBackButton:i}=t;return z.jsxs("div",{className:"w3a--flex w3a--flex-row w3a--justify-center w3a--items-center w3a--gap-1",children:[z.jsx("div",{className:"w3a--flex-grow-1 w3a--flex-shrink-0 w3a--items-center w3a--justify-start w3a--mr-auto",children:!i&&z.jsx("button",{type:"button",className:"w3a-external-back w3ajs-external-back",onClick:n,children:z.jsx(il,{iconName:"arrow-left-light",darkIconName:"arrow-left-dark",width:"16",height:"16"})})}),z.jsx("div",{className:"w3a-header__title w3a--flex-grow-0 w3a--flex-shrink w3a--truncate w3a--mr-6",children:e}),z.jsx("div",{className:"w3a--flex-grow-1 w3a--flex-shrink-0 w3a--items-center w3a--justify-end w3a--ml-auto",children:z.jsx("button",{type:"button",onClick:r,className:"w3a-header__button_wallet w3ajs-close-btn",children:z.jsx(il,{iconName:"x-light",darkIconName:"x-dark"})})})]})}const iq=(t,e)=>{if(e!=null&&e.startsWith("https://"))return e;switch(t){case"chrome":return`https://chrome.google.com/webstore/detail/${e}`;case"firefox":return`https://addons.mozilla.org/firefox/addon/${e}`;case"edge":return`https://microsoftedge.microsoft.com/addons/detail/${e}`;default:return null}},sq=(t,e)=>{if(e!=null&&e.includes("https://"))return e;switch(t){case"android":return`https://play.google.com/store/apps/details?id=${e}`;case"ios":return`https://apps.apple.com/app/safepal-wallet/${e}`;default:return""}},oq=t=>{switch(t){case"ios":return"iOS";case"android":return"Android";default:return""}},aq=t=>t.charAt(0).toUpperCase()+t.slice(1);function GN(t){const{connectButton:e,goBack:n,closeModal:r}=t,[i]=Io(void 0,{i18n:rn}),s=ne.useMemo(()=>{const c=Vl.getParser(window.navigator.userAgent);return{platform:c.getPlatformType(),browser:c.getBrowserName().toLowerCase(),os:c.getOSName()}},[]),o=()=>{const c=e.walletRegistryItem.app||{};return Object.keys(c).reduce((u,d)=>{if(!["android","ios"].includes(d))return u;const f=c[d];if(!f)return u;const h=sq(d,f);if(!h)return u;const p=`${d}-light`,g=`${d}-dark`;return u.push(z.jsx("li",{className:"w3a--w-full",children:z.jsx("a",{href:h,rel:"noopener noreferrer",target:"_blank",children:z.jsxs(sl,{type:"button",variant:"tertiary",className:"w3a--w-full !w3a--justify-start w3a--flex w3a--items-center w3a--gap-2 wallet-link-btn",children:[z.jsx(Yc,{imageId:p,darkImageId:g,hoverImageId:p,darkHoverImageId:g,height:"28",width:"28",isButton:!0}),z.jsx("span",{className:"w3a--text-sm w3a--font-medium",children:i("modal.external.install-mobile-app",{os:oq(d)})})]})})},d)),u},[])},a=()=>{const c=s.browser==="brave"?"chrome":s.browser,l=e.walletRegistryItem.app||{},u=l.browser&&l.browser.includes(c)?l.browser:void 0,d=l[c]||u,f=d?iq(c,d):null;return[f?z.jsx("li",{children:z.jsx("a",{href:f,rel:"noopener noreferrer",target:"_blank",children:z.jsxs(sl,{type:"button",variant:"tertiary",className:"w3a--w-full !w3a--justify-start w3a--flex w3a--items-center w3a--gap-2 wallet-link-btn",children:[z.jsx(Yc,{imageId:s.browser,darkImageId:s.browser,hoverImageId:s.browser,darkHoverImageId:s.browser,height:"30",width:"30",isButton:!0}),z.jsx("span",{className:"w3a--text-sm w3a--font-medium",children:i("modal.external.install-browser-extension",{browser:aq(s.browser)})})]})})},s.browser):null,...o()]};return z.jsxs("div",{children:[z.jsx(WE,{title:`${i("modal.external.get")} ${e.displayName}`,goBack:n,closeModal:r}),z.jsx("div",{className:"w3a--flex w3a--justify-center w3a--my-6",children:z.jsx(Yc,{imageId:`login-${e.name}`,hoverImageId:`login-${e.name}`,fallbackImageId:"wallet",height:"100",width:"100",isButton:!0,extension:e.imgExtension})}),z.jsx("ul",{className:"w3a--flex w3a--flex-col w3a--gap-3",children:s.platform==="desktop"?a():o()})]})}function cq(t){const{connectButton:e,walletConnectUri:n,goBack:r,closeModal:i}=t,[s,o]=ne.useState(!1),[a]=Io(void 0,{i18n:rn}),c=()=>{o(!0)};return z.jsx("div",{children:s?z.jsx("div",{children:z.jsx(GN,{connectButton:e,goBack:()=>o(!1),closeModal:i})}):z.jsxs(z.Fragment,{children:[z.jsx(WE,{title:e.displayName,goBack:r,closeModal:i}),n?z.jsx(rq,{walletConnectUri:n,logoImage:`https://images.web3auth.io/login-${e.name}.${e.imgExtension}`,primaryColor:e.walletRegistryItem.primaryColor}):z.jsx(WN,{modalStatus:Zn.CONNECTING,canEmit:!1}),e.hasInstallLinks&&z.jsxs("div",{className:"w3a--flex w3a--flex-row w3a--items-center w3a--justify-between w3a--gap-2 w3a--bg-app-gray-50 dark:w3a--bg-app-gray-700 w3a--text-app-gray-900 dark:w3a--text-app-white w3a--px-3 w3a--py-2 w3a--rounded-xl",children:[z.jsxs("span",{className:"w3a--text-sm w3a--truncate w3a--flex-grow-0",children:[a("modal.external.dont-have")," ",z.jsx("span",{children:e.displayName}),"?"]}),z.jsx(sl,{type:"button",variant:"secondary",size:"xs",className:"w3a--flex-grow-1 w3a--flex-shrink-0",onClick:c,children:a("modal.external.get-wallet")})]})]})})}function lq(t){const{connectButton:e,walletConnectUri:n,goBack:r,closeModal:i}=t;return z.jsx("div",{children:e.hasWalletConnect?z.jsx(cq,{connectButton:e,walletConnectUri:n,goBack:r,closeModal:i}):z.jsx(GN,{connectButton:e,goBack:r,closeModal:i})})}function uq(t){const e=encodeURIComponent(t.uri);return t.link.startsWith("http")?`${t.link}/wc?uri=${e}`:t.link?`${t.link}wc?uri=${e}`:""}function dq(t){const{hideExternalWallets:e,handleExternalWalletClick:n,closeModal:r,config:i={},walletConnectUri:s,showBackButton:o,modalStatus:a,chainNamespace:c,walletRegistry:l}=t,[u,d]=ne.useState([]),[f,h]=ne.useState(0),[p,g]=ne.useState(null),[w,y]=ne.useState(""),[b]=Io(void 0,{i18n:rn}),m=ne.useMemo(()=>l&&Object.keys(l.default).length>0&&Object.keys(l.others).length>0,[l]),x=ne.useMemo(()=>{const S=Vl.getParser(window.navigator.userAgent);return{platform:S.getPlatformType(),os:S.getOSName(),browser:S.getBrowserName().toLowerCase()}},[]),E=S=>{y(S.target.value)},A=ne.useMemo(()=>{const S={};return Object.keys(i).forEach(C=>{const F=i[C];if(!F.showOnModal){S[C]=!1;return}if(x.platform==="desktop"&&F.showOnDesktop){S[C]=!0;return}if((x.platform==="mobile"||x.platform==="tablet")&&F.showOnMobile){S[C]=!0;return}S[C]=!1}),We.debug("adapter visibility map",S),S},[i,x.platform]);ne.useEffect(()=>{var S;We.debug("loaded external wallets",i,s),(((S=i[Wt.WALLET_CONNECT_V2])===null||S===void 0?void 0:S.showOnModal)||!1)!==!1&&!s&&n({adapter:Wt.WALLET_CONNECT_V2})},[i,n,s]),ne.useEffect(()=>{if(m){const S=Object.keys(i).some(O=>O===Wt.WALLET_CONNECT_V2),C=new Set(Object.keys(l.default)),F=O=>Object.keys(O).reduce((R,D)=>{var T,I,M,Y;if(A[D]===!1)return R;const X=O[D];let Z="";if(x.platform===Vl.PLATFORMS_MAP.mobile){var le,ae;const te=X==null||(le=X.mobile)===null||le===void 0?void 0:le.universal,J=X==null||(ae=X.mobile)===null||ae===void 0?void 0:ae.native;Z=te||J}const ye={name:D,displayName:X.name,href:Z,hasInjectedWallet:((T=i[D])===null||T===void 0?void 0:T.isInjected)||!1,hasWalletConnect:S&&((I=X.walletConnect)===null||I===void 0||(I=I.sdks)===null||I===void 0?void 0:I.includes("sign_v2")),hasInstallLinks:Object.keys(X.app||{}).length>0,walletRegistryItem:X,imgExtension:X.imgExtension||"svg"};if(!ye.hasInjectedWallet&&!ye.hasWalletConnect&&!ye.hasInstallLinks)return R;const Ee=new Set((M=X.chains)===null||M===void 0?void 0:M.map(te=>te.split(":")[0])),ee=new Set((Y=X.injected)===null||Y===void 0?void 0:Y.map(te=>te.namespace));return!Ee.has(c)&&!ee.has(c)||R.push(ye),R},[]),N=F(l.default),L=F(l.others),j=Object.keys(i).reduce((O,R)=>(![Wt.WALLET_CONNECT_V2].includes(R)&&!i[R].isInjected&&A[R]&&(We.debug("custom adapter",R,i[R]),O.push({name:R,displayName:i[R].label||R,hasInjectedWallet:!1,hasWalletConnect:!1,hasInstallLinks:!1})),O),[]),B=[...N,...L];if(w){const O=B.concat(j).filter(R=>R.name.toLowerCase().includes(w.toLowerCase()));We.debug("filteredLists",O),d(O)}else{const O=[...B.filter(R=>R.hasInjectedWallet&&C.has(R.name)),...j,...B.filter(R=>!R.hasInjectedWallet&&C.has(R.name))];d(O)}h(B.length+j.length),We.debug("external buttons",B)}else{const S=Object.keys(i).reduce((C,F)=>(We.debug("external buttons",F,A[F]),![Wt.WALLET_CONNECT_V2].includes(F)&&A[F]&&C.push({name:F,displayName:i[F].label||F,hasInjectedWallet:i[F].isInjected,hasWalletConnect:!1,hasInstallLinks:!1}),C),[]);d(S),h(S.length)}},[i,x,A,l,w,c,m]);const k=S=>{S.hasInjectedWallet||!S.hasWalletConnect&&!S.hasInstallLinks?n({adapter:S.name}):g(S)};return z.jsx("div",{className:`w3ajs-external-wallet w3a-group ${f===0?"w3a-group-loader-height":""}`,children:z.jsx("div",{className:"w3a-external-container w3ajs-external-container",children:f===0?z.jsx(WN,{modalStatus:Zn.CONNECTING,canEmit:!1}):a===Zn.INITIALIZED&&(p?z.jsx(lq,{connectButton:p,goBack:()=>g(null),walletConnectUri:s,closeModal:r}):z.jsxs(z.Fragment,{children:[z.jsx(WE,{disableBackButton:!o,title:b("modal.external.connect-wallet"),goBack:e,closeModal:r}),f>15&&z.jsx("div",{className:"w3a--py-4",children:z.jsx("input",{className:"w3a--w-full w3a-text-field",name:"passwordless-input",required:!0,value:w,placeholder:b("modal.external.search-wallet",{count:f}),onFocus:S=>{S.target.placeholder=""},onBlur:S=>{S.target.placeholder=b("modal.external.search-wallet",{count:f})},onChange:S=>E(S)})}),u.length===0?z.jsx("div",{className:"w3a--w-full w3a--text-center w3a--text-app-gray-400 dark:w3a--text-app-gray-500 w3a--py-6 w3a--flex w3a--justify-center w3a--items-center",children:b("modal.external.no-wallets-found")}):z.jsx("div",{className:`w3a-adapter-list-container ${f<15?"w3a--py-4":""}`,children:z.jsxs("ul",{className:"w3a-adapter-list w3ajs-wallet-adapters",children:[u.map(S=>z.jsxs("li",{className:"w3a-adapter-item w3a-adapter-item--full",children:[x.platform==="desktop"&&z.jsx(Cb,{button:S,handleWalletClick:k}),x.platform!=="desktop"&&(S.href&&S.hasWalletConnect&&!S.hasInjectedWallet?z.jsx("a",{href:S.href?uq({uri:s,link:S.href}):s,target:"_blank",className:"w3a--w-full",rel:"noreferrer noopener",children:z.jsx(Cb,{button:S,handleWalletClick:k})}):z.jsx(Cb,{button:S,handleWalletClick:k}))]},S.name+S.displayName)),f>10&&!w&&z.jsxs("li",{className:"w3a--flex w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-0.5 w3a--my-4 w3a--w-full w3a--mx-auto w3a-adapter-item--full",children:[z.jsx("p",{className:"w3a--text-xs w3a--text-app-gray-500 dark:w3a--text-app-gray-400",children:b("modal.external.search-text")}),z.jsx("p",{className:"w3a--text-xs w3a--font-medium w3a--text-app-gray-900 dark:w3a--text-app-white",children:b("modal.external.search-subtext")})]})]})})]}))})})}function fq(){const[t]=Io(void 0,{i18n:rn});return z.jsxs("div",{className:"w3a--flex w3a--items-center w3a--gap-2 w3a--justify-center",children:[z.jsx("div",{className:"w3a--text-xs w3a--text-app-gray-300 dark:w3a--text-app-gray-500",children:t("modal.footer.message-new")}),z.jsx("img",{height:"16",src:"https://images.web3auth.io/web3auth-footer-logo-light.svg",alt:"Web3Auth Logo Light",className:"w3a--h-4 w3a--block dark:w3a--hidden"}),z.jsx("img",{height:"16",src:"https://images.web3auth.io/web3auth-footer-logo-dark.svg",alt:"Web3Auth Logo Dark",className:"w3a--h-4 w3a--hidden dark:w3a--block"})]})}function hq(){return z.jsx("div",{className:"w3a-modal__footer",children:z.jsx("div",{className:"w3a-footer",children:z.jsx("div",{children:z.jsx("div",{children:z.jsx(fq,{})})})})})}function pq(t){const{onClose:e,appLogo:n,appName:r}=t,[i]=Io(void 0,{i18n:rn}),s=[$N,DN].includes(n)?"":n,o=i("modal.header-subtitle-name",{appName:r});return z.jsxs("div",{className:"w3a-modal__header",children:[z.jsx("div",{className:"w3a-header",children:z.jsxs("div",{children:[s&&z.jsx("div",{className:"w3a-header__logo",children:z.jsx("img",{src:s,alt:""})}),z.jsx("div",{className:"w3a-header__title",children:i("modal.header-title")}),z.jsxs("div",{className:"w3a-header__subtitle",children:[o,z.jsxs("div",{className:"w3a--relative w3a--flex w3a--flex-col w3a--items-center w3a--group w3a--cursor-pointer",children:[z.jsx(il,{iconName:"information-circle-light",darkIconName:"information-circle"}),z.jsxs("div",{className:"w3a--absolute w3a--top-4 w3a--z-20 w3a--flex-col w3a--items-center w3a--hidden w3a--mb-5 group-hover:w3a--flex",children:[z.jsx("div",{className:"w3a--w-3 w3a--h-3 w3a--ml-[3px] -w3a--mb-2 w3a--rotate-45 w3a--bg-app-gray-50 dark:w3a--bg-app-gray-600"}),z.jsxs("div",{className:`w3a--relative w3a--p-4 w3a--w-[270px] w3a--translate-x-[-16px] w3a--text-xs w3a--leading-none w3a--text-app-white w3a--rounded-md w3a--bg-app-gray-50 dark:w3a--bg-app-gray-600 w3a--shadow-lg ${o.length>34?"-w3a--ml-[100px]":""}`,children:[z.jsx("div",{className:"w3a--text-xs w3a--font-medium w3a--mb-1 w3a--text-app-gray-900 dark:w3a--text-app-white",children:i("modal.header-tooltip-title")}),z.jsx("div",{className:"w3a--text-xs w3a--text-app-gray-400",children:i("modal.header-tooltip-desc")})]})]})]})]})]})}),z.jsx("button",{type:"button",onClick:e,className:"w3a-header__button w3ajs-close-btn ",children:z.jsx(il,{iconName:"x-light",darkIconName:"x-dark"})})]})}const f2=ne.memo(pq,(t,e)=>t.appLogo!==e.appLogo);f2.displayName="Header";const rA=(t,e={})=>{const n={};if(t===Wt.AUTH)KE.forEach(r=>{const i=e[r]||{name:HH[r],showOnMobile:!0,showOnModal:!0,showOnDesktop:!0};n[r]=fe({},i)}),We.debug("auth login method ui config",n);else throw Ue.invalidParams(`${t} is not a valid adapter`);return n},YN="https://api-passwordless.web3auth.io",gq=async()=>{try{const t=await Ew(`${YN}/api/v3/user/location`);return t&&t.data.country?{country:t.data.country,dialCode:t.data.dial_code}:null}catch(t){return We.error("error getting user country",t),null}},mq=async t=>{try{const e=await Pp(`${YN}/api/v3/phone_number/validate`,{phone_number:t});return e&&e.success?e.parsed_number:!1}catch(e){return We.error("error validating phone number",e),e.status!==400}},JN=t=>{let e=t;return e||(e=(typeof window<"u"&&(window.navigator.userLanguage||window.navigator.language)||"en-US").split("-")[0]),Object.prototype.hasOwnProperty.call(qK,e)?e:Ns.en};function wq(t){const{handleSocialLoginClick:e,adapter:n,isPrimaryBtn:r,isEmailVisible:i,isSmsVisible:s}=t,[o,a]=ne.useState(""),[c,l]=ne.useState(""),[u,d]=ne.useState(null),[f]=Io(void 0,{i18n:rn}),h=async b=>{b.preventDefault();const m=o;if(i&&m.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i))return e({adapter:n,loginParams:{loginProvider:un.EMAIL_PASSWORDLESS,login_hint:m,name:"Email"}});if(s){const x=m.startsWith("+")?m:`${c}${m}`,E=await mq(x);if(E)return e({adapter:n,loginParams:{loginProvider:un.SMS_PASSWORDLESS,login_hint:typeof E=="string"?E:x,name:"Mobile"}})}d(!1)};ne.useEffect(()=>{s&&(async()=>{const m=await gq();m&&m.dialCode&&l(m.dialCode)})()},[s]);const p=b=>{a(b.target.value),u===!1&&d(null)},g=ne.useMemo(()=>i&&s?"modal.social.passwordless-title":i?"modal.social.email":"modal.social.phone",[i,s]),w=ne.useMemo(()=>i&&s?"+(00)123456/name@example.com":i?"name@example.com":"+(00)123456",[i,s]),y=ne.useMemo(()=>i&&s?"modal.errors-invalid-number-email":i?"modal.errors-invalid-email":"modal.errors-invalid-number",[i,s]);return z.jsxs("div",{className:"w3ajs-passwordless w3a-group w3a-group--passwordless",children:[z.jsxs("div",{className:"w3a-group__title",children:[f(g),s&&z.jsxs("div",{className:"w3a--relative w3a--flex w3a--flex-col w3a--items-center w3a--cursor-pointer w3a--group",children:[z.jsx(il,{iconName:"information-circle-light",darkIconName:"information-circle"}),z.jsxs("div",{className:"w3a--absolute w3a--z-20 w3a--flex-col w3a--items-center w3a--hidden w3a--mb-5 w3a--top-4 group-hover:w3a--flex",children:[z.jsx("div",{className:"w3a--w-3 w3a--h-3 w3a--ml-[3px] -w3a--mb-2 w3a--rotate-45 w3a--bg-app-gray-50 dark:w3a--bg-app-gray-600"}),z.jsxs("div",{className:`w3a--relative w3a--p-4 w3a--w-[300px] w3a--text-xs w3a--leading-none w3a--text-app-white w3a--rounded-md w3a--bg-app-gray-50 dark:w3a--bg-app-gray-600 w3a--shadow-lg ${s&&!i?"w3a--left-20":"w3a--left-8"}`,children:[z.jsx("div",{className:"w3a--mb-1 w3a--text-xs w3a--font-medium w3a--text-app-gray-900 dark:w3a--text-app-white",children:f("modal.popup.phone-header")}),z.jsx("div",{className:"w3a--text-xs w3a--text-app-gray-400",children:f("modal.popup.phone-body")})]})]})]})]}),z.jsxs("form",{className:"w3ajs-passwordless-form",onSubmit:b=>h(b),children:[z.jsx("input",{className:"w3a--w-full w3a--mb-4 w3a-text-field",name:"passwordless-input",required:!0,placeholder:`${f("modal.social.sms-placeholder-text")} ${w}`,onFocus:b=>{b.target.placeholder=""},onBlur:b=>{b.target.placeholder=`${f("modal.social.sms-placeholder-text")} ${w}`},onChange:b=>p(b)}),u===!1&&z.jsx("div",{className:"w3a-sms-field--error",children:f(y)}),z.jsx(sl,{variant:r?"primary":"tertiary",disabled:o==="",className:"w3a--w-full",type:"submit",children:f("modal.social.passwordless-cta")})]})]})}var ZN={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(ZN);var yq=ZN.exports;const Tb=vi(yq);function bq(t,e,n){const r=t===un.TWITTER?`login-twitter-x${e?"-light":"-dark"}`:`login-${t}${e?"-light":"-dark"}`,i=t===un.APPLE||t===un.GITHUB||t===un.TWITTER?r:`login-${t}-active`;return n?z.jsx(Yc,{width:"20",imageId:i,hoverImageId:i,isButton:!0}):z.jsx(Yc,{width:"20",imageId:r,hoverImageId:i,isButton:!0})}function vq(t){const[e,n]=ne.useState(!1),[r,i]=ne.useState(!1),{socialLoginsConfig:s={loginMethods:{},loginMethodsOrder:[],adapter:"",uiConfig:{}},handleSocialLoginClick:o}=t,{isDark:a}=ne.useContext(jw),[c]=Io(void 0,{i18n:rn}),l=()=>{i(!r)};ne.useEffect(()=>{const g=Object.keys(s.loginMethods).filter(w=>s.loginMethods[w].showOnModal);n(g.length>4)},[s.loginMethods]);const u=Tb("w3a-adapter-list","w3ajs-socials-adapters",r?"":" w3a-adapter-list--shrink"),d=Tb("w3a-button-expand","w3ajs-button-expand",r?"w3a-button--rotate":""),f=c(r?"modal.social.view-less":"modal.social.view-more"),h=Object.keys(s.loginMethods).length+1,p=[un.WEBAUTHN,un.JWT,un.SMS_PASSWORDLESS,un.EMAIL_PASSWORDLESS,un.AUTHENTICATOR,un.PASSKEYS];return z.jsxs("div",{className:"w3ajs-social-logins w3a-group",children:[z.jsx("ul",{className:u,children:Object.keys(s.loginMethods).map(g=>{var w,y;const b=zE(s.loginMethods[g].name||g),x=s.loginMethodsOrder.indexOf(g)+1||Object.keys(s.loginMethods).length+1,E=s.loginMethods[g].mainOption,A=(s==null||(w=s.uiConfig)===null||w===void 0?void 0:w.primaryButton)==="socialLogin"&&x===1,k=bq(g,a,A);if(s.loginMethods[g].showOnModal===!1||p.includes(g))return null;const S=Tb("w3a-adapter-item",(s==null||(y=s.uiConfig)===null||y===void 0?void 0:y.loginGridCol)===2?"w3a--col-span-3":"w3a--col-span-2");return E||x===1?z.jsx("li",{className:"w3a--col-span-6 w3a-adapter-item",style:{order:x},children:z.jsxs(sl,{variant:"secondary",onClick:()=>o({adapter:s.adapter,loginParams:{loginProvider:g,name:b,login_hint:""}}),className:"w3a--w-full",title:b,children:[k,z.jsx("p",{className:"w3a--ml-2",children:c("modal.social.continueCustom",{adapter:b})})]})},g):z.jsx("li",{className:S,style:{order:x+h},children:z.jsx(sl,{variant:"secondary",onClick:()=>o({adapter:s.adapter,loginParams:{loginProvider:g,name:b,login_hint:""}}),className:"w3a--w-full",title:b,children:k})},g)})}),z.jsx("div",{className:"w3a-social__policy",children:c("modal.social.policy")}),e&&z.jsx("div",{className:"w3a--text-right",children:z.jsx("button",{type:"button",className:d,onClick:l,children:z.jsx("span",{className:"w3ajs-button-expand-text",children:f})})})]})}We.enableAll();function xq(t){var e,n,r,i,s,o;const[a,c]=ne.useState(["w3a-modal__inner"]),[l,u]=ne.useState({externalWalletsVisibility:!1,status:Zn.INITIALIZED,hasExternalWallets:!1,externalWalletsInitialized:!1,modalVisibility:!1,modalVisibilityDelayed:!1,postLoadingMessage:"",walletConnectUri:"",socialLoginsConfig:{loginMethods:{},loginMethodsOrder:[],adapter:"",uiConfig:{}},externalWalletsConfig:{},detailedLoaderAdapter:"",detailedLoaderAdapterName:"",showExternalWalletsOnly:!1}),[d]=Io(void 0,{i18n:rn}),{stateListener:f,appLogo:h,appName:p,chainNamespace:g,walletRegistry:w,handleSocialLoginClick:y,handleExternalWalletClick:b,handleShowExternalWallets:m,closeModal:x}=t,[E,A]=ne.useState("");ne.useEffect(()=>{f.emit("MOUNTED"),f.on("STATE_UPDATED",R=>{We.debug("state updated",R),u(D=>xh(_o(D,R)))})},[f]),ne.useEffect(()=>{let R;return l.modalVisibility?(u(D=>fe(fe({},D),{},{modalVisibilityDelayed:l.modalVisibility})),R=window.setTimeout(()=>{c(["w3a-modal__inner",l.modalVisibility?"w3a-modal__inner--active":""])},100)):(c(["w3a-modal__inner",l.modalVisibility?"w3a-modal__inner--active":""]),R=window.setTimeout(()=>{u(D=>fe(fe({},D),{},{modalVisibilityDelayed:l.modalVisibility}))},250)),()=>{clearTimeout(R)}},[l.modalVisibility]);const k=ne.useCallback(()=>{l.status===Zn.CONNECTED&&x(),l.status===Zn.ERRORED&&u(R=>fe(fe({},R),{},{modalVisibility:!0,status:Zn.INITIALIZED}))},[x,l.status]),S=ne.useCallback(R=>{const{adapter:D}=R;u(T=>fe(fe({},T),{},{detailedLoaderAdapter:D,detailedLoaderAdapterName:IN[D]})),b(R)},[b]),C=R=>{const{loginParams:D}=R;u(T=>fe(fe({},T),{},{detailedLoaderAdapter:D.loginProvider,detailedLoaderAdapterName:D.name})),y(R)},F=((e=l.socialLoginsConfig)===null||e===void 0||(e=e.uiConfig)===null||e===void 0?void 0:e.primaryButton)==="emailLogin",N=((n=l.socialLoginsConfig)===null||n===void 0||(n=n.uiConfig)===null||n===void 0?void 0:n.primaryButton)==="externalLogin",L=z.jsx("div",{className:"w3ajs-external-wallet w3a-group w3a--w-full",children:z.jsx("div",{className:"w3a-external-toggle w3ajs-external-toggle",children:z.jsx(sl,{variant:N?"primary":"tertiary",type:"button",className:"w3a--w-full w3ajs-external-toggle__button",style:{width:"100%"},onClick:()=>{u(R=>fe(fe({},R),{},{externalWalletsVisibility:!0})),A("slide-enter"),m(l.externalWalletsInitialized),setTimeout(()=>{A("slide-exit")},300)},children:d("modal.external.connect")})})}),j=ne.useMemo(()=>{var R,D;return l.showExternalWalletsOnly||Object.keys(((R=l.socialLoginsConfig)===null||R===void 0?void 0:R.loginMethods)||{}).length===0?!1:!!Object.entries(((D=l.socialLoginsConfig)===null||D===void 0?void 0:D.loginMethods)||{}).some(([I,M])=>I!==un.EMAIL_PASSWORDLESS&&M.showOnModal!==!1)},[l.showExternalWalletsOnly,(r=l.socialLoginsConfig)===null||r===void 0?void 0:r.loginMethods]);We.info("modal state",l,j);const B=ne.useMemo(()=>{var R;return(R=l.socialLoginsConfig)===null||R===void 0||(R=R.loginMethods[un.EMAIL_PASSWORDLESS])===null||R===void 0?void 0:R.showOnModal},[(i=l.socialLoginsConfig)===null||i===void 0?void 0:i.loginMethods]),O=ne.useMemo(()=>{var R;return(R=l.socialLoginsConfig)===null||R===void 0||(R=R.loginMethods[un.SMS_PASSWORDLESS])===null||R===void 0?void 0:R.showOnModal},[(s=l.socialLoginsConfig)===null||s===void 0?void 0:s.loginMethods]);return l.modalVisibilityDelayed&&z.jsx("div",{id:"w3a-modal",className:"w3a-modal",children:z.jsxs("div",{className:`${a.join(" ")} ${l.status!==Zn.INITIALIZED?"w3a--p-6 w3a--pt-7":""} ${(j||B||O)&&!l.externalWalletsVisibility?"":"wallet-adapter-container"}`,children:[l.status!==Zn.INITIALIZED?z.jsxs(z.Fragment,{children:[z.jsx(f2,{onClose:x,appLogo:h,appName:p}),z.jsx("div",{className:"w3a-modal__content w3ajs-content",children:z.jsx(jW,{onClose:k,appLogo:h,modalStatus:l.status,message:d(l.postLoadingMessage),adapter:l.detailedLoaderAdapter,adapterName:l.detailedLoaderAdapterName})})]}):z.jsx("div",{className:`transition-wrapper ${E}`,children:(j||B||O)&&!l.externalWalletsVisibility?z.jsxs(z.Fragment,{children:[z.jsx(f2,{onClose:x,appLogo:h,appName:p}),z.jsxs("div",{className:"w3a-modal__content w3ajs-content",children:[j?z.jsx(vq,{handleSocialLoginClick:R=>C(R),socialLoginsConfig:l.socialLoginsConfig}):null,(B||O)&&z.jsx(wq,{isEmailVisible:B,isSmsVisible:O,adapter:(o=l.socialLoginsConfig)===null||o===void 0?void 0:o.adapter,handleSocialLoginClick:R=>C(R),isPrimaryBtn:F}),l.hasExternalWallets&&L]})]}):z.jsx("div",{className:"w3a-modal__content_external_wallet w3ajs-content",children:z.jsx(dq,{modalStatus:l.status,showBackButton:j||B||O,handleExternalWalletClick:S,chainNamespace:g,walletConnectUri:l.walletConnectUri,config:l.externalWalletsConfig,hideExternalWallets:()=>u(R=>fe(fe({},R),{},{externalWalletsVisibility:!1})),walletRegistry:w,closeModal:x})})}),z.jsx(hq,{})]})})}function Eq(t){const e=document.getElementById("w3a-parent-container");e&&e.remove();const n=document.createElement("section");n.classList.add("w3a-parent-container"),n.setAttribute("id","w3a-parent-container"),n.style.zIndex=t,n.style.position="relative";const r=document.createElement("section");return r.setAttribute("id","w3a-container"),n.appendChild(r),document.body.appendChild(n),r}class Sq extends rl{constructor(e){super(),me(this,"uiConfig",void 0),me(this,"stateEmitter",void 0),me(this,"chainNamespace",void 0),me(this,"walletRegistry",void 0),me(this,"initModal",async()=>{const n={isDark:this.isDark},r=this.uiConfig.defaultLanguage||Ns.en;return r===Ns.de?Ds(()=>import("./german.json-CM4aQ55u.js"),[]).then(i=>(rn.addResourceBundle(r,"translation",i.default),rn.changeLanguage(r))).catch(i=>{We.error(i)}):r===Ns.ja?Ds(()=>import("./japanese.json-DxVPQu-j.js"),[]).then(i=>(rn.addResourceBundle(r,"translation",i.default),rn.changeLanguage(r))).catch(i=>{We.error(i)}):r===Ns.ko?Ds(()=>import("./korean.json-TWuJUjNI.js"),[]).then(i=>(rn.addResourceBundle(r,"translation",i.default),rn.changeLanguage(r))).catch(i=>{We.error(i)}):r===Ns.zh?Ds(()=>import("./mandarin.json-xSgnmXj2.js"),[]).then(i=>(rn.addResourceBundle(r,"translation",i.default),rn.changeLanguage(r))).catch(i=>{We.error(i)}):r===Ns.es?Ds(()=>import("./spanish.json-BEvgdvWb.js"),[]).then(i=>(rn.addResourceBundle(r,"translation",i.default),rn.changeLanguage(r))).catch(i=>{We.error(i)}):r===Ns.fr?Ds(()=>import("./french.json-BNQ3B02_.js"),[]).then(i=>(rn.addResourceBundle(r,"translation",i.default),rn.changeLanguage(r))).catch(i=>{We.error(i)}):r===Ns.pt?Ds(()=>import("./portuguese.json-Ca0Mqd6m.js"),[]).then(i=>(rn.addResourceBundle(r,"translation",i.default),rn.changeLanguage(r))).catch(i=>{We.error(i)}):r===Ns.nl?Ds(()=>import("./dutch.json-Dhde1pa6.js"),[]).then(i=>(rn.addResourceBundle(r,"translation",i.default),rn.changeLanguage(r))).catch(i=>{We.error(i)}):r===Ns.tr?Ds(()=>import("./turkish.json-DHELY_sM.js"),[]).then(i=>(rn.addResourceBundle(r,"translation",i.default),rn.changeLanguage(r))).catch(i=>{We.error(i)}):r===Ns.en&&Ds(()=>Promise.resolve().then(()=>LW),void 0).then(i=>(rn.addResourceBundle(r,"translation",i.default),rn.changeLanguage(r))).catch(i=>{We.error(i)}),new Promise(i=>{var s;this.stateEmitter.once("MOUNTED",()=>(We.info("rendered"),this.setState({status:Zn.INITIALIZED}),i()));const o=Eq(this.uiConfig.modalZIndex);if(n.isDark?o.classList.add("w3a--dark"):o.classList.remove("w3a--dark"),GT(o).render(z.jsx(jw.Provider,{value:n,children:z.jsx(xq,{closeModal:this.closeModal,stateListener:this.stateEmitter,handleShowExternalWallets:this.handleShowExternalWallets,handleExternalWalletClick:this.handleExternalWalletClick,handleSocialLoginClick:this.handleSocialLoginClick,appLogo:n.isDark?this.uiConfig.logoDark:this.uiConfig.logoLight,appName:this.uiConfig.appName,chainNamespace:this.chainNamespace,walletRegistry:this.walletRegistry})})),(s=this.uiConfig)!==null&&s!==void 0&&s.theme){const c=document.getElementById("w3a-parent-container");gH(c,this.uiConfig.theme)}})}),me(this,"addSocialLogins",(n,r,i,s)=>{this.setState({socialLoginsConfig:{adapter:n,loginMethods:r,loginMethodsOrder:i,uiConfig:s}}),We.info("addSocialLogins",n,r,i,s)}),me(this,"addWalletLogins",(n,r)=>{this.setState({externalWalletsConfig:n,externalWalletsInitialized:!0,showExternalWalletsOnly:!!(r!=null&&r.showExternalWalletsOnly),externalWalletsVisibility:!0})}),me(this,"open",()=>{this.setState({modalVisibility:!0}),this.emit(wo.MODAL_VISIBILITY,!0)}),me(this,"closeModal",()=>{this.setState({modalVisibility:!1,externalWalletsVisibility:!1}),this.emit(wo.MODAL_VISIBILITY,!1)}),me(this,"initExternalWalletContainer",()=>{this.setState({hasExternalWallets:!0})}),me(this,"handleShowExternalWallets",n=>{this.emit(wo.INIT_EXTERNAL_WALLETS,{externalWalletsInitialized:n})}),me(this,"handleExternalWalletClick",n=>{We.info("external wallet clicked",n);const{adapter:r}=n;this.emit(wo.LOGIN,{adapter:r})}),me(this,"handleSocialLoginClick",n=>{We.info("social login clicked",n);const{adapter:r,loginParams:i}=n;this.emit(wo.LOGIN,{adapter:r,loginParams:{loginProvider:i.loginProvider,login_hint:i.login_hint,name:i.name}})}),me(this,"setState",n=>{this.stateEmitter.emit("STATE_UPDATED",n)}),me(this,"updateWalletConnect",n=>{n&&this.setState({walletConnectUri:n})}),me(this,"handleAdapterData",n=>{if(n.adapterName===Wt.WALLET_CONNECT_V2){const r=n.data;this.updateWalletConnect(r.uri)}}),me(this,"subscribeCoreEvents",n=>{n.on(It.CONNECTING,r=>{We.info("connecting with adapter",r),(r==null?void 0:r.adapter)!==Wt.WALLET_CONNECT_V2&&this.setState({status:Zn.CONNECTING})}),n.on(It.CONNECTED,r=>{We.debug("connected with adapter",r),r.reconnected?this.setState({status:Zn.CONNECTED}):this.setState({status:Zn.CONNECTED,modalVisibility:!0,postLoadingMessage:"modal.post-loading.connected"})}),n.on(It.ERRORED,r=>{We.error("error",r,r.message),r.code===5e3?this.uiConfig.displayErrorsOnModal?this.setState({modalVisibility:!0,postLoadingMessage:r.message||"modal.post-loading.something-wrong",status:Zn.ERRORED}):this.setState({modalVisibility:!1}):this.setState({modalVisibility:!0,status:Zn.INITIALIZED})}),n.on(It.DISCONNECTED,()=>{this.setState({status:Zn.INITIALIZED,externalWalletsVisibility:!1})}),n.on(It.ADAPTER_DATA_UPDATED,r=>{this.handleAdapterData(r)})}),this.uiConfig=e,e.logoDark||(this.uiConfig.logoDark=$N),e.logoLight||(this.uiConfig.logoLight=DN),e.mode||(this.uiConfig.mode="light"),e.modalZIndex||(this.uiConfig.modalZIndex="99998"),typeof e.displayErrorsOnModal>"u"&&(this.uiConfig.displayErrorsOnModal=!0),e.appName||(this.uiConfig.appName="Web3Auth"),e.loginGridCol||(this.uiConfig.loginGridCol=3),e.primaryButton||(this.uiConfig.primaryButton="socialLogin"),e.defaultLanguage||(this.uiConfig.defaultLanguage=JN(e.defaultLanguage)),this.stateEmitter=new rl,this.chainNamespace=e.chainNamespace,this.walletRegistry=e.walletRegistry,this.subscribeCoreEvents(this.uiConfig.adapterListener)}get isDark(){return this.uiConfig.mode==="dark"||this.uiConfig.mode==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches}}class XN extends zH{constructor(e){if(super(e),me(this,"loginModal",void 0),me(this,"options",void 0),me(this,"modalConfig",xh($H)),this.options=fe({},e),this.options.uiConfig||(this.options.uiConfig={}),!this.coreOptions.privateKeyProvider)throw Ue.invalidParams("privateKeyProvider is required")}setModalConfig(e){super.checkInitRequirements(),this.modalConfig=e}async initModal(e){var n;super.checkInitRequirements();let r;try{var i;r=await CN(this.options.clientId,this.options.web3AuthNetwork,(i=this.options.accountAbstractionProvider)===null||i===void 0?void 0:i.config.smartAccountInit.name)}catch(m){throw We.error("Failed to fetch project configurations",m),Ue.notReady("failed to fetch project configurations",m)}const{whitelabel:s}=r;this.options.uiConfig=_o(xh(s||{}),this.options.uiConfig||{}),this.options.uiConfig.defaultLanguage||(this.options.uiConfig.defaultLanguage=JN(this.options.uiConfig.defaultLanguage)),this.options.uiConfig.mode||(this.options.uiConfig.mode="light");let o={others:{},default:{}};if(!((n=e)!==null&&n!==void 0&&n.hideWalletDiscovery))try{o=await TH(BH)}catch(m){We.error("Failed to fetch wallet registry",m)}this.loginModal=new Sq(fe(fe({},this.options.uiConfig),{},{adapterListener:this,chainNamespace:this.options.chainConfig.chainNamespace,walletRegistry:o})),this.subscribeToLoginModalEvents();const{sms_otp_enabled:a,whitelist:c,key_export_enabled:l}=r;if(a!==void 0){var u,d;const m={[Wt.AUTH]:{label:Wt.AUTH,loginMethods:{[un.SMS_PASSWORDLESS]:{name:un.SMS_PASSWORDLESS,showOnModal:a,showOnDesktop:a,showOnMobile:a}}}};if((u=e)!==null&&u!==void 0&&u.modalConfig||(e={modalConfig:{}}),((d=e.modalConfig[Wt.AUTH])===null||d===void 0||(d=d.loginMethods)===null||d===void 0||(d=d[un.SMS_PASSWORDLESS])===null||d===void 0?void 0:d.showOnModal)===!0&&a===!1)throw Ue.invalidParams("must enable sms otp on dashboard in order to utilise it");e.modalConfig=_o(m,xh(e.modalConfig))}await this.loginModal.initModal();const f=this.options.chainConfig,h=[...new Set([...Object.keys(this.modalConfig.adapters||{}),...Object.keys(this.walletAdapters)])],p=h.map(async m=>{var x,E,A,k;let S=((x=this.modalConfig.adapters)===null||x===void 0?void 0:x[m])||{label:IN[m]||m.split("-").map(zE).join(" "),showOnModal:!0,showOnMobile:!0,showOnDesktop:!0};(E=e)!==null&&E!==void 0&&(E=E.modalConfig)!==null&&E!==void 0&&E[m]&&(S=fe(fe({},S),e.modalConfig[m])),this.modalConfig.adapters[m]=S;const C=this.walletAdapters[m];if(We.debug("adapter config",m,(A=this.modalConfig.adapters)===null||A===void 0?void 0:A[m].showOnModal,C),!C&&(k=this.modalConfig.adapters)!==null&&k!==void 0&&k[m].showOnModal){if(m===Wt.AUTH){var F;const T=NN(),{clientId:I,useCoreKitKey:M,chainConfig:Y,web3AuthNetwork:X,sessionTime:Z,privateKeyProvider:le}=this.coreOptions,ae=fe(fe({},nl(f.chainNamespace,(F=this.coreOptions.chainConfig)===null||F===void 0?void 0:F.chainId,I)),Y);if(!le)throw Ue.invalidParams("privateKeyProvider is required");const ye=fe(fe({},T.adapterSettings),{},{clientId:I,network:X,whiteLabel:this.options.uiConfig});a!==void 0&&(ye.loginConfig={[un.SMS_PASSWORDLESS]:{showOnModal:a,showOnDesktop:a,showOnMobile:a,showOnSocialBackupFactor:a}}),c&&(ye.originData=c.signed_urls),this.options.uiConfig.uxMode&&(ye.uxMode=this.options.uiConfig.uxMode);const Ee=new MH(fe(fe({},T),{},{clientId:I,useCoreKitKey:M,chainConfig:fe({},ae),adapterSettings:ye,sessionTime:Z,web3AuthNetwork:X,privateKeyProvider:le}));return this.walletAdapters[m]=Ee,m}throw Ue.invalidParams(`Adapter ${m} is not configured`)}else if((C==null?void 0:C.type)===ho.IN_APP||(C==null?void 0:C.type)===ho.EXTERNAL||m===this.cachedAdapter){var N;if(!((N=this.modalConfig.adapters)!==null&&N!==void 0&&N[m].showOnModal))return;if(this.walletAdapters[m].setAdapterSettings({clientId:this.options.clientId,sessionTime:this.options.sessionTime,web3AuthNetwork:this.options.web3AuthNetwork,useCoreKitKey:this.coreOptions.useCoreKitKey}),!C.chainConfigProxy){var L;const T=fe(fe({},nl(f.chainNamespace,(L=this.coreOptions.chainConfig)===null||L===void 0?void 0:L.chainId,this.coreOptions.clientId)),this.coreOptions.chainConfig);this.walletAdapters[m].setAdapterSettings({chainConfig:T})}if(m===Wt.AUTH){var j;const T=this.walletAdapters[m];if(this.coreOptions.privateKeyProvider){if(T.currentChainNamespace!==this.coreOptions.privateKeyProvider.currentChainConfig.chainNamespace)throw Ue.incompatibleChainNameSpace("private key provider is not compatible with provided chainNamespace for auth adapter");T.setAdapterSettings({privateKeyProvider:this.coreOptions.privateKeyProvider})}if(a!==void 0&&T.setAdapterSettings({loginConfig:{[un.SMS_PASSWORDLESS]:{showOnModal:a,showOnDesktop:a,showOnMobile:a,showOnSocialBackupFactor:a}}}),c&&T.setAdapterSettings({originData:c.signed_urls}),(j=this.options.uiConfig)!==null&&j!==void 0&&j.uxMode&&T.setAdapterSettings({uxMode:this.options.uiConfig.uxMode}),T.setAdapterSettings({whiteLabel:this.options.uiConfig}),!T.privateKeyProvider)throw Ue.invalidParams("privateKeyProvider is required for auth adapter")}else if(m===Wt.WALLET_CONNECT_V2){const T=this.walletAdapters[m],{wallet_connect_enabled:I,wallet_connect_project_id:M}=r;if(I===!1){var B,O,R;this.modalConfig.adapters=fe(fe({},(B=this.modalConfig.adapters)!==null&&B!==void 0?B:{}),{},{[Wt.WALLET_CONNECT_V2]:fe(fe({},(O=(R=this.modalConfig.adapters)===null||R===void 0?void 0:R[Wt.WALLET_CONNECT_V2])!==null&&O!==void 0?O:{}),{},{showOnModal:!1})}),this.modalConfig.adapters[Wt.WALLET_CONNECT_V2].showOnModal=!1}else{var D;if(!(T!=null&&(D=T.adapterOptions)!==null&&D!==void 0&&(D=D.adapterSettings)!==null&&D!==void 0&&(D=D.walletConnectInitOptions)!==null&&D!==void 0&&D.projectId)&&!M)throw Ue.invalidParams("Invalid wallet connect project id. Please configure it on the dashboard");M&&T.setAdapterSettings({adapterSettings:{walletConnectInitOptions:{projectId:M}}})}}return m}}),g=await Promise.all(p),w=Object.values(this.walletAdapters).some(m=>{var x,E,A;if(m.type!==ho.IN_APP||((x=this.modalConfig.adapters)===null||x===void 0||(x=x[m.name])===null||x===void 0?void 0:x.showOnModal)!==!0)return!1;if(!((E=this.modalConfig.adapters)!==null&&E!==void 0&&(E=E[m.name])!==null&&E!==void 0&&E.loginMethods))return!0;const k=rA(m.name,(A=this.modalConfig.adapters[m.name])===null||A===void 0?void 0:A.loginMethods);return!!Object.values(k).some(S=>S.showOnModal)});We.debug(w,this.walletAdapters,g,"hasInAppWallets");const y=g.map(async m=>{if(m)try{const x=this.walletAdapters[m];if(this.cachedAdapter!==m&&x.type===ho.EXTERNAL)return;this.subscribeToAdapterEvents(x),x.status===Le.NOT_READY&&await x.init({autoConnect:this.cachedAdapter===m}),x.type===ho.IN_APP&&this.initializeInAppWallet(m)}catch(x){We.error(x,"error while initializing adapter ",m)}});this.commonJRPCProvider=await Mw.getProviderInstance({chainConfig:this.coreOptions.chainConfig}),typeof l=="boolean"&&(this.coreOptions.privateKeyProvider.setKeyExportFlag(l),this.commonJRPCProvider.setKeyExportFlag(l)),await Promise.all(y),this.status===Le.NOT_READY&&(this.status=Le.READY,this.emit(It.READY));const b=h.some(m=>{var x,E,A;return m===Wt.WALLET_CONNECT_V2&&(x=e)!==null&&x!==void 0&&x.hideWalletDiscovery?!1:((E=this.walletAdapters[m])===null||E===void 0?void 0:E.type)===ho.EXTERNAL&&((A=this.modalConfig.adapters)===null||A===void 0?void 0:A[m].showOnModal)});b&&this.loginModal.initExternalWalletContainer(),!w&&b&&await this.initExternalWalletAdapters(!1,{showExternalWalletsOnly:!0})}async connect(){if(!this.loginModal)throw Ue.notReady("Login modal is not initialized");return this.connectedAdapterName&&this.status===Le.CONNECTED&&this.provider?this.provider:(this.loginModal.open(),new Promise((e,n)=>{this.once(It.CONNECTED,()=>e(this.provider)),this.once(It.ERRORED,r=>n(r)),this.once(wo.MODAL_VISIBILITY,r=>{if(!r&&this.status!==Le.CONNECTED)return n(new Error("User closed the modal"))})}))}async initExternalWalletAdapters(e,n){if(e)return;const r={};Object.keys(this.walletAdapters).forEach(async i=>{const s=this.walletAdapters[i];if((s==null?void 0:s.type)===ho.EXTERNAL){if(We.debug("init external wallet",this.cachedAdapter,i,s.status),this.subscribeToAdapterEvents(s),this.cachedAdapter===i)return;if(s.status===Le.NOT_READY)await s.init({autoConnect:this.cachedAdapter===i}).then(()=>{const o=this.modalConfig.adapters[i];r[i]=fe(fe({},o),{},{isInjected:s.isInjected}),this.loginModal.addWalletLogins(r,{showExternalWalletsOnly:!!(n!=null&&n.showExternalWalletsOnly)})}).catch(o=>We.error(o,"error while initializing adapter",i));else if(s.status===Le.READY||s.status===Le.CONNECTING){const o=this.modalConfig.adapters[i];r[i]=fe(fe({},o),{},{isInjected:s.isInjected}),this.loginModal.addWalletLogins(r,{showExternalWalletsOnly:!!(n!=null&&n.showExternalWalletsOnly)})}}})}initializeInAppWallet(e){if(We.info("adapterInitResults",e),this.walletAdapters[e].type===ho.IN_APP){var n,r,i,s;this.loginModal.addSocialLogins(e,rA(e,(n=this.modalConfig.adapters[e])===null||n===void 0?void 0:n.loginMethods),((r=this.options.uiConfig)===null||r===void 0?void 0:r.loginMethodsOrder)||KE,fe(fe({},this.options.uiConfig),{},{loginGridCol:((i=this.options.uiConfig)===null||i===void 0?void 0:i.loginGridCol)||3,primaryButton:((s=this.options.uiConfig)===null||s===void 0?void 0:s.primaryButton)||"socialLogin"}))}}subscribeToLoginModalEvents(){this.loginModal.on(wo.LOGIN,async e=>{try{await this.connectTo(e.adapter,e.loginParams)}catch(n){We.error(`Error while connecting to adapter: ${e.adapter}`,n)}}),this.loginModal.on(wo.INIT_EXTERNAL_WALLETS,async e=>{await this.initExternalWalletAdapters(e.externalWalletsInitialized)}),this.loginModal.on(wo.DISCONNECT,async()=>{try{await this.logout()}catch(e){We.error("Error while disconnecting",e)}}),this.loginModal.on(wo.MODAL_VISIBILITY,async e=>{We.debug("is login modal visible",e),this.emit(wo.MODAL_VISIBILITY,e);const n=this.walletAdapters[Wt.WALLET_CONNECT_V2];if(n){const r=n==null?void 0:n.status;if(We.debug("trying refreshing wc session",e,r),e&&(r===Le.READY||r===Le.CONNECTING)){We.debug("refreshing wc session");try{n.connect()}catch(i){We.error("Error while disconnecting to wallet connect in core",i)}}!e&&this.status===Le.CONNECTED&&(r===Le.READY||r===Le.CONNECTING)&&(We.debug("this stops wc adapter from trying to reconnect once proposal expires"),n.status=Le.READY)}})}}class ma{constructor(e){me(this,"provider",void 0),this.provider=e}async requestAccounts(){return await this.provider.request({method:"requestAccounts"})}async signAndSendTransaction(e){const{signature:n}=await this.provider.request({method:"signAndSendTransaction",params:{message:e}});return{signature:n}}async signTransaction(e){return await this.provider.request({method:"signTransaction",params:{message:e}})}async signAllTransactions(e){return await this.provider.request({method:"signAllTransactions",params:{message:e}})}async signMessage(e){return await this.provider.request({method:"signMessage",params:{message:e}})}async request(e){return await this.provider.request(e)}}function _q({getAccounts:t}){return Vr(async(e,n,r)=>{const{method:i}=e;if(i!=="getAccounts")return r();if(!t)throw new Error("WalletMiddleware - opts.getAccounts not provided");const s=await t(e);n.result=s})}function kq({requestAccounts:t}){return Vr(async(e,n,r)=>{const{method:i}=e;if(i!=="requestAccounts")return r();if(!t)throw new Error("WalletMiddleware - opts.requestAccounts not provided");const s=await t(e);n.result=s})}function Bs(t,e){return Vr(async(n,r,i)=>{const{method:s}=n;if(s!==t)return i();if(!e)throw new Error(`WalletMiddleware - ${t} not provided`);const o=await e(n);r.result=o})}function qE(t){const{getAccounts:e,requestAccounts:n,signTransaction:r,signAndSendTransaction:i,signAllTransactions:s,signMessage:o,getPrivateKey:a,getSecretKey:c,getPublicKey:l}=t;return hl([kq({requestAccounts:n}),_q({getAccounts:e}),Bs("signTransaction",r),Bs("signAndSendTransaction",i),Bs("signAllTransactions",s),Bs("signMessage",o),Bs("solanaPrivateKey",a),Bs("private_key",a),Bs("public_key",l),Bs("solanaPublicKey",l),Bs("solanaSecretKey",c)])}function Aq({addNewChainConfig:t,switchSolanaChain:e}){return hl([Bs("addSolanaChain",t),Bs("switchSolanaChain",e)])}function Iq({updatePrivatekey:t}){return hl([Bs("updateAccount",t)])}function Cq(t){return(e,n,r,i)=>e.method==="solana_chainId"?(n.result=t,i()):r()}function Rq(t){return(e,n,r,i)=>e.method==="solana_provider_config"?(n.result=t,i()):r()}function QN(t){const{chainId:e}=t;return hl([Cq(e),Rq(t)])}function e8(t){const{rpcTarget:e}=t,n=jE({rpcTarget:e});return{networkMiddleware:hl([QN(t),n]),fetchMiddleware:n}}class Tq extends Bw{constructor({config:e,state:n}){super({config:e,state:n})}async switchChain(e){throw ut.unsupportedOperation("Chain switching is not supported by this adapter")}async setupProvider(e){const n=new Hi,r=this.getProviderHandlers(e),i=qE(r);n.push(i);const s=QN(this.config.chainConfig);n.push(s);const o=this.getInjectedProviderProxy(e);o&&n.push(o);const a=np(n);this.updateProviderEngineProxy(a),await this.lookupNetwork()}async lookupNetwork(){const{chainConfig:e}=this.config;return this.update({chainId:e.chainId}),e.chainId||""}getInjectedProviderProxy(e){}}function Oq(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var p=0,g=0,w=0,y=h.length;w!==y&&h[w]===0;)w++,p++;for(var b=(y-w)*l+1>>>0,m=new Uint8Array(b);w!==y;){for(var x=h[w],E=0,A=b-1;(x!==0||E<g)&&A!==-1;A--,E++)x+=256*m[A]>>>0,m[A]=x%o>>>0,x=x/o>>>0;if(x!==0)throw new Error("Non-zero carry");g=E,w++}for(var k=b-g;k!==b&&m[k]===0;)k++;for(var S=a.repeat(p);k<b;++k)S+=t.charAt(m[k]);return S}function d(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;for(var p=0,g=0,w=0;h[p]===a;)g++,p++;for(var y=(h.length-p)*c+1>>>0,b=new Uint8Array(y);h[p];){var m=h.charCodeAt(p);if(m>255)return;var x=e[m];if(x===255)return;for(var E=0,A=y-1;(x!==0||E<w)&&A!==-1;A--,E++)x+=o*b[A]>>>0,b[A]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");w=E,p++}for(var k=y-w;k!==y&&b[k]===0;)k++;for(var S=new Uint8Array(g+(y-k)),C=g;k!==y;)S[C++]=b[k++];return S}function f(h){var p=d(h);if(p)return p;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:f}}var Pq=Oq;const Nq=Pq,Lq="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Dq=Nq(Lq);const R0=vi(Dq),$q=t=>({requestAccounts:async()=>t.publicKey?[R0.encode(t.publicKey.toBytes())]:[],getPublicKey:async()=>t.publicKey?R0.encode(t.publicKey.toBytes()):"",getAccounts:async()=>t.publicKey?[R0.encode(t.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw _t.methodNotSupported()},getSecretKey:async()=>{throw _t.methodNotSupported()},signTransaction:async n=>await t.signTransaction(n.params.message),signMessage:async n=>(await t.signMessage(n.params.message,n.params.display)).signature,signAllTransactions:async n=>{var r,i;if(!((r=n.params)!==null&&r!==void 0&&r.message)||!((i=n.params)!==null&&i!==void 0&&i.message.length))throw _t.invalidParams("message");return await t.signAllTransactions(n.params.message)},signAndSendTransaction:async n=>({signature:(await t.signAndSendTransaction(n.params.message)).signature})});class Bq extends Tq{getProviderHandlers(e){return $q(e)}}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Mq(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Im(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Nd(t,...e){if(!Mq(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Uq(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Im(t.outputLen),Im(t.blockLen)}function Ld(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function t8(t,e){Nd(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function jq(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ol(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Ob(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Lo(t,e){return t<<32-e|t>>>e}const Fq=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function zq(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Kq(t){for(let e=0;e<t.length;e++)t[e]=zq(t[e]);return t}const iA=Fq?t=>t:Kq;function Hq(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Fw(t){return typeof t=="string"&&(t=Hq(t)),Nd(t),t}let VE=class{};function GE(t){const e=r=>t().update(Fw(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Wq(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function qq(t,e,n){return t&e^~t&n}function Vq(t,e,n){return t&e^t&n^e&n}class n8 extends VE{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Ob(this.buffer)}update(e){Ld(this),e=Fw(e),Nd(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Ob(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ld(this),t8(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,ol(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;Wq(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=Ob(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const uc=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),di=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Fg=BigInt(2**32-1),sA=BigInt(32);function Gq(t,e=!1){return e?{h:Number(t&Fg),l:Number(t>>sA&Fg)}:{h:Number(t>>sA&Fg)|0,l:Number(t&Fg)|0}}function r8(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=Gq(t[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const oA=(t,e,n)=>t>>>n,aA=(t,e,n)=>t<<32-n|e>>>n,Pu=(t,e,n)=>t>>>n|e<<32-n,Nu=(t,e,n)=>t<<32-n|e>>>n,zg=(t,e,n)=>t<<64-n|e>>>n-32,Kg=(t,e,n)=>t>>>n-32|e<<64-n,Yq=(t,e,n)=>t<<n|e>>>32-n,Jq=(t,e,n)=>e<<n|t>>>32-n,Zq=(t,e,n)=>e<<n-32|t>>>64-n,Xq=(t,e,n)=>t<<n-32|e>>>64-n;function wa(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const Qq=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),eV=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,tV=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),nV=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,rV=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),iV=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,sV=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dc=new Uint32Array(64);class oV extends n8{constructor(e=32){super(64,e,8,!1),this.A=uc[0]|0,this.B=uc[1]|0,this.C=uc[2]|0,this.D=uc[3]|0,this.E=uc[4]|0,this.F=uc[5]|0,this.G=uc[6]|0,this.H=uc[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)dc[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=dc[d-15],h=dc[d-2],p=Lo(f,7)^Lo(f,18)^f>>>3,g=Lo(h,17)^Lo(h,19)^h>>>10;dc[d]=g+dc[d-7]+p+dc[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=Lo(a,6)^Lo(a,11)^Lo(a,25),h=u+f+qq(a,c,l)+sV[d]+dc[d]|0,g=(Lo(r,2)^Lo(r,13)^Lo(r,22))+Vq(r,i,s)|0;u=l,l=c,c=a,a=o+h|0,o=s,s=i,i=r,r=h+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){ol(dc)}destroy(){this.set(0,0,0,0,0,0,0,0),ol(this.buffer)}}const i8=r8(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),aV=i8[0],cV=i8[1],fc=new Uint32Array(80),hc=new Uint32Array(80);class lV extends n8{constructor(e=64){super(128,e,16,!1),this.Ah=di[0]|0,this.Al=di[1]|0,this.Bh=di[2]|0,this.Bl=di[3]|0,this.Ch=di[4]|0,this.Cl=di[5]|0,this.Dh=di[6]|0,this.Dl=di[7]|0,this.Eh=di[8]|0,this.El=di[9]|0,this.Fh=di[10]|0,this.Fl=di[11]|0,this.Gh=di[12]|0,this.Gl=di[13]|0,this.Hh=di[14]|0,this.Hl=di[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,i,s,o,a,c,l,u,d,f,h,p,g,w]}set(e,n,r,i,s,o,a,c,l,u,d,f,h,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let m=0;m<16;m++,n+=4)fc[m]=e.getUint32(n),hc[m]=e.getUint32(n+=4);for(let m=16;m<80;m++){const x=fc[m-15]|0,E=hc[m-15]|0,A=Pu(x,E,1)^Pu(x,E,8)^oA(x,E,7),k=Nu(x,E,1)^Nu(x,E,8)^aA(x,E,7),S=fc[m-2]|0,C=hc[m-2]|0,F=Pu(S,C,19)^zg(S,C,61)^oA(S,C,6),N=Nu(S,C,19)^Kg(S,C,61)^aA(S,C,6),L=tV(k,N,hc[m-7],hc[m-16]),j=nV(L,A,F,fc[m-7],fc[m-16]);fc[m]=j|0,hc[m]=L|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let m=0;m<80;m++){const x=Pu(d,f,14)^Pu(d,f,18)^zg(d,f,41),E=Nu(d,f,14)^Nu(d,f,18)^Kg(d,f,41),A=d&h^~d&g,k=f&p^~f&w,S=rV(b,E,k,cV[m],hc[m]),C=iV(S,y,x,A,aV[m],fc[m]),F=S|0,N=Pu(r,i,28)^zg(r,i,34)^zg(r,i,39),L=Nu(r,i,28)^Kg(r,i,34)^Kg(r,i,39),j=r&s^r&a^s&a,B=i&o^i&c^o&c;y=g|0,b=w|0,g=h|0,w=p|0,h=d|0,p=f|0,{h:d,l:f}=wa(l|0,u|0,C|0,F|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const O=Qq(F,L,B);r=eV(O,C,N,j),i=O|0}({h:r,l:i}=wa(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=wa(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=wa(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=wa(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:f}=wa(this.Eh|0,this.El|0,d|0,f|0),{h,l:p}=wa(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:w}=wa(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=wa(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,i,s,o,a,c,l,u,d,f,h,p,g,w,y,b)}roundClean(){ol(fc,hc)}destroy(){ol(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const uV=GE(()=>new oV),dV=GE(()=>new lV);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const YE=BigInt(0),h2=BigInt(1);function Dd(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function JE(t){if(!Dd(t))throw new Error("Uint8Array expected")}function Jc(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Hg(t){const e=t.toString(16);return e.length&1?"0"+e:e}function s8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?YE:BigInt("0x"+t)}const o8=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",fV=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $d(t){if(JE(t),o8)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=fV[t[n]];return e}const ya={_0:48,_9:57,A:65,F:70,a:97,f:102};function cA(t){if(t>=ya._0&&t<=ya._9)return t-ya._0;if(t>=ya.A&&t<=ya.F)return t-(ya.A-10);if(t>=ya.a&&t<=ya.f)return t-(ya.a-10)}function Cm(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(o8)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=cA(t.charCodeAt(s)),a=cA(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Jl(t){return s8($d(t))}function _h(t){return JE(t),s8($d(Uint8Array.from(t).reverse()))}function op(t,e){return Cm(t.toString(16).padStart(e*2,"0"))}function Rm(t,e){return op(t,e).reverse()}function lr(t,e,n){let r;if(typeof e=="string")try{r=Cm(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Dd(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function Bd(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];JE(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const Pb=t=>typeof t=="bigint"&&YE<=t;function ZE(t,e,n){return Pb(t)&&Pb(e)&&Pb(n)&&e<=t&&t<n}function yo(t,e,n,r){if(!ZE(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function hV(t){let e;for(e=0;t>YE;t>>=h2,e+=1);return e}const zw=t=>(h2<<BigInt(t))-h2,Nb=t=>new Uint8Array(t),lA=t=>Uint8Array.from(t);function pV(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Nb(t),i=Nb(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),c=(d=Nb(0))=>{i=a(lA([0]),d),r=a(),d.length!==0&&(i=a(lA([1]),d),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){r=a();const h=r.slice();f.push(h),d+=r.length}return Bd(...f)};return(d,f)=>{o(),c(d);let h;for(;!(h=f(l()));)c();return o(),h}}const gV={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Dd(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function $p(t,e,n={}){const r=(i,s,o)=>{const a=gV[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}function Tm(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zi=BigInt(0),Pr=BigInt(1),Ul=BigInt(2),mV=BigInt(3),p2=BigInt(4),uA=BigInt(5),dA=BigInt(8);function Bn(t,e){const n=t%e;return n>=Zi?n:e+n}function Yn(t,e,n){let r=t;for(;e-- >Zi;)r*=r,r%=n;return r}function g2(t,e){if(t===Zi)throw new Error("invert: expected non-zero number");if(e<=Zi)throw new Error("invert: expected positive modulus, got "+e);let n=Bn(t,e),r=e,i=Zi,s=Pr;for(;n!==Zi;){const a=r/n,c=r%n,l=i-s*a;r=n,n=c,i=s,s=l}if(r!==Pr)throw new Error("invert: does not exist");return Bn(i,e)}function wV(t){let e=t-Pr,n=0;for(;e%Ul===Zi;)e/=Ul,n++;let r=Ul;const i=Bp(t);for(;r<t&&fA(i,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1){const o=(t+Pr)/p2;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(e+Pr)/Ul;return function(a,c){if(!fA(a,c))throw new Error("Cannot find square root");let l=n,u=a.pow(a.mul(a.ONE,r),e),d=a.pow(c,s),f=a.pow(c,e);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let h=1;for(let g=a.sqr(f);h<l&&!a.eql(g,a.ONE);h++)g=a.sqr(g);const p=a.pow(u,Pr<<BigInt(l-h-1));u=a.sqr(p),d=a.mul(d,p),f=a.mul(f,u),l=h}return d}}function yV(t){return t%p2===mV?function(n,r){const i=(t+Pr)/p2,s=n.pow(r,i);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}:t%dA===uA?function(n,r){const i=n.mul(r,Ul),s=(t-uA)/dA,o=n.pow(i,s),a=n.mul(r,o),c=n.mul(n.mul(a,Ul),o),l=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(l),r))throw new Error("Cannot find square root");return l}:wV(t)}const bV=(t,e)=>(Bn(t,e)&Pr)===Pr,vV=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function xV(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=vV.reduce((r,i)=>(r[i]="function",r),e);return $p(t,n)}function EV(t,e,n){if(n<Zi)throw new Error("invalid exponent, negatives unsupported");if(n===Zi)return t.ONE;if(n===Pr)return e;let r=t.ONE,i=e;for(;n>Zi;)n&Pr&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Pr;return r}function XE(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),s),r}function SV(t,e){const n=(t.ORDER-Pr)/Ul,r=t.pow(e,n),i=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("Cannot find square root: probably non-prime P");return i?1:s?0:-1}function fA(t,e){const n=SV(t,e);return n===0||n===1}function a8(t,e){e!==void 0&&su.anumber(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Bp(t,e,n=!1,r={}){if(t<=Zi)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=a8(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:zw(i),ZERO:Zi,ONE:Pr,create:c=>Bn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Zi<=c&&c<t},is0:c=>c===Zi,isOdd:c=>(c&Pr)===Pr,neg:c=>Bn(-c,t),eql:(c,l)=>c===l,sqr:c=>Bn(c*c,t),add:(c,l)=>Bn(c+l,t),sub:(c,l)=>Bn(c-l,t),mul:(c,l)=>Bn(c*l,t),pow:(c,l)=>EV(a,c,l),div:(c,l)=>Bn(c*g2(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>g2(c,t),sqrt:r.sqrt||(c=>(o||(o=yV(t)),o(a,c))),toBytes:c=>n?Rm(c,s):op(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?_h(c):Jl(c)},invertBatch:c=>XE(a,c),cmov:(c,l,u)=>u?l:c});return Object.freeze(a)}function c8(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function l8(t){const e=c8(t);return e+Math.ceil(e/2)}function _V(t,e,n=!1){const r=t.length,i=c8(e),s=l8(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?_h(t):Jl(t),a=Bn(o,e-Pr)+Pr;return n?Rm(a,i):op(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hA=BigInt(0),m2=BigInt(1);function Lb(t,e){const n=e.negate();return t?n:e}function u8(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Db(t,e){u8(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),i=2**t,s=zw(t),o=BigInt(t);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function pA(t,e,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(t&i),c=t>>o;a>r&&(a-=s,c+=m2);const l=e*r,u=l+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:l}}function kV(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function AV(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const $b=new WeakMap,d8=new WeakMap;function Bb(t){return d8.get(t)||1}function f8(t,e){return{constTimeNegate:Lb,hasPrecomputes(n){return Bb(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>hA;)r&m2&&(i=i.add(s)),s=s.double(),r>>=m2;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=Db(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){let s=t.ZERO,o=t.BASE;const a=Db(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:p}=pA(i,c,a);i=l,d?o=o.add(Lb(h,r[p])):s=s.add(Lb(f,r[u]))}return{p:s,f:o}},wNAFUnsafe(n,r,i,s=t.ZERO){const o=Db(n,e);for(let a=0;a<o.windows&&i!==hA;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=pA(i,a,o);if(i=c,!u){const f=r[l];s=s.add(d?f.negate():f)}}return s},getPrecomputes(n,r,i){let s=$b.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&$b.set(r,i(s))),s},wNAFCached(n,r,i){const s=Bb(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=Bb(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){u8(r,e),d8.set(n,r),$b.delete(n)}}}function h8(t,e,n,r){if(kV(n,t),AV(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=hV(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=zw(o),c=new Array(Number(a)+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let h=0;h<r.length;h++){const p=r[h],g=Number(p>>BigInt(d)&a);c[g]=c[g].add(n[h])}let f=i;for(let h=c.length-1,p=i;h>0;h--)p=p.add(c[h]),f=f.add(p);if(u=u.add(f),d!==0)for(let h=0;h<o;h++)u=u.double()}return u}function QE(t){return xV(t.Fp),$p(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...a8(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Do=BigInt(0),ki=BigInt(1),gA=BigInt(2),IV=BigInt(8),CV={zip215:!0};function RV(t){const e=QE(t);return $p(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function TV(t){const e=RV(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=gA<<BigInt(a*8)-ki,u=n.create,d=Bp(e.n,e.nBitLength),f=e.uvRatio||((D,T)=>{try{return{isValid:!0,value:n.sqrt(D*n.inv(T))}}catch{return{isValid:!1,value:Do}}}),h=e.adjustScalarBytes||(D=>D),p=e.domain||((D,T,I)=>{if(Jc("phflag",I),T.length||I)throw new Error("Contexts/pre-hash are not supported");return D});function g(D,T,I=!1){const M=I?ki:Do;yo("coordinate "+D,T,M,l)}function w(D){if(!(D instanceof m))throw new Error("ExtendedPoint expected")}const y=Tm((D,T)=>{const{ex:I,ey:M,ez:Y}=D,X=D.is0();T==null&&(T=X?IV:n.inv(Y));const Z=u(I*T),le=u(M*T),ae=u(Y*T);if(X)return{x:Do,y:ki};if(ae!==ki)throw new Error("invZ was invalid");return{x:Z,y:le}}),b=Tm(D=>{const{a:T,d:I}=e;if(D.is0())throw new Error("bad point: ZERO");const{ex:M,ey:Y,ez:X,et:Z}=D,le=u(M*M),ae=u(Y*Y),ye=u(X*X),Ee=u(ye*ye),ee=u(le*T),te=u(ye*u(ee+ae)),J=u(Ee+u(I*u(le*ae)));if(te!==J)throw new Error("bad point: equation left != right (1)");const Q=u(M*Y),oe=u(X*Z);if(Q!==oe)throw new Error("bad point: equation left != right (2)");return!0});class m{constructor(T,I,M,Y){g("x",T),g("y",I),g("z",M,!0),g("t",Y),this.ex=T,this.ey=I,this.ez=M,this.et=Y,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(T){if(T instanceof m)throw new Error("extended point not allowed");const{x:I,y:M}=T||{};return g("x",I),g("y",M),new m(I,M,ki,u(I*M))}static normalizeZ(T){const I=XE(n,T.map(M=>M.ez));return T.map((M,Y)=>M.toAffine(I[Y])).map(m.fromAffine)}static msm(T,I){return h8(m,d,T,I)}_setWindowSize(T){A.setWindowSize(this,T)}assertValidity(){b(this)}equals(T){w(T);const{ex:I,ey:M,ez:Y}=this,{ex:X,ey:Z,ez:le}=T,ae=u(I*le),ye=u(X*Y),Ee=u(M*le),ee=u(Z*Y);return ae===ye&&Ee===ee}is0(){return this.equals(m.ZERO)}negate(){return new m(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:T}=e,{ex:I,ey:M,ez:Y}=this,X=u(I*I),Z=u(M*M),le=u(gA*u(Y*Y)),ae=u(T*X),ye=I+M,Ee=u(u(ye*ye)-X-Z),ee=ae+Z,te=ee-le,J=ae-Z,Q=u(Ee*te),oe=u(ee*J),W=u(Ee*J),V=u(te*ee);return new m(Q,oe,V,W)}add(T){w(T);const{a:I,d:M}=e,{ex:Y,ey:X,ez:Z,et:le}=this,{ex:ae,ey:ye,ez:Ee,et:ee}=T,te=u(Y*ae),J=u(X*ye),Q=u(le*M*ee),oe=u(Z*Ee),W=u((Y+X)*(ae+ye)-te-J),V=oe-Q,se=oe+Q,Re=u(J-I*te),Pe=u(W*V),ze=u(se*Re),ht=u(W*Re),pt=u(V*se);return new m(Pe,ze,pt,ht)}subtract(T){return this.add(T.negate())}wNAF(T){return A.wNAFCached(this,T,m.normalizeZ)}multiply(T){const I=T;yo("scalar",I,ki,r);const{p:M,f:Y}=this.wNAF(I);return m.normalizeZ([M,Y])[0]}multiplyUnsafe(T,I=m.ZERO){const M=T;return yo("scalar",M,Do,r),M===Do?E:this.is0()||M===ki?this:A.wNAFCachedUnsafe(this,M,m.normalizeZ,I)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return A.unsafeLadder(this,r).is0()}toAffine(T){return y(this,T)}clearCofactor(){const{h:T}=e;return T===ki?this:this.multiplyUnsafe(T)}static fromHex(T,I=!1){const{d:M,a:Y}=e,X=n.BYTES;T=lr("pointHex",T,X),Jc("zip215",I);const Z=T.slice(),le=T[X-1];Z[X-1]=le&-129;const ae=_h(Z),ye=I?l:n.ORDER;yo("pointHex.y",ae,Do,ye);const Ee=u(ae*ae),ee=u(Ee-ki),te=u(M*Ee-Y);let{isValid:J,value:Q}=f(ee,te);if(!J)throw new Error("Point.fromHex: invalid y coordinate");const oe=(Q&ki)===ki,W=(le&128)!==0;if(!I&&Q===Do&&W)throw new Error("Point.fromHex: x=0 and x_0=1");return W!==oe&&(Q=u(-Q)),m.fromAffine({x:Q,y:ae})}static fromPrivateKey(T){const{scalar:I}=C(T);return x.multiply(I)}toRawBytes(){const{x:T,y:I}=this.toAffine(),M=Rm(I,n.BYTES);return M[M.length-1]|=T&ki?128:0,M}toHex(){return $d(this.toRawBytes())}}m.BASE=new m(e.Gx,e.Gy,ki,u(e.Gx*e.Gy)),m.ZERO=new m(Do,ki,ki,Do);const{BASE:x,ZERO:E}=m,A=f8(m,a*8);function k(D){return Bn(D,r)}function S(D){return k(_h(D))}function C(D){const T=n.BYTES;D=lr("private key",D,T);const I=lr("hashed private key",s(D),2*T),M=h(I.slice(0,T)),Y=I.slice(T,2*T),X=S(M);return{head:M,prefix:Y,scalar:X}}function F(D){const{head:T,prefix:I,scalar:M}=C(D),Y=x.multiply(M),X=Y.toRawBytes();return{head:T,prefix:I,scalar:M,point:Y,pointBytes:X}}function N(D){return F(D).pointBytes}function L(D=Uint8Array.of(),...T){const I=Bd(...T);return S(s(p(I,lr("context",D),!!i)))}function j(D,T,I={}){D=lr("message",D),i&&(D=i(D));const{prefix:M,scalar:Y,pointBytes:X}=F(T),Z=L(I.context,M,D),le=x.multiply(Z).toRawBytes(),ae=L(I.context,le,X,D),ye=k(Z+ae*Y);yo("signature.s",ye,Do,r);const Ee=Bd(le,Rm(ye,n.BYTES));return lr("result",Ee,n.BYTES*2)}const B=CV;function O(D,T,I,M=B){const{context:Y,zip215:X}=M,Z=n.BYTES;D=lr("signature",D,2*Z),T=lr("message",T),I=lr("publicKey",I,Z),X!==void 0&&Jc("zip215",X),i&&(T=i(T));const le=_h(D.slice(Z,2*Z));let ae,ye,Ee;try{ae=m.fromHex(I,X),ye=m.fromHex(D.slice(0,Z),X),Ee=x.multiplyUnsafe(le)}catch{return!1}if(!X&&ae.isSmallOrder())return!1;const ee=L(Y,ye.toRawBytes(),ae.toRawBytes(),T);return ye.add(ae.multiplyUnsafe(ee)).subtract(Ee).clearCofactor().equals(m.ZERO)}return x._setWindowSize(8),{CURVE:e,getPublicKey:N,sign:j,verify:O,ExtendedPoint:m,utils:{getExtendedPublicKey:F,randomPrivateKey:()=>o(n.BYTES),precompute(D=8,T=m.BASE){return T._setWindowSize(D),T.multiply(BigInt(3)),T}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const eS=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),mA=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const OV=BigInt(1),wA=BigInt(2);BigInt(3);const PV=BigInt(5),NV=BigInt(8);function LV(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=eS,a=t*t%s*t%s,c=Yn(a,wA,s)*a%s,l=Yn(c,OV,s)*t%s,u=Yn(l,PV,s)*l%s,d=Yn(u,e,s)*u%s,f=Yn(d,n,s)*d%s,h=Yn(f,r,s)*f%s,p=Yn(h,i,s)*h%s,g=Yn(p,i,s)*h%s,w=Yn(g,e,s)*u%s;return{pow_p_5_8:Yn(w,wA,s)*t%s,b2:a}}function DV(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function $V(t,e){const n=eS,r=Bn(e*e*e,n),i=Bn(r*r*e,n),s=LV(t*i).pow_p_5_8;let o=Bn(t*r*s,n);const a=Bn(e*o*o,n),c=o,l=Bn(o*mA,n),u=a===t,d=a===Bn(-t,n),f=a===Bn(-t*mA,n);return u&&(o=c),(d||f)&&(o=l),bV(o,n)&&(o=Bn(-o,n)),{isValid:u||d,value:o}}const yA=Bp(eS,void 0,!0),BV={a:yA.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:yA,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:NV,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:dV,randomBytes:su.randomBytes,adjustScalarBytes:DV,uvRatio:$V},sf=TV(BV);var Wg=BD().Buffer;function MV(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(h){if((Array.isArray(h)||h instanceof Uint8Array)&&(h=Wg.from(h)),!Wg.isBuffer(h))throw new TypeError("Expected Buffer");if(h.length===0)return"";for(var p=0,g=0,w=0,y=h.length;w!==y&&h[w]===0;)w++,p++;for(var b=(y-w)*l+1>>>0,m=new Uint8Array(b);w!==y;){for(var x=h[w],E=0,A=b-1;(x!==0||E<g)&&A!==-1;A--,E++)x+=256*m[A]>>>0,m[A]=x%o>>>0,x=x/o>>>0;if(x!==0)throw new Error("Non-zero carry");g=E,w++}for(var k=b-g;k!==b&&m[k]===0;)k++;for(var S=a.repeat(p);k<b;++k)S+=t.charAt(m[k]);return S}function d(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return Wg.alloc(0);for(var p=0,g=0,w=0;h[p]===a;)g++,p++;for(var y=(h.length-p)*c+1>>>0,b=new Uint8Array(y);p<h.length;){var m=h.charCodeAt(p);if(m>255)return;var x=e[m];if(x===255)return;for(var E=0,A=y-1;(x!==0||E<w)&&A!==-1;A--,E++)x+=o*b[A]>>>0,b[A]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");w=E,p++}for(var k=y-w;k!==y&&b[k]===0;)k++;var S=Wg.allocUnsafe(g+(y-k));S.fill(0,0,g);for(var C=g;k!==y;)S[C++]=b[k++];return S}function f(h){var p=d(h);if(p)return p;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:f}}var UV=MV,jV=UV,FV="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",p8=jV(FV);const Jr=vi(p8);var Gr={};function Pa(t,e,n){return e<=t&&t<=n}function Kw(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function zV(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===n-1)i.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,c=o&1023;i.push(65536+(a<<10)+c),r+=1}else i.push(65533)}r+=1}return i}function KV(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var Om=-1;function tS(t){this.tokens=[].slice.call(t)}tS.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Om},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var Md=-1;function Mb(t,e){if(t)throw TypeError("Decoder error");return e||65533}var Pm="utf-8";function Nm(t,e){if(!(this instanceof Nm))return new Nm(t,e);if(t=t!==void 0?String(t).toLowerCase():Pm,t!==Pm)throw new Error("Encoding not supported. Only utf-8 is supported");e=Kw(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Nm.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=Kw(n),this._streaming||(this._decoder=new HV({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var i=new tS(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==Md);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===Md)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),KV(s)}};function Lm(t,e){if(!(this instanceof Lm))return new Lm(t,e);if(t=t!==void 0?String(t).toLowerCase():Pm,t!==Pm)throw new Error("Encoding not supported. Only utf-8 is supported");e=Kw(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Lm.prototype={encode:function(e,n){e=e?String(e):"",n=Kw(n),this._streaming||(this._encoder=new WV(this._options)),this._streaming=!!n.stream;for(var r=[],i=new tS(zV(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==Md);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==Md;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function HV(t){var e=t.fatal,n=0,r=0,i=0,s=128,o=191;this.handler=function(a,c){if(c===Om&&i!==0)return i=0,Mb(e);if(c===Om)return Md;if(i===0){if(Pa(c,0,127))return c;if(Pa(c,194,223))i=1,n=c-192;else if(Pa(c,224,239))c===224&&(s=160),c===237&&(o=159),i=2,n=c-224;else if(Pa(c,240,244))c===240&&(s=144),c===244&&(o=143),i=3,n=c-240;else return Mb(e);return n=n<<6*i,null}if(!Pa(c,s,o))return n=i=r=0,s=128,o=191,a.prepend(c),Mb(e);if(s=128,o=191,r+=1,n+=c-128<<6*(i-r),r!==i)return null;var l=n;return n=i=r=0,l}}function WV(t){t.fatal,this.handler=function(e,n){if(n===Om)return Md;if(Pa(n,0,127))return n;var r,i;Pa(n,128,2047)?(r=1,i=192):Pa(n,2048,65535)?(r=2,i=224):Pa(n,65536,1114111)&&(r=3,i=240);for(var s=[(n>>6*r)+i];r>0;){var o=n>>6*(r-1);s.push(128|o&63),r-=1}return s}}const qV=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Nm,TextEncoder:Lm},Symbol.toStringTag,{value:"Module"})),VV=mx(qV);var GV=Li&&Li.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),YV=Li&&Li.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),da=Li&&Li.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},JV=Li&&Li.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&GV(e,t,n);return YV(e,t),e},g8=Li&&Li.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gr,"__esModule",{value:!0});var m8=Gr.deserializeUnchecked=E8=Gr.deserialize=x8=Gr.serialize=Gr.BinaryReader=Gr.BinaryWriter=Gr.BorshError=Gr.baseDecode=Gr.baseEncode=void 0;const Lc=g8(MD),w8=g8(p8),ZV=JV(VV),XV=typeof TextDecoder!="function"?ZV.TextDecoder:TextDecoder,QV=new XV("utf-8",{fatal:!0});function eG(t){return typeof t=="string"&&(t=Ne.from(t,"utf8")),w8.default.encode(Ne.from(t))}Gr.baseEncode=eG;function tG(t){return Ne.from(w8.default.decode(t))}Gr.baseDecode=tG;const Ub=1024;class Ti extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Gr.BorshError=Ti;class y8{constructor(){this.buf=Ne.alloc(Ub),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Ne.concat([this.buf,Ne.alloc(Ub)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Ne.from(new Lc.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Ne.from(new Lc.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Ne.from(new Lc.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Ne.from(new Lc.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Ne.concat([Ne.from(this.buf.subarray(0,this.length)),e,Ne.alloc(Ub)]),this.length+=e.length}writeString(e){this.maybeResize();const n=Ne.from(e,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(e){this.writeBuffer(Ne.from(e))}writeArray(e,n){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),n(r)}toArray(){return this.buf.subarray(0,this.length)}}Gr.BinaryWriter=y8;function fa(t,e,n){const r=n.value;n.value=function(...i){try{return r.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Ti("Reached the end of buffer when deserializing")}throw s}}}class Is{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Lc.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Lc.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Lc.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Lc.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Ti(`Expected buffer length ${e} isn't within bounds`);const n=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,n}readString(){const e=this.readU32(),n=this.readBuffer(e);try{return QV.decode(n)}catch(r){throw new Ti(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const n=this.readU32(),r=Array();for(let i=0;i<n;++i)r.push(e());return r}}da([fa],Is.prototype,"readU8",null);da([fa],Is.prototype,"readU16",null);da([fa],Is.prototype,"readU32",null);da([fa],Is.prototype,"readU64",null);da([fa],Is.prototype,"readU128",null);da([fa],Is.prototype,"readU256",null);da([fa],Is.prototype,"readU512",null);da([fa],Is.prototype,"readString",null);da([fa],Is.prototype,"readFixedArray",null);da([fa],Is.prototype,"readArray",null);Gr.BinaryReader=Is;function b8(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Tl(t,e,n,r,i){try{if(typeof r=="string")i[`write${b8(r)}`](n);else if(r instanceof Array)if(typeof r[0]=="number"){if(n.length!==r[0])throw new Ti(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);i.writeFixedArray(n)}else if(r.length===2&&typeof r[1]=="number"){if(n.length!==r[1])throw new Ti(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let s=0;s<r[1];s++)Tl(t,null,n[s],r[0],i)}else i.writeArray(n,s=>{Tl(t,e,s,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{n==null?i.writeU8(0):(i.writeU8(1),Tl(t,e,n,r.type,i));break}case"map":{i.writeU32(n.size),n.forEach((s,o)=>{Tl(t,e,o,r.key,i),Tl(t,e,s,r.value,i)});break}default:throw new Ti(`FieldType ${r} unrecognized`)}else v8(t,n,i)}catch(s){throw s instanceof Ti&&s.addToFieldPath(e),s}}function v8(t,e,n){if(typeof e.borshSerialize=="function"){e.borshSerialize(n);return}const r=t.get(e.constructor);if(!r)throw new Ti(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,s])=>{Tl(t,i,e[i],s,n)});else if(r.kind==="enum"){const i=e[r.field];for(let s=0;s<r.values.length;++s){const[o,a]=r.values[s];if(o===i){n.writeU8(s),Tl(t,o,e[o],a,n);break}}}else throw new Ti(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function nG(t,e,n=y8){const r=new n;return v8(t,e,r),r.toArray()}var x8=Gr.serialize=nG;function Ol(t,e,n,r){try{if(typeof n=="string")return r[`read${b8(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return r.readFixedArray(n[0]);if(typeof n[1]=="number"){const i=[];for(let s=0;s<n[1];s++)i.push(Ol(t,null,n[0],r));return i}else return r.readArray(()=>Ol(t,e,n[0],r))}if(n.kind==="option")return r.readU8()?Ol(t,e,n.type,r):void 0;if(n.kind==="map"){let i=new Map;const s=r.readU32();for(let o=0;o<s;o++){const a=Ol(t,e,n.key,r),c=Ol(t,e,n.value,r);i.set(a,c)}return i}return nS(t,n,r)}catch(i){throw i instanceof Ti&&i.addToFieldPath(e),i}}function nS(t,e,n){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(n);const r=t.get(e);if(!r)throw new Ti(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const i={};for(const[s,o]of t.get(e).fields)i[s]=Ol(t,s,o,n);return new e(i)}if(r.kind==="enum"){const i=n.readU8();if(i>=r.values.length)throw new Ti(`Enum index: ${i} is out of range`);const[s,o]=r.values[i],a=Ol(t,s,o,n);return new e({[s]:a})}throw new Ti(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function rG(t,e,n,r=Is){const i=new r(n),s=nS(t,e,i);if(i.offset<n.length)throw new Ti(`Unexpected ${n.length-i.offset} bytes after deserialized data`);return s}var E8=Gr.deserialize=rG;function iG(t,e,n,r=Is){const i=new r(n);return nS(t,e,i)}m8=Gr.deserializeUnchecked=iG;var de={};Object.defineProperty(de,"__esModule",{value:!0});de.s16=de.s8=de.nu64be=de.u48be=de.u40be=de.u32be=de.u24be=de.u16be=Hr=de.nu64=de.u48=de.u40=rt=de.u32=de.u24=Us=de.u16=Qt=de.u8=Zc=de.offset=de.greedy=de.Constant=de.UTF8=de.CString=de.Blob=de.Boolean=de.BitField=de.BitStructure=de.VariantLayout=de.Union=de.UnionLayoutDiscriminator=de.UnionDiscriminator=de.Structure=de.Sequence=de.DoubleBE=de.Double=de.FloatBE=de.Float=de.NearInt64BE=de.NearInt64=de.NearUInt64BE=de.NearUInt64=de.IntBE=de.Int=de.UIntBE=de.UInt=de.OffsetLayout=de.GreedyCount=de.ExternalLayout=de.bindConstructorLayout=de.nameWithProperty=de.Layout=de.uint8ArrayToBuffer=de.checkUint8Array=void 0;de.constant=de.utf8=de.cstr=Pn=de.blob=de.unionLayoutDiscriminator=de.union=Zr=de.seq=de.bits=it=de.struct=de.f64be=de.f64=de.f32be=de.f32=de.ns64be=de.s48be=de.s40be=de.s32be=de.s24be=de.s16be=ps=de.ns64=de.s48=de.s40=de.s32=de.s24=void 0;const rS=al;function of(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}de.checkUint8Array=of;function on(t){return of(t),rS.Buffer.from(t.buffer,t.byteOffset,t.length)}de.uint8ArrayToBuffer=on;class pn{constructor(e,n){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=n}makeDestinationObject(){return{}}getSpan(e,n){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const n=Object.create(this.constructor.prototype);return Object.assign(n,this),n.property=e,n}fromArray(e){}}de.Layout=pn;function iS(t,e){return e.property?t+"["+e.property+"]":t}de.nameWithProperty=iS;function sG(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof pn))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(n,r){return e.encode(this,n,r)},writable:!0}),Object.defineProperty(t,"decode",{value(n,r){return e.decode(n,r)},writable:!0})}de.bindConstructorLayout=sG;class Yi extends pn{isCount(){throw new Error("ExternalLayout is abstract")}}de.ExternalLayout=Yi;class S8 extends Yi{constructor(e=1,n){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,n),this.elementSpan=e}isCount(){return!0}decode(e,n=0){of(e);const r=e.length-n;return Math.floor(r/this.elementSpan)}encode(e,n,r){return 0}}de.GreedyCount=S8;class sS extends Yi{constructor(e,n=0,r){if(!(e instanceof pn))throw new TypeError("layout must be a Layout");if(!Number.isInteger(n))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=n}isCount(){return this.layout instanceof Gs||this.layout instanceof Eo}decode(e,n=0){return this.layout.decode(e,n+this.offset)}encode(e,n,r=0){return this.layout.encode(e,n,r+this.offset)}}de.OffsetLayout=sS;class Gs extends pn{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return on(e).readUIntLE(n,this.span)}encode(e,n,r=0){return on(n).writeUIntLE(e,r,this.span),this.span}}de.UInt=Gs;class Eo extends pn{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return on(e).readUIntBE(n,this.span)}encode(e,n,r=0){return on(n).writeUIntBE(e,r,this.span),this.span}}de.UIntBE=Eo;class xu extends pn{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return on(e).readIntLE(n,this.span)}encode(e,n,r=0){return on(n).writeIntLE(e,r,this.span),this.span}}de.Int=xu;class af extends pn{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return on(e).readIntBE(n,this.span)}encode(e,n,r=0){return on(n).writeIntBE(e,r,this.span),this.span}}de.IntBE=af;const w2=Math.pow(2,32);function Hw(t){const e=Math.floor(t/w2),n=t-e*w2;return{hi32:e,lo32:n}}function Ww(t,e){return t*w2+e}class _8 extends pn{constructor(e){super(8,e)}decode(e,n=0){const r=on(e),i=r.readUInt32LE(n),s=r.readUInt32LE(n+4);return Ww(s,i)}encode(e,n,r=0){const i=Hw(e),s=on(n);return s.writeUInt32LE(i.lo32,r),s.writeUInt32LE(i.hi32,r+4),8}}de.NearUInt64=_8;class k8 extends pn{constructor(e){super(8,e)}decode(e,n=0){const r=on(e),i=r.readUInt32BE(n),s=r.readUInt32BE(n+4);return Ww(i,s)}encode(e,n,r=0){const i=Hw(e),s=on(n);return s.writeUInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}de.NearUInt64BE=k8;class A8 extends pn{constructor(e){super(8,e)}decode(e,n=0){const r=on(e),i=r.readUInt32LE(n),s=r.readInt32LE(n+4);return Ww(s,i)}encode(e,n,r=0){const i=Hw(e),s=on(n);return s.writeUInt32LE(i.lo32,r),s.writeInt32LE(i.hi32,r+4),8}}de.NearInt64=A8;class I8 extends pn{constructor(e){super(8,e)}decode(e,n=0){const r=on(e),i=r.readInt32BE(n),s=r.readUInt32BE(n+4);return Ww(i,s)}encode(e,n,r=0){const i=Hw(e),s=on(n);return s.writeInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}de.NearInt64BE=I8;class C8 extends pn{constructor(e){super(4,e)}decode(e,n=0){return on(e).readFloatLE(n)}encode(e,n,r=0){return on(n).writeFloatLE(e,r),4}}de.Float=C8;class R8 extends pn{constructor(e){super(4,e)}decode(e,n=0){return on(e).readFloatBE(n)}encode(e,n,r=0){return on(n).writeFloatBE(e,r),4}}de.FloatBE=R8;class T8 extends pn{constructor(e){super(8,e)}decode(e,n=0){return on(e).readDoubleLE(n)}encode(e,n,r=0){return on(n).writeDoubleLE(e,r),8}}de.Double=T8;class O8 extends pn{constructor(e){super(8,e)}decode(e,n=0){return on(e).readDoubleBE(n)}encode(e,n,r=0){return on(n).writeDoubleBE(e,r),8}}de.DoubleBE=O8;class P8 extends pn{constructor(e,n,r){if(!(e instanceof pn))throw new TypeError("elementLayout must be a Layout");if(!(n instanceof Yi&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(n instanceof Yi)&&0<e.span&&(i=n*e.span),super(i,r),this.elementLayout=e,this.count=n}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof Yi&&(i=i.decode(e,n)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let s=0;for(;s<i;)r+=this.elementLayout.getSpan(e,n+r),++s}return r}decode(e,n=0){const r=[];let i=0,s=this.count;for(s instanceof Yi&&(s=s.decode(e,n));i<s;)r.push(this.elementLayout.decode(e,n)),n+=this.elementLayout.getSpan(e,n),i+=1;return r}encode(e,n,r=0){const i=this.elementLayout,s=e.reduce((o,a)=>o+i.encode(a,n,r+o),0);return this.count instanceof Yi&&this.count.encode(e.length,n,r),s}}de.Sequence=P8;class N8 extends pn{constructor(e,n,r){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof pn,!0)))throw new TypeError("fields must be array of Layout instances");typeof n=="boolean"&&r===void 0&&(r=n,n=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,n),this.fields=e,this.decodePrefixes=!!r}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((i,s)=>{const o=s.getSpan(e,n);return n+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,n=0){of(e);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(e,n)),n+=i.getSpan(e,n),this.decodePrefixes&&e.length===n)break;return r}encode(e,n,r=0){const i=r;let s=0,o=0;for(const a of this.fields){let c=a.span;if(o=0<c?c:0,a.property!==void 0){const l=e[a.property];l!==void 0&&(o=a.encode(l,n,r),0>c&&(c=a.getSpan(n,r)))}s=r,r+=c}return s+o-i}fromArray(e){const n=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(n[r.property]=e.shift());return n}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let n=0;for(const r of this.fields){if(r.property===e)return n;0>r.span?n=-1:0<=n&&(n+=r.span)}}}de.Structure=N8;class oS{constructor(e){this.property=e}decode(e,n){throw new Error("UnionDiscriminator is abstract")}encode(e,n,r){throw new Error("UnionDiscriminator is abstract")}}de.UnionDiscriminator=oS;class Dm extends oS{constructor(e,n){if(!(e instanceof Yi&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(n||e.property||"variant"),this.layout=e}decode(e,n){return this.layout.decode(e,n)}encode(e,n,r){return this.layout.encode(e,n,r)}}de.UnionLayoutDiscriminator=Dm;class aS extends pn{constructor(e,n,r){let i;if(e instanceof Gs||e instanceof Eo)i=new Dm(new sS(e));else if(e instanceof Yi&&e.isCount())i=new Dm(e);else if(e instanceof oS)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(n===void 0&&(n=null),!(n===null||n instanceof pn))throw new TypeError("defaultLayout must be null or a Layout");if(n!==null){if(0>n.span)throw new Error("defaultLayout must have constant span");n.property===void 0&&(n=n.replicate("content"))}let s=-1;n&&(s=n.span,0<=s&&(e instanceof Gs||e instanceof Eo)&&(s+=i.layout.span)),super(s,r),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof Gs||e instanceof Eo,this.defaultLayout=n,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,n=0){if(0<=this.span)return this.span;const r=this.getVariant(e,n);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,n)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const n=this.registry[e[this.discriminator.property]];if(n&&(!n.layout||n.property&&Object.prototype.hasOwnProperty.call(e,n.property)))return n}else for(const n in this.registry){const r=this.registry[n];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,n=0){let r;const i=this.discriminator,s=i.decode(e,n),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let c=0;this.usesPrefixDiscriminator&&(c=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[a.property]=a.decode(e,n+c)}else r=o.decode(e,n);return r}encode(e,n,r=0){const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],n,r),a+o.encode(e[o.property],n,r+a)}return i.encode(e,n,r)}addVariant(e,n,r){const i=new L8(this,e,n,r);return this.registry[e]=i,i}getVariant(e,n=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,n):r=e,this.registry[r]}}de.Union=aS;class L8 extends pn{constructor(e,n,r,i){if(!(e instanceof aS))throw new TypeError("union must be a Union");if(!Number.isInteger(n)||0>n)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof pn))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=r?r.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=n,this.layout=r||null}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,n+r)),r+i}decode(e,n=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,n))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,n+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,n,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,n,r);let s=i;if(this.layout&&(this.layout.encode(e[this.property],n,r+i),s+=this.layout.getSpan(n,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}de.VariantLayout=L8;function Vu(t){return 0>t&&(t+=4294967296),t}class cS extends pn{constructor(e,n,r){if(!(e instanceof Gs||e instanceof Eo))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof n=="string"&&r===void 0&&(r=n,n=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!n,this.fields=[];let i=0;this._packedSetValue=function(s){return i=Vu(s),this},this._packedGetValue=function(){return i}}decode(e,n=0){const r=this.makeDestinationObject(),i=this.word.decode(e,n);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(e));return r}encode(e,n,r=0){const i=this.word.decode(n,r);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),n,r)}addField(e,n){const r=new lS(this,e,n);return this.fields.push(r),r}addBoolean(e){const n=new D8(this,e);return this.fields.push(n),n}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}}de.BitStructure=cS;class lS{constructor(e,n,r){if(!(e instanceof cS))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");const i=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(n+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=e,this.bits=n,this.valueMask=(1<<n)-1,n===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-n),this.wordMask=Vu(this.valueMask<<this.start),this.property=r}decode(e,n){const r=this.container._packedGetValue();return Vu(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Vu(e&this.valueMask))throw new TypeError(iS("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const n=this.container._packedGetValue(),r=Vu(e<<this.start);this.container._packedSetValue(Vu(n&~this.wordMask)|r)}}de.BitField=lS;let D8=class extends lS{constructor(e,n){super(e,1,n)}decode(e,n){return!!super.decode(e,n)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};de.Boolean=D8;let $8=class extends pn{constructor(e,n){if(!(e instanceof Yi&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Yi||(r=e),super(r,n),this.length=e}getSpan(e,n){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),r}decode(e,n=0){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),on(e).slice(n,n+r)}encode(e,n,r){let i=this.length;if(this.length instanceof Yi&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(iS("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>n.length)throw new RangeError("encoding overruns Uint8Array");const s=on(e);return on(n).write(s.toString("hex"),r,i,"hex"),this.length instanceof Yi&&this.length.encode(i,n,r),i}};de.Blob=$8;class B8 extends pn{constructor(e){super(-1,e)}getSpan(e,n=0){of(e);let r=n;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-n}decode(e,n=0){const r=this.getSpan(e,n);return on(e).slice(n,n+r-1).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const i=rS.Buffer.from(e,"utf8"),s=i.length;if(r+s>n.length)throw new RangeError("encoding overruns Buffer");const o=on(n);return i.copy(o,r),o[r+s]=0,s+1}}de.CString=B8;class M8 extends pn{constructor(e,n){if(typeof e=="string"&&n===void 0&&(n=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,n),this.maxSpan=e}getSpan(e,n=0){return of(e),e.length-n}decode(e,n=0){const r=this.getSpan(e,n);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return on(e).slice(n,n+r).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const i=rS.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>n.length)throw new RangeError("encoding overruns Buffer");return i.copy(on(n),r),s}}de.UTF8=M8;class U8 extends pn{constructor(e,n){super(0,n),this.value=e}decode(e,n){return this.value}encode(e,n,r){return 0}}de.Constant=U8;de.greedy=(t,e)=>new S8(t,e);var Zc=de.offset=(t,e,n)=>new sS(t,e,n),Qt=de.u8=t=>new Gs(1,t),Us=de.u16=t=>new Gs(2,t);de.u24=t=>new Gs(3,t);var rt=de.u32=t=>new Gs(4,t);de.u40=t=>new Gs(5,t);de.u48=t=>new Gs(6,t);var Hr=de.nu64=t=>new _8(t);de.u16be=t=>new Eo(2,t);de.u24be=t=>new Eo(3,t);de.u32be=t=>new Eo(4,t);de.u40be=t=>new Eo(5,t);de.u48be=t=>new Eo(6,t);de.nu64be=t=>new k8(t);de.s8=t=>new xu(1,t);de.s16=t=>new xu(2,t);de.s24=t=>new xu(3,t);de.s32=t=>new xu(4,t);de.s40=t=>new xu(5,t);de.s48=t=>new xu(6,t);var ps=de.ns64=t=>new A8(t);de.s16be=t=>new af(2,t);de.s24be=t=>new af(3,t);de.s32be=t=>new af(4,t);de.s40be=t=>new af(5,t);de.s48be=t=>new af(6,t);de.ns64be=t=>new I8(t);de.f32=t=>new C8(t);de.f32be=t=>new R8(t);de.f64=t=>new T8(t);de.f64be=t=>new O8(t);var it=de.struct=(t,e,n)=>new N8(t,e,n);de.bits=(t,e,n)=>new cS(t,e,n);var Zr=de.seq=(t,e,n)=>new P8(t,e,n);de.union=(t,e,n)=>new aS(t,e,n);de.unionLayoutDiscriminator=(t,e)=>new Dm(t,e);var Pn=de.blob=(t,e)=>new $8(t,e);de.cstr=t=>new B8(t);de.utf8=(t,e)=>new M8(t,e);de.constant=(t,e)=>new U8(t,e);var oG=8078e3,aG=8078001,cG=8078004,lG=8078005,uG=8078006,dG=8078011;function j8(t){return Array.isArray(t)?"%5B"+t.map(j8).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function fG([t,e]){return`${t}=${j8(e)}`}function hG(t){const e=Object.entries(t).map(fG).join("&");return btoa(e)}function pG(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${hG(e)}'`),`${n}\``}}var bd=class extends Error{constructor(...[e,n]){let r,i;if(n){const{cause:o,...a}=n;o&&(i={cause:o}),Object.keys(a).length>0&&(r=a)}const s=pG(e,r);super(s,i);an(this,"cause",this.cause);an(this,"context");this.context={__code:e,...r},this.name="SolanaError"}};function gG(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function mG(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(gG(e,t));return t.write(e,n,0),n}})}function wG(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function Lu(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function yG(t,e){if(Lu(t)!==Lu(e))throw new bd(cG);if(Lu(t)&&Lu(e)&&t.fixedSize!==e.fixedSize)throw new bd(lG,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!Lu(t)&&!Lu(e)&&t.maxSize!==e.maxSize)throw new bd(uG,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function bG(t,e,n=0){if(e.length-n<=0)throw new bd(oG,{codecDescription:t})}function vG(t,e,n,r=0){const i=n.length-r;if(i<e)throw new bd(aG,{bytesLength:i,codecDescription:t,expected:e})}function xG(t,e,n,r){if(r<e||r>n)throw new bd(dG,{codecDescription:t,max:n,min:e,value:r})}function F8(t){return(t==null?void 0:t.endian)!==1}function EG(t){return mG({fixedSize:t.size,write(e,n,r){t.range&&xG(t.name,t.range[0],t.range[1],e);const i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,F8(t.config)),n.set(new Uint8Array(i),r),r+t.size}})}function SG(t){return wG({fixedSize:t.size,read(e,n=0){bG(t.name,e,n),vG(t.name,t.size,e,n);const r=new DataView(_G(e,n,t.size));return[t.get(r,F8(t.config)),n+t.size]}})}function _G(t,e,n){const r=t.byteOffset+(e??0),i=n??t.byteLength;return t.buffer.slice(r,r+i)}var z8=(t={})=>EG({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),kG=(t={})=>SG({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),AG=(t={})=>yG(z8(t),kG(t));class IG extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function CG(t){return Mp(t)&&typeof t[Symbol.iterator]=="function"}function Mp(t){return typeof t=="object"&&t!=null}function $m(t){return Mp(t)&&!Array.isArray(t)}function ko(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function RG(t){const{done:e,value:n}=t.next();return e?void 0:n}function TG(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${ko(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:c}}function*bA(t,e,n,r){CG(t)||(t=[t]);for(const i of t){const s=TG(i,e,n,r);s&&(yield s)}}function*uS(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i,mask:o};s&&(t=e.coercer(t,a));let c="valid";for(const l of e.validator(t,a))l.explanation=n.message,c="not_valid",yield[l,void 0];for(let[l,u,d]of e.entries(t,a)){const f=uS(u,d,{path:l===void 0?r:[...r,l],branch:l===void 0?i:[...i,u],coerce:s,mask:o,message:n.message});for(const h of f)h[0]?(c=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):s&&(u=h[1],l===void 0?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):Mp(t)&&(u!==void 0||l in t)&&(t[l]=u))}if(c!=="not_valid")for(const l of e.refiner(t,a))l.explanation=n.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,t])}let ha=class{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(c,l)=>{const u=i(c,l);return bA(u,l,this,c)}:this.validator=()=>[],s?this.refiner=(c,l)=>{const u=s(c,l);return bA(u,l,this,c)}:this.refiner=()=>[]}assert(e,n){return K8(e,this,n)}create(e,n){return He(e,this,n)}is(e){return H8(e,this)}mask(e,n){return OG(e,this,n)}validate(e,n={}){return Up(e,this,n)}};function K8(t,e,n){const r=Up(t,e,{message:n});if(r[0])throw r[0]}function He(t,e,n){const r=Up(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function OG(t,e,n){const r=Up(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function H8(t,e){return!Up(t,e)[0]}function Up(t,e,n={}){const r=uS(t,e,n),i=RG(r);return i[0]?[new IG(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Eu(t,e){return new ha({type:t,schema:null,validator:e})}function PG(){return Eu("any",()=>!0)}function Ye(t){return new ha({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${ko(e)}`}})}function aa(){return Eu("boolean",t=>typeof t=="boolean")}function dS(t){return Eu("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${ko(e)}`)}function Fn(t){const e=ko(t),n=typeof t;return new ha({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${ko(r)}`}})}function NG(){return Eu("never",()=>!1)}function Je(t){return new ha({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function ue(){return Eu("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${ko(t)}`)}function ft(t){return new ha({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function W8(t,e){return new ha({type:"record",schema:null,*entries(n){if(Mp(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator(n){return $m(n)||`Expected an object, but received: ${ko(n)}`},coercer(n){return $m(n)?{...n}:n}})}function Be(){return Eu("string",t=>typeof t=="string"||`Expected a string, but received: ${ko(t)}`)}function fS(t){const e=NG();return new ha({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],t[i]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${ko(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function Ae(t){const e=Object.keys(t);return new ha({type:"type",schema:t,*entries(n){if(Mp(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return $m(n)||`Expected an object, but received: ${ko(n)}`},coercer(n){return $m(n)?{...n}:n}})}function Di(t){const e=t.map(n=>n.type).join(" | ");return new ha({type:"union",schema:null,coercer(n,r){for(const i of t){const[s,o]=i.validate(n,{coerce:!0,mask:r.mask});if(!s)return o}return n},validator(n,r){const i=[];for(const s of t){const[...o]=uS(n,s,r),[a]=o;if(a[0])for(const[c]of o)c&&i.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${ko(n)}`,...i]}})}function cf(){return Eu("unknown",()=>!0)}function jp(t,e,n){return new ha({...t,coercer:(r,i)=>H8(r,e)?t.coercer(n(r,i),i):t.coercer(r,i)})}var qg,LG=new Uint8Array(16);function q8(){if(!qg&&(qg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!qg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qg(LG)}const DG=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function qw(t){return typeof t=="string"&&DG.test(t)}var Kr=[];for(var jb=0;jb<256;++jb)Kr.push((jb+256).toString(16).substr(1));function Vw(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Kr[t[e+0]]+Kr[t[e+1]]+Kr[t[e+2]]+Kr[t[e+3]]+"-"+Kr[t[e+4]]+Kr[t[e+5]]+"-"+Kr[t[e+6]]+Kr[t[e+7]]+"-"+Kr[t[e+8]]+Kr[t[e+9]]+"-"+Kr[t[e+10]]+Kr[t[e+11]]+Kr[t[e+12]]+Kr[t[e+13]]+Kr[t[e+14]]+Kr[t[e+15]]).toLowerCase();if(!qw(n))throw TypeError("Stringified UUID is invalid");return n}var vA,Fb,zb=0,Kb=0;function $G(t,e,n){var r=e&&n||0,i=e||new Array(16);t=t||{};var s=t.node||vA,o=t.clockseq!==void 0?t.clockseq:Fb;if(s==null||o==null){var a=t.random||(t.rng||q8)();s==null&&(s=vA=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Fb=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:Kb+1,u=c-zb+(l-Kb)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||c>zb)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");zb=c,Kb=l,Fb=o,c+=122192928e5;var d=((c&268435455)*1e4+l)%4294967296;i[r++]=d>>>24&255,i[r++]=d>>>16&255,i[r++]=d>>>8&255,i[r++]=d&255;var f=c/4294967296*1e4&268435455;i[r++]=f>>>8&255,i[r++]=f&255,i[r++]=f>>>24&15|16,i[r++]=f>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var h=0;h<6;++h)i[r+h]=s[h];return e||Vw(i)}function V8(t){if(!qw(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function BG(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var MG="6ba7b810-9dad-11d1-80b4-00c04fd430c8",UG="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function G8(t,e,n){function r(i,s,o,a){if(typeof i=="string"&&(i=BG(i)),typeof s=="string"&&(s=V8(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=n(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=c[l];return o}return Vw(c)}try{r.name=t}catch{}return r.DNS=MG,r.URL=UG,r}function jG(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return FG(zG(KG(t),t.length*8))}function FG(t){for(var e=[],n=t.length*32,r="0123456789abcdef",i=0;i<n;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function Y8(t){return(t+64>>>9<<4)+14+1}function zG(t,e){t[e>>5]|=128<<e%32,t[Y8(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=n,c=r,l=i,u=s;n=fi(n,r,i,s,t[o],7,-680876936),s=fi(s,n,r,i,t[o+1],12,-389564586),i=fi(i,s,n,r,t[o+2],17,606105819),r=fi(r,i,s,n,t[o+3],22,-1044525330),n=fi(n,r,i,s,t[o+4],7,-176418897),s=fi(s,n,r,i,t[o+5],12,1200080426),i=fi(i,s,n,r,t[o+6],17,-1473231341),r=fi(r,i,s,n,t[o+7],22,-45705983),n=fi(n,r,i,s,t[o+8],7,1770035416),s=fi(s,n,r,i,t[o+9],12,-1958414417),i=fi(i,s,n,r,t[o+10],17,-42063),r=fi(r,i,s,n,t[o+11],22,-1990404162),n=fi(n,r,i,s,t[o+12],7,1804603682),s=fi(s,n,r,i,t[o+13],12,-40341101),i=fi(i,s,n,r,t[o+14],17,-1502002290),r=fi(r,i,s,n,t[o+15],22,1236535329),n=hi(n,r,i,s,t[o+1],5,-165796510),s=hi(s,n,r,i,t[o+6],9,-1069501632),i=hi(i,s,n,r,t[o+11],14,643717713),r=hi(r,i,s,n,t[o],20,-373897302),n=hi(n,r,i,s,t[o+5],5,-701558691),s=hi(s,n,r,i,t[o+10],9,38016083),i=hi(i,s,n,r,t[o+15],14,-660478335),r=hi(r,i,s,n,t[o+4],20,-405537848),n=hi(n,r,i,s,t[o+9],5,568446438),s=hi(s,n,r,i,t[o+14],9,-1019803690),i=hi(i,s,n,r,t[o+3],14,-187363961),r=hi(r,i,s,n,t[o+8],20,1163531501),n=hi(n,r,i,s,t[o+13],5,-1444681467),s=hi(s,n,r,i,t[o+2],9,-51403784),i=hi(i,s,n,r,t[o+7],14,1735328473),r=hi(r,i,s,n,t[o+12],20,-1926607734),n=pi(n,r,i,s,t[o+5],4,-378558),s=pi(s,n,r,i,t[o+8],11,-2022574463),i=pi(i,s,n,r,t[o+11],16,1839030562),r=pi(r,i,s,n,t[o+14],23,-35309556),n=pi(n,r,i,s,t[o+1],4,-1530992060),s=pi(s,n,r,i,t[o+4],11,1272893353),i=pi(i,s,n,r,t[o+7],16,-155497632),r=pi(r,i,s,n,t[o+10],23,-1094730640),n=pi(n,r,i,s,t[o+13],4,681279174),s=pi(s,n,r,i,t[o],11,-358537222),i=pi(i,s,n,r,t[o+3],16,-722521979),r=pi(r,i,s,n,t[o+6],23,76029189),n=pi(n,r,i,s,t[o+9],4,-640364487),s=pi(s,n,r,i,t[o+12],11,-421815835),i=pi(i,s,n,r,t[o+15],16,530742520),r=pi(r,i,s,n,t[o+2],23,-995338651),n=gi(n,r,i,s,t[o],6,-198630844),s=gi(s,n,r,i,t[o+7],10,1126891415),i=gi(i,s,n,r,t[o+14],15,-1416354905),r=gi(r,i,s,n,t[o+5],21,-57434055),n=gi(n,r,i,s,t[o+12],6,1700485571),s=gi(s,n,r,i,t[o+3],10,-1894986606),i=gi(i,s,n,r,t[o+10],15,-1051523),r=gi(r,i,s,n,t[o+1],21,-2054922799),n=gi(n,r,i,s,t[o+8],6,1873313359),s=gi(s,n,r,i,t[o+15],10,-30611744),i=gi(i,s,n,r,t[o+6],15,-1560198380),r=gi(r,i,s,n,t[o+13],21,1309151649),n=gi(n,r,i,s,t[o+4],6,-145523070),s=gi(s,n,r,i,t[o+11],10,-1120210379),i=gi(i,s,n,r,t[o+2],15,718787259),r=gi(r,i,s,n,t[o+9],21,-343485551),n=Dc(n,a),r=Dc(r,c),i=Dc(i,l),s=Dc(s,u)}return[n,r,i,s]}function KG(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(Y8(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function Dc(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function HG(t,e){return t<<e|t>>>32-e}function Gw(t,e,n,r,i,s){return Dc(HG(Dc(Dc(e,t),Dc(r,s)),i),n)}function fi(t,e,n,r,i,s,o){return Gw(e&n|~e&r,t,e,i,s,o)}function hi(t,e,n,r,i,s,o){return Gw(e&r|n&~r,t,e,i,s,o)}function pi(t,e,n,r,i,s,o){return Gw(e^n^r,t,e,i,s,o)}function gi(t,e,n,r,i,s,o){return Gw(n^(e|~r),t,e,i,s,o)}var WG=G8("v3",48,jG);function qG(t,e,n){t=t||{};var r=t.random||(t.rng||q8)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return Vw(r)}function VG(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function Hb(t,e){return t<<e|t>>>32-e}function GG(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=t[c*64+u*4]<<24|t[c*64+u*4+1]<<16|t[c*64+u*4+2]<<8|t[c*64+u*4+3];a[c]=l}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var d=0;d<o;++d){for(var f=new Uint32Array(80),h=0;h<16;++h)f[h]=a[d][h];for(var p=16;p<80;++p)f[p]=Hb(f[p-3]^f[p-8]^f[p-14]^f[p-16],1);for(var g=n[0],w=n[1],y=n[2],b=n[3],m=n[4],x=0;x<80;++x){var E=Math.floor(x/20),A=Hb(g,5)+VG(E,w,y,b)+m+e[E]+f[x]>>>0;m=b,b=y,y=Hb(w,30)>>>0,w=g,g=A}n[0]=n[0]+g>>>0,n[1]=n[1]+w>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+b>>>0,n[4]=n[4]+m>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var YG=G8("v5",80,GG);const JG="00000000-0000-0000-0000-000000000000";function ZG(t){if(!qw(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const XG=Object.freeze(Object.defineProperty({__proto__:null,NIL:JG,parse:V8,stringify:Vw,v1:$G,v3:WG,v4:qG,v5:YG,validate:qw,version:ZG},Symbol.toStringTag,{value:"Module"})),J8=mx(XG),QG=J8.v4,eY=function(t,e,n,r){if(typeof t!="string")throw new TypeError(t+" must be a string");r=r||{};const i=typeof r.version=="number"?r.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:t};if(i===2&&(s.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(typeof n>"u"){const o=typeof r.generator=="function"?r.generator:function(){return QG()};s.id=o(s,r)}else i===2&&n===null?r.notificationIdNull&&(s.id=null):s.id=n;return s};var tY=eY;const nY=J8.v4,rY=tY,ap=function(t,e){if(!(this instanceof ap))return new ap(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return nY()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};var iY=ap;ap.prototype.request=function(t,e,n,r){const i=this;let s=null;const o=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&t&&typeof t=="object"&&typeof e=="function")r=e,s=t;else{typeof n=="function"&&(r=n,n=void 0);const l=typeof r=="function";try{s=rY(t,e,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(u){if(l)return r(u);throw u}if(!l)return s}let c;try{c=JSON.stringify(s,this.options.replacer)}catch(l){return r(l)}return this.callServer(c,function(l,u){i._parseResponse(l,u,r)}),s};ap.prototype._parseResponse=function(t,e,n){if(t){n(t);return}if(!e)return n();let r;try{r=JSON.parse(e,this.options.reviver)}catch(i){return n(i)}if(n.length===3)if(Array.isArray(r)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return n(null,r.filter(i),r.filter(s))}else return n(null,r.error,r.result);n(null,r)};const sY=vi(iY);var Z8={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,d||c,f),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],h]:c._events[p].push(h):(c._events[p]=h,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,f,h,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,b,m;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,f),!0;case 5:return w.fn.call(w.context,u,d,f,h),!0;case 6:return w.fn.call(w.context,u,d,f,h,p),!0}for(m=1,b=new Array(y-1);m<y;m++)b[m-1]=arguments[m];w.fn.apply(w.context,b)}else{var x=w.length,E;for(m=0;m<x;m++)switch(w[m].once&&this.removeListener(l,w[m].fn,void 0,!0),y){case 1:w[m].fn.call(w[m].context);break;case 2:w[m].fn.call(w[m].context,u);break;case 3:w[m].fn.call(w[m].context,u,d);break;case 4:w[m].fn.call(w[m].context,u,d,f);break;default:if(!b)for(E=1,b=new Array(y-1);E<y;E++)b[E-1]=arguments[E];w[m].fn.apply(w[m].context,b)}}return!0},a.prototype.on=function(l,u,d){return s(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return s(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,f){var h=n?n+l:l;if(!this._events[h])return this;if(!u)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===u&&(!f||p.once)&&(!d||p.context===d)&&o(this,h);else{for(var g=0,w=[],y=p.length;g<y;g++)(p[g].fn!==u||f&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[h]=w.length===1?w[0]:w:o(this,h)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Z8);var oY=Z8.exports;const X8=vi(oY);var aY=class extends X8{constructor(e,n,r){super();an(this,"socket");this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(e,n,r){const i=r||n;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function cY(t,e){return new aY(t,e)}var lY=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},uY=class extends X8{constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},c,l){super();an(this,"address");an(this,"rpc_id");an(this,"queue");an(this,"options");an(this,"autoconnect");an(this,"ready");an(this,"reconnect");an(this,"reconnect_timer_id");an(this,"reconnect_interval");an(this,"max_reconnects");an(this,"rest_options");an(this,"current_reconnects");an(this,"generate_request_id");an(this,"socket");an(this,"webSocketFactory");an(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),l?this.dataPack=l:this.dataPack=new lY,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),c={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(c),i,l=>{if(l)return o(l);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=gt.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval)))})}};const dY=BigInt(0),Uf=BigInt(1),fY=BigInt(2),hY=BigInt(7),pY=BigInt(256),gY=BigInt(113),Q8=[],e6=[],t6=[];for(let t=0,e=Uf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Q8.push(2*(5*r+n)),e6.push((t+1)*(t+2)/2%64);let i=dY;for(let s=0;s<7;s++)e=(e<<Uf^(e>>hY)*gY)%pY,e&fY&&(i^=Uf<<(Uf<<BigInt(s))-Uf);t6.push(i)}const n6=r8(t6,!0),mY=n6[0],wY=n6[1],xA=(t,e,n)=>n>32?Zq(t,e,n):Yq(t,e,n),EA=(t,e,n)=>n>32?Xq(t,e,n):Jq(t,e,n);function yY(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=xA(l,u,1)^n[a],f=EA(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=e6[o],c=xA(i,s,a),l=EA(i,s,a),u=Q8[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=mY[r],t[1]^=wY[r]}ol(n)}let bY=class r6 extends VE{constructor(e,n,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,Im(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=jq(this.state)}clone(){return this._cloneInto()}keccak(){iA(this.state32),yY(this.state32,this.rounds),iA(this.state32),this.posOut=0,this.pos=0}update(e){Ld(this),e=Fw(e),Nd(e);const{blockLen:n,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ld(this,!1),Nd(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Im(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(t8(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ol(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new r6(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const vY=(t,e,n)=>GE(()=>new bY(e,t,n)),SA=vY(1,136,256/8);class i6 extends VE{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Uq(e);const r=Fw(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),ol(s)}update(e){return Ld(this),this.iHash.update(e),this}digestInto(e){Ld(this),Nd(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const s6=(t,e,n)=>new i6(t,e).update(n).digest();s6.create=(t,e)=>new i6(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _A(t){t.lowS!==void 0&&Jc("lowS",t.lowS),t.prehash!==void 0&&Jc("prehash",t.prehash)}function xY(t){const e=QE(t);$p(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}class EY extends Error{constructor(e=""){super(e)}}const Ta={Err:EY,_tlv:{encode:(t,e)=>{const{Err:n}=Ta;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=Hg(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?Hg(i.length/2|128):"";return Hg(t)+s+i+e},decode(t,e){const{Err:n}=Ta;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Ta;if(t<Na)throw new e("integer: negative integers are not allowed");let n=Hg(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Ta;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Jl(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Ta,i=lr("signature",t),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Ta,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},Na=BigInt(0),Ar=BigInt(1);BigInt(2);const kA=BigInt(3);BigInt(4);function SY(t){const e=xY(t),{Fp:n}=e,r=Bp(e.n,e.nBitLength),i=e.toBytes||((g,w,y)=>{const b=w.toAffine();return Bd(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),s=e.fromBytes||(g=>{const w=g.subarray(1),y=n.fromBytes(w.subarray(0,n.BYTES)),b=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:y,y:b}});function o(g){const{a:w,b:y}=e,b=n.sqr(g),m=n.mul(b,g);return n.add(n.add(m,n.mul(g,w)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return ZE(g,Ar,e.n)}function c(g){const{allowedPrivateKeyLengths:w,nByteLength:y,wrapPrivateKey:b,n:m}=e;if(w&&typeof g!="bigint"){if(Dd(g)&&(g=$d(g)),typeof g!="string"||!w.includes(g.length))throw new Error("invalid private key");g=g.padStart(y*2,"0")}let x;try{x=typeof g=="bigint"?g:Jl(lr("private key",g,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof g)}return b&&(x=Bn(x,m)),yo("private key",x,Ar,m),x}function l(g){if(!(g instanceof f))throw new Error("ProjectivePoint expected")}const u=Tm((g,w)=>{const{px:y,py:b,pz:m}=g;if(n.eql(m,n.ONE))return{x:y,y:b};const x=g.is0();w==null&&(w=x?n.ONE:n.inv(m));const E=n.mul(y,w),A=n.mul(b,w),k=n.mul(m,w);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(k,n.ONE))throw new Error("invZ was invalid");return{x:E,y:A}}),d=Tm(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:w,y}=g.toAffine();if(!n.isValid(w)||!n.isValid(y))throw new Error("bad point: x or y not FE");const b=n.sqr(y),m=o(w);if(!n.eql(b,m))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class f{constructor(w,y,b){if(w==null||!n.isValid(w))throw new Error("x required");if(y==null||!n.isValid(y)||n.is0(y))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");this.px=w,this.py=y,this.pz=b,Object.freeze(this)}static fromAffine(w){const{x:y,y:b}=w||{};if(!w||!n.isValid(y)||!n.isValid(b))throw new Error("invalid affine point");if(w instanceof f)throw new Error("projective point not allowed");const m=x=>n.eql(x,n.ZERO);return m(y)&&m(b)?f.ZERO:new f(y,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const y=XE(n,w.map(b=>b.pz));return w.map((b,m)=>b.toAffine(y[m])).map(f.fromAffine)}static fromHex(w){const y=f.fromAffine(s(lr("pointHex",w)));return y.assertValidity(),y}static fromPrivateKey(w){return f.BASE.multiply(c(w))}static msm(w,y){return h8(f,r,w,y)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:y,py:b,pz:m}=this,{px:x,py:E,pz:A}=w,k=n.eql(n.mul(y,A),n.mul(x,m)),S=n.eql(n.mul(b,A),n.mul(E,m));return k&&S}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:y}=e,b=n.mul(y,kA),{px:m,py:x,pz:E}=this;let A=n.ZERO,k=n.ZERO,S=n.ZERO,C=n.mul(m,m),F=n.mul(x,x),N=n.mul(E,E),L=n.mul(m,x);return L=n.add(L,L),S=n.mul(m,E),S=n.add(S,S),A=n.mul(w,S),k=n.mul(b,N),k=n.add(A,k),A=n.sub(F,k),k=n.add(F,k),k=n.mul(A,k),A=n.mul(L,A),S=n.mul(b,S),N=n.mul(w,N),L=n.sub(C,N),L=n.mul(w,L),L=n.add(L,S),S=n.add(C,C),C=n.add(S,C),C=n.add(C,N),C=n.mul(C,L),k=n.add(k,C),N=n.mul(x,E),N=n.add(N,N),C=n.mul(N,L),A=n.sub(A,C),S=n.mul(N,F),S=n.add(S,S),S=n.add(S,S),new f(A,k,S)}add(w){l(w);const{px:y,py:b,pz:m}=this,{px:x,py:E,pz:A}=w;let k=n.ZERO,S=n.ZERO,C=n.ZERO;const F=e.a,N=n.mul(e.b,kA);let L=n.mul(y,x),j=n.mul(b,E),B=n.mul(m,A),O=n.add(y,b),R=n.add(x,E);O=n.mul(O,R),R=n.add(L,j),O=n.sub(O,R),R=n.add(y,m);let D=n.add(x,A);return R=n.mul(R,D),D=n.add(L,B),R=n.sub(R,D),D=n.add(b,m),k=n.add(E,A),D=n.mul(D,k),k=n.add(j,B),D=n.sub(D,k),C=n.mul(F,R),k=n.mul(N,B),C=n.add(k,C),k=n.sub(j,C),C=n.add(j,C),S=n.mul(k,C),j=n.add(L,L),j=n.add(j,L),B=n.mul(F,B),R=n.mul(N,R),j=n.add(j,B),B=n.sub(L,B),B=n.mul(F,B),R=n.add(R,B),L=n.mul(j,R),S=n.add(S,L),L=n.mul(D,R),k=n.mul(O,k),k=n.sub(k,L),L=n.mul(O,j),C=n.mul(D,C),C=n.add(C,L),new f(k,S,C)}subtract(w){return this.add(w.negate())}is0(){return this.equals(f.ZERO)}wNAF(w){return p.wNAFCached(this,w,f.normalizeZ)}multiplyUnsafe(w){const{endo:y,n:b}=e;yo("scalar",w,Na,b);const m=f.ZERO;if(w===Na)return m;if(this.is0()||w===Ar)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,f.normalizeZ);let{k1neg:x,k1:E,k2neg:A,k2:k}=y.splitScalar(w),S=m,C=m,F=this;for(;E>Na||k>Na;)E&Ar&&(S=S.add(F)),k&Ar&&(C=C.add(F)),F=F.double(),E>>=Ar,k>>=Ar;return x&&(S=S.negate()),A&&(C=C.negate()),C=new f(n.mul(C.px,y.beta),C.py,C.pz),S.add(C)}multiply(w){const{endo:y,n:b}=e;yo("scalar",w,Ar,b);let m,x;if(y){const{k1neg:E,k1:A,k2neg:k,k2:S}=y.splitScalar(w);let{p:C,f:F}=this.wNAF(A),{p:N,f:L}=this.wNAF(S);C=p.constTimeNegate(E,C),N=p.constTimeNegate(k,N),N=new f(n.mul(N.px,y.beta),N.py,N.pz),m=C.add(N),x=F.add(L)}else{const{p:E,f:A}=this.wNAF(w);m=E,x=A}return f.normalizeZ([m,x])[0]}multiplyAndAddUnsafe(w,y,b){const m=f.BASE,x=(A,k)=>k===Na||k===Ar||!A.equals(m)?A.multiplyUnsafe(k):A.multiply(k),E=x(this,y).add(x(w,b));return E.is0()?void 0:E}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:y}=e;if(w===Ar)return!0;if(y)return y(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:y}=e;return w===Ar?this:y?y(f,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return Jc("isCompressed",w),this.assertValidity(),i(f,this,w)}toHex(w=!0){return Jc("isCompressed",w),$d(this.toRawBytes(w))}}f.BASE=new f(e.Gx,e.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,p=f8(f,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function _Y(t){const e=QE(t);return $p(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function kY(t){const e=_Y(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(B){return Bn(B,r)}function a(B){return g2(B,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=SY({...e,toBytes(B,O,R){const D=O.toAffine(),T=n.toBytes(D.x),I=Bd;return Jc("isCompressed",R),R?I(Uint8Array.from([O.hasEvenY()?2:3]),T):I(Uint8Array.from([4]),T,n.toBytes(D.y))},fromBytes(B){const O=B.length,R=B[0],D=B.subarray(1);if(O===i&&(R===2||R===3)){const T=Jl(D);if(!ZE(T,Ar,n.ORDER))throw new Error("Point is not on curve");const I=u(T);let M;try{M=n.sqrt(I)}catch(Z){const le=Z instanceof Error?": "+Z.message:"";throw new Error("Point is not on curve"+le)}const Y=(M&Ar)===Ar;return(R&1)===1!==Y&&(M=n.neg(M)),{x:T,y:M}}else if(O===s&&R===4){const T=n.fromBytes(D.subarray(0,n.BYTES)),I=n.fromBytes(D.subarray(n.BYTES,2*n.BYTES));return{x:T,y:I}}else{const T=i,I=s;throw new Error("invalid Point, expected length of "+T+", or uncompressed "+I+", got "+O)}}}),f=B=>$d(op(B,e.nByteLength));function h(B){const O=r>>Ar;return B>O}function p(B){return h(B)?o(-B):B}const g=(B,O,R)=>Jl(B.slice(O,R));class w{constructor(O,R,D){yo("r",O,Ar,r),yo("s",R,Ar,r),this.r=O,this.s=R,D!=null&&(this.recovery=D),Object.freeze(this)}static fromCompact(O){const R=e.nByteLength;return O=lr("compactSignature",O,R*2),new w(g(O,0,R),g(O,R,2*R))}static fromDER(O){const{r:R,s:D}=Ta.toSig(lr("DER",O));return new w(R,D)}assertValidity(){}addRecoveryBit(O){return new w(this.r,this.s,O)}recoverPublicKey(O){const{r:R,s:D,recovery:T}=this,I=A(lr("msgHash",O));if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");const M=T===2||T===3?R+e.n:R;if(M>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const Y=T&1?"03":"02",X=c.fromHex(Y+f(M)),Z=a(M),le=o(-I*Z),ae=o(D*Z),ye=c.BASE.multiplyAndAddUnsafe(X,le,ae);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Cm(this.toDERHex())}toDERHex(){return Ta.hexFromSig(this)}toCompactRawBytes(){return Cm(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const y={isValidPrivateKey(B){try{return l(B),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const B=l8(e.n);return _V(e.randomBytes(B),e.n)},precompute(B=8,O=c.BASE){return O._setWindowSize(B),O.multiply(BigInt(3)),O}};function b(B,O=!0){return c.fromPrivateKey(B).toRawBytes(O)}function m(B){const O=Dd(B),R=typeof B=="string",D=(O||R)&&B.length;return O?D===i||D===s:R?D===2*i||D===2*s:B instanceof c}function x(B,O,R=!0){if(m(B))throw new Error("first arg must be private key");if(!m(O))throw new Error("second arg must be public key");return c.fromHex(O).multiply(l(B)).toRawBytes(R)}const E=e.bits2int||function(B){if(B.length>8192)throw new Error("input is too large");const O=Jl(B),R=B.length*8-e.nBitLength;return R>0?O>>BigInt(R):O},A=e.bits2int_modN||function(B){return o(E(B))},k=zw(e.nBitLength);function S(B){return yo("num < 2^"+e.nBitLength,B,Na,k),op(B,e.nByteLength)}function C(B,O,R=F){if(["recovered","canonical"].some(ee=>ee in R))throw new Error("sign() legacy options not supported");const{hash:D,randomBytes:T}=e;let{lowS:I,prehash:M,extraEntropy:Y}=R;I==null&&(I=!0),B=lr("msgHash",B),_A(R),M&&(B=lr("prehashed msgHash",D(B)));const X=A(B),Z=l(O),le=[S(Z),S(X)];if(Y!=null&&Y!==!1){const ee=Y===!0?T(n.BYTES):Y;le.push(lr("extraEntropy",ee))}const ae=Bd(...le),ye=X;function Ee(ee){const te=E(ee);if(!d(te))return;const J=a(te),Q=c.BASE.multiply(te).toAffine(),oe=o(Q.x);if(oe===Na)return;const W=o(J*o(ye+oe*Z));if(W===Na)return;let V=(Q.x===oe?0:2)|Number(Q.y&Ar),se=W;return I&&h(W)&&(se=p(W),V^=1),new w(oe,se,V)}return{seed:ae,k2sig:Ee}}const F={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function L(B,O,R=F){const{seed:D,k2sig:T}=C(B,O,R),I=e;return pV(I.hash.outputLen,I.nByteLength,I.hmac)(D,T)}c.BASE._setWindowSize(8);function j(B,O,R,D=N){var V;const T=B;O=lr("msgHash",O),R=lr("publicKey",R);const{lowS:I,prehash:M,format:Y}=D;if(_A(D),"strict"in D)throw new Error("options.strict was renamed to lowS");if(Y!==void 0&&Y!=="compact"&&Y!=="der")throw new Error("format must be compact or der");const X=typeof T=="string"||Dd(T),Z=!X&&!Y&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!X&&!Z)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let le,ae;try{if(Z&&(le=new w(T.r,T.s)),X){try{Y!=="compact"&&(le=w.fromDER(T))}catch(se){if(!(se instanceof Ta.Err))throw se}!le&&Y!=="der"&&(le=w.fromCompact(T))}ae=c.fromHex(R)}catch{return!1}if(!le||I&&le.hasHighS())return!1;M&&(O=e.hash(O));const{r:ye,s:Ee}=le,ee=A(O),te=a(Ee),J=o(ee*te),Q=o(ye*te),oe=(V=c.BASE.multiplyAndAddUnsafe(ae,J,Q))==null?void 0:V.toAffine();return oe?o(oe.x)===ye:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:x,sign:L,verify:j,ProjectivePoint:c,Signature:w,utils:y}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function AY(t){return{hash:t,hmac:(e,...n)=>s6(t,e,su.concatBytes(...n)),randomBytes:su.randomBytes}}function IY(t,e){const n=r=>kY({...t,...AY(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const o6=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),AA=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),CY=BigInt(1),y2=BigInt(2),IA=(t,e)=>(t+e/y2)/e;function RY(t){const e=o6,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Yn(u,n,e)*u%e,f=Yn(d,n,e)*u%e,h=Yn(f,y2,e)*l%e,p=Yn(h,i,e)*h%e,g=Yn(p,s,e)*p%e,w=Yn(g,a,e)*g%e,y=Yn(w,c,e)*w%e,b=Yn(y,a,e)*g%e,m=Yn(b,n,e)*u%e,x=Yn(m,o,e)*p%e,E=Yn(x,r,e)*l%e,A=Yn(E,y2,e);if(!b2.eql(b2.sqr(A),t))throw new Error("Cannot find square root");return A}const b2=Bp(o6,void 0,void 0,{sqrt:RY}),Yw=IY({a:BigInt(0),b:BigInt(7),Fp:b2,n:AA,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=AA,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-CY*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=IA(s*t,e),c=IA(-r*t,e);let l=Bn(t-a*n-c*i,e),u=Bn(-a*r-c*s,e);const d=l>o,f=u>o;if(d&&(l=e-l),f&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:f,k2:u}}}},uV);BigInt(0);Yw.ProjectivePoint;const TY=sf.utils.randomPrivateKey,CA=()=>{const t=sf.utils.randomPrivateKey(),e=Bm(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),{publicKey:e,secretKey:n}},Bm=sf.getPublicKey;function RA(t){try{return sf.ExtendedPoint.fromHex(t),!0}catch{return!1}}const hS=(t,e)=>sf.sign(t,e.slice(0,32)),OY=sf.verify,Ut=t=>gt.isBuffer(t)?t:t instanceof Uint8Array?gt.from(t.buffer,t.byteOffset,t.byteLength):gt.from(t);class pS{constructor(e){Object.assign(this,e)}encode(){return gt.from(x8(kh,this))}static decode(e){return E8(kh,this,e)}static decodeUnchecked(e){return m8(kh,this,e)}}class PY extends pS{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(n=>{this.enum=n})}}const kh=new Map;var a6;const c6=32,na=32;function NY(t){return t._bn!==void 0}let TA=1;class xe extends pS{constructor(e){if(super({}),this._bn=void 0,NY(e))this._bn=e._bn;else{if(typeof e=="string"){const n=Jr.decode(e);if(n.length!=na)throw new Error("Invalid public key input");this._bn=new B1(n)}else this._bn=new B1(e);if(this._bn.byteLength()>na)throw new Error("Invalid public key input")}}static unique(){const e=new xe(TA);return TA+=1,new xe(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Jr.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(gt);if(e.length===na)return e;const n=gt.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const i=gt.concat([e.toBuffer(),gt.from(n),r.toBuffer()]),s=Dv(i);return new xe(s)}static createProgramAddressSync(e,n){let r=gt.alloc(0);e.forEach(function(s){if(s.length>c6)throw new TypeError("Max seed length exceeded");r=gt.concat([r,Ut(s)])}),r=gt.concat([r,n.toBuffer(),gt.from("ProgramDerivedAddress")]);const i=Dv(r);if(RA(i))throw new Error("Invalid seeds, address must fall off the curve");return new xe(i)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,i;for(;r!=0;){try{const s=e.concat(gt.from([r]));i=this.createProgramAddressSync(s,n)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new xe(e);return RA(n.toBytes())}}a6=xe;xe.default=new a6("11111111111111111111111111111111");kh.set(xe,{kind:"struct",fields:[["_bn","u256"]]});class LY{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const n=Ut(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=n.slice(32,64),this._secretKey=n.slice(0,32)}else this._secretKey=Ut(TY()),this._publicKey=Ut(Bm(this._secretKey))}get publicKey(){return new xe(this._publicKey)}get secretKey(){return gt.concat([this._secretKey,this._publicKey],64)}}const DY=new xe("BPFLoader1111111111111111111111111111111111"),Xc=1232,Jw=127,cp=64;class gS extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(gS.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class mS extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(mS.prototype,"name",{value:"TransactionExpiredTimeoutError"});class ad extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ad.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class lp{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const jt=(t="publicKey")=>Pn(32,t),$Y=(t="signature")=>Pn(64,t),jl=(t="string")=>{const e=it([rt("length"),rt("lengthPadding"),Pn(Zc(rt(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>n(s,o).chars.toString(),i.encode=(s,o,a)=>{const c={chars:gt.from(s,"utf8")};return r(c,o,a)},i.alloc=s=>rt().span+rt().span+gt.from(s,"utf8").length,i},BY=(t="authorized")=>it([jt("staker"),jt("withdrawer")],t),MY=(t="lockup")=>it([ps("unixTimestamp"),ps("epoch"),jt("custodian")],t),UY=(t="voteInit")=>it([jt("nodePubkey"),jt("authorizedVoter"),jt("authorizedWithdrawer"),Qt("commission")],t),jY=(t="voteAuthorizeWithSeedArgs")=>it([rt("voteAuthorizationType"),jt("currentAuthorityDerivedKeyOwnerPubkey"),jl("currentAuthorityDerivedKeySeed"),jt("newAuthorized")],t);function l6(t,e){const n=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*n(i.elementLayout)}else if("fields"in i)return l6({layout:i},e[i.property]);return 0};let r=0;return t.layout.fields.forEach(i=>{r+=n(i)}),r}function Wi(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,!(r&128))break}return e}function gs(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function sn(t,e){if(!t)throw new Error(e||"Assertion failed")}class Zw{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,i=o=>{const a=o.toBase58();let c=r.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,c)),c},s=i(n);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const c=i(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new Zw(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];sn(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,c])=>c.isSigner&&c.isWritable),r=e.filter(([,c])=>c.isSigner&&!c.isWritable),i=e.filter(([,c])=>!c.isSigner&&c.isWritable),s=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{sn(n.length>0,"Expected at least one writable signer key");const[c]=n[0];sn(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([c])=>new xe(c)),...r.map(([c])=>new xe(c)),...i.map(([c])=>new xe(c)),...s.map(([c])=>new xe(c))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,n){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(n(o)){const a=new xe(s),c=e.findIndex(l=>l.equals(a));c>=0&&(sn(c<256,"Max lookup table index exceeded"),r.push(c),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const u6="Reached end of buffer unexpectedly";function Yo(t){if(t.length===0)throw new Error(u6);return t.shift()}function qi(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(u6);return t.splice(...e)}class Ao{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new xe(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Jr.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new lp(this.staticAccountKeys)}static compile(e){const n=Zw.compile(e.instructions,e.payerKey),[r,i]=n.getMessageComponents(),o=new lp(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Jr.encode(a.data)}));return new Ao({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,s=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];gs(n,e);const r=this.instructions.map(d=>{const{accounts:f,programIdIndex:h}=d,p=Array.from(Jr.decode(d.data));let g=[];gs(g,f.length);let w=[];return gs(w,p.length),{programIdIndex:h,keyIndicesCount:gt.from(g),keyIndices:f,dataLength:gt.from(w),data:p}});let i=[];gs(i,r.length);let s=gt.alloc(Xc);gt.from(i).copy(s);let o=i.length;r.forEach(d=>{const h=it([Qt("programIdIndex"),Pn(d.keyIndicesCount.length,"keyIndicesCount"),Zr(Qt("keyIndex"),d.keyIndices.length,"keyIndices"),Pn(d.dataLength.length,"dataLength"),Zr(Qt("userdatum"),d.data.length,"data")]).encode(d,s,o);o+=h}),s=s.slice(0,o);const a=it([Pn(1,"numRequiredSignatures"),Pn(1,"numReadonlySignedAccounts"),Pn(1,"numReadonlyUnsignedAccounts"),Pn(n.length,"keyCount"),Zr(jt("key"),e,"keys"),jt("recentBlockhash")]),c={numRequiredSignatures:gt.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:gt.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:gt.from([this.header.numReadonlyUnsignedAccounts]),keyCount:gt.from(n),keys:this.accountKeys.map(d=>Ut(d.toBytes())),recentBlockhash:Jr.decode(this.recentBlockhash)};let l=gt.alloc(2048);const u=a.encode(c,l);return s.copy(l,u),l.slice(0,u+s.length)}static from(e){let n=[...e];const r=Yo(n);if(r!==(r&Jw))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=Yo(n),s=Yo(n),o=Wi(n);let a=[];for(let f=0;f<o;f++){const h=qi(n,0,na);a.push(new xe(gt.from(h)))}const c=qi(n,0,na),l=Wi(n);let u=[];for(let f=0;f<l;f++){const h=Yo(n),p=Wi(n),g=qi(n,0,p),w=Wi(n),y=qi(n,0,w),b=Jr.encode(gt.from(y));u.push({programIdIndex:h,accounts:g,data:b})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Jr.encode(gt.from(c)),accountKeys:a,instructions:u};return new Ao(d)}}class au{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new lp(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=n-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)n.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)n.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=Zw.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const u of s){const d=n.extractTableLookup(u);if(d!==void 0){const[f,{writable:h,readonly:p}]=d;r.push(f),i.writable.push(...h),i.readonly.push(...p)}}const[o,a]=n.getMessageComponents(),l=new lp(a,i).compileInstructions(e.instructions);return new au({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:l,addressTableLookups:r})}serialize(){const e=Array();gs(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();gs(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();gs(s,this.addressTableLookups.length);const o=it([Qt("prefix"),it([Qt("numRequiredSignatures"),Qt("numReadonlySignedAccounts"),Qt("numReadonlyUnsignedAccounts")],"header"),Pn(e.length,"staticAccountKeysLength"),Zr(jt(),this.staticAccountKeys.length,"staticAccountKeys"),jt("recentBlockhash"),Pn(r.length,"instructionsLength"),Pn(n.length,"serializedInstructions"),Pn(s.length,"addressTableLookupsLength"),Pn(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Xc),l=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:Jr.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,l)}serializeInstructions(){let e=0;const n=new Uint8Array(Xc);for(const r of this.compiledInstructions){const i=Array();gs(i,r.accountKeyIndexes.length);const s=Array();gs(s,r.data.length);const o=it([Qt("programIdIndex"),Pn(i.length,"encodedAccountKeyIndexesLength"),Zr(Qt(),r.accountKeyIndexes.length,"accountKeyIndexes"),Pn(s.length,"encodedDataLength"),Pn(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(Xc);for(const r of this.addressTableLookups){const i=Array();gs(i,r.writableIndexes.length);const s=Array();gs(s,r.readonlyIndexes.length);const o=it([jt("accountKey"),Pn(i.length,"encodedWritableIndexesLength"),Zr(Qt(),r.writableIndexes.length,"writableIndexes"),Pn(s.length,"encodedReadonlyIndexesLength"),Zr(Qt(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=Yo(n),i=r&Jw;sn(r!==i,"Expected versioned message but received legacy message");const s=i;sn(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:Yo(n),numReadonlySignedAccounts:Yo(n),numReadonlyUnsignedAccounts:Yo(n)},a=[],c=Wi(n);for(let p=0;p<c;p++)a.push(new xe(qi(n,0,na)));const l=Jr.encode(qi(n,0,na)),u=Wi(n),d=[];for(let p=0;p<u;p++){const g=Yo(n),w=Wi(n),y=qi(n,0,w),b=Wi(n),m=new Uint8Array(qi(n,0,b));d.push({programIdIndex:g,accountKeyIndexes:y,data:m})}const f=Wi(n),h=[];for(let p=0;p<f;p++){const g=new xe(qi(n,0,na)),w=Wi(n),y=qi(n,0,w),b=Wi(n),m=qi(n,0,b);h.push({accountKey:g,writableIndexes:y,readonlyIndexes:m})}return new au({header:o,staticAccountKeys:a,recentBlockhash:l,compiledInstructions:d,addressTableLookups:h})}}const wS={deserializeMessageVersion(t){const e=t[0],n=e&Jw;return n===e?"legacy":n},deserialize:t=>{const e=wS.deserializeMessageVersion(t);if(e==="legacy")return Ao.from(t);if(e===0)return au.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let ka=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const FY=gt.alloc(cp).fill(0);class vn{constructor(e){this.keys=void 0,this.programId=void 0,this.data=gt.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ft{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new vn(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let g=0;g<n.length;g++)if(n[g].programId===void 0)throw new Error(`Transaction instruction index ${g} has undefined program id`);const i=[],s=[];n.forEach(g=>{g.keys.forEach(y=>{s.push({...y})});const w=g.programId.toString();i.includes(w)||i.push(w)}),i.forEach(g=>{s.push({pubkey:new xe(g),isSigner:!1,isWritable:!1})});const o=[];s.forEach(g=>{const w=g.pubkey.toString(),y=o.findIndex(b=>b.pubkey.toString()===w);y>-1?(o[y].isWritable=o[y].isWritable||g.isWritable,o[y].isSigner=o[y].isSigner||g.isSigner):o.push(g)}),o.sort(function(g,w){if(g.isSigner!==w.isSigner)return g.isSigner?-1:1;if(g.isWritable!==w.isWritable)return g.isWritable?-1:1;const y={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return g.pubkey.toBase58().localeCompare(w.pubkey.toBase58(),"en",y)});const a=o.findIndex(g=>g.pubkey.equals(r));if(a>-1){const[g]=o.splice(a,1);g.isSigner=!0,g.isWritable=!0,o.unshift(g)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const g of this.signatures){const w=o.findIndex(y=>y.pubkey.equals(g.publicKey));if(w>-1)o[w].isSigner||(o[w].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${g.publicKey.toString()}`)}let c=0,l=0,u=0;const d=[],f=[];o.forEach(({pubkey:g,isSigner:w,isWritable:y})=>{w?(d.push(g.toString()),c+=1,y||(l+=1)):(f.push(g.toString()),y||(u+=1))});const h=d.concat(f),p=n.map(g=>{const{data:w,programId:y}=g;return{programIdIndex:h.indexOf(y.toString()),accounts:g.keys.map(b=>h.indexOf(b.pubkey.toString())),data:Jr.encode(w)}});return p.forEach(g=>{sn(g.programIdIndex>=0),g.accounts.forEach(w=>sn(w>=0))}),new Ao({header:{numRequiredSignatures:c,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:u},accountKeys:h,recentBlockhash:e,instructions:p})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((i,s)=>n[s].equals(i.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const i=r.toString();return n.has(i)?!1:(n.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(i=>{const s=hS(r,i.secretKey);this._addSignature(i.publicKey,Ut(s))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){sn(n.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=gt.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?n&&(r.missing||(r.missing=[])).push(s):OY(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,n);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:n}=this,r=[];gs(r,n.length);const i=r.length+n.length*64+e.length,s=gt.alloc(i);return sn(n.length<256),gt.from(r).copy(s,0),n.forEach(({signature:o},a)=>{o!==null&&(sn(o.length===64,"signature has invalid length"),gt.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+n.length*64),sn(s.length<=Xc,`Transaction too large: ${s.length} > ${Xc}`),s}get keys(){return sn(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return sn(this.instructions.length===1),this.instructions[0].programId}get data(){return sn(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=Wi(n);let i=[];for(let s=0;s<r;s++){const o=qi(n,0,cp);i.push(Jr.encode(gt.from(o)))}return Ft.populate(Ao.from(n),i)}static populate(e,n=[]){const r=new Ft;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((i,s)=>{const o={signature:i==Jr.encode(FY)?null:Jr.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new vn({keys:s,programId:e.accountKeys[i.programIdIndex],data:Jr.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class Rc{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,n){const{header:r,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:c}=r,l=o-a;sn(l>0,"Message header is invalid");const u=e.staticAccountKeys.length-o-c;sn(u>=0,"Message header is invalid");const d=e.getAccountKeys(n),f=d.get(0);if(f===void 0)throw new Error("Failed to decompile message because no account keys were found");const h=[];for(const p of i){const g=[];for(const y of p.accountKeyIndexes){const b=d.get(y);if(b===void 0)throw new Error(`Failed to find key for account key index ${y}`);const m=y<o;let x;m?x=y<l:y<d.staticAccountKeys.length?x=y-o<u:x=y-d.staticAccountKeys.length<d.accountKeysFromLookups.writable.length,g.push({pubkey:b,isSigner:y<r.numRequiredSignatures,isWritable:x})}const w=d.get(p.programIdIndex);if(w===void 0)throw new Error(`Failed to find program id for program id index ${p.programIdIndex}`);h.push(new vn({programId:w,data:Ut(p.data),keys:g}))}return new Rc({payerKey:f,instructions:h,recentBlockhash:s})}compileToLegacyMessage(){return Ao.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return au.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class ys{get version(){return this.message.version}constructor(e,n){if(this.signatures=void 0,this.message=void 0,n!==void 0)sn(n.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=n;else{const r=[];for(let i=0;i<e.header.numRequiredSignatures;i++)r.push(new Uint8Array(cp));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),n=Array();gs(n,this.signatures.length);const r=it([Pn(n.length,"encodedSignaturesLength"),Zr($Y(),this.signatures.length,"signatures"),Pn(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=r.encode({encodedSignaturesLength:new Uint8Array(n),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let n=[...e];const r=[],i=Wi(n);for(let o=0;o<i;o++)r.push(new Uint8Array(qi(n,0,cp)));const s=wS.deserialize(new Uint8Array(n));return new ys(s,r)}sign(e){const n=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=r.findIndex(o=>o.equals(i.publicKey));sn(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=hS(n,i.secretKey)}}addSignature(e,n){sn(n.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));sn(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=n}}const zY=160,KY=64,HY=zY/KY,d6=1e3/HY,qo=new xe("SysvarC1ock11111111111111111111111111111111"),WY=new xe("SysvarEpochSchedu1e111111111111111111111111"),qY=new xe("Sysvar1nstructions1111111111111111111111111"),T0=new xe("SysvarRecentB1ockHashes11111111111111111111"),Ud=new xe("SysvarRent111111111111111111111111111111111"),VY=new xe("SysvarRewards111111111111111111111111111111"),GY=new xe("SysvarS1otHashes111111111111111111111111111"),YY=new xe("SysvarS1otHistory11111111111111111111111111"),O0=new xe("SysvarStakeHistory1111111111111111111111111");class up extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,n(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const JY={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class at extends Error{constructor({code:e,message:n,data:r},i){super(i!=null?`${i}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}async function v2(t,e,n,r){const i=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},s=await t.sendTransaction(e,n,i);let o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await t.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},r&&r.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:a}=e.nonceInfo,c=a.keys[0].pubkey;o=(await t.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:e.nonceInfo.nonce,signature:s},r&&r.commitment)).value}else(r==null?void 0:r.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await t.confirmTransaction(s,r&&r.commitment)).value;if(o.err)throw s!=null?new up({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function Pl(t){return new Promise(e=>setTimeout(e,t))}function Xt(t,e){const n=t.layout.span>=0?t.layout.span:l6(t,e),r=gt.alloc(n),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,r),r}function ln(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.instruction!==t.index)throw new Error(`invalid instruction; instruction index mismatch ${n.instruction} != ${t.index}`);return n}const f6=Hr("lamportsPerSignature"),h6=it([rt("version"),rt("state"),jt("authorizedPubkey"),jt("nonce"),it([f6],"feeCalculator")]),x2=h6.span;class Xw{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=h6.decode(Ut(e),0);return new Xw({authorizedPubkey:new xe(n.authorizedPubkey),nonce:new xe(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function jd(t){const e=Pn(8,t),n=e.decode.bind(e),r=e.encode.bind(e),i=e,s=AG();return i.decode=(o,a)=>{const c=n(o,a);return s.decode(c)},i.encode=(o,a,c)=>{const l=s.encode(o);return r(l,a,c)},i}class ZY{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=rt("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(_n))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:n,space:r,programId:i}=ln(_n.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:n,space:r,programId:new xe(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:n}=ln(_n.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:n}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:n,seed:r,programId:i}=ln(_n.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:n,seed:r,programId:new xe(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:n}=ln(_n.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:n}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:n,seed:r,space:i,programId:s}=ln(_n.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new xe(n),seed:r,space:i,programId:new xe(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:n}=ln(_n.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new xe(n)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:n,seed:r,programId:i}=ln(_n.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new xe(n),seed:r,programId:new xe(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:n,seed:r,lamports:i,space:s,programId:o}=ln(_n.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new xe(n),seed:r,lamports:i,space:s,programId:new xe(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:n}=ln(_n.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new xe(n)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ln(_n.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:n}=ln(_n.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:n}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:n}=ln(_n.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new xe(n)}}static checkProgramId(e){if(!e.equals(mn.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,n){if(e.length<n)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${n}`)}}const _n=Object.freeze({Create:{index:0,layout:it([rt("instruction"),ps("lamports"),ps("space"),jt("programId")])},Assign:{index:1,layout:it([rt("instruction"),jt("programId")])},Transfer:{index:2,layout:it([rt("instruction"),jd("lamports")])},CreateWithSeed:{index:3,layout:it([rt("instruction"),jt("base"),jl("seed"),ps("lamports"),ps("space"),jt("programId")])},AdvanceNonceAccount:{index:4,layout:it([rt("instruction")])},WithdrawNonceAccount:{index:5,layout:it([rt("instruction"),ps("lamports")])},InitializeNonceAccount:{index:6,layout:it([rt("instruction"),jt("authorized")])},AuthorizeNonceAccount:{index:7,layout:it([rt("instruction"),jt("authorized")])},Allocate:{index:8,layout:it([rt("instruction"),ps("space")])},AllocateWithSeed:{index:9,layout:it([rt("instruction"),jt("base"),jl("seed"),ps("space"),jt("programId")])},AssignWithSeed:{index:10,layout:it([rt("instruction"),jt("base"),jl("seed"),jt("programId")])},TransferWithSeed:{index:11,layout:it([rt("instruction"),jd("lamports"),jl("seed"),jt("programId")])},UpgradeNonceAccount:{index:12,layout:it([rt("instruction")])}});class mn{constructor(){}static createAccount(e){const n=_n.Create,r=Xt(n,{lamports:e.lamports,space:e.space,programId:Ut(e.programId.toBuffer())});return new vn({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const i=_n.TransferWithSeed;n=Xt(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Ut(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=_n.Transfer;n=Xt(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new vn({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const i=_n.AssignWithSeed;n=Xt(i,{base:Ut(e.basePubkey.toBuffer()),seed:e.seed,programId:Ut(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=_n.Assign;n=Xt(i,{programId:Ut(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new vn({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=_n.CreateWithSeed,r=Xt(n,{base:Ut(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Ut(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new vn({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){const n=new Ft;"basePubkey"in e&&"seed"in e?n.add(mn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:x2,programId:this.programId})):n.add(mn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:x2,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=_n.InitializeNonceAccount,r=Xt(n,{authorized:Ut(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:T0,isSigner:!1,isWritable:!1},{pubkey:Ud,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new vn(i)}static nonceAdvance(e){const n=_n.AdvanceNonceAccount,r=Xt(n),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:T0,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new vn(i)}static nonceWithdraw(e){const n=_n.WithdrawNonceAccount,r=Xt(n,{lamports:e.lamports});return new vn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:T0,isSigner:!1,isWritable:!1},{pubkey:Ud,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=_n.AuthorizeNonceAccount,r=Xt(n,{authorized:Ut(e.newAuthorizedPubkey.toBuffer())});return new vn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const i=_n.AllocateWithSeed;n=Xt(i,{base:Ut(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Ut(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=_n.Allocate;n=Xt(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new vn({keys:r,programId:this.programId,data:n})}}mn.programId=new xe("11111111111111111111111111111111");const XY=Xc-300;class cu{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/cu.chunkSize)+1+1)}static async load(e,n,r,i,s){{const d=await e.getMinimumBalanceForRentExemption(s.length),f=await e.getAccountInfo(r.publicKey,"confirmed");let h=null;if(f!==null){if(f.executable)return console.error("Program load failed, account is already executable"),!1;f.data.length!==s.length&&(h=h||new Ft,h.add(mn.allocate({accountPubkey:r.publicKey,space:s.length}))),f.owner.equals(i)||(h=h||new Ft,h.add(mn.assign({accountPubkey:r.publicKey,programId:i}))),f.lamports<d&&(h=h||new Ft,h.add(mn.transfer({fromPubkey:n.publicKey,toPubkey:r.publicKey,lamports:d-f.lamports})))}else h=new Ft().add(mn.createAccount({fromPubkey:n.publicKey,newAccountPubkey:r.publicKey,lamports:d>0?d:1,space:s.length,programId:i}));h!==null&&await v2(e,h,[n,r],{commitment:"confirmed"})}const o=it([rt("instruction"),rt("offset"),rt("bytesLength"),rt("bytesLengthPadding"),Zr(Qt("byte"),Zc(rt(),-8),"bytes")]),a=cu.chunkSize;let c=0,l=s,u=[];for(;l.length>0;){const d=l.slice(0,a),f=gt.alloc(a+16);o.encode({instruction:0,offset:c,bytes:d,bytesLength:0,bytesLengthPadding:0},f);const h=new Ft().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:f});u.push(v2(e,h,[n,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Pl(1e3/4),c+=a,l=l.slice(a)}await Promise.all(u);{const d=it([rt("instruction")]),f=gt.alloc(d.span);d.encode({instruction:1},f);const h=new Ft().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Ud,isSigner:!1,isWritable:!1}],programId:i,data:f}),p="processed",g=await e.sendTransaction(h,[n,r],{preflightCommitment:p}),{context:w,value:y}=await e.confirmTransaction({signature:g,lastValidBlockHeight:h.lastValidBlockHeight,blockhash:h.recentBlockhash},p);if(y.err)throw new Error(`Transaction ${g} failed (${JSON.stringify(y)})`);for(;;){try{if(await e.getSlot({commitment:p})>w.slot)break}catch{}await new Promise(b=>setTimeout(b,Math.round(d6/2)))}}return!0}}cu.chunkSize=XY;const QY=new xe("BPFLoader2111111111111111111111111111111111");class eJ{static getMinNumSignatures(e){return cu.getMinNumSignatures(e)}static load(e,n,r,i,s){return cu.load(e,n,r,s,i)}}function tJ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wb,OA;function nJ(){if(OA)return Wb;OA=1;var t=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function n(r,i){var s,o,a,c,l,u,d;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),i);if(d=t.call(r),d==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=n(r[s],!0)+",";return o>-1&&(a+=n(r[s],!0)),a+"]"}else if(d==="[object Object]"){for(c=e(r).sort(),o=c.length,a="",s=0;s<o;)l=c[s],u=n(r[l],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Wb=function(r){var i=n(r,!1);if(i!==void 0)return""+i},Wb}var rJ=nJ(),PA=tJ(rJ);const jf=32;function qb(t){let e=0;for(;t>1;)t/=2,e++;return e}function iJ(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class p6{constructor(e,n,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=qb(iJ(e+jf+1))-qb(jf)-1,r=this.getSlotsInEpoch(n),i=e-(r-jf);return[n,i]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=n%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*jf:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+qb(jf)):this.slotsPerEpoch}}var sJ=globalThis.fetch;class oJ extends uY{constructor(e,n,r){const i=s=>{const o=cY(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function aJ(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const NA=56;class E2{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=aJ(cJ,e),r=e.length-NA;sn(r>=0,"lookup table is invalid"),sn(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=it([Zr(jt(),i,"addresses")]).decode(e.slice(NA));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new xe(n.authority[0]):void 0,addresses:s.map(o=>new xe(o))}}}const cJ={index:1,layout:it([rt("typeIndex"),jd("deactivationSlot"),Hr("lastExtendedSlot"),Qt("lastExtendedStartIndex"),Qt(),Zr(jt(),Zc(Qt(),-1),"authority")])},lJ=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function uJ(t){const e=t.match(lJ);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${r}${c}${s}`}const Wn=jp(dS(xe),Be(),t=>new xe(t)),g6=fS([Be(),Fn("base64")]),yS=jp(dS(gt),g6,t=>gt.from(t[0],"base64")),m6=30*1e3;function dJ(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function xn(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...i}=t;e=r,n=i}return{commitment:e,config:n}}function LA(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function w6(t){return Di([Ae({jsonrpc:Fn("2.0"),id:Be(),result:t}),Ae({jsonrpc:Fn("2.0"),id:Be(),error:Ae({code:cf(),message:Be(),data:ft(PG())})})])}const fJ=w6(cf());function Mt(t){return jp(w6(t),fJ,e=>"error"in e?e:{...e,result:He(e.result,t)})}function nr(t){return Mt(Ae({context:Ae({slot:ue()}),value:t}))}function Qw(t){return Ae({context:Ae({slot:ue()}),value:t})}function Vb(t,e){return t===0?new au({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new xe(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:Jr.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new Ao(e)}const hJ=Ae({foundation:ue(),foundationTerm:ue(),initial:ue(),taper:ue(),terminal:ue()}),pJ=Mt(Ye(Je(Ae({epoch:ue(),effectiveSlot:ue(),amount:ue(),postBalance:ue(),commission:ft(Je(ue()))})))),gJ=Ye(Ae({slot:ue(),prioritizationFee:ue()})),mJ=Ae({total:ue(),validator:ue(),foundation:ue(),epoch:ue()}),wJ=Ae({epoch:ue(),slotIndex:ue(),slotsInEpoch:ue(),absoluteSlot:ue(),blockHeight:ft(ue()),transactionCount:ft(ue())}),yJ=Ae({slotsPerEpoch:ue(),leaderScheduleSlotOffset:ue(),warmup:aa(),firstNormalEpoch:ue(),firstNormalSlot:ue()}),bJ=W8(Be(),Ye(ue())),Su=Je(Di([Ae({}),Be()])),vJ=Ae({err:Su}),xJ=Fn("receivedSignature"),EJ=Ae({"solana-core":Be(),"feature-set":ft(ue())}),SJ=Ae({program:Be(),programId:Wn,parsed:cf()}),_J=Ae({programId:Wn,accounts:Ye(Wn),data:Be()}),DA=nr(Ae({err:Je(Di([Ae({}),Be()])),logs:Je(Ye(Be())),accounts:ft(Je(Ye(Je(Ae({executable:aa(),owner:Be(),lamports:ue(),data:Ye(Be()),rentEpoch:ft(ue())}))))),unitsConsumed:ft(ue()),returnData:ft(Je(Ae({programId:Be(),data:fS([Be(),Fn("base64")])}))),innerInstructions:ft(Je(Ye(Ae({index:ue(),instructions:Ye(Di([SJ,_J]))}))))})),kJ=nr(Ae({byIdentity:W8(Be(),Ye(ue())),range:Ae({firstSlot:ue(),lastSlot:ue()})}));function AJ(t,e,n,r,i,s){const o=n||sJ;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return r&&(c=async(u,d)=>{const f=await new Promise((h,p)=>{try{r(u,d,(g,w)=>h([g,w]))}catch(g){p(g)}});return await o(...f)}),new sY(async(u,d)=>{const f={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},AZ)};try{let h=5,p,g=500;for(;c?p=await c(t,f):p=await o(t,f),!(p.status!==429||i===!0||(h-=1,h===0));)console.error(`Server responded with ${p.status} ${p.statusText}.  Retrying after ${g}ms delay...`),await Pl(g),g*=2;const w=await p.text();p.ok?d(null,w):d(new Error(`${p.status} ${p.statusText}: ${w}`))}catch(h){h instanceof Error&&d(h)}},{})}function IJ(t){return(e,n)=>new Promise((r,i)=>{t.request(e,n,(s,o)=>{if(s){i(s);return}r(o)})})}function CJ(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const i=e.map(s=>t.request(s.methodName,s.args));t.request(i,(s,o)=>{if(s){r(s);return}n(o)})})}const RJ=Mt(hJ),TJ=Mt(mJ),OJ=Mt(gJ),PJ=Mt(wJ),NJ=Mt(yJ),LJ=Mt(bJ),DJ=Mt(ue()),$J=nr(Ae({total:ue(),circulating:ue(),nonCirculating:ue(),nonCirculatingAccounts:Ye(Wn)})),S2=Ae({amount:Be(),uiAmount:Je(ue()),decimals:ue(),uiAmountString:ft(Be())}),BJ=nr(Ye(Ae({address:Wn,amount:Be(),uiAmount:Je(ue()),decimals:ue(),uiAmountString:ft(Be())}))),MJ=nr(Ye(Ae({pubkey:Wn,account:Ae({executable:aa(),owner:Wn,lamports:ue(),data:yS,rentEpoch:ue()})}))),_2=Ae({program:Be(),parsed:cf(),space:ue()}),UJ=nr(Ye(Ae({pubkey:Wn,account:Ae({executable:aa(),owner:Wn,lamports:ue(),data:_2,rentEpoch:ue()})}))),jJ=nr(Ye(Ae({lamports:ue(),address:Wn}))),dp=Ae({executable:aa(),owner:Wn,lamports:ue(),data:yS,rentEpoch:ue()}),FJ=Ae({pubkey:Wn,account:dp}),zJ=jp(Di([dS(gt),_2]),Di([g6,_2]),t=>Array.isArray(t)?He(t,yS):t),k2=Ae({executable:aa(),owner:Wn,lamports:ue(),data:zJ,rentEpoch:ue()}),KJ=Ae({pubkey:Wn,account:k2}),HJ=Ae({state:Di([Fn("active"),Fn("inactive"),Fn("activating"),Fn("deactivating")]),active:ue(),inactive:ue()}),WJ=Mt(Ye(Ae({signature:Be(),slot:ue(),err:Su,memo:Je(Be()),blockTime:ft(Je(ue()))}))),qJ=Mt(Ye(Ae({signature:Be(),slot:ue(),err:Su,memo:Je(Be()),blockTime:ft(Je(ue()))}))),VJ=Ae({subscription:ue(),result:Qw(dp)}),GJ=Ae({pubkey:Wn,account:dp}),YJ=Ae({subscription:ue(),result:Qw(GJ)}),JJ=Ae({parent:ue(),slot:ue(),root:ue()}),ZJ=Ae({subscription:ue(),result:JJ}),XJ=Di([Ae({type:Di([Fn("firstShredReceived"),Fn("completed"),Fn("optimisticConfirmation"),Fn("root")]),slot:ue(),timestamp:ue()}),Ae({type:Fn("createdBank"),parent:ue(),slot:ue(),timestamp:ue()}),Ae({type:Fn("frozen"),slot:ue(),timestamp:ue(),stats:Ae({numTransactionEntries:ue(),numSuccessfulTransactions:ue(),numFailedTransactions:ue(),maxTransactionsPerEntry:ue()})}),Ae({type:Fn("dead"),slot:ue(),timestamp:ue(),err:Be()})]),QJ=Ae({subscription:ue(),result:XJ}),eZ=Ae({subscription:ue(),result:Qw(Di([vJ,xJ]))}),tZ=Ae({subscription:ue(),result:ue()}),nZ=Ae({pubkey:Be(),gossip:Je(Be()),tpu:Je(Be()),rpc:Je(Be()),version:Je(Be())}),$A=Ae({votePubkey:Be(),nodePubkey:Be(),activatedStake:ue(),epochVoteAccount:aa(),epochCredits:Ye(fS([ue(),ue(),ue()])),commission:ue(),lastVote:ue(),rootSlot:Je(ue())}),rZ=Mt(Ae({current:Ye($A),delinquent:Ye($A)})),iZ=Di([Fn("processed"),Fn("confirmed"),Fn("finalized")]),sZ=Ae({slot:ue(),confirmations:Je(ue()),err:Su,confirmationStatus:ft(iZ)}),oZ=nr(Ye(Je(sZ))),aZ=Mt(ue()),y6=Ae({accountKey:Wn,writableIndexes:Ye(ue()),readonlyIndexes:Ye(ue())}),bS=Ae({signatures:Ye(Be()),message:Ae({accountKeys:Ye(Be()),header:Ae({numRequiredSignatures:ue(),numReadonlySignedAccounts:ue(),numReadonlyUnsignedAccounts:ue()}),instructions:Ye(Ae({accounts:Ye(ue()),data:Be(),programIdIndex:ue()})),recentBlockhash:Be(),addressTableLookups:ft(Ye(y6))})}),b6=Ae({pubkey:Wn,signer:aa(),writable:aa(),source:ft(Di([Fn("transaction"),Fn("lookupTable")]))}),v6=Ae({accountKeys:Ye(b6),signatures:Ye(Be())}),x6=Ae({parsed:cf(),program:Be(),programId:Wn}),E6=Ae({accounts:Ye(Wn),data:Be(),programId:Wn}),cZ=Di([E6,x6]),lZ=Di([Ae({parsed:cf(),program:Be(),programId:Be()}),Ae({accounts:Ye(Be()),data:Be(),programId:Be()})]),S6=jp(cZ,lZ,t=>"accounts"in t?He(t,E6):He(t,x6)),_6=Ae({signatures:Ye(Be()),message:Ae({accountKeys:Ye(b6),instructions:Ye(S6),recentBlockhash:Be(),addressTableLookups:ft(Je(Ye(y6)))})}),Mm=Ae({accountIndex:ue(),mint:Be(),owner:ft(Be()),programId:ft(Be()),uiTokenAmount:S2}),k6=Ae({writable:Ye(Wn),readonly:Ye(Wn)}),ey=Ae({err:Su,fee:ue(),innerInstructions:ft(Je(Ye(Ae({index:ue(),instructions:Ye(Ae({accounts:Ye(ue()),data:Be(),programIdIndex:ue()}))})))),preBalances:Ye(ue()),postBalances:Ye(ue()),logMessages:ft(Je(Ye(Be()))),preTokenBalances:ft(Je(Ye(Mm))),postTokenBalances:ft(Je(Ye(Mm))),loadedAddresses:ft(k6),computeUnitsConsumed:ft(ue())}),vS=Ae({err:Su,fee:ue(),innerInstructions:ft(Je(Ye(Ae({index:ue(),instructions:Ye(S6)})))),preBalances:Ye(ue()),postBalances:Ye(ue()),logMessages:ft(Je(Ye(Be()))),preTokenBalances:ft(Je(Ye(Mm))),postTokenBalances:ft(Je(Ye(Mm))),loadedAddresses:ft(k6),computeUnitsConsumed:ft(ue())}),lf=Di([Fn(0),Fn("legacy")]),_u=Ae({pubkey:Be(),lamports:ue(),postBalance:Je(ue()),rewardType:Je(Be()),commission:ft(Je(ue()))}),uZ=Mt(Je(Ae({blockhash:Be(),previousBlockhash:Be(),parentSlot:ue(),transactions:Ye(Ae({transaction:bS,meta:Je(ey),version:ft(lf)})),rewards:ft(Ye(_u)),blockTime:Je(ue()),blockHeight:Je(ue())}))),dZ=Mt(Je(Ae({blockhash:Be(),previousBlockhash:Be(),parentSlot:ue(),rewards:ft(Ye(_u)),blockTime:Je(ue()),blockHeight:Je(ue())}))),fZ=Mt(Je(Ae({blockhash:Be(),previousBlockhash:Be(),parentSlot:ue(),transactions:Ye(Ae({transaction:v6,meta:Je(ey),version:ft(lf)})),rewards:ft(Ye(_u)),blockTime:Je(ue()),blockHeight:Je(ue())}))),hZ=Mt(Je(Ae({blockhash:Be(),previousBlockhash:Be(),parentSlot:ue(),transactions:Ye(Ae({transaction:_6,meta:Je(vS),version:ft(lf)})),rewards:ft(Ye(_u)),blockTime:Je(ue()),blockHeight:Je(ue())}))),pZ=Mt(Je(Ae({blockhash:Be(),previousBlockhash:Be(),parentSlot:ue(),transactions:Ye(Ae({transaction:v6,meta:Je(vS),version:ft(lf)})),rewards:ft(Ye(_u)),blockTime:Je(ue()),blockHeight:Je(ue())}))),gZ=Mt(Je(Ae({blockhash:Be(),previousBlockhash:Be(),parentSlot:ue(),rewards:ft(Ye(_u)),blockTime:Je(ue()),blockHeight:Je(ue())}))),mZ=Mt(Je(Ae({blockhash:Be(),previousBlockhash:Be(),parentSlot:ue(),transactions:Ye(Ae({transaction:bS,meta:Je(ey)})),rewards:ft(Ye(_u)),blockTime:Je(ue())}))),BA=Mt(Je(Ae({blockhash:Be(),previousBlockhash:Be(),parentSlot:ue(),signatures:Ye(Be()),blockTime:Je(ue())}))),Gb=Mt(Je(Ae({slot:ue(),meta:Je(ey),blockTime:ft(Je(ue())),transaction:bS,version:ft(lf)}))),Vg=Mt(Je(Ae({slot:ue(),transaction:_6,meta:Je(vS),blockTime:ft(Je(ue())),version:ft(lf)}))),wZ=nr(Ae({blockhash:Be(),lastValidBlockHeight:ue()})),yZ=nr(aa()),bZ=Ae({slot:ue(),numTransactions:ue(),numSlots:ue(),samplePeriodSecs:ue()}),vZ=Mt(Ye(bZ)),xZ=nr(Je(Ae({feeCalculator:Ae({lamportsPerSignature:ue()})}))),EZ=Mt(Be()),SZ=Mt(Be()),_Z=Ae({err:Su,logs:Ye(Be()),signature:Be()}),kZ=Ae({result:Qw(_Z),subscription:ue()}),AZ={"solana-client":"js/1.0.0-maintenance"};class bc{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const l={};return async u=>{const{commitment:d,config:f}=xn(u),h=this._buildArgs([],d,void 0,f),p=PA(h);return l[p]=l[p]??(async()=>{try{const g=await this._rpcRequest("getBlockHeight",h),w=He(g,Mt(ue()));if("error"in w)throw new at(w.error,"failed to get block height information");return w.result}finally{delete l[p]}})(),await l[p]}})();let r,i,s,o,a,c;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,i=n.httpHeaders,s=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,c=n.httpAgent),this._rpcEndpoint=dJ(e),this._rpcWsEndpoint=r||uJ(e),this._rpcClient=AJ(e,i,s,o,a,c),this._rpcRequest=IJ(this._rpcClient),this._rpcBatchRequest=CJ(this._rpcClient),this._rpcWebSocket=new oJ(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:i}=xn(n),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=He(o,nr(ue()));if("error"in a)throw new at(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=He(n,Mt(Je(ue())));if("error"in r)throw new at(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=He(e,Mt(ue()));if("error"in n)throw new at(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=He(e,DJ);if("error"in n)throw new at(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),i=He(r,$J);if("error"in i)throw new at(i.error,"failed to get supply");return i.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenSupply",r),s=He(i,nr(S2));if("error"in s)throw new at(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenAccountBalance",r),s=He(i,nr(S2));if("error"in s)throw new at(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,n,r){const{commitment:i,config:s}=xn(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),c=await this._rpcRequest("getTokenAccountsByOwner",a),l=He(c,MJ);if("error"in l)throw new at(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getParsedTokenAccountsByOwner(e,n,r){let i=[e.toBase58()];"mint"in n?i.push({mint:n.mint.toBase58()}):i.push({programId:n.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=He(o,UJ);if("error"in a)throw new at(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],i=await this._rpcRequest("getLargestAccounts",r),s=He(i,jJ);if("error"in s)throw new at(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenLargestAccounts",r),s=He(i,BJ);if("error"in s)throw new at(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:i}=xn(n),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=He(o,nr(Je(dp)));if("error"in a)throw new at(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:i}=xn(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=He(o,nr(Je(k2)));if("error"in a)throw new at(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:i}=xn(n),s=e.map(l=>l.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),c=He(a,nr(Ye(Je(k2))));if("error"in c)throw new at(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:i}=xn(n),s=e.map(l=>l.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),c=He(a,nr(Ye(Je(dp))));if("error"in c)throw new at(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:i,config:s}=xn(n),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),c=He(a,Mt(HJ));if("error"in c)throw new at(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,n){const{commitment:r,config:i}=xn(n),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:LA(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),l=Ye(FJ),u=o.withContext===!0?He(c,nr(l)):He(c,Mt(l));if("error"in u)throw new at(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:i}=xn(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=He(o,Mt(Ye(KJ)));if("error"in a)throw new at(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var s;let r;if(typeof e=="string")r=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=Jr.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return sn(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,i,s=!1;const o=new Promise((c,l)=>{try{r=this.onSignature(n,(d,f)=>{r=void 0;const h={context:f,value:d};c({__type:ka.PROCESSED,response:h})},e);const u=new Promise(d=>{r==null?d():i=this._onSubscriptionStateChange(r,f=>{f==="subscribed"&&d()})});(async()=>{if(await u,s)return;const d=await this.getSignatureStatus(n);if(s||d==null)return;const{context:f,value:h}=d;if(h!=null)if(h!=null&&h.err)l(h.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(h.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(h.confirmationStatus==="processed"||h.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,c({__type:ka.PROCESSED,response:{context:f,value:h}})}})()}catch(u){l(u)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(d=>{const f=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let h=await f();if(!s){for(;h<=r;)if(await Pl(1e3),s||(h=await f(),s))return;d({__type:ka.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),l=this.getCancellationPromise(n);let u;try{const d=await Promise.race([l,c,o]);if(d.__type===ka.PROCESSED)u=d.response;else throw new gS(i)}finally{s=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const c=new Promise(h=>{let p=s,g=null;const w=async()=>{try{const{context:y,value:b}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return g=y.slot,b==null?void 0:b.nonce}catch{return p}};(async()=>{if(p=await w(),!a)for(;;){if(s!==p){h({__type:ka.NONCE_INVALID,slotInWhichNonceDidAdvance:g});return}if(await Pl(2e3),a||(p=await w(),a))return}})()}),{abortConfirmation:l,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),d=this.getCancellationPromise(n);let f;try{const h=await Promise.race([d,u,c]);if(h.__type===ka.PROCESSED)f=h.response;else{let p;for(;;){const g=await this.getSignatureStatus(o);if(g==null)break;if(g.context.slot<(h.slotInWhichNonceDidAdvance??r)){await Pl(400);continue}p=g;break}if(p!=null&&p.value){const g=e||"finalized",{confirmationStatus:w}=p.value;switch(g){case"processed":case"recent":if(w!=="processed"&&w!=="confirmed"&&w!=="finalized")throw new ad(o);break;case"confirmed":case"single":case"singleGossip":if(w!=="confirmed"&&w!=="finalized")throw new ad(o);break;case"finalized":case"max":case"root":if(w!=="finalized")throw new ad(o);break;default:}f={context:p.context,value:{err:p.value.err}}}else throw new ad(o)}}finally{a=!0,l()}return f}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const i=new Promise(c=>{let l=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{l=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>c({__type:ka.TIMED_OUT,timeoutMs:l}),l)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const c=await Promise.race([o,i]);if(c.__type===ka.PROCESSED)a=c.response;else throw new mS(n,c.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=He(e,Mt(Ye(nZ)));if("error"in n)throw new at(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),i=He(r,rZ);if("error"in i)throw new at(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:n,config:r}=xn(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlot",i),o=He(s,Mt(ue()));if("error"in o)throw new at(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=xn(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=He(s,Mt(Be()));if("error"in o)throw new at(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],i=await this._rpcRequest("getSlotLeaders",r),s=He(i,Mt(Ye(Wn)));if("error"in s)throw new at(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,n){const{context:r,value:i}=await this.getSignatureStatuses([e],n);sn(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const i=await this._rpcRequest("getSignatureStatuses",r),s=He(i,oZ);if("error"in s)throw new at(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:n,config:r}=xn(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=He(s,Mt(ue()));if("error"in o)throw new at(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),i=He(r,RJ);if("error"in i)throw new at(i.error,"failed to get inflation");return i.result}async getInflationReward(e,n,r){const{commitment:i,config:s}=xn(r),o=this._buildArgs([e.map(l=>l.toBase58())],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),c=He(a,pJ);if("error"in c)throw new at(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=He(e,TJ);if("error"in n)throw new at(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=xn(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=He(s,PJ);if("error"in o)throw new at(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=He(e,NJ);if("error"in n)throw new at(n.error,"failed to get epoch schedule");const r=n.result;return new p6(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=He(e,LJ);if("error"in n)throw new at(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=He(i,aZ);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=He(n,vZ);if("error"in r)throw new at(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=He(i,xZ);if("error"in s)throw new at(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=Ut(e.serialize()).toString("base64"),i=this._buildArgs([r],n),s=await this._rpcRequest("getFeeForMessage",i),o=He(s,nr(Je(ue())));if("error"in o)throw new at(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=He(i,OJ);if("error"in s)throw new at(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=xn(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=He(s,wZ);if("error"in o)throw new at(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:i}=xn(n),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=He(o,yZ);if("error"in a)throw new at(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=He(e,Mt(EJ));if("error"in n)throw new at(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=He(e,Mt(Be()));if("error"in n)throw new at(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:i}=xn(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=He(o,fZ);if("error"in a)throw a.error;return a.result}case"none":{const a=He(o,dZ);if("error"in a)throw a.error;return a.result}default:{const a=He(o,uZ);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:l,meta:u,version:d})=>({meta:u,transaction:{...l,message:Vb(d,l.message)},version:d}))}:null}}}catch(a){throw new at(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:i}=xn(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=He(o,pZ);if("error"in a)throw a.error;return a.result}case"none":{const a=He(o,gZ);if("error"in a)throw a.error;return a.result}default:{const a=He(o,hZ);if("error"in a)throw a.error;return a.result}}}catch(a){throw new at(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...c}=e;r=a,n=c}const i=this._buildArgs([],r,"base64",n),s=await this._rpcRequest("getBlockProduction",i),o=He(s,kJ);if("error"in o)throw new at(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:i}=xn(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=He(o,Gb);if("error"in a)throw new at(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:Vb(c.version,c.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:i}=xn(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=He(o,Vg);if("error"in a)throw new at(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:i}=xn(n),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(c=>{const l=He(c,Vg);if("error"in l)throw new at(l.error,"failed to get transactions");return l.result})}async getTransactions(e,n){const{commitment:r,config:i}=xn(n),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(c=>{const l=He(c,Gb);if("error"in l)throw new at(l.error,"failed to get transactions");const u=l.result;return u&&{...u,transaction:{...u.transaction,message:Vb(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getBlock",r),s=He(i,mZ);if("error"in s)throw new at(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:l})=>{const u=new Ao(c.message);return{meta:l,transaction:{...c,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:l})=>({meta:l,transaction:Ft.populate(c.message,c.signatures)}))}}async getBlocks(e,n,r){const i=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),s=await this._rpcRequest("getBlocks",i),o=He(s,Mt(Ye(ue())));if("error"in o)throw new at(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=He(i,BA);if("error"in s)throw new at(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=He(i,BA);if("error"in s)throw new at(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getTransaction",r),s=He(i,Gb);if("error"in s)throw new at(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Ao(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:Ft.populate(a,c)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=He(i,Vg);if("error"in s)throw new at(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=He(o,Vg);if("error"in a)throw new at(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(n--,!(n<=0||n<s));)try{const c=await this.getConfirmedBlockSignatures(n,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const c=await this.getConfirmedBlockSignatures(r);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=He(s,WJ);if("error"in o)throw new at(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getSignaturesForAddress",i),o=He(s,qJ);if("error"in o)throw new at(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=new E2({key:e,state:E2.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=Xw.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),i=He(r,EZ);if("error"in i)throw new at(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Pl(100);const r=Date.now()-this._blockhashInfo.lastFetch>=m6;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Pl(d6/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=xn(e),i=this._buildArgs([],n,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=He(s,nr(ue()));if("error"in o)throw new at(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const g=e.serialize(),w=gt.from(g).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const y=n||{};y.encoding="base64","commitment"in y||(y.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(y.innerInstructions=n.innerInstructions);const b=[w,y],m=await this._rpcRequest("simulateTransaction",b),x=He(m,DA);if("error"in x)throw new Error("failed to simulate transaction: "+x.error.message);return x.result}let i;if(e instanceof Ft){let p=e;i=new Ft,i.feePayer=p.feePayer,i.instructions=e.instructions,i.nonceInfo=p.nonceInfo,i.signatures=p.signatures}else i=Ft.populate(e),i._message=i._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(i.nonceInfo&&s)i.sign(...s);else{let p=this._disableBlockhashCaching;for(;;){const g=await this._blockhashWithExpiryBlockHeight(p);if(i.lastValidBlockHeight=g.lastValidBlockHeight,i.recentBlockhash=g.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const w=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(w)&&!this._blockhashInfo.transactionSignatures.includes(w)){this._blockhashInfo.simulatedSignatures.push(w);break}else p=!0}}const o=i._compile(),a=o.serialize(),l=i._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const p=(Array.isArray(r)?r:o.nonProgramIds()).map(g=>g.toBase58());u.accounts={encoding:"base64",addresses:p}}s&&(u.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(u.innerInstructions=n.innerInstructions);const d=[l,u],f=await this._rpcRequest("simulateTransaction",d),h=He(f,DA);if("error"in h){let p;if("data"in h.error&&(p=h.error.data.logs,p&&Array.isArray(p))){const g=`
    `,w=g+p.join(g);console.error(h.error.message,w)}throw new up({action:"simulate",signature:"",transactionMessage:h.error.message,logs:p})}return h.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,n){const r=Ut(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},i=n&&n.skipPreflight,s=i===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),c=He(a,SZ);if("error"in c){let l;throw"data"in c.error&&(l=c.error.data.logs),new up({action:i?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:l})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var i;const r=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var s;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(n),()=>{i.delete(n),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!n())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...n)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=He(e,VJ);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,i=PA([e.method,n]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];sn(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:i,config:s}=xn(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=He(e,YJ);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,i){const{commitment:s,config:o}=xn(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:LA(i)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=He(e,kZ);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=He(e,ZJ);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=He(e,QJ);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,i){const s=n||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,i){const s=n||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,i)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=He(e,eZ);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,n,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(c,l)=>{n(c,l);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=He(e,tZ);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Zl{constructor(e){this._keypair=void 0,this._keypair=e??CA()}static generate(){return new Zl(CA())}static fromSecretKey(e,n){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!n||!n.skipValidation){const i=e.slice(0,32),s=Bm(i);for(let o=0;o<32;o++)if(r[o]!==s[o])throw new Error("provided secretKey is invalid")}return new Zl({publicKey:r,secretKey:e})}static fromSeed(e){const n=Bm(e),r=new Uint8Array(64);return r.set(e),r.set(n,32),new Zl({publicKey:n,secretKey:r})}get publicKey(){return new xe(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const La=Object.freeze({CreateLookupTable:{index:0,layout:it([rt("instruction"),jd("recentSlot"),Qt("bumpSeed")])},FreezeLookupTable:{index:1,layout:it([rt("instruction")])},ExtendLookupTable:{index:2,layout:it([rt("instruction"),jd(),Zr(jt(),Zc(rt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:it([rt("instruction")])},CloseLookupTable:{index:4,layout:it([rt("instruction")])}});class IZ{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=rt("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(La))if(o.index==r){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:n}=ln(La.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(n)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:n}=ln(La.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:n.map(r=>new xe(r))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(xS.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,n){if(e.length<n)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${n}`)}}class xS{constructor(){}static createLookupTable(e){const[n,r]=xe.findProgramAddressSync([e.authority.toBuffer(),z8().encode(e.recentSlot)],this.programId),i=La.CreateLookupTable,s=Xt(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),o=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:mn.programId,isSigner:!1,isWritable:!1}];return[new vn({programId:this.programId,keys:o,data:s}),n]}static freezeLookupTable(e){const n=La.FreezeLookupTable,r=Xt(n),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new vn({programId:this.programId,keys:i,data:r})}static extendLookupTable(e){const n=La.ExtendLookupTable,r=Xt(n,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:mn.programId,isSigner:!1,isWritable:!1}),new vn({programId:this.programId,keys:i,data:r})}static deactivateLookupTable(e){const n=La.DeactivateLookupTable,r=Xt(n),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new vn({programId:this.programId,keys:i,data:r})}static closeLookupTable(e){const n=La.CloseLookupTable,r=Xt(n),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new vn({programId:this.programId,keys:i,data:r})}}xS.programId=new xe("AddressLookupTab1e1111111111111111111111111");class CZ{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=Qt("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(Jo))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:n,additionalFee:r}=ln(Jo.RequestUnits,e.data);return{units:n,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:n}=ln(Jo.RequestHeapFrame,e.data);return{bytes:n}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:n}=ln(Jo.SetComputeUnitLimit,e.data);return{units:n}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:n}=ln(Jo.SetComputeUnitPrice,e.data);return{microLamports:n}}static checkProgramId(e){if(!e.equals(ES.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Jo=Object.freeze({RequestUnits:{index:0,layout:it([Qt("instruction"),rt("units"),rt("additionalFee")])},RequestHeapFrame:{index:1,layout:it([Qt("instruction"),rt("bytes")])},SetComputeUnitLimit:{index:2,layout:it([Qt("instruction"),rt("units")])},SetComputeUnitPrice:{index:3,layout:it([Qt("instruction"),jd("microLamports")])}});class ES{constructor(){}static requestUnits(e){const n=Jo.RequestUnits,r=Xt(n,e);return new vn({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const n=Jo.RequestHeapFrame,r=Xt(n,e);return new vn({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const n=Jo.SetComputeUnitLimit,r=Xt(n,e);return new vn({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const n=Jo.SetComputeUnitPrice,r=Xt(n,{microLamports:BigInt(e.microLamports)});return new vn({keys:[],programId:this.programId,data:r})}}ES.programId=new xe("ComputeBudget111111111111111111111111111111");const MA=64,UA=32,jA=64,FA=it([Qt("numSignatures"),Qt("padding"),Us("signatureOffset"),Us("signatureInstructionIndex"),Us("publicKeyOffset"),Us("publicKeyInstructionIndex"),Us("messageDataOffset"),Us("messageDataSize"),Us("messageInstructionIndex")]);class ty{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:n,message:r,signature:i,instructionIndex:s}=e;sn(n.length===UA,`Public Key must be ${UA} bytes but received ${n.length} bytes`),sn(i.length===jA,`Signature must be ${jA} bytes but received ${i.length} bytes`);const o=FA.span,a=o+n.length,c=a+i.length,l=1,u=gt.alloc(c+r.length),d=s??65535;return FA.encode({numSignatures:l,padding:0,signatureOffset:a,signatureInstructionIndex:d,publicKeyOffset:o,publicKeyInstructionIndex:d,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:d},u),u.fill(n,o),u.fill(i,a),u.fill(r,c),new vn({keys:[],programId:ty.programId,data:u})}static createInstructionWithPrivateKey(e){const{privateKey:n,message:r,instructionIndex:i}=e;sn(n.length===MA,`Private key must be ${MA} bytes but received ${n.length} bytes`);try{const s=Zl.fromSecretKey(n),o=s.publicKey.toBytes(),a=hS(r,s.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:a,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}ty.programId=new xe("Ed25519SigVerify111111111111111111111111111");const RZ=(t,e)=>{const n=Yw.sign(t,e);return[n.toCompactRawBytes(),n.recovery]};Yw.utils.isValidPrivateKey;const TZ=Yw.getPublicKey,zA=32,Yb=20,KA=64,OZ=11,Jb=it([Qt("numSignatures"),Us("signatureOffset"),Qt("signatureInstructionIndex"),Us("ethAddressOffset"),Qt("ethAddressInstructionIndex"),Us("messageDataOffset"),Us("messageDataSize"),Qt("messageInstructionIndex"),Pn(20,"ethAddress"),Pn(64,"signature"),Qt("recoveryId")]);class vd{constructor(){}static publicKeyToEthAddress(e){sn(e.length===KA,`Public key must be ${KA} bytes but received ${e.length} bytes`);try{return gt.from(SA(Ut(e))).slice(-Yb)}catch(n){throw new Error(`Error constructing Ethereum address: ${n}`)}}static createInstructionWithPublicKey(e){const{publicKey:n,message:r,signature:i,recoveryId:s,instructionIndex:o}=e;return vd.createInstructionWithEthAddress({ethAddress:vd.publicKeyToEthAddress(n),message:r,signature:i,recoveryId:s,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:n,message:r,signature:i,recoveryId:s,instructionIndex:o=0}=e;let a;typeof n=="string"?n.startsWith("0x")?a=gt.from(n.substr(2),"hex"):a=gt.from(n,"hex"):a=n,sn(a.length===Yb,`Address must be ${Yb} bytes but received ${a.length} bytes`);const c=1+OZ,l=c,u=c+a.length,d=u+i.length+1,f=1,h=gt.alloc(Jb.span+r.length);return Jb.encode({numSignatures:f,signatureOffset:u,signatureInstructionIndex:o,ethAddressOffset:l,ethAddressInstructionIndex:o,messageDataOffset:d,messageDataSize:r.length,messageInstructionIndex:o,signature:Ut(i),ethAddress:Ut(a),recoveryId:s},h),h.fill(Ut(r),Jb.span),new vn({keys:[],programId:vd.programId,data:h})}static createInstructionWithPrivateKey(e){const{privateKey:n,message:r,instructionIndex:i}=e;sn(n.length===zA,`Private key must be ${zA} bytes but received ${n.length} bytes`);try{const s=Ut(n),o=TZ(s,!1).slice(1),a=gt.from(SA(Ut(r))),[c,l]=RZ(a,s);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:c,recoveryId:l,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}vd.programId=new xe("KeccakSecp256k11111111111111111111111111111");var A6;const I6=new xe("StakeConfig11111111111111111111111111111111");class C6{constructor(e,n){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=n}}class Fp{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}A6=Fp;Fp.default=new A6(0,0,xe.default);class PZ{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=rt("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(Cr))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:n,lockup:r}=ln(Cr.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new C6(new xe(n.staker),new xe(n.withdrawer)),lockup:new Fp(r.unixTimestamp,r.epoch,new xe(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),ln(Cr.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:n,stakeAuthorizationType:r}=ln(Cr.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new xe(n),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:n,stakeAuthorizationType:r,authoritySeed:i,authorityOwner:s}=ln(Cr.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new xe(s),newAuthorizedPubkey:new xe(n),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:n}=ln(Cr.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:n}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ln(Cr.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:n}=ln(Cr.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:n};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),ln(Cr.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(ny.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,n){if(e.length<n)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${n}`)}}const Cr=Object.freeze({Initialize:{index:0,layout:it([rt("instruction"),BY(),MY()])},Authorize:{index:1,layout:it([rt("instruction"),jt("newAuthorized"),rt("stakeAuthorizationType")])},Delegate:{index:2,layout:it([rt("instruction")])},Split:{index:3,layout:it([rt("instruction"),ps("lamports")])},Withdraw:{index:4,layout:it([rt("instruction"),ps("lamports")])},Deactivate:{index:5,layout:it([rt("instruction")])},Merge:{index:7,layout:it([rt("instruction")])},AuthorizeWithSeed:{index:8,layout:it([rt("instruction"),jt("newAuthorized"),rt("stakeAuthorizationType"),jl("authoritySeed"),jt("authorityOwner")])}}),NZ=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class ny{constructor(){}static initialize(e){const{stakePubkey:n,authorized:r,lockup:i}=e,s=i||Fp.default,o=Cr.Initialize,a=Xt(o,{authorized:{staker:Ut(r.staker.toBuffer()),withdrawer:Ut(r.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:Ut(s.custodian.toBuffer())}}),c={keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Ud,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new vn(c)}static createAccountWithSeed(e){const n=new Ft;n.add(mn.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:i,lockup:s}=e;return n.add(this.initialize({stakePubkey:r,authorized:i,lockup:s}))}static createAccount(e){const n=new Ft;n.add(mn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:i,lockup:s}=e;return n.add(this.initialize({stakePubkey:r,authorized:i,lockup:s}))}static delegate(e){const{stakePubkey:n,authorizedPubkey:r,votePubkey:i}=e,s=Cr.Delegate,o=Xt(s);return new Ft().add({keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:qo,isSigner:!1,isWritable:!1},{pubkey:O0,isSigner:!1,isWritable:!1},{pubkey:I6,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){const{stakePubkey:n,authorizedPubkey:r,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:o}=e,a=Cr.Authorize,c=Xt(a,{newAuthorized:Ut(i.toBuffer()),stakeAuthorizationType:s.index}),l=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:qo,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&l.push({pubkey:o,isSigner:!0,isWritable:!1}),new Ft().add({keys:l,programId:this.programId,data:c})}static authorizeWithSeed(e){const{stakePubkey:n,authorityBase:r,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:c}=e,l=Cr.AuthorizeWithSeed,u=Xt(l,{newAuthorized:Ut(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:i,authorityOwner:Ut(s.toBuffer())}),d=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:qo,isSigner:!1,isWritable:!1}];return c&&d.push({pubkey:c,isSigner:!0,isWritable:!1}),new Ft().add({keys:d,programId:this.programId,data:u})}static splitInstruction(e){const{stakePubkey:n,authorizedPubkey:r,splitStakePubkey:i,lamports:s}=e,o=Cr.Split,a=Xt(o,{lamports:s});return new vn({keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(e,n){const r=new Ft;return r.add(mn.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:n,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,n){const{stakePubkey:r,authorizedPubkey:i,splitStakePubkey:s,basePubkey:o,seed:a,lamports:c}=e,l=new Ft;return l.add(mn.allocate({accountPubkey:s,basePubkey:o,seed:a,space:this.space,programId:this.programId})),n&&n>0&&l.add(mn.transfer({fromPubkey:e.authorizedPubkey,toPubkey:s,lamports:n})),l.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:i,splitStakePubkey:s,lamports:c}))}static merge(e){const{stakePubkey:n,sourceStakePubKey:r,authorizedPubkey:i}=e,s=Cr.Merge,o=Xt(s);return new Ft().add({keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:qo,isSigner:!1,isWritable:!1},{pubkey:O0,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){const{stakePubkey:n,authorizedPubkey:r,toPubkey:i,lamports:s,custodianPubkey:o}=e,a=Cr.Withdraw,c=Xt(a,{lamports:s}),l=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:qo,isSigner:!1,isWritable:!1},{pubkey:O0,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&l.push({pubkey:o,isSigner:!0,isWritable:!1}),new Ft().add({keys:l,programId:this.programId,data:c})}static deactivate(e){const{stakePubkey:n,authorizedPubkey:r}=e,i=Cr.Deactivate,s=Xt(i);return new Ft().add({keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:qo,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}ny.programId=new xe("Stake11111111111111111111111111111111111111");ny.space=200;class R6{constructor(e,n,r,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=n,this.authorizedWithdrawer=r,this.commission=i}}class LZ{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=rt("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(Zo))if(o.index==r){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:n}=ln(Zo.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new R6(new xe(n.nodePubkey),new xe(n.authorizedVoter),new xe(n.authorizedWithdrawer),n.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:n,voteAuthorizationType:r}=ln(Zo.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new xe(n),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:r,newAuthorized:i,voteAuthorizationType:s}}=ln(Zo.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new xe(n),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new xe(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:n}=ln(Zo.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:n,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(uf.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,n){if(e.length<n)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${n}`)}}const Zo=Object.freeze({InitializeAccount:{index:0,layout:it([rt("instruction"),UY()])},Authorize:{index:1,layout:it([rt("instruction"),jt("newAuthorized"),rt("voteAuthorizationType")])},Withdraw:{index:3,layout:it([rt("instruction"),ps("lamports")])},UpdateValidatorIdentity:{index:4,layout:it([rt("instruction")])},AuthorizeWithSeed:{index:10,layout:it([rt("instruction"),jY()])}}),DZ=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class uf{constructor(){}static initializeAccount(e){const{votePubkey:n,nodePubkey:r,voteInit:i}=e,s=Zo.InitializeAccount,o=Xt(s,{voteInit:{nodePubkey:Ut(i.nodePubkey.toBuffer()),authorizedVoter:Ut(i.authorizedVoter.toBuffer()),authorizedWithdrawer:Ut(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),a={keys:[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Ud,isSigner:!1,isWritable:!1},{pubkey:qo,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new vn(a)}static createAccount(e){const n=new Ft;return n.add(mn.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),n.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:n,authorizedPubkey:r,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,o=Zo.Authorize,a=Xt(o,{newAuthorized:Ut(i.toBuffer()),voteAuthorizationType:s.index}),c=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:qo,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ft().add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:n,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:o,votePubkey:a}=e,c=Zo.AuthorizeWithSeed,l=Xt(c,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Ut(r.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:Ut(s.toBuffer()),voteAuthorizationType:o.index}}),u=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:qo,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Ft().add({keys:u,programId:this.programId,data:l})}static withdraw(e){const{votePubkey:n,authorizedWithdrawerPubkey:r,lamports:i,toPubkey:s}=e,o=Zo.Withdraw,a=Xt(o,{lamports:i}),c=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ft().add({keys:c,programId:this.programId,data:a})}static safeWithdraw(e,n,r){if(e.lamports>n-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return uf.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:n,authorizedWithdrawerPubkey:r,nodePubkey:i}=e,s=Zo.UpdateValidatorIdentity,o=Xt(s),a=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ft().add({keys:a,programId:this.programId,data:o})}}uf.programId=new xe("Vote111111111111111111111111111111111111111");uf.space=3762;const T6=new xe("Va1idator1nfo111111111111111111111111111111"),$Z=Ae({name:Be(),website:ft(Be()),details:ft(Be()),iconUrl:ft(Be()),keybaseUsername:ft(Be())});class SS{constructor(e,n){this.key=void 0,this.info=void 0,this.key=e,this.info=n}static fromConfigData(e){let n=[...e];if(Wi(n)!==2)return null;const i=[];for(let s=0;s<2;s++){const o=new xe(qi(n,0,na)),a=Yo(n)===1;i.push({publicKey:o,isSigner:a})}if(i[0].publicKey.equals(T6)&&i[1].isSigner){const s=jl().decode(gt.from(n)),o=JSON.parse(s);return K8(o,$Z),new SS(i[1].publicKey,o)}return null}}const BZ=new xe("Vote111111111111111111111111111111111111111"),MZ=it([jt("nodePubkey"),jt("authorizedWithdrawer"),Qt("commission"),Hr(),Zr(it([Hr("slot"),rt("confirmationCount")]),Zc(rt(),-8),"votes"),Qt("rootSlotValid"),Hr("rootSlot"),Hr(),Zr(it([Hr("epoch"),jt("authorizedVoter")]),Zc(rt(),-8),"authorizedVoters"),it([Zr(it([jt("authorizedPubkey"),Hr("epochOfLastAuthorizedSwitch"),Hr("targetEpoch")]),32,"buf"),Hr("idx"),Qt("isEmpty")],"priorVoters"),Hr(),Zr(it([Hr("epoch"),Hr("credits"),Hr("prevCredits")]),Zc(rt(),-8),"epochCredits"),it([Hr("slot"),Hr("timestamp")],"lastTimestamp")]);class _S{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const r=MZ.decode(Ut(e),4);let i=r.rootSlot;return r.rootSlotValid||(i=null),new _S({nodePubkey:new xe(r.nodePubkey),authorizedWithdrawer:new xe(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:i,authorizedVoters:r.authorizedVoters.map(UZ),priorVoters:jZ(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function UZ({authorizedVoter:t,epoch:e}){return{epoch:e,authorizedVoter:new xe(t)}}function HA({authorizedPubkey:t,epochOfLastAuthorizedSwitch:e,targetEpoch:n}){return{authorizedPubkey:new xe(t),epochOfLastAuthorizedSwitch:e,targetEpoch:n}}function jZ({buf:t,idx:e,isEmpty:n}){return n?[]:[...t.slice(e+1).map(HA),...t.slice(0,e).map(HA)]}const WA={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function FZ(t,e){const n=e===!1?"http":"https";if(!t)return WA[n].devnet;const r=WA[n][t];if(!r)throw new Error(`Unknown ${n} cluster: ${t}`);return r}async function zZ(t,e,n,r){let i,s;n&&Object.prototype.hasOwnProperty.call(n,"lastValidBlockHeight")||n&&Object.prototype.hasOwnProperty.call(n,"nonceValue")?(i=n,s=r):s=n;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},a=await t.sendRawTransaction(e,o),c=s&&s.commitment,u=(await(i?t.confirmTransaction(i,c):t.confirmTransaction(a,c))).value;if(u.err)throw a!=null?new up({action:o!=null&&o.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(u)})`}):new Error(`Raw transaction ${a} failed (${JSON.stringify(u)})`);return a}const lo=1e9,KZ=Object.freeze(Object.defineProperty({__proto__:null,Account:LY,AddressLookupTableAccount:E2,AddressLookupTableInstruction:IZ,AddressLookupTableProgram:xS,Authorized:C6,BLOCKHASH_CACHE_TIMEOUT_MS:m6,BPF_LOADER_DEPRECATED_PROGRAM_ID:DY,BPF_LOADER_PROGRAM_ID:QY,BpfLoader:eJ,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:Jo,ComputeBudgetInstruction:CZ,ComputeBudgetProgram:ES,Connection:bc,Ed25519Program:ty,Enum:PY,EpochSchedule:p6,FeeCalculatorLayout:f6,Keypair:Zl,LAMPORTS_PER_SOL:lo,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:La,Loader:cu,Lockup:Fp,MAX_SEED_LENGTH:c6,Message:Ao,MessageAccountKeys:lp,MessageV0:au,NONCE_ACCOUNT_LENGTH:x2,NonceAccount:Xw,PACKET_DATA_SIZE:Xc,PUBLIC_KEY_LENGTH:na,PublicKey:xe,SIGNATURE_LENGTH_IN_BYTES:cp,SOLANA_SCHEMA:kh,STAKE_CONFIG_ID:I6,STAKE_INSTRUCTION_LAYOUTS:Cr,SYSTEM_INSTRUCTION_LAYOUTS:_n,SYSVAR_CLOCK_PUBKEY:qo,SYSVAR_EPOCH_SCHEDULE_PUBKEY:WY,SYSVAR_INSTRUCTIONS_PUBKEY:qY,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:T0,SYSVAR_RENT_PUBKEY:Ud,SYSVAR_REWARDS_PUBKEY:VY,SYSVAR_SLOT_HASHES_PUBKEY:GY,SYSVAR_SLOT_HISTORY_PUBKEY:YY,SYSVAR_STAKE_HISTORY_PUBKEY:O0,Secp256k1Program:vd,SendTransactionError:up,SolanaJSONRPCError:at,SolanaJSONRPCErrorCode:JY,StakeAuthorizationLayout:NZ,StakeInstruction:PZ,StakeProgram:ny,Struct:pS,SystemInstruction:ZY,SystemProgram:mn,Transaction:Ft,TransactionExpiredBlockheightExceededError:gS,TransactionExpiredNonceInvalidError:ad,TransactionExpiredTimeoutError:mS,TransactionInstruction:vn,TransactionMessage:Rc,TransactionStatus:ka,VALIDATOR_INFO_KEY:T6,VERSION_PREFIX_MASK:Jw,VOTE_PROGRAM_ID:BZ,ValidatorInfo:SS,VersionedMessage:wS,VersionedTransaction:ys,VoteAccount:_S,VoteAuthorizationLayout:DZ,VoteInit:R6,VoteInstruction:LZ,VoteProgram:uf,clusterApiUrl:FZ,sendAndConfirmRawTransaction:zZ,sendAndConfirmTransaction:v2},Symbol.toStringTag,{value:"Module"}));async function HZ({privKey:t,keyExportEnabled:e,getProviderEngineProxy:n}){const r=()=>Zl.fromSecretKey(Ne.from(t,"hex"));if(typeof t!="string")throw Ue.invalidParams("privKey must be a string");const i=r();return{requestAccounts:async()=>[i.publicKey.toBase58()],getAccounts:async()=>[i.publicKey.toBase58()],getPublicKey:async()=>i.publicKey.toBase58(),getPrivateKey:async()=>{if(!e)throw Ws.custom({message:"Private key export is disabled",code:4902});return t},getSecretKey:async()=>R0.encode(i.secretKey),signTransaction:async o=>{var a;if(!((a=o.params)!==null&&a!==void 0&&a.message))throw _t.invalidParams("message");const c=o.params.message;return c.version!==void 0||c instanceof ys?c.sign([i]):c.partialSign(i),c},signMessage:async o=>{var a;if(!((a=o.params)!==null&&a!==void 0&&a.message))throw _t.invalidParams("message");return kP.sign.detached(o.params.message,i.secretKey)},signAndSendTransaction:async o=>{var a;if(!((a=o.params)!==null&&a!==void 0&&a.message))throw _t.invalidParams("message");const c=n();if(!c)throw Ws.custom({message:"Provider is not initialized",code:4902});const l=o.params.message;return l.version!==void 0||l instanceof ys?l.sign([i]):l.partialSign(i),{signature:await c.request({method:"sendTransaction",params:[Ne.from(l.serialize()).toString("base64"),{encoding:"base64",preflightCommitment:"confirmed"}]})}},signAllTransactions:async o=>{var a,c,l;if(!((a=o.params)!==null&&a!==void 0&&a.message)||!((c=o.params)!==null&&c!==void 0&&c.message.length))throw _t.invalidParams("message");const u=(l=o.params)===null||l===void 0?void 0:l.message;for(const d of u||[]){const f=d;f.version!==void 0||f instanceof ys?f.sign([i]):f.partialSign(i)}return u}}}var O6;class ry extends Bw{constructor({config:e,state:n}){super({config:e,state:n}),me(this,"PROVIDER_CHAIN_NAMESPACE",wt.SOLANA)}async enable(){if(!this.state.privateKey)throw Ws.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}getEd25519Key(e){return qj(e).sk.toString("hex").padStart(128,"0")}async setupProvider(e){const{chainNamespace:n}=this.config.chainConfig;if(n!==this.PROVIDER_CHAIN_NAMESPACE)throw Ue.incompatibleChainNameSpace("Invalid chain namespace");const r=await HZ({privKey:e,getProviderEngineProxy:this.getProviderEngineProxy.bind(this),keyExportEnabled:this.config.keyExportEnabled}),i=qE(r),s=new Hi,{networkMiddleware:o}=e8(this.config.chainConfig);s.push(this.getChainSwitchMiddleware()),s.push(this.getAccountMiddleware()),s.push(i),s.push(o);const a=np(s);this.updateProviderEngineProxy(a),await this.lookupNetwork()}async updateAccount(e){if(!this._providerEngineProxy)throw Ws.custom({message:"Provider is not initialized",code:4902});if(await this._providerEngineProxy.request({method:"solanaPrivateKey"})!==e.privateKey){await this.setupProvider(e.privateKey);const r=await this._providerEngineProxy.request({method:"requestAccounts"});this.emit("accountsChanged",r)}}async switchChain(e){if(!this._providerEngineProxy)throw Ws.custom({message:"Provider is not initialized",code:4902});const n=this.getChainConfig(e.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:n});const r=await this._providerEngineProxy.request({method:"solanaPrivateKey"});await this.setupProvider(r)}async lookupNetwork(){if(!this._providerEngineProxy)throw Ws.custom({message:"Provider is not initialized",code:4902});const e=await this._providerEngineProxy.request({method:"getHealth",params:[]}),{chainConfig:n}=this.config;if(e!=="ok")throw Ue.rpcConnectionError(`Failed to lookup network for following rpc target: ${n.rpcTarget}`);return this.update({chainId:n.chainId}),this.state.chainId!==n.chainId&&(this.emit("chainChanged",this.state.chainId),this.emit("connect",{chainId:this.state.chainId})),this.state.chainId}getChainSwitchMiddleware(){return Aq({addNewChainConfig:async r=>{if(!r.params)throw _t.invalidParams("Missing request params");const{chainId:i,chainName:s,rpcUrls:o,blockExplorerUrls:a,nativeCurrency:c,iconUrls:l}=r.params;if(!i)throw _t.invalidParams("Missing chainId in chainParams");if(!o||o.length===0)throw _t.invalidParams("Missing rpcUrls in chainParams");if(!c)throw _t.invalidParams("Missing nativeCurrency in chainParams");this.addChain({chainNamespace:wt.SOLANA,chainId:i,ticker:(c==null?void 0:c.symbol)||"SOL",tickerName:(c==null?void 0:c.name)||"Solana",displayName:s,rpcTarget:o[0],blockExplorerUrl:(a==null?void 0:a[0])||"",decimals:(c==null?void 0:c.decimals)||9,logo:(l==null?void 0:l[0])||"https://images.toruswallet.io/sol.svg"})},switchSolanaChain:async r=>{if(!r.params)throw _t.invalidParams("Missing request params");if(!r.params.chainId)throw _t.invalidParams("Missing chainId");await this.switchChain(r.params)}})}getAccountMiddleware(){return Iq({updatePrivatekey:async n=>{if(!n.params)throw _t.invalidParams("Missing request params");if(!n.params.privateKey)throw _t.invalidParams("Missing privateKey");const{privateKey:r}=n.params;await this.updateAccount({privateKey:r})}})}}O6=ry;me(ry,"getProviderInstance",async t=>{const e=new O6({config:{chainConfig:t.chainConfig}});return await e.setupProvider(t.privKey),e});class Ls{constructor(e){an(this,"provider");an(this,"getAccounts",async()=>{try{return await new ma(this.provider).requestAccounts()}catch(e){return e}});an(this,"getBalance",async()=>{try{const e=new ma(this.provider),n=await e.request({method:"solana_provider_config",params:[]}),r=new bc(n.rpcTarget),i=await e.requestAccounts();return(await r.getBalance(new xe(i[0]))).toString()}catch(e){return e}});an(this,"signMessage",async()=>{try{const e=new ma(this.provider),n=Ne.from("Test Signing Message ","utf8");return(await e.signMessage(n)).toString()}catch(e){return e}});an(this,"sendTransaction",async()=>{try{const e=new ma(this.provider),n=await e.requestAccounts(),r=await e.request({method:"solana_provider_config",params:[]}),s=await new bc(r.rpcTarget).getLatestBlockhash("finalized"),o=mn.transfer({fromPubkey:new xe(n[0]),toPubkey:new xe(n[0]),lamports:.01*lo}),a=new Ft({blockhash:s.blockhash,lastValidBlockHeight:s.lastValidBlockHeight,feePayer:new xe(n[0])}).add(o),{signature:c}=await e.signAndSendTransaction(a);return c}catch(e){return e}});an(this,"signTransaction",async()=>{var e;try{const n=new ma(this.provider),r=await n.request({method:"solana_provider_config",params:[]}),i=new bc(r.rpcTarget),s=await n.requestAccounts(),{blockhash:o}=await i.getRecentBlockhash("finalized"),a=mn.transfer({fromPubkey:new xe(s[0]),toPubkey:new xe(s[0]),lamports:.01*lo}),c=new Ft({recentBlockhash:o,feePayer:new xe(s[0])}).add(a);return((e=(await n.signTransaction(c)).signature)==null?void 0:e.toString())||""}catch(n){return n}});an(this,"sendVersionTransaction",async()=>{try{const e=new ma(this.provider),n=await e.request({method:"solana_provider_config",params:[]}),r=new bc(n.rpcTarget),i=await e.requestAccounts(),{blockhash:s}=await r.getLatestBlockhash("finalized"),o=mn.transfer({fromPubkey:new xe(i[0]),toPubkey:new xe(i[0]),lamports:.01*lo}),a=new Rc({recentBlockhash:s,instructions:[o],payerKey:new xe(i[0])}),c=new ys(a.compileToV0Message()),{signature:l}=await e.signAndSendTransaction(c);return l}catch(e){return e}});an(this,"signVersionedTransaction",async()=>{try{const e=new ma(this.provider),n=await e.request({method:"solana_provider_config",params:[]}),r=new bc(n.rpcTarget),i=await e.requestAccounts(),{blockhash:s}=await r.getLatestBlockhash("finalized"),o=mn.transfer({fromPubkey:new xe(i[0]),toPubkey:new xe(i[0]),lamports:.01*lo}),a=new Rc({recentBlockhash:s,instructions:[o],payerKey:new xe(i[0])}),c=new ys(a.compileToV0Message());return await e.signTransaction(c)}catch(e){throw e}});an(this,"signAllTransaction",async()=>{try{const e=new ma(this.provider),n=await e.request({method:"solana_provider_config",params:[]}),r=new bc(n.rpcTarget),i=await e.requestAccounts(),{blockhash:s}=await r.getLatestBlockhash("finalized"),o=mn.transfer({fromPubkey:new xe(i[0]),toPubkey:new xe(i[0]),lamports:.01*lo}),a=mn.transfer({fromPubkey:new xe(i[0]),toPubkey:new xe(i[0]),lamports:.02*lo}),c=mn.transfer({fromPubkey:new xe(i[0]),toPubkey:new xe(i[0]),lamports:.03*lo}),l=new Ft({recentBlockhash:s,feePayer:new xe(i[0])}).add(o),u=new Ft({recentBlockhash:s,feePayer:new xe(i[0])}).add(a),d=new Ft({recentBlockhash:s,feePayer:new xe(i[0])}).add(c);return await e.signAllTransactions([l,u,d])}catch(e){throw e}});an(this,"signAllVersionedTransaction",async()=>{try{const e=new ma(this.provider),n=await e.request({method:"solana_provider_config",params:[]}),r=new bc(n.rpcTarget),i=await e.requestAccounts(),{blockhash:s}=await r.getLatestBlockhash("finalized"),o=mn.transfer({fromPubkey:new xe(i[0]),toPubkey:new xe(i[0]),lamports:.01*lo}),a=mn.transfer({fromPubkey:new xe(i[0]),toPubkey:new xe(i[0]),lamports:.02*lo}),c=mn.transfer({fromPubkey:new xe(i[0]),toPubkey:new xe(i[0]),lamports:.03*lo}),l=new Rc({recentBlockhash:s,payerKey:new xe(i[0]),instructions:[o]}),u=new Rc({recentBlockhash:s,payerKey:new xe(i[0]),instructions:[a]}),d=new Rc({recentBlockhash:s,payerKey:new xe(i[0]),instructions:[c]}),f=new ys(l.compileToV0Message()),h=new ys(u.compileToV0Message()),p=new ys(d.compileToV0Message()),g=await e.signAllTransactions([f,h,p]);return console.log(g),g}catch(e){throw e}});an(this,"getPrivateKey",async()=>await this.provider.request({method:"solanaPrivateKey"}));this.provider=e}}const WZ="BPi5PB_UiIZ-cPz1GtV5i1I2iOSOHuimiXBI0e-Oe_u6X3oVAbCiAZOTEBtTXw4tsluTITPqA8zMsfxIKMjiqNQ";function qZ(){const[t,e]=ne.useState(null),[n,r]=ne.useState(!1),[i,s]=ne.useState(""),[o,a]=ne.useState(!1),c=ne.useRef(null),l=iO();ne.useEffect(()=>{(async()=>{try{const y=yE(3),b=new ry({config:{chainConfig:y}}),m=new XN({clientId:WZ,web3AuthNetwork:Ka.SAPPHIRE_MAINNET,privateKeyProvider:b});e(m),await m.initModal(),m.connected&&(r(!0),await u(m.provider))}catch(y){console.error(y)}})()},[]),ne.useEffect(()=>{const w=y=>{c.current&&!c.current.contains(y.target)&&a(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const u=async w=>{if(!w)return;const b=await new Ls(w).getAccounts(),m=d(b[0]);s(m)},d=w=>w?`${w.substring(0,4)}...${w.substring(w.length-4)}`:"",f=async()=>{if(!t){console.error("web3auth not initialized");return}const w=await t.connect();t.connected&&(r(!0),await u(w))},h=async()=>{if(!t){console.error("web3auth not initialized");return}await t.logout(),r(!1),s(""),a(!1)},p=()=>{a(!o)},g=()=>{l("/wallet"),a(!1)};return z.jsxs("header",{className:"header",children:[z.jsx("div",{className:"header-left",children:z.jsx(wE,{to:"/",className:"logo",children:"Solana DApp"})}),z.jsx("div",{className:"header-right",children:n?z.jsxs("div",{className:"wallet-dropdown-container",ref:c,children:[z.jsxs("button",{onClick:p,className:"wallet-address-button",children:[i,z.jsx("span",{className:`dropdown-arrow ${o?"open":""}`,children:""})]}),o&&z.jsxs("div",{className:"wallet-dropdown",children:[z.jsx("button",{onClick:g,className:"dropdown-item",children:"Go to Wallet Settings"}),z.jsx("button",{onClick:h,className:"dropdown-item",children:"Disconnect Wallet"})]})]}):z.jsx("button",{onClick:f,className:"wallet-button",children:"Wallet Connect"})})]})}function VZ(){return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:"hero-section",children:[z.jsx("h1",{children:"Blockchain & iBeacon Integration"}),z.jsx("p",{className:"hero-tagline",children:"Revolutionizing proximity-based transactions through seamless blockchain integration"})]}),z.jsxs("div",{className:"intro-section",children:[z.jsx("h2",{children:"The Framework"}),z.jsx("p",{children:"A comprehensive solution that combines blockchain technology with Bluetooth Low Energy (BLE) and iBeacon standards to create secure, user-friendly proximity-triggered financial transactions."})]}),z.jsxs("div",{className:"features-grid",children:[z.jsxs("div",{className:"feature-card",children:[z.jsx("h3",{children:"MPC Wallet"}),z.jsx("p",{children:"Distributed key management with threshold signatures for enhanced security while maintaining simplicity"})]}),z.jsxs("div",{className:"feature-card",children:[z.jsx("h3",{children:"Smart Contracts"}),z.jsx("p",{children:"Conditional payment logic for secure transactions based on specific proximity events"})]}),z.jsxs("div",{className:"feature-card",children:[z.jsx("h3",{children:"iBeacon Integration"}),z.jsx("p",{children:"Precise location-based service delivery through advanced proximity technology"})]})]})]})}let GZ=function(t){return t.ETH_SEND_TRANSACTION="eth_sendTransaction",t.ETH_SIGN_TRANSACTION="eth_signTransaction",t.ETH_SIGN="eth_sign",t.PERSONAL_SIGN="personal_sign",t.ETH_SIGN_TYPED_DATA="eth_signTypedData",t.ETH_SIGN_TYPED_DATA_V3="eth_signTypedData_v3",t.ETH_SIGN_TYPED_DATA_V4="eth_signTypedData_v4",t.ADD_ETHEREUM_CHAIN="wallet_addEthereumChain",t.SWITCH_ETHEREUM_CHAIN="wallet_switchEthereumChain",t}({}),YZ=function(t){return t.SIGN_TRANSACTION="solana_signTransaction",t.SIGN_MESSAGE="solana_signMessage",t}({}),JZ=function(t){return t.ETH_CHAIN_CHANGED="chainChanged",t.ETH_ACCOUNTS_CHANGED="accountsChanged",t}({}),ZZ=function(t){return t.SOL_CHAIN_CHANGED="chainChanged",t.SOL_ACCOUNTS_CHANGED="accountsChanged",t}({});const A2={"0x65":"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","0x66":"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","0x67":"EtWTRABZaYq6iMfeYKouRu166VU2xqa1"},XZ=t=>{const{document:e}=t,n=e.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=e.querySelector('head > meta[name="title"]');return r?r.content:e.title&&e.title.length>0?e.title:t.location.hostname};function qA(t){return new Promise((e,n)=>{try{const r=document.createElement("img");r.onload=()=>e(!0),r.onerror=()=>e(!1),r.src=t}catch(r){n(r)}})}async function QZ(t){const{document:e}=t;let n=e.querySelector('head > link[rel="shortcut icon"]');return n&&await qA(n.href)||(n=Array.from(e.querySelectorAll('head > link[rel="icon"]')).find(r=>!!r.href)||null,n&&await qA(n.href))?n.href:null}const eX=async()=>({name:XZ(window),icon:await QZ(window)}),tX=t=>{const e=[];return t.forEach(n=>{const[r]=n.split(":");e.includes(r)||e.push(r)}),e},nX=t=>{switch(t){case wt.EIP155:return Object.values(GZ);case wt.SOLANA:return Object.values(YZ);default:throw new Error(`No default methods for namespace: ${t}`)}},rX=t=>{switch(t){case wt.EIP155:return Object.values(JZ);case wt.SOLANA:return Object.values(ZZ);default:throw new Error(`No default events for namespace: ${t}`)}},iX=t=>{const e=tX(t);return Object.fromEntries(e.map(n=>[n,{methods:nX(n),chains:t.filter(r=>r.startsWith(n)),events:rX(n)}]))},sX=async(t,e,n)=>{if(t===wt.EIP155||t===wt.SOLANA){const r=await eX(),i={walletConnectInitOptions:{projectId:n,relayUrl:"wss://relay.walletconnect.com",metadata:{name:r.name,description:r.name,url:window.location.origin,icons:[r.icon||""]}}},s=e.map(a=>`${t}:${t===wt.SOLANA?A2[a]:parseInt(a,16)}`),o={optionalNamespaces:iX(s)};return{adapterSettings:i,loginSettings:o}}throw new Error(`Unsupported chain namespace: ${t}`)};var Me={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var I2=function(t,e){return I2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},I2(t,e)};function oX(t,e){I2(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var C2=function(){return C2=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},C2.apply(this,arguments)};function aX(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function cX(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function lX(t,e){return function(n,r){e(n,r,t)}}function uX(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function dX(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function fX(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function hX(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function pX(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function R2(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function P6(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function gX(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(P6(arguments[e]));return t}function mX(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function fp(t){return this instanceof fp?(this.v=t,this):new fp(t)}function wX(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(h){return new Promise(function(p,g){s.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(p){d(s[0][3],p)}}function c(f){f.value instanceof fp?Promise.resolve(f.value.v).then(l,u):d(s[0][2],f)}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function yX(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:fp(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function bX(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof R2=="function"?R2(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function vX(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function xX(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function EX(t){return t&&t.__esModule?t:{default:t}}function SX(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function _X(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const kX=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return C2},__asyncDelegator:yX,__asyncGenerator:wX,__asyncValues:bX,__await:fp,__awaiter:dX,__classPrivateFieldGet:SX,__classPrivateFieldSet:_X,__createBinding:hX,__decorate:cX,__exportStar:pX,__extends:oX,__generator:fX,__importDefault:EX,__importStar:xX,__makeTemplateObject:vX,__metadata:uX,__param:lX,__read:P6,__rest:aX,__spread:gX,__spreadArrays:mX,__values:R2},Symbol.toStringTag,{value:"Module"})),zp=mx(kX);var Zb={},Ff={},VA;function AX(){if(VA)return Ff;VA=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Ff.delay=t,Ff}var El={},Xb={},Sl={},GA;function IX(){return GA||(GA=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.ONE_THOUSAND=Sl.ONE_HUNDRED=void 0,Sl.ONE_HUNDRED=100,Sl.ONE_THOUSAND=1e3),Sl}var Qb={},YA;function CX(){return YA||(YA=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Qb)),Qb}var JA;function N6(){return JA||(JA=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=zp;e.__exportStar(IX(),t),e.__exportStar(CX(),t)}(Xb)),Xb}var ZA;function RX(){if(ZA)return El;ZA=1,Object.defineProperty(El,"__esModule",{value:!0}),El.fromMiliseconds=El.toMiliseconds=void 0;const t=N6();function e(r){return r*t.ONE_THOUSAND}El.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return El.fromMiliseconds=n,El}var XA;function TX(){return XA||(XA=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=zp;e.__exportStar(AX(),t),e.__exportStar(RX(),t)}(Zb)),Zb}var Du={},QA;function OX(){if(QA)return Du;QA=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Du.Watch=t,Du.default=t,Du}var e1={},zf={},eI;function PX(){if(eI)return zf;eI=1,Object.defineProperty(zf,"__esModule",{value:!0}),zf.IWatch=void 0;class t{}return zf.IWatch=t,zf}var tI;function NX(){return tI||(tI=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),zp.__exportStar(PX(),t)}(e1)),e1}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=zp;e.__exportStar(TX(),t),e.__exportStar(OX(),t),e.__exportStar(NX(),t),e.__exportStar(N6(),t)})(Me);class ku{}let LX=class extends ku{constructor(e){super()}};const nI=Me.FIVE_SECONDS,df={pulse:"heartbeat_pulse"};let DX=class L6 extends LX{constructor(e){super(e),this.events=new xi.EventEmitter,this.interval=nI,this.interval=(e==null?void 0:e.interval)||nI}static async init(e){const n=new L6(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Me.toMiliseconds(this.interval))}pulse(){this.events.emit(df.pulse)}};const $X=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,BX=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,MX=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function UX(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){jX(t);return}return e}function jX(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Gg(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!MX.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if($X.test(t)||BX.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,UX)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function FX(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function kr(t,...e){try{return FX(t(...e))}catch(n){return Promise.reject(n)}}function zX(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function KX(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function P0(t){if(zX(t))return String(t);if(KX(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return P0(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const T2="base64:";function HX(t){return typeof t=="string"?t:T2+VX(t)}function WX(t){return typeof t!="string"||!t.startsWith(T2)?t:qX(t.slice(T2.length))}function qX(t){return globalThis.Buffer?Ne.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function VX(t){return globalThis.Buffer?Ne.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function zi(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function GX(...t){return zi(t.join(":"))}function Yg(t){return t=zi(t),t?t+":":""}function YX(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function JX(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const ZX="memory",XX=()=>{const t=new Map;return{name:ZX,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function QX(t={}){const e={mounts:{"":t.driver||XX()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),i=(l,u)=>{if(e.watching){u=zi(u);for(const d of e.watchListeners)d(l,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await rI(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const f=new Map,h=p=>{let g=f.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},f.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=zi(g?p:p.key),y=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},m=n(w);h(m).items.push({key:w,value:y,relativeKey:m.relativeKey,options:b})}return Promise.all([...f.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=zi(l);const{relativeKey:d,driver:f}=n(l);return kr(f.hasItem,d,u)},getItem(l,u={}){l=zi(l);const{relativeKey:d,driver:f}=n(l);return kr(f.getItem,d,u).then(h=>Gg(h))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?kr(d.driver.getItems,d.items.map(f=>({key:f.relativeKey,options:f.options})),u).then(f=>f.map(h=>({key:GX(d.base,h.key),value:Gg(h.value)}))):Promise.all(d.items.map(f=>kr(d.driver.getItem,f.relativeKey,f.options).then(h=>({key:f.key,value:Gg(h)})))))},getItemRaw(l,u={}){l=zi(l);const{relativeKey:d,driver:f}=n(l);return f.getItemRaw?kr(f.getItemRaw,d,u):kr(f.getItem,d,u).then(h=>WX(h))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=zi(l);const{relativeKey:f,driver:h}=n(l);h.setItem&&(await kr(h.setItem,f,P0(u),d),h.watch||i("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return kr(d.driver.setItems,d.items.map(f=>({key:f.relativeKey,value:P0(f.value),options:f.options})),u);d.driver.setItem&&await Promise.all(d.items.map(f=>kr(d.driver.setItem,f.relativeKey,P0(f.value),f.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=zi(l);const{relativeKey:f,driver:h}=n(l);if(h.setItemRaw)await kr(h.setItemRaw,f,u,d);else if(h.setItem)await kr(h.setItem,f,HX(u),d);else return;h.watch||i("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=zi(l);const{relativeKey:d,driver:f}=n(l);f.removeItem&&(await kr(f.removeItem,d,u),(u.removeMeta||u.removeMata)&&await kr(f.removeItem,d+"$",u),f.watch||i("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=zi(l);const{relativeKey:d,driver:f}=n(l),h=Object.create(null);if(f.getMeta&&Object.assign(h,await kr(f.getMeta,d,u)),!u.nativeOnly){const p=await kr(f.getItem,d+"$",u).then(g=>Gg(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(h,p))}return h},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=Yg(l);const d=r(l,!0);let f=[];const h=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await kr(y.driver.getKeys,y.relativeBase,u);for(const m of b){const x=y.mountpoint+zi(m);f.some(E=>x.startsWith(E))||h.push(x)}f=[y.mountpoint,...f.filter(m=>!m.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return h.filter(y=>(!g||YX(y,u.maxDepth))&&JX(y,l))},async clear(l,u={}){l=Yg(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return kr(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const f=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(f.map(h=>d.driver.removeItem(h,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>iI(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=Yg(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,f)=>f.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(rI(u,i,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,f;l=Yg(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((f=(d=e.unwatch)[l])==null||f.call(d),delete e.unwatch[l]),u&&await iI(e.mounts[l]),e.mountpoints=e.mountpoints.filter(h=>h!==l),delete e.mounts[l])},getMount(l=""){l=zi(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=zi(l),r(l,u.parents).map(f=>({driver:f.driver,base:f.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function rI(t,e,n){return t.watch?t.watch((r,i)=>e(r,n+i)):()=>{}}async function iI(t){typeof t.dispose=="function"&&await kr(t.dispose)}function Au(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function D6(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=Au(n);return(i,s)=>r.then(o=>s(o.transaction(e,i).objectStore(e)))}let t1;function Kp(){return t1||(t1=D6("keyval-store","keyval")),t1}function sI(t,e=Kp()){return e("readonly",n=>Au(n.get(t)))}function eQ(t,e,n=Kp()){return n("readwrite",r=>(r.put(e,t),Au(r.transaction)))}function tQ(t,e=Kp()){return e("readwrite",n=>(n.delete(t),Au(n.transaction)))}function nQ(t=Kp()){return t("readwrite",e=>(e.clear(),Au(e.transaction)))}function rQ(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Au(t.transaction)}function iQ(t=Kp()){return t("readonly",e=>{if(e.getAllKeys)return Au(e.getAllKeys());const n=[];return rQ(e,r=>n.push(r.key)).then(()=>n)})}const sQ=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),oQ=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Fd(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return oQ(t)}catch{return t}}function lu(t){return typeof t=="string"?t:sQ(t)||""}const aQ="idb-keyval";var cQ=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=i=>e+i;let r;return t.dbName&&t.storeName&&(r=D6(t.dbName,t.storeName)),{name:aQ,options:t,async hasItem(i){return!(typeof await sI(n(i),r)>"u")},async getItem(i){return await sI(n(i),r)??null},setItem(i,s){return eQ(n(i),s,r)},removeItem(i){return tQ(n(i),r)},getKeys(){return iQ(r)},clear(){return nQ(r)}}};const lQ="WALLET_CONNECT_V2_INDEXED_DB",uQ="keyvaluestorage";let dQ=class{constructor(){this.indexedDb=QX({driver:cQ({dbName:lQ,storeName:uQ})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,lu(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var n1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},N0={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof n1<"u"&&n1.localStorage?N0.exports=n1.localStorage:typeof window<"u"&&window.localStorage?N0.exports=window.localStorage:N0.exports=new e})();function fQ(t){var e;return[t[0],Fd((e=t[1])!=null?e:"")]}let hQ=class{constructor(){this.localStorage=N0.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(fQ)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Fd(n)}async setItem(e,n){this.localStorage.setItem(e,lu(n))}async removeItem(e){this.localStorage.removeItem(e)}};const pQ="wc_storage_version",oI=1,gQ=async(t,e,n)=>{const r=pQ,i=await e.getItem(r);if(i&&i>=oI){n(e);return}const s=await t.getKeys();if(!s.length){n(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,oI),n(e),mQ(t,o)},mQ=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let wQ=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new hQ;this.storage=e;try{const n=new dQ;gQ(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function yQ(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var bQ=vQ;function vQ(t,e,n){var r=n&&n.stringify||yQ,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=r(t);for(var a=1;a<s;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-i,d=-1,f=t&&t.length||0,h=0;h<f;){if(t.charCodeAt(h)===37&&h+1<f){switch(d=d>-1?d:0,t.charCodeAt(h+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<h&&(l+=t.slice(d,h)),l+=Number(e[u]),d=h+2,h++;break;case 105:if(u>=c||e[u]==null)break;d<h&&(l+=t.slice(d,h)),l+=Math.floor(Number(e[u])),d=h+2,h++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<h&&(l+=t.slice(d,h));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=h+2,h++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=h+2,h++;break}l+=r(e[u]),d=h+2,h++;break;case 115:if(u>=c)break;d<h&&(l+=t.slice(d,h)),l+=String(e[u]),d=h+2,h++;break;case 37:d<h&&(l+=t.slice(d,h)),l+="%",d=h+2,h++,u--;break}++u}++h}return d===-1?t:(d<f&&(l+=t.slice(d)),l)}const aI=bQ;var Gu=ra;const hp=TQ().console||{},xQ={mapHttpRequest:Jg,mapHttpResponse:Jg,wrapRequestSerializer:r1,wrapResponseSerializer:r1,wrapErrorSerializer:r1,req:Jg,res:Jg,err:AQ};function EQ(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function ra(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||hp;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},i=EQ(t.browser.serialize,r);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=pp),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:f});const l={transmit:e,serialize:i,asObject:t.browser.asObject,levels:o,timestamp:IQ(t)};c.levels=ra.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=pp,c.serializers=r,c._serialize=i,c._stdErrSerialize=s,c.child=h,e&&(c._logEvent=O2());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function f(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,$u(l,c,"error","log"),$u(l,c,"fatal","error"),$u(l,c,"warn","error"),$u(l,c,"info","log"),$u(l,c,"debug","log"),$u(l,c,"trace","log")}function h(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},i&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(i&&w){var y=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(y):i;delete p.serializers,iy([p],b,y,this._stdErrSerialize)}function m(x){this._childLevel=(x._childLevel|0)+1,this.error=Bu(x,p,"error"),this.fatal=Bu(x,p,"fatal"),this.warn=Bu(x,p,"warn"),this.info=Bu(x,p,"info"),this.debug=Bu(x,p,"debug"),this.trace=Bu(x,p,"trace"),y&&(this.serializers=y,this._serialize=b),e&&(this._logEvent=O2([].concat(x._logEvent.bindings,p)))}return m.prototype=this,new m(this)}return c}ra.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};ra.stdSerializers=xQ;ra.stdTimeFunctions=Object.assign({},{nullTime:$6,epochTime:B6,unixTime:CQ,isoTime:RQ});function $u(t,e,n,r){const i=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?pp:i[n]?i[n]:hp[n]||hp[r]||pp,SQ(t,e,n)}function SQ(t,e,n){!t.transmit&&e[n]===pp||(e[n]=function(r){return function(){const s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===hp?hp:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&iy(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,_Q(this,n,o,s)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=ra.levels.values[l],d=ra.levels.values[n];if(d<u)return;kQ(this,{ts:s,methodLevel:n,methodValue:d,transmitValue:ra.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function _Q(t,e,n,r){t._serialize&&iy(n,t._serialize,t.serializers,t._stdErrSerialize);const i=n.slice();let s=i[0];const o={};r&&(o.time=r),o.level=ra.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof i[0]=="object";)Object.assign(o,i.shift());s=i.length?aI(i.shift(),i):void 0}else typeof s=="string"&&(s=aI(i.shift(),i));return s!==void 0&&(o.msg=s),o}function iy(t,e,n,r){for(const i in t)if(r&&t[i]instanceof Error)t[i]=ra.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(const s in t[i])e&&e.indexOf(s)>-1&&s in n&&(t[i][s]=n[s](t[i][s]))}function Bu(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var i=1;i<r.length;i++)r[i]=arguments[i-1];return t[n].apply(this,r)}}function kQ(t,e,n){const r=e.send,i=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;iy(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,r(s,t._logEvent,a),t._logEvent=O2(c)}function O2(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function AQ(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function IQ(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?$6:B6}function Jg(){return{}}function r1(t){return t}function pp(){}function $6(){return!1}function B6(){return Date.now()}function CQ(){return Math.round(Date.now()/1e3)}function RQ(){return new Date(Date.now()).toISOString()}function TQ(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const sy=vi(Gu),OQ={level:"info"},Hp="custom_context",kS=1e3*1024;let PQ=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},cI=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new PQ(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},M6=class{constructor(e,n=kS){this.level=e??"error",this.levelValue=Gu.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new cI(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Gu.levels.values.error?console.error(e):n===Gu.levels.values.warn?console.warn(e):n===Gu.levels.values.debug?console.debug(e):n===Gu.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(lu({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new cI(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(lu({extraMetadata:e})),new Blob(n,{type:"application/json"})}},NQ=class{constructor(e,n=kS){this.baseChunkLogger=new M6(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},LQ=class{constructor(e,n=kS){this.baseChunkLogger=new M6(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var DQ=Object.defineProperty,$Q=Object.defineProperties,BQ=Object.getOwnPropertyDescriptors,lI=Object.getOwnPropertySymbols,MQ=Object.prototype.hasOwnProperty,UQ=Object.prototype.propertyIsEnumerable,uI=(t,e,n)=>e in t?DQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Um=(t,e)=>{for(var n in e||(e={}))MQ.call(e,n)&&uI(t,n,e[n]);if(lI)for(var n of lI(e))UQ.call(e,n)&&uI(t,n,e[n]);return t},jm=(t,e)=>$Q(t,BQ(e));function AS(t){return jm(Um({},t),{level:(t==null?void 0:t.level)||OQ.level})}function jQ(t,e=Hp){return t[e]||""}function FQ(t,e,n=Hp){return t[n]=e,t}function ss(t,e=Hp){let n="";return typeof t.bindings>"u"?n=jQ(t,e):n=t.bindings().context||"",n}function zQ(t,e,n=Hp){const r=ss(t,n);return r.trim()?`${r}/${e}`:e}function Ui(t,e,n=Hp){const r=zQ(t,e,n),i=t.child({context:r});return FQ(i,r,n)}function KQ(t){var e,n;const r=new NQ((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:sy(jm(Um({},t.opts),{level:"trace",browser:jm(Um({},(n=t.opts)==null?void 0:n.browser),{write:i=>r.write(i)})})),chunkLoggerController:r}}function HQ(t){var e;const n=new LQ((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:sy(jm(Um({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function WQ(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?KQ(t):HQ(t)}var qQ=Object.defineProperty,VQ=(t,e,n)=>e in t?qQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dI=(t,e,n)=>VQ(t,typeof e!="symbol"?e+"":e,n);let GQ=class extends ku{constructor(e){super(),this.opts=e,dI(this,"protocol","wc"),dI(this,"version",2)}};var YQ=Object.defineProperty,JQ=(t,e,n)=>e in t?YQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ZQ=(t,e,n)=>JQ(t,e+"",n);class XQ extends ku{constructor(e,n){super(),this.core=e,this.logger=n,ZQ(this,"records",new Map)}}let QQ=class{constructor(e,n){this.logger=e,this.core=n}};class eee extends ku{constructor(e,n){super(),this.relayer=e,this.logger=n}}let tee=class extends ku{constructor(e){super()}},nee=class{constructor(e,n,r,i){this.core=e,this.logger=n,this.name=r}},ree=class extends ku{constructor(e,n){super(),this.relayer=e,this.logger=n}},iee=class extends ku{constructor(e,n){super(),this.core=e,this.logger=n}},see=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}};class oee{constructor(e,n){this.projectId=e,this.logger=n}}let aee=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var cee=Object.defineProperty,lee=(t,e,n)=>e in t?cee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fI=(t,e,n)=>lee(t,typeof e!="symbol"?e+"":e,n);let uee=class{constructor(e){this.opts=e,fI(this,"protocol","wc"),fI(this,"version",2)}},dee=class{constructor(e){this.client=e}};function fee(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function U6(t,...e){if(!fee(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function hI(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function hee(t,e){U6(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Mu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const i1=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function pee(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function j6(t){return typeof t=="string"&&(t=pee(t)),U6(t),t}let gee=class{clone(){return this._cloneInto()}};function mee(t){const e=r=>t().update(j6(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function F6(t=32){if(Mu&&typeof Mu.getRandomValues=="function")return Mu.getRandomValues(new Uint8Array(t));if(Mu&&typeof Mu.randomBytes=="function")return Mu.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function wee(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let yee=class extends gee{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=i1(this.buffer)}update(e){hI(this);const{view:n,buffer:r,blockLen:i}=this;e=j6(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=i1(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){hI(this),hee(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;wee(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=i1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const Zg=BigInt(2**32-1),P2=BigInt(32);function z6(t,e=!1){return e?{h:Number(t&Zg),l:Number(t>>P2&Zg)}:{h:Number(t>>P2&Zg)|0,l:Number(t&Zg)|0}}function bee(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=z6(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const vee=(t,e)=>BigInt(t>>>0)<<P2|BigInt(e>>>0),xee=(t,e,n)=>t>>>n,Eee=(t,e,n)=>t<<32-n|e>>>n,See=(t,e,n)=>t>>>n|e<<32-n,_ee=(t,e,n)=>t<<32-n|e>>>n,kee=(t,e,n)=>t<<64-n|e>>>n-32,Aee=(t,e,n)=>t>>>n-32|e<<64-n,Iee=(t,e)=>e,Cee=(t,e)=>t,Ree=(t,e,n)=>t<<n|e>>>32-n,Tee=(t,e,n)=>e<<n|t>>>32-n,Oee=(t,e,n)=>e<<n-32|t>>>64-n,Pee=(t,e,n)=>t<<n-32|e>>>64-n;function Nee(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const Lee=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Dee=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,$ee=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Bee=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,Mee=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Uee=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,Bt={fromBig:z6,split:bee,toBig:vee,shrSH:xee,shrSL:Eee,rotrSH:See,rotrSL:_ee,rotrBH:kee,rotrBL:Aee,rotr32H:Iee,rotr32L:Cee,rotlSH:Ree,rotlSL:Tee,rotlBH:Oee,rotlBL:Pee,add:Nee,add3L:Lee,add3H:Dee,add4L:$ee,add4H:Bee,add5H:Uee,add5L:Mee},[jee,Fee]=Bt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),pc=new Uint32Array(80),gc=new Uint32Array(80);let zee=class extends yee{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,i,s,o,a,c,l,u,d,f,h,p,g,w]}set(e,n,r,i,s,o,a,c,l,u,d,f,h,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let m=0;m<16;m++,n+=4)pc[m]=e.getUint32(n),gc[m]=e.getUint32(n+=4);for(let m=16;m<80;m++){const x=pc[m-15]|0,E=gc[m-15]|0,A=Bt.rotrSH(x,E,1)^Bt.rotrSH(x,E,8)^Bt.shrSH(x,E,7),k=Bt.rotrSL(x,E,1)^Bt.rotrSL(x,E,8)^Bt.shrSL(x,E,7),S=pc[m-2]|0,C=gc[m-2]|0,F=Bt.rotrSH(S,C,19)^Bt.rotrBH(S,C,61)^Bt.shrSH(S,C,6),N=Bt.rotrSL(S,C,19)^Bt.rotrBL(S,C,61)^Bt.shrSL(S,C,6),L=Bt.add4L(k,N,gc[m-7],gc[m-16]),j=Bt.add4H(L,A,F,pc[m-7],pc[m-16]);pc[m]=j|0,gc[m]=L|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let m=0;m<80;m++){const x=Bt.rotrSH(d,f,14)^Bt.rotrSH(d,f,18)^Bt.rotrBH(d,f,41),E=Bt.rotrSL(d,f,14)^Bt.rotrSL(d,f,18)^Bt.rotrBL(d,f,41),A=d&h^~d&g,k=f&p^~f&w,S=Bt.add5L(b,E,k,Fee[m],gc[m]),C=Bt.add5H(S,y,x,A,jee[m],pc[m]),F=S|0,N=Bt.rotrSH(r,i,28)^Bt.rotrBH(r,i,34)^Bt.rotrBH(r,i,39),L=Bt.rotrSL(r,i,28)^Bt.rotrBL(r,i,34)^Bt.rotrBL(r,i,39),j=r&s^r&a^s&a,B=i&o^i&c^o&c;y=g|0,b=w|0,g=h|0,w=p|0,h=d|0,p=f|0,{h:d,l:f}=Bt.add(l|0,u|0,C|0,F|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const O=Bt.add3L(F,L,B);r=Bt.add3H(O,C,N,j),i=O|0}({h:r,l:i}=Bt.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Bt.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Bt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Bt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:f}=Bt.add(this.Eh|0,this.El|0,d|0,f|0),{h,l:p}=Bt.add(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:w}=Bt.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=Bt.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,i,s,o,a,c,l,u,d,f,h,p,g,w,y,b)}roundClean(){pc.fill(0),gc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Kee=mee(()=>new zee);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const IS=BigInt(0),K6=BigInt(1),Hee=BigInt(2);function CS(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function RS(t){if(!CS(t))throw new Error("Uint8Array expected")}function s1(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Wee=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function TS(t){RS(t);let e="";for(let n=0;n<t.length;n++)e+=Wee[t[n]];return e}function H6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?IS:BigInt("0x"+t)}const ba={_0:48,_9:57,A:65,F:70,a:97,f:102};function pI(t){if(t>=ba._0&&t<=ba._9)return t-ba._0;if(t>=ba.A&&t<=ba.F)return t-(ba.A-10);if(t>=ba.a&&t<=ba.f)return t-(ba.a-10)}function W6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=pI(t.charCodeAt(s)),a=pI(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function qee(t){return H6(TS(t))}function L0(t){return RS(t),H6(TS(Uint8Array.from(t).reverse()))}function q6(t,e){return W6(t.toString(16).padStart(e*2,"0"))}function N2(t,e){return q6(t,e).reverse()}function va(t,e,n){let r;if(typeof e=="string")try{r=W6(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(CS(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function gI(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];RS(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const o1=t=>typeof t=="bigint"&&IS<=t;function Vee(t,e,n){return o1(t)&&o1(e)&&o1(n)&&e<=t&&t<n}function Kf(t,e,n,r){if(!Vee(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Gee(t){let e;for(e=0;t>IS;t>>=K6,e+=1);return e}const Yee=t=>(Hee<<BigInt(t-1))-K6,Jee={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||CS(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function OS(t,e,n={}){const r=(i,s,o)=>{const a=Jee[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}function mI(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const Nr=BigInt(0),ir=BigInt(1),Nl=BigInt(2),Zee=BigInt(3),L2=BigInt(4),wI=BigInt(5),yI=BigInt(8);function wr(t,e){const n=t%e;return n>=Nr?n:e+n}function Xee(t,e,n){if(e<Nr)throw new Error("invalid exponent, negatives unsupported");if(n<=Nr)throw new Error("invalid modulus");if(n===ir)return Nr;let r=ir;for(;e>Nr;)e&ir&&(r=r*t%n),t=t*t%n,e>>=ir;return r}function $o(t,e,n){let r=t;for(;e-- >Nr;)r*=r,r%=n;return r}function bI(t,e){if(t===Nr)throw new Error("invert: expected non-zero number");if(e<=Nr)throw new Error("invert: expected positive modulus, got "+e);let n=wr(t,e),r=e,i=Nr,s=ir;for(;n!==Nr;){const o=r/n,a=r%n,c=i-s*o;r=n,n=a,i=s,s=c}if(r!==ir)throw new Error("invert: does not exist");return wr(i,e)}function Qee(t){const e=(t-ir)/Nl;let n,r,i;for(n=t-ir,r=0;n%Nl===Nr;n/=Nl,r++);for(i=Nl;i<t&&Xee(i,e,t)!==t-ir;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+ir)/L2;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(n+ir)/Nl;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let p=o.sqr(d);f<c&&!o.eql(p,o.ONE);f++)p=o.sqr(p);const h=o.pow(l,ir<<BigInt(c-f-1));l=o.sqr(h),u=o.mul(u,h),d=o.mul(d,l),c=f}return u}}function ete(t){if(t%L2===Zee){const e=(t+ir)/L2;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%yI===wI){const e=(t-wI)/yI;return function(n,r){const i=n.mul(r,Nl),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,Nl),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Qee(t)}const tte=(t,e)=>(wr(t,e)&ir)===ir,nte=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function rte(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=nte.reduce((r,i)=>(r[i]="function",r),e);return OS(t,n)}function ite(t,e,n){if(n<Nr)throw new Error("invalid exponent, negatives unsupported");if(n===Nr)return t.ONE;if(n===ir)return e;let r=t.ONE,i=e;for(;n>Nr;)n&ir&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ir;return r}function ste(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function V6(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function G6(t,e,n=!1,r={}){if(t<=Nr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=V6(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:Yee(i),ZERO:Nr,ONE:ir,create:c=>wr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Nr<=c&&c<t},is0:c=>c===Nr,isOdd:c=>(c&ir)===ir,neg:c=>wr(-c,t),eql:(c,l)=>c===l,sqr:c=>wr(c*c,t),add:(c,l)=>wr(c+l,t),sub:(c,l)=>wr(c-l,t),mul:(c,l)=>wr(c*l,t),pow:(c,l)=>ite(a,c,l),div:(c,l)=>wr(c*bI(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>bI(c,t),sqrt:r.sqrt||(c=>(o||(o=ete(t)),o(a,c))),invertBatch:c=>ste(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?N2(c,s):q6(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?L0(c):qee(c)}});return Object.freeze(a)}const vI=BigInt(0),Xg=BigInt(1);function a1(t,e){const n=e.negate();return t?n:e}function Y6(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function c1(t,e){Y6(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function ote(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function ate(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const l1=new WeakMap,J6=new WeakMap;function u1(t){return J6.get(t)||1}function cte(t,e){return{constTimeNegate:a1,hasPrecomputes(n){return u1(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>vI;)r&Xg&&(i=i.add(s)),s=s.double(),r>>=Xg;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=c1(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=c1(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let f=0;f<s;f++){const h=f*o;let p=Number(i&l);i>>=d,p>o&&(p-=u,i+=Xg);const g=h,w=h+Math.abs(p)-1,y=f%2!==0,b=p<0;p===0?c=c.add(a1(y,r[g])):a=a.add(a1(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=c1(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const f=d*a;if(i===vI)break;let h=Number(i&c);if(i>>=u,h>a&&(h-=l,i+=Xg),h===0)continue;let p=r[f+Math.abs(h)-1];h<0&&(p=p.negate()),s=s.add(p)}return s},getPrecomputes(n,r,i){let s=l1.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&l1.set(r,i(s))),s},wNAFCached(n,r,i){const s=u1(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=u1(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){Y6(r,e),J6.set(n,r),l1.delete(n)}}}function lte(t,e,n,r){if(ote(n,t),ate(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=Gee(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let h=0;h<r.length;h++){const p=r[h],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[h])}let f=i;for(let h=c.length-1,p=i;h>0;h--)p=p.add(c[h]),f=f.add(p);if(u=u.add(f),d!==0)for(let h=0;h<o;h++)u=u.double()}return u}function ute(t){return rte(t.Fp),OS(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...V6(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const so=BigInt(0),ji=BigInt(1),Qg=BigInt(2),dte=BigInt(8),fte={zip215:!0};function hte(t){const e=ute(t);return OS(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function pte(t){const e=hte(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=Qg<<BigInt(a*8)-ji,u=n.create,d=G6(e.n,e.nBitLength),f=e.uvRatio||((O,R)=>{try{return{isValid:!0,value:n.sqrt(O*n.inv(R))}}catch{return{isValid:!1,value:so}}}),h=e.adjustScalarBytes||(O=>O),p=e.domain||((O,R,D)=>{if(s1("phflag",D),R.length||D)throw new Error("Contexts/pre-hash are not supported");return O});function g(O,R){Kf("coordinate "+O,R,so,l)}function w(O){if(!(O instanceof m))throw new Error("ExtendedPoint expected")}const y=mI((O,R)=>{const{ex:D,ey:T,ez:I}=O,M=O.is0();R==null&&(R=M?dte:n.inv(I));const Y=u(D*R),X=u(T*R),Z=u(I*R);if(M)return{x:so,y:ji};if(Z!==ji)throw new Error("invZ was invalid");return{x:Y,y:X}}),b=mI(O=>{const{a:R,d:D}=e;if(O.is0())throw new Error("bad point: ZERO");const{ex:T,ey:I,ez:M,et:Y}=O,X=u(T*T),Z=u(I*I),le=u(M*M),ae=u(le*le),ye=u(X*R),Ee=u(le*u(ye+Z)),ee=u(ae+u(D*u(X*Z)));if(Ee!==ee)throw new Error("bad point: equation left != right (1)");const te=u(T*I),J=u(M*Y);if(te!==J)throw new Error("bad point: equation left != right (2)");return!0});class m{constructor(R,D,T,I){this.ex=R,this.ey=D,this.ez=T,this.et=I,g("x",R),g("y",D),g("z",T),g("t",I),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof m)throw new Error("extended point not allowed");const{x:D,y:T}=R||{};return g("x",D),g("y",T),new m(D,T,ji,u(D*T))}static normalizeZ(R){const D=n.invertBatch(R.map(T=>T.ez));return R.map((T,I)=>T.toAffine(D[I])).map(m.fromAffine)}static msm(R,D){return lte(m,d,R,D)}_setWindowSize(R){A.setWindowSize(this,R)}assertValidity(){b(this)}equals(R){w(R);const{ex:D,ey:T,ez:I}=this,{ex:M,ey:Y,ez:X}=R,Z=u(D*X),le=u(M*I),ae=u(T*X),ye=u(Y*I);return Z===le&&ae===ye}is0(){return this.equals(m.ZERO)}negate(){return new m(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:R}=e,{ex:D,ey:T,ez:I}=this,M=u(D*D),Y=u(T*T),X=u(Qg*u(I*I)),Z=u(R*M),le=D+T,ae=u(u(le*le)-M-Y),ye=Z+Y,Ee=ye-X,ee=Z-Y,te=u(ae*Ee),J=u(ye*ee),Q=u(ae*ee),oe=u(Ee*ye);return new m(te,J,oe,Q)}add(R){w(R);const{a:D,d:T}=e,{ex:I,ey:M,ez:Y,et:X}=this,{ex:Z,ey:le,ez:ae,et:ye}=R;if(D===BigInt(-1)){const ht=u((M-I)*(le+Z)),pt=u((M+I)*(le-Z)),Qn=u(pt-ht);if(Qn===so)return this.double();const ct=u(Y*Qg*ye),or=u(X*Qg*ae),$r=or+ct,Si=pt+ht,Qs=or-ct,os=u($r*Qn),eo=u(Si*Qs),Cs=u($r*Qs),Br=u(Qn*Si);return new m(os,eo,Br,Cs)}const Ee=u(I*Z),ee=u(M*le),te=u(X*T*ye),J=u(Y*ae),Q=u((I+M)*(Z+le)-Ee-ee),oe=J-te,W=J+te,V=u(ee-D*Ee),se=u(Q*oe),Re=u(W*V),Pe=u(Q*V),ze=u(oe*W);return new m(se,Re,ze,Pe)}subtract(R){return this.add(R.negate())}wNAF(R){return A.wNAFCached(this,R,m.normalizeZ)}multiply(R){const D=R;Kf("scalar",D,ji,r);const{p:T,f:I}=this.wNAF(D);return m.normalizeZ([T,I])[0]}multiplyUnsafe(R,D=m.ZERO){const T=R;return Kf("scalar",T,so,r),T===so?E:this.is0()||T===ji?this:A.wNAFCachedUnsafe(this,T,m.normalizeZ,D)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return A.unsafeLadder(this,r).is0()}toAffine(R){return y(this,R)}clearCofactor(){const{h:R}=e;return R===ji?this:this.multiplyUnsafe(R)}static fromHex(R,D=!1){const{d:T,a:I}=e,M=n.BYTES;R=va("pointHex",R,M),s1("zip215",D);const Y=R.slice(),X=R[M-1];Y[M-1]=X&-129;const Z=L0(Y),le=D?l:n.ORDER;Kf("pointHex.y",Z,so,le);const ae=u(Z*Z),ye=u(ae-ji),Ee=u(T*ae-I);let{isValid:ee,value:te}=f(ye,Ee);if(!ee)throw new Error("Point.fromHex: invalid y coordinate");const J=(te&ji)===ji,Q=(X&128)!==0;if(!D&&te===so&&Q)throw new Error("Point.fromHex: x=0 and x_0=1");return Q!==J&&(te=u(-te)),m.fromAffine({x:te,y:Z})}static fromPrivateKey(R){return C(R).point}toRawBytes(){const{x:R,y:D}=this.toAffine(),T=N2(D,n.BYTES);return T[T.length-1]|=R&ji?128:0,T}toHex(){return TS(this.toRawBytes())}}m.BASE=new m(e.Gx,e.Gy,ji,u(e.Gx*e.Gy)),m.ZERO=new m(so,ji,ji,so);const{BASE:x,ZERO:E}=m,A=cte(m,a*8);function k(O){return wr(O,r)}function S(O){return k(L0(O))}function C(O){const R=n.BYTES;O=va("private key",O,R);const D=va("hashed private key",s(O),2*R),T=h(D.slice(0,R)),I=D.slice(R,2*R),M=S(T),Y=x.multiply(M),X=Y.toRawBytes();return{head:T,prefix:I,scalar:M,point:Y,pointBytes:X}}function F(O){return C(O).pointBytes}function N(O=new Uint8Array,...R){const D=gI(...R);return S(s(p(D,va("context",O),!!i)))}function L(O,R,D={}){O=va("message",O),i&&(O=i(O));const{prefix:T,scalar:I,pointBytes:M}=C(R),Y=N(D.context,T,O),X=x.multiply(Y).toRawBytes(),Z=N(D.context,X,M,O),le=k(Y+Z*I);Kf("signature.s",le,so,r);const ae=gI(X,N2(le,n.BYTES));return va("result",ae,n.BYTES*2)}const j=fte;function B(O,R,D,T=j){const{context:I,zip215:M}=T,Y=n.BYTES;O=va("signature",O,2*Y),R=va("message",R),D=va("publicKey",D,Y),M!==void 0&&s1("zip215",M),i&&(R=i(R));const X=L0(O.slice(Y,2*Y));let Z,le,ae;try{Z=m.fromHex(D,M),le=m.fromHex(O.slice(0,Y),M),ae=x.multiplyUnsafe(X)}catch{return!1}if(!M&&Z.isSmallOrder())return!1;const ye=N(I,le.toRawBytes(),Z.toRawBytes(),R);return le.add(Z.multiplyUnsafe(ye)).subtract(ae).clearCofactor().equals(m.ZERO)}return x._setWindowSize(8),{CURVE:e,getPublicKey:F,sign:L,verify:B,ExtendedPoint:m,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>o(n.BYTES),precompute(O=8,R=m.BASE){return R._setWindowSize(O),R.multiply(BigInt(3)),R}}}}BigInt(0),BigInt(1);const PS=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),xI=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const gte=BigInt(1),EI=BigInt(2);BigInt(3);const mte=BigInt(5),wte=BigInt(8);function yte(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=PS,o=t*t%s*t%s,a=$o(o,EI,s)*o%s,c=$o(a,gte,s)*t%s,l=$o(c,mte,s)*c%s,u=$o(l,e,s)*l%s,d=$o(u,n,s)*u%s,f=$o(d,r,s)*d%s,h=$o(f,i,s)*f%s,p=$o(h,i,s)*f%s,g=$o(p,e,s)*l%s;return{pow_p_5_8:$o(g,EI,s)*t%s,b2:o}}function bte(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function vte(t,e){const n=PS,r=wr(e*e*e,n),i=wr(r*r*e,n),s=yte(t*i).pow_p_5_8;let o=wr(t*r*s,n);const a=wr(e*o*o,n),c=o,l=wr(o*xI,n),u=a===t,d=a===wr(-t,n),f=a===wr(-t*xI,n);return u&&(o=c),(d||f)&&(o=l),tte(o,n)&&(o=wr(-o,n)),{isValid:u||d,value:o}}const xte=G6(PS,void 0,!0),Ete={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:xte,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:wte,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Kee,randomBytes:F6,adjustScalarBytes:bte,uvRatio:vte},Z6=pte(Ete),Ste="EdDSA",_te="JWT",Fm=".",oy="base64url",X6="utf8",Q6="utf8",kte=":",Ate="did",Ite="key",SI="base58btc",Cte="z",Rte="K36",Tte=32;function NS(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function e4(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?NS(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function t4(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const n=e4(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return NS(n)}function Ote(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var m=(b-y)*u+1>>>0,x=new Uint8Array(m);y!==b;){for(var E=p[y],A=0,k=m-1;(E!==0||A<w)&&k!==-1;k--,A++)E+=256*x[k]>>>0,x[k]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");w=A,y++}for(var S=m-w;S!==m&&x[S]===0;)S++;for(var C=c.repeat(g);S<m;++S)C+=t.charAt(x[S]);return C}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,m=new Uint8Array(b);p[g];){var x=n[p.charCodeAt(g)];if(x===255)return;for(var E=0,A=b-1;(x!==0||E<y)&&A!==-1;A--,E++)x+=a*m[A]>>>0,m[A]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");y=E,g++}if(p[g]!==" "){for(var k=b-y;k!==b&&m[k]===0;)k++;for(var S=new Uint8Array(w+(b-k)),C=w;k!==b;)S[C++]=m[k++];return S}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var Pte=Ote,Nte=Pte;const n4=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Lte=t=>new TextEncoder().encode(t),Dte=t=>new TextDecoder().decode(t);let $te=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Bte=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return r4(this,e)}},Mte=class{constructor(e){this.decoders=e}or(e){return r4(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const r4=(t,e)=>new Mte({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Ute=class{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new $te(e,n,r),this.decoder=new Bte(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const ay=({name:t,prefix:e,encode:n,decode:r})=>new Ute(t,e,n,r),Wp=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=Nte(n,e);return ay({prefix:t,name:e,encode:r,decode:s=>n4(i(s))})},jte=(t,e,n,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Fte=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},ti=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>ay({prefix:e,name:t,encode(i){return Fte(i,r,n)},decode(i){return jte(i,r,n,t)}}),zte=ay({prefix:"\0",name:"identity",encode:t=>Dte(t),decode:t=>Lte(t)});var Kte=Object.freeze({__proto__:null,identity:zte});const Hte=ti({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Wte=Object.freeze({__proto__:null,base2:Hte});const qte=ti({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Vte=Object.freeze({__proto__:null,base8:qte});const Gte=Wp({prefix:"9",name:"base10",alphabet:"0123456789"});var Yte=Object.freeze({__proto__:null,base10:Gte});const Jte=ti({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Zte=ti({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Xte=Object.freeze({__proto__:null,base16:Jte,base16upper:Zte});const Qte=ti({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ene=ti({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),tne=ti({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),nne=ti({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),rne=ti({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ine=ti({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),sne=ti({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),one=ti({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ane=ti({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var cne=Object.freeze({__proto__:null,base32:Qte,base32upper:ene,base32pad:tne,base32padupper:nne,base32hex:rne,base32hexupper:ine,base32hexpad:sne,base32hexpadupper:one,base32z:ane});const lne=Wp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),une=Wp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var dne=Object.freeze({__proto__:null,base36:lne,base36upper:une});const fne=Wp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),hne=Wp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var pne=Object.freeze({__proto__:null,base58btc:fne,base58flickr:hne});const gne=ti({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),mne=ti({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),wne=ti({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),yne=ti({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var bne=Object.freeze({__proto__:null,base64:gne,base64pad:mne,base64url:wne,base64urlpad:yne});const i4=Array.from(""),vne=i4.reduce((t,e,n)=>(t[n]=e,t),[]),xne=i4.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Ene(t){return t.reduce((e,n)=>(e+=vne[n],e),"")}function Sne(t){const e=[];for(const n of t){const r=xne[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const _ne=ay({prefix:"",name:"base256emoji",encode:Ene,decode:Sne});var kne=Object.freeze({__proto__:null,base256emoji:_ne}),Ane=s4,_I=128,Ine=-128,Cne=Math.pow(2,31);function s4(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Cne;)e[n++]=t&255|_I,t/=128;for(;t&Ine;)e[n++]=t&255|_I,t>>>=7;return e[n]=t|0,s4.bytes=n-r+1,e}var Rne=D2,Tne=128,kI=127;function D2(t,r){var n=0,r=r||0,i=0,s=r,o,a=t.length;do{if(s>=a)throw D2.bytes=0,new RangeError("Could not decode varint");o=t[s++],n+=i<28?(o&kI)<<i:(o&kI)*Math.pow(2,i),i+=7}while(o>=Tne);return D2.bytes=s-r,n}var One=Math.pow(2,7),Pne=Math.pow(2,14),Nne=Math.pow(2,21),Lne=Math.pow(2,28),Dne=Math.pow(2,35),$ne=Math.pow(2,42),Bne=Math.pow(2,49),Mne=Math.pow(2,56),Une=Math.pow(2,63),jne=function(t){return t<One?1:t<Pne?2:t<Nne?3:t<Lne?4:t<Dne?5:t<$ne?6:t<Bne?7:t<Mne?8:t<Une?9:10},Fne={encode:Ane,decode:Rne,encodingLength:jne},o4=Fne;const AI=(t,e,n=0)=>(o4.encode(t,e,n),e),II=t=>o4.encodingLength(t),$2=(t,e)=>{const n=e.byteLength,r=II(t),i=r+II(n),s=new Uint8Array(i+n);return AI(t,s,0),AI(n,s,r),s.set(e,i),new zne(t,n,e,s)};let zne=class{constructor(e,n,r,i){this.code=e,this.size=n,this.digest=r,this.bytes=i}};const a4=({name:t,code:e,encode:n})=>new Kne(t,e,n);let Kne=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?$2(this.code,n):n.then(r=>$2(this.code,r))}else throw Error("Unknown type, must be binary type")}};const c4=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Hne=a4({name:"sha2-256",code:18,encode:c4("SHA-256")}),Wne=a4({name:"sha2-512",code:19,encode:c4("SHA-512")});var qne=Object.freeze({__proto__:null,sha256:Hne,sha512:Wne});const l4=0,Vne="identity",u4=n4,Gne=t=>$2(l4,u4(t)),Yne={code:l4,name:Vne,encode:u4,digest:Gne};var Jne=Object.freeze({__proto__:null,identity:Yne});new TextEncoder,new TextDecoder;const CI={...Kte,...Wte,...Vte,...Yte,...Xte,...cne,...dne,...pne,...bne,...kne};({...qne,...Jne});function d4(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const RI=d4("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),d1=d4("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=e4(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),f4={utf8:RI,"utf-8":RI,hex:CI.base16,latin1:d1,ascii:d1,binary:d1,...CI};function cy(t,e="utf8"){const n=f4[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function ff(t,e="utf8"){const n=f4[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?NS(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function TI(t){return Fd(cy(ff(t,oy),X6))}function zm(t){return cy(ff(lu(t),X6),oy)}function h4(t){const e=ff(Rte,SI),n=Cte+cy(t4([e,t]),SI);return[Ate,Ite,n].join(kte)}function Zne(t){return cy(t,oy)}function Xne(t){return ff(t,oy)}function Qne(t){return ff([zm(t.header),zm(t.payload)].join(Fm),Q6)}function ere(t){return[zm(t.header),zm(t.payload),Zne(t.signature)].join(Fm)}function B2(t){const e=t.split(Fm),n=TI(e[0]),r=TI(e[1]),i=Xne(e[2]),s=ff(e.slice(0,2).join(Fm),Q6);return{header:n,payload:r,signature:i,data:s}}function OI(t=F6(Tte)){const e=Z6.getPublicKey(t);return{secretKey:t4([t,e]),publicKey:e}}async function tre(t,e,n,r,i=Me.fromMiliseconds(Date.now())){const s={alg:Ste,typ:_te},o=h4(r.publicKey),a=i+n,c={iss:o,sub:t,aud:e,iat:i,exp:a},l=Qne({header:s,payload:c}),u=Z6.sign(l,r.secretKey.slice(0,32));return ere({header:s,payload:c,signature:u})}var PI=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},nre=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),rre=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=Oi.platform}return t}(),ire=function(){function t(e,n,r,i){this.name=e,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return t}(),sre=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),ore=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),are=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,cre=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,NI=3,lre=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",are]],LI=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ure(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ore:typeof navigator<"u"?fre(navigator.userAgent):pre()}function dre(t){return t!==""&&lre.reduce(function(e,n){var r=n[0],i=n[1];if(e)return e;var s=i.exec(t);return!!s&&[r,s]},!1)}function fre(t){var e=dre(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new sre;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<NI&&(i=PI(PI([],i,!0),gre(NI-i.length),!0)):i=[];var s=i.join("."),o=hre(t),a=cre.exec(t);return a&&a[1]?new ire(n,s,o,a[1]):new nre(n,s,o)}function hre(t){for(var e=0,n=LI.length;e<n;e++){var r=LI[e],i=r[0],s=r[1],o=s.exec(t);if(o)return i}return null}function pre(){var t=typeof Oi<"u"&&Oi.version;return t?new rre(Oi.version.slice(1)):null}function gre(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var An={};Object.defineProperty(An,"__esModule",{value:!0});An.getLocalStorage=An.getLocalStorageOrThrow=An.getCrypto=An.getCryptoOrThrow=p4=An.getLocation=An.getLocationOrThrow=LS=An.getNavigator=An.getNavigatorOrThrow=qp=An.getDocument=An.getDocumentOrThrow=An.getFromWindowOrThrow=An.getFromWindow=void 0;function Iu(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}An.getFromWindow=Iu;function hf(t){const e=Iu(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}An.getFromWindowOrThrow=hf;function mre(){return hf("document")}An.getDocumentOrThrow=mre;function wre(){return Iu("document")}var qp=An.getDocument=wre;function yre(){return hf("navigator")}An.getNavigatorOrThrow=yre;function bre(){return Iu("navigator")}var LS=An.getNavigator=bre;function vre(){return hf("location")}An.getLocationOrThrow=vre;function xre(){return Iu("location")}var p4=An.getLocation=xre;function Ere(){return hf("crypto")}An.getCryptoOrThrow=Ere;function Sre(){return Iu("crypto")}An.getCrypto=Sre;function _re(){return hf("localStorage")}An.getLocalStorageOrThrow=_re;function kre(){return Iu("localStorage")}An.getLocalStorage=kre;var DS={};Object.defineProperty(DS,"__esModule",{value:!0});var g4=DS.getWindowMetadata=void 0;const DI=An;function Are(){let t,e;try{t=DI.getDocumentOrThrow(),e=DI.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),f=[];for(let h=0;h<d.length;h++){const p=d[h],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const b=e.pathname.split("/");b.pop();const m=b.join("/");y+=m+"/"+w}f.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;f.push(y)}else f.push(w)}}return f}function r(...d){const f=t.getElementsByTagName("meta");for(let h=0;h<f.length;h++){const p=f[h],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function i(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function s(){return r("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}g4=DS.getWindowMetadata=Are;function gp(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function $I(t){return gp(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const m4="2.23.2";let Hf={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${m4}`};class uu extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof uu?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),i=n.cause instanceof uu&&n.cause.docsPath||n.docsPath,s=(a=Hf.getDocsUrl)==null?void 0:a.call(Hf,{...n,docsPath:i}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...r?[`Details: ${r}`]:[],...Hf.version?[`Version: ${Hf.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=m4}walk(e){return w4(this,e)}}function w4(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?w4(t.cause,e):e?null:t}class y4 extends uu{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function pf(t,{dir:e,size:n=32}={}){return typeof t=="string"?Ire(t,{dir:e,size:n}):Cre(t,{dir:e,size:n})}function Ire(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new y4({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Cre(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new y4({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let i=0;i<n;i++){const s=e==="right";r[s?i:n-i-1]=t[s?i:t.length-i-1]}return r}class Rre extends uu{constructor({max:e,min:n,signed:r,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class Tre extends uu{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function gf(t,{size:e}){if($I(t)>e)throw new Tre({givenSize:$I(t),maxSize:e})}function M2(t,e={}){const{signed:n}=e;e.size&&gf(t,{size:e.size});const r=BigInt(t);if(!n)return r;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return r<=s?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function Ore(t,e={}){return Number(M2(t,e))}const Pre=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function U2(t,e={}){return typeof t=="number"||typeof t=="bigint"?v4(t,e):typeof t=="string"?Dre(t,e):typeof t=="boolean"?Nre(t,e):b4(t,e)}function Nre(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(gf(n,{size:e.size}),pf(n,{size:e.size})):n}function b4(t,e={}){let n="";for(let i=0;i<t.length;i++)n+=Pre[t[i]];const r=`0x${n}`;return typeof e.size=="number"?(gf(r,{size:e.size}),pf(r,{dir:"right",size:e.size})):r}function v4(t,e={}){const{signed:n,size:r}=e,i=BigInt(t);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&n?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new Rre({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?pf(a,{size:r}):a}const Lre=new TextEncoder;function Dre(t,e={}){const n=Lre.encode(t);return b4(n,e)}const $re=new TextEncoder;function Bre(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ure(t,e):typeof t=="boolean"?Mre(t,e):gp(t)?x4(t,e):E4(t,e)}function Mre(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(gf(n,{size:e.size}),pf(n,{size:e.size})):n}const xa={zero:48,nine:57,A:65,F:70,a:97,f:102};function BI(t){if(t>=xa.zero&&t<=xa.nine)return t-xa.zero;if(t>=xa.A&&t<=xa.F)return t-(xa.A-10);if(t>=xa.a&&t<=xa.f)return t-(xa.a-10)}function x4(t,e={}){let n=t;e.size&&(gf(n,{size:e.size}),n=pf(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=BI(r.charCodeAt(a++)),l=BI(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new uu(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);s[o]=c*16+l}return s}function Ure(t,e){const n=v4(t,e);return x4(n)}function E4(t,e={}){const n=$re.encode(t);return typeof e.size=="number"?(gf(n,{size:e.size}),pf(n,{dir:"right",size:e.size})):n}function Km(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function jre(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ly(t,...e){if(!jre(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function K0e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Km(t.outputLen),Km(t.blockLen)}function MI(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Fre(t,e){ly(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const e0=BigInt(2**32-1),UI=BigInt(32);function zre(t,e=!1){return e?{h:Number(t&e0),l:Number(t>>UI&e0)}:{h:Number(t>>UI&e0)|0,l:Number(t&e0)|0}}function Kre(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=zre(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const Hre=(t,e,n)=>t<<n|e>>>32-n,Wre=(t,e,n)=>e<<n|t>>>32-n,qre=(t,e,n)=>e<<n-32|t>>>64-n,Vre=(t,e,n)=>t<<n-32|e>>>64-n,Uu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Gre(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function H0e(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function W0e(t,e){return t<<32-e|t>>>e}const jI=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Yre(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function FI(t){for(let e=0;e<t.length;e++)t[e]=Yre(t[e])}function Jre(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function S4(t){return typeof t=="string"&&(t=Jre(t)),ly(t),t}function q0e(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];ly(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class Zre{clone(){return this._cloneInto()}}function Xre(t){const e=r=>t().update(S4(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function V0e(t=32){if(Uu&&typeof Uu.getRandomValues=="function")return Uu.getRandomValues(new Uint8Array(t));if(Uu&&typeof Uu.randomBytes=="function")return Uu.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const _4=[],k4=[],A4=[],Qre=BigInt(0),Wf=BigInt(1),eie=BigInt(2),tie=BigInt(7),nie=BigInt(256),rie=BigInt(113);for(let t=0,e=Wf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],_4.push(2*(5*r+n)),k4.push((t+1)*(t+2)/2%64);let i=Qre;for(let s=0;s<7;s++)e=(e<<Wf^(e>>tie)*rie)%nie,e&eie&&(i^=Wf<<(Wf<<BigInt(s))-Wf);A4.push(i)}const[iie,sie]=Kre(A4,!0),zI=(t,e,n)=>n>32?qre(t,e,n):Hre(t,e,n),KI=(t,e,n)=>n>32?Vre(t,e,n):Wre(t,e,n);function oie(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=zI(l,u,1)^n[a],f=KI(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=k4[o],c=zI(i,s,a),l=KI(i,s,a),u=_4[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=iie[r],t[1]^=sie[r]}n.fill(0)}class $S extends Zre{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Km(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Gre(this.state)}keccak(){jI||FI(this.state32),oie(this.state32,this.rounds),jI||FI(this.state32),this.posOut=0,this.pos=0}update(e){MI(this);const{blockLen:n,state:r}=this;e=S4(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){MI(this,!1),ly(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Km(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Fre(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new $S(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const aie=(t,e,n)=>Xre(()=>new $S(e,t,n)),cie=aie(1,136,256/8);function I4(t,e){const n=e||"hex",r=cie(gp(t,{strict:!1})?Bre(t):t);return n==="bytes"?r:U2(r)}class lie extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const f1=new lie(8192);function uie(t,e){if(f1.has(`${t}.${e}`))return f1.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=I4(E4(n),"bytes"),i=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(r[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return f1.set(`${t}.${e}`,s),s}function die(t){const e=I4(`0x${t.substring(4)}`).substring(26);return uie(`0x${e}`)}async function fie({hash:t,signature:e}){const n=gp(t)?t:U2(t),{secp256k1:r}=await Ds(async()=>{const{secp256k1:o}=await import("./secp256k1-BHXdsozy.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:f}=e,h=Number(f??d),p=HI(h);return new r.Signature(M2(l),M2(u)).addRecoveryBit(p)}const o=gp(e)?e:U2(e),a=Ore(`0x${o.slice(130)}`),c=HI(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function HI(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function hie({hash:t,signature:e}){return die(await fie({hash:t,signature:e}))}function pie(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),i=Math.log(n)/Math.log(256),s=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,f=0;const h=l.length;for(;f!==h&&l[f]===0;)f++,u++;const p=(h-f)*s+1>>>0,g=new Uint8Array(p);for(;f!==h;){let b=l[f],m=0;for(let x=p-1;(b!==0||m<d)&&x!==-1;x--,m++)b+=256*g[x]>>>0,g[x]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=m,f++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(g[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,f=0;for(;l[u]===r;)d++,u++;const h=(l.length-u)*i+1>>>0,p=new Uint8Array(h);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let m=e[b];if(m===255)return;let x=0;for(let E=h-1;(m!==0||x<f)&&E!==-1;E--,x++)m+=n*p[E]>>>0,p[E]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");f=x,u++}let g=h-f;for(;g!==h&&p[g]===0;)g++;const w=new Uint8Array(d+(h-g));let y=d;for(;g!==h;)w[y++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var gie="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const mie=pie(gie);function C4(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Ah(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const n=C4(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function wie(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var m=(b-y)*u+1>>>0,x=new Uint8Array(m);y!==b;){for(var E=p[y],A=0,k=m-1;(E!==0||A<w)&&k!==-1;k--,A++)E+=256*x[k]>>>0,x[k]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");w=A,y++}for(var S=m-w;S!==m&&x[S]===0;)S++;for(var C=c.repeat(g);S<m;++S)C+=t.charAt(x[S]);return C}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,m=new Uint8Array(b);p[g];){var x=n[p.charCodeAt(g)];if(x===255)return;for(var E=0,A=b-1;(x!==0||E<y)&&A!==-1;A--,E++)x+=a*m[A]>>>0,m[A]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");y=E,g++}if(p[g]!==" "){for(var k=b-y;k!==b&&m[k]===0;)k++;for(var S=new Uint8Array(w+(b-k)),C=w;k!==b;)S[C++]=m[k++];return S}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var yie=wie,bie=yie;const vie=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},xie=t=>new TextEncoder().encode(t),Eie=t=>new TextDecoder().decode(t);class Sie{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class _ie{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return R4(this,e)}}class kie{constructor(e){this.decoders=e}or(e){return R4(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const R4=(t,e)=>new kie({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Aie{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new Sie(e,n,r),this.decoder=new _ie(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const uy=({name:t,prefix:e,encode:n,decode:r})=>new Aie(t,e,n,r),Vp=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=bie(n,e);return uy({prefix:t,name:e,encode:r,decode:s=>vie(i(s))})},Iie=(t,e,n,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Cie=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},ni=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>uy({prefix:e,name:t,encode(i){return Cie(i,r,n)},decode(i){return Iie(i,r,n,t)}}),Rie=uy({prefix:"\0",name:"identity",encode:t=>Eie(t),decode:t=>xie(t)}),Tie=Object.freeze(Object.defineProperty({__proto__:null,identity:Rie},Symbol.toStringTag,{value:"Module"})),Oie=ni({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Pie=Object.freeze(Object.defineProperty({__proto__:null,base2:Oie},Symbol.toStringTag,{value:"Module"})),Nie=ni({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Lie=Object.freeze(Object.defineProperty({__proto__:null,base8:Nie},Symbol.toStringTag,{value:"Module"})),Die=Vp({prefix:"9",name:"base10",alphabet:"0123456789"}),$ie=Object.freeze(Object.defineProperty({__proto__:null,base10:Die},Symbol.toStringTag,{value:"Module"})),Bie=ni({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Mie=ni({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Uie=Object.freeze(Object.defineProperty({__proto__:null,base16:Bie,base16upper:Mie},Symbol.toStringTag,{value:"Module"})),jie=ni({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Fie=ni({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),zie=ni({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Kie=ni({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Hie=ni({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Wie=ni({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qie=ni({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Vie=ni({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Gie=ni({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Yie=Object.freeze(Object.defineProperty({__proto__:null,base32:jie,base32hex:Hie,base32hexpad:qie,base32hexpadupper:Vie,base32hexupper:Wie,base32pad:zie,base32padupper:Kie,base32upper:Fie,base32z:Gie},Symbol.toStringTag,{value:"Module"})),Jie=Vp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Zie=Vp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Xie=Object.freeze(Object.defineProperty({__proto__:null,base36:Jie,base36upper:Zie},Symbol.toStringTag,{value:"Module"})),Qie=Vp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ese=Vp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),tse=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Qie,base58flickr:ese},Symbol.toStringTag,{value:"Module"})),nse=ni({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rse=ni({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ise=ni({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),sse=ni({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ose=Object.freeze(Object.defineProperty({__proto__:null,base64:nse,base64pad:rse,base64url:ise,base64urlpad:sse},Symbol.toStringTag,{value:"Module"})),T4=Array.from(""),ase=T4.reduce((t,e,n)=>(t[n]=e,t),[]),cse=T4.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function lse(t){return t.reduce((e,n)=>(e+=ase[n],e),"")}function use(t){const e=[];for(const n of t){const r=cse[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const dse=uy({prefix:"",name:"base256emoji",encode:lse,decode:use}),fse=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:dse},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const WI={...Tie,...Pie,...Lie,...$ie,...Uie,...Yie,...Xie,...tse,...ose,...fse};function O4(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const qI=O4("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),h1=O4("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=C4(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),P4={utf8:qI,"utf-8":qI,hex:WI.base16,latin1:h1,ascii:h1,binary:h1,...WI};function qs(t,e="utf8"){const n=P4[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function ts(t,e="utf8"){const n=P4[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const hse={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var pse={};const N4=":";function D0(t){const[e,n]=t.split(N4);return{namespace:e,reference:n}}function L4(t){const[e,n,r]=t.split(N4);return{namespace:e,reference:n,address:r}}function D4(t,e=[]){const n=[];return Object.keys(t).forEach(r=>{if(e.length&&!e.includes(r))return;const i=t[r];n.push(...i.accounts)}),n}function $4(t,e){return t.includes(":")?[t]:e.chains||[]}var gse=Object.defineProperty,mse=Object.defineProperties,wse=Object.getOwnPropertyDescriptors,VI=Object.getOwnPropertySymbols,yse=Object.prototype.hasOwnProperty,bse=Object.prototype.propertyIsEnumerable,GI=(t,e,n)=>e in t?gse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,YI=(t,e)=>{for(var n in e||(e={}))yse.call(e,n)&&GI(t,n,e[n]);if(VI)for(var n of VI(e))bse.call(e,n)&&GI(t,n,e[n]);return t},vse=(t,e)=>mse(t,wse(e));const xse="ReactNative",Es={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Ese="js";function Hm(){return typeof Oi<"u"&&typeof Oi.versions<"u"&&typeof Oi.versions.node<"u"}function pl(){return!qp()&&!!LS()&&navigator.product===xse}function Sse(){return pl()&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Platform)<"u"&&(globalThis==null?void 0:globalThis.Platform.OS)==="android"}function _se(){return pl()&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Platform)<"u"&&(globalThis==null?void 0:globalThis.Platform.OS)==="ios"}function Gp(){return!Hm()&&!!LS()&&!!qp()}function Yp(){return pl()?Es.reactNative:Hm()?Es.node:Gp()?Es.browser:Es.unknown}function JI(){var t;try{return pl()&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Application)<"u"?(t=globalThis.Application)==null?void 0:t.applicationId:void 0}catch{return}}function kse(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const i=e[r];i!==void 0&&n.set(r,i)}return n.toString()}function Ase(t){var e,n;const r=B4();try{return t!=null&&t.url&&r.url&&t.url!==r.url&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(i=>i!=="")),vse(YI(YI({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),t||r}}function B4(){return g4()||{name:"",description:"",url:"",icons:[""]}}function Ise(){if(Yp()===Es.reactNative&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Platform)<"u"){const{OS:n,Version:r}=globalThis.Platform;return[n,r].join("-")}const t=ure();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Cse(){var t;const e=Yp();return e===Es.browser?[e,((t=p4())==null?void 0:t.host)||"unknown"].join(":"):e}function M4(t,e,n){const r=Ise(),i=Cse();return[[t,e].join("-"),[Ese,n].join("-"),r,i].join("/")}function Rse({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=M4(t,e,r),d={auth:i,ua:u,projectId:s,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},f=kse(l[1]||"",d);return l[0]+"?"+f}function Fl(t,e){return t.filter(n=>e.includes(n)).length===t.length}function j2(t){return Object.fromEntries(t.entries())}function F2(t){return new Map(Object.entries(t))}function Rl(t=Me.FIVE_MINUTES,e){const n=Me.toMiliseconds(t||Me.FIVE_MINUTES);let r,i,s,o;return{resolve:a=>{s&&r&&(clearTimeout(s),r(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,i=c})}}function $c(t,e,n){return new Promise(async(r,i)=>{const s=setTimeout(()=>i(new Error(n)),e);try{const o=await t;r(o)}catch(o){i(o)}clearTimeout(s)})}function U4(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Tse(t){return U4("topic",t)}function Ose(t){return U4("id",t)}function j4(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function gr(t,e){return Me.fromMiliseconds(Date.now()+Me.toMiliseconds(t))}function Sc(t){return Date.now()>=Me.toMiliseconds(t)}function cn(t,e){return`${t}${e?`:${e}`:""}`}function Pse(t=[],e=[]){return[...new Set([...t,...e])]}async function Nse({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=Lse(s,t,e),a=Yp();if(a===Es.browser){if(!((r=qp())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}Dse(o)}else a===Es.reactNative&&typeof(globalThis==null?void 0:globalThis.Linking)<"u"&&await globalThis.Linking.openURL(o)}catch(i){console.error(i)}}function Lse(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${Use(r,!0)}`}else i=`${i}/wc?${r}`;return i}function Dse(t){let e="_self";Mse()?e="_top":(Bse()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function $se(t,e){let n="";try{if(Gp()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function ZI(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function XI(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function BS(){return typeof Oi<"u"&&pse.IS_VITEST==="true"}function Bse(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Mse(){try{return window.self!==window.top}catch{return!1}}function Use(t,e=!1){const n=Ne.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function F4(t){return Ne.from(t,"base64").toString("utf-8")}function jse(t){return new Promise(e=>setTimeout(e,t))}function mp(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Fse(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Jp(t,...e){if(!Fse(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function MS(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");mp(t.outputLen),mp(t.blockLen)}function zd(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function z4(t,e){Jp(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const t0=BigInt(2**32-1),QI=BigInt(32);function zse(t,e=!1){return e?{h:Number(t&t0),l:Number(t>>QI&t0)}:{h:Number(t>>QI&t0)|0,l:Number(t&t0)|0}}function Kse(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=zse(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const Hse=(t,e,n)=>t<<n|e>>>32-n,Wse=(t,e,n)=>e<<n|t>>>32-n,qse=(t,e,n)=>e<<n-32|t>>>64-n,Vse=(t,e,n)=>t<<n-32|e>>>64-n,ju=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Gse(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function p1(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Bo(t,e){return t<<32-e|t>>>e}const eC=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Yse(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function tC(t){for(let e=0;e<t.length;e++)t[e]=Yse(t[e])}function Jse(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Kd(t){return typeof t=="string"&&(t=Jse(t)),Jp(t),t}function Zse(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Jp(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class US{clone(){return this._cloneInto()}}function K4(t){const e=r=>t().update(Kd(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function mf(t=32){if(ju&&typeof ju.getRandomValues=="function")return ju.getRandomValues(new Uint8Array(t));if(ju&&typeof ju.randomBytes=="function")return ju.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const H4=[],W4=[],q4=[],Xse=BigInt(0),qf=BigInt(1),Qse=BigInt(2),eoe=BigInt(7),toe=BigInt(256),noe=BigInt(113);for(let t=0,e=qf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],H4.push(2*(5*r+n)),W4.push((t+1)*(t+2)/2%64);let i=Xse;for(let s=0;s<7;s++)e=(e<<qf^(e>>eoe)*noe)%toe,e&Qse&&(i^=qf<<(qf<<BigInt(s))-qf);q4.push(i)}const[roe,ioe]=Kse(q4,!0),nC=(t,e,n)=>n>32?qse(t,e,n):Hse(t,e,n),rC=(t,e,n)=>n>32?Vse(t,e,n):Wse(t,e,n);function soe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=nC(l,u,1)^n[a],f=rC(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=W4[o],c=nC(i,s,a),l=rC(i,s,a),u=H4[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=roe[r],t[1]^=ioe[r]}n.fill(0)}let ooe=class V4 extends US{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,mp(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Gse(this.state)}keccak(){eC||tC(this.state32),soe(this.state32,this.rounds),eC||tC(this.state32),this.posOut=0,this.pos=0}update(e){zd(this);const{blockLen:n,state:r}=this;e=Kd(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){zd(this,!1),Jp(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return mp(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(z4(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new V4(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const aoe=(t,e,n)=>K4(()=>new ooe(e,t,n)),coe=aoe(1,136,256/8),loe="https://rpc.walletconnect.org/v1";function G4(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Ne.from(coe(n)).toString("hex")}async function uoe(t,e,n,r,i,s){switch(n.t){case"eip191":return await doe(t,e,n.s);case"eip1271":return await foe(t,e,n.s,r,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function doe(t,e,n){return(await hie({hash:G4(e),signature:n})).toLowerCase()===t.toLowerCase()}async function foe(t,e,n,r,i,s){const o=D0(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=G4(e).substring(2),f=a+d+c+l+u,h=await fetch(`${s||loe}/?chainId=${r}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:hoe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:p}=await h.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function hoe(){return Date.now()+Math.floor(Math.random()*1e3)}function poe(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const s=Ne.from(t,"base64").slice(1,65);return mie.encode(s)}var goe=Object.defineProperty,moe=Object.defineProperties,woe=Object.getOwnPropertyDescriptors,iC=Object.getOwnPropertySymbols,yoe=Object.prototype.hasOwnProperty,boe=Object.prototype.propertyIsEnumerable,sC=(t,e,n)=>e in t?goe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,voe=(t,e)=>{for(var n in e||(e={}))yoe.call(e,n)&&sC(t,n,e[n]);if(iC)for(var n of iC(e))boe.call(e,n)&&sC(t,n,e[n]);return t},xoe=(t,e)=>moe(t,woe(e));const Eoe="did:pkh:",jS=t=>t==null?void 0:t.split(":"),Soe=t=>{const e=t&&jS(t);if(e)return t.includes(Eoe)?e[3]:e[1]},z2=t=>{const e=t&&jS(t);if(e)return e[2]+":"+e[3]},Wm=t=>{const e=t&&jS(t);if(e)return e.pop()};async function oC(t){const{cacao:e,projectId:n}=t,{s:r,p:i}=e,s=Y4(i,i.iss),o=Wm(i.iss);return await uoe(o,s,r,z2(i.iss),n)}const Y4=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=Wm(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Soe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,f=t.requestId?`Request ID: ${t.requestId}`:void 0,h=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=$0(t.resources);if(p){const g=wp(p);i=Poe(i,g)}return[n,r,"",i,"",s,o,a,c,l,u,d,f,h].filter(g=>g!=null).join(`
`)};function _oe(t){return Ne.from(JSON.stringify(t)).toString("base64")}function koe(t){return JSON.parse(Ne.from(t,"base64").toString("utf-8"))}function du(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(i=>{const s=r[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function Aoe(t,e,n,r={}){return n==null||n.sort((i,s)=>i.localeCompare(s)),{att:{[t]:Ioe(e,n,r)}}}function Ioe(t,e,n={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const r=e.map(i=>({[`${t}/${i}`]:[n]}));return Object.assign({},...r)}function J4(t){return du(t),`urn:recap:${_oe(t).replace(/=/g,"")}`}function wp(t){const e=koe(t.replace("urn:recap:",""));return du(e),e}function Coe(t,e,n){const r=Aoe(t,e,n);return J4(r)}function Roe(t){return t&&t.includes("urn:recap:")}function Toe(t,e){const n=wp(t),r=wp(e),i=Ooe(n,r);return J4(i)}function Ooe(t,e){du(t),du(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),r={att:{}};return n.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[i]=xoe(voe({},r.att[i]),{[a]:((c=t.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),r}function Poe(t="",e){du(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,f)=>d.action.localeCompare(f.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(i++,`(${i}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const s=r.join(" "),o=`${n}${s}`;return`${t?t+" ":""}${o}`}function aC(t){var e;const n=wp(t);du(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function cC(t){const e=wp(t);du(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function $0(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Roe(e)?e:void 0}function g1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Z4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ms(t,...e){if(!Z4(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function lC(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Noe(t,e){ms(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function uC(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Qc=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Loe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Doe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Doe)throw new Error("Non little-endian hardware is not supported");function $oe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function K2(t){if(typeof t=="string")t=$oe(t);else if(Z4(t))t=H2(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Boe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Moe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Uoe=(t,e)=>{function n(r,...i){if(ms(r),t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?ms(l):ms(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&ms(i[1]);const o=e(r,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");ms(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,ms(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(ms(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function dC(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!joe(e))throw new Error("invalid output, must be aligned");return e}function fC(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function joe(t){return t.byteOffset%4===0}function H2(t){return Uint8Array.from(t)}function Hd(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const X4=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Foe=X4("expand 16-byte k"),zoe=X4("expand 32-byte k"),Koe=Qc(Foe),Hoe=Qc(zoe);function tn(t,e){return t<<e|t>>>32-e}function W2(t){return t.byteOffset%4===0}const n0=64,Woe=16,Q4=2**32-1,hC=new Uint32Array;function qoe(t,e,n,r,i,s,o,a){const c=i.length,l=new Uint8Array(n0),u=Qc(l),d=W2(i)&&W2(s),f=d?Qc(i):hC,h=d?Qc(s):hC;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=Q4)throw new Error("arx: counter overflow");const g=Math.min(n0,c-p);if(d&&g===n0){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<Woe;y++)b=w+y,h[b]=f[b]^u[y];p+=n0;continue}for(let w=0,y;w<g;w++)y=p+w,s[y]=i[y]^l[w];p+=g}}function Voe(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=Boe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return g1(i),g1(o),uC(s),uC(n),(a,c,l,u,d=0)=>{ms(a),ms(c),ms(l);const f=l.length;if(u===void 0&&(u=new Uint8Array(f)),ms(u),g1(d),d<0||d>=Q4)throw new Error("arx: counter overflow");if(u.length<f)throw new Error(`arx: output (${u.length}) is shorter than data (${f})`);const h=[];let p=a.length,g,w;if(p===32)h.push(g=H2(a)),w=Hoe;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=Koe,h.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);W2(c)||h.push(c=H2(c));const y=Qc(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,Qc(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-i;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const x=new Uint8Array(12);x.set(c,s?0:12-c.length),c=x,h.push(c)}const m=Qc(c);return qoe(t,w,y,m,l,u,d,o),Hd(...h),u}}const jr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Goe{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=K2(e),ms(e,32);const n=jr(e,0),r=jr(e,2),i=jr(e,4),s=jr(e,6),o=jr(e,8),a=jr(e,10),c=jr(e,12),l=jr(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=jr(e,16+2*u)}process(e,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],f=o[5],h=o[6],p=o[7],g=o[8],w=o[9],y=jr(e,n+0),b=jr(e,n+2),m=jr(e,n+4),x=jr(e,n+6),E=jr(e,n+8),A=jr(e,n+10),k=jr(e,n+12),S=jr(e,n+14);let C=s[0]+(y&8191),F=s[1]+((y>>>13|b<<3)&8191),N=s[2]+((b>>>10|m<<6)&8191),L=s[3]+((m>>>7|x<<9)&8191),j=s[4]+((x>>>4|E<<12)&8191),B=s[5]+(E>>>1&8191),O=s[6]+((E>>>14|A<<2)&8191),R=s[7]+((A>>>11|k<<5)&8191),D=s[8]+((k>>>8|S<<8)&8191),T=s[9]+(S>>>5|i),I=0,M=I+C*a+F*(5*w)+N*(5*g)+L*(5*p)+j*(5*h);I=M>>>13,M&=8191,M+=B*(5*f)+O*(5*d)+R*(5*u)+D*(5*l)+T*(5*c),I+=M>>>13,M&=8191;let Y=I+C*c+F*a+N*(5*w)+L*(5*g)+j*(5*p);I=Y>>>13,Y&=8191,Y+=B*(5*h)+O*(5*f)+R*(5*d)+D*(5*u)+T*(5*l),I+=Y>>>13,Y&=8191;let X=I+C*l+F*c+N*a+L*(5*w)+j*(5*g);I=X>>>13,X&=8191,X+=B*(5*p)+O*(5*h)+R*(5*f)+D*(5*d)+T*(5*u),I+=X>>>13,X&=8191;let Z=I+C*u+F*l+N*c+L*a+j*(5*w);I=Z>>>13,Z&=8191,Z+=B*(5*g)+O*(5*p)+R*(5*h)+D*(5*f)+T*(5*d),I+=Z>>>13,Z&=8191;let le=I+C*d+F*u+N*l+L*c+j*a;I=le>>>13,le&=8191,le+=B*(5*w)+O*(5*g)+R*(5*p)+D*(5*h)+T*(5*f),I+=le>>>13,le&=8191;let ae=I+C*f+F*d+N*u+L*l+j*c;I=ae>>>13,ae&=8191,ae+=B*a+O*(5*w)+R*(5*g)+D*(5*p)+T*(5*h),I+=ae>>>13,ae&=8191;let ye=I+C*h+F*f+N*d+L*u+j*l;I=ye>>>13,ye&=8191,ye+=B*c+O*a+R*(5*w)+D*(5*g)+T*(5*p),I+=ye>>>13,ye&=8191;let Ee=I+C*p+F*h+N*f+L*d+j*u;I=Ee>>>13,Ee&=8191,Ee+=B*l+O*c+R*a+D*(5*w)+T*(5*g),I+=Ee>>>13,Ee&=8191;let ee=I+C*g+F*p+N*h+L*f+j*d;I=ee>>>13,ee&=8191,ee+=B*u+O*l+R*c+D*a+T*(5*w),I+=ee>>>13,ee&=8191;let te=I+C*w+F*g+N*p+L*h+j*f;I=te>>>13,te&=8191,te+=B*d+O*u+R*l+D*c+T*a,I+=te>>>13,te&=8191,I=(I<<2)+I|0,I=I+M|0,M=I&8191,I=I>>>13,Y+=I,s[0]=M,s[1]=Y,s[2]=X,s[3]=Z,s[4]=le,s[5]=ae,s[6]=ye,s[7]=Ee,s[8]=ee,s[9]=te}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Hd(r)}update(e){lC(this);const{buffer:n,blockLen:r}=this;e=K2(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Hd(this.h,this.r,this.buffer,this.pad)}digestInto(e){lC(this),Noe(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function Yoe(t){const e=(r,i)=>t(i).update(K2(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const Joe=Yoe(t=>new Goe(t));function Zoe(t,e,n,r,i,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],f=e[2],h=e[3],p=e[4],g=e[5],w=e[6],y=e[7],b=i,m=n[0],x=n[1],E=n[2],A=o,k=a,S=c,C=l,F=u,N=d,L=f,j=h,B=p,O=g,R=w,D=y,T=b,I=m,M=x,Y=E;for(let Z=0;Z<s;Z+=2)A=A+F|0,T=tn(T^A,16),B=B+T|0,F=tn(F^B,12),A=A+F|0,T=tn(T^A,8),B=B+T|0,F=tn(F^B,7),k=k+N|0,I=tn(I^k,16),O=O+I|0,N=tn(N^O,12),k=k+N|0,I=tn(I^k,8),O=O+I|0,N=tn(N^O,7),S=S+L|0,M=tn(M^S,16),R=R+M|0,L=tn(L^R,12),S=S+L|0,M=tn(M^S,8),R=R+M|0,L=tn(L^R,7),C=C+j|0,Y=tn(Y^C,16),D=D+Y|0,j=tn(j^D,12),C=C+j|0,Y=tn(Y^C,8),D=D+Y|0,j=tn(j^D,7),A=A+N|0,Y=tn(Y^A,16),R=R+Y|0,N=tn(N^R,12),A=A+N|0,Y=tn(Y^A,8),R=R+Y|0,N=tn(N^R,7),k=k+L|0,T=tn(T^k,16),D=D+T|0,L=tn(L^D,12),k=k+L|0,T=tn(T^k,8),D=D+T|0,L=tn(L^D,7),S=S+j|0,I=tn(I^S,16),B=B+I|0,j=tn(j^B,12),S=S+j|0,I=tn(I^S,8),B=B+I|0,j=tn(j^B,7),C=C+F|0,M=tn(M^C,16),O=O+M|0,F=tn(F^O,12),C=C+F|0,M=tn(M^C,8),O=O+M|0,F=tn(F^O,7);let X=0;r[X++]=o+A|0,r[X++]=a+k|0,r[X++]=c+S|0,r[X++]=l+C|0,r[X++]=u+F|0,r[X++]=d+N|0,r[X++]=f+L|0,r[X++]=h+j|0,r[X++]=p+B|0,r[X++]=g+O|0,r[X++]=w+R|0,r[X++]=y+D|0,r[X++]=b+T|0,r[X++]=m+I|0,r[X++]=x+M|0,r[X++]=E+Y|0}const Xoe=Voe(Zoe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Qoe=new Uint8Array(16),pC=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Qoe.subarray(n))},eae=new Uint8Array(32);function gC(t,e,n,r,i){const s=t(e,n,eae),o=Joe.create(s);i&&pC(o,i),pC(o,r);const a=new Uint8Array(16),c=Loe(a);fC(c,0,BigInt(i?i.length:0),!0),fC(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return Hd(s,a),l}const tae=t=>(e,n,r)=>({encrypt(i,s){const o=i.length;s=dC(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,n,a,a,1);const c=gC(t,e,n,a,r);return s.set(c,o),Hd(c),s},decrypt(i,s){s=dC(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=gC(t,e,n,o,r);if(!Moe(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,n,s,s,1),Hd(c),s}}),eL=Uoe({blockSize:64,nonceLength:12,tagLength:16},tae(Xoe));let tL=class extends US{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,MS(e);const r=Kd(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return zd(this),this.iHash.update(e),this}digestInto(e){zd(this),Jp(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const dy=(t,e,n)=>new tL(t,e).update(n).digest();dy.create=(t,e)=>new tL(t,e);function nae(t,e,n){return MS(t),n===void 0&&(n=new Uint8Array(t.outputLen)),dy(t,Kd(n),Kd(e))}const m1=new Uint8Array([0]),mC=new Uint8Array;function rae(t,e,n,r=32){if(MS(t),mp(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=mC);const s=new Uint8Array(i*t.outputLen),o=dy.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)m1[0]=l+1,a.update(l===0?mC:c).update(n).update(m1).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),m1.fill(0),s.slice(0,r)}const iae=(t,e,n,r,i)=>rae(t,nae(t,e,n),r,i);function sae(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function oae(t,e,n){return t&e^~t&n}function aae(t,e,n){return t&e^t&n^e&n}let cae=class extends US{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=p1(this.buffer)}update(e){zd(this);const{view:n,buffer:r,blockLen:i}=this;e=Kd(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=p1(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){zd(this),z4(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;sae(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=p1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const lae=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),mc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wc=new Uint32Array(64);class uae extends cae{constructor(){super(64,32,8,!1),this.A=mc[0]|0,this.B=mc[1]|0,this.C=mc[2]|0,this.D=mc[3]|0,this.E=mc[4]|0,this.F=mc[5]|0,this.G=mc[6]|0,this.H=mc[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)wc[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=wc[d-15],h=wc[d-2],p=Bo(f,7)^Bo(f,18)^f>>>3,g=Bo(h,17)^Bo(h,19)^h>>>10;wc[d]=g+wc[d-7]+p+wc[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=Bo(a,6)^Bo(a,11)^Bo(a,25),h=u+f+oae(a,c,l)+lae[d]+wc[d]|0,p=(Bo(r,2)^Bo(r,13)^Bo(r,22))+aae(r,i,s)|0;u=l,l=c,c=a,a=o+h|0,o=s,s=i,i=r,r=h+p|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){wc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Zp=K4(()=>new uae);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fy=BigInt(0),hy=BigInt(1),dae=BigInt(2);function fu(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xp(t){if(!fu(t))throw new Error("Uint8Array expected")}function Wd(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const fae=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function qd(t){Xp(t);let e="";for(let n=0;n<t.length;n++)e+=fae[t[n]];return e}function cd(t){const e=t.toString(16);return e.length&1?"0"+e:e}function FS(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?fy:BigInt("0x"+t)}const Ea={_0:48,_9:57,A:65,F:70,a:97,f:102};function wC(t){if(t>=Ea._0&&t<=Ea._9)return t-Ea._0;if(t>=Ea.A&&t<=Ea.F)return t-(Ea.A-10);if(t>=Ea.a&&t<=Ea.f)return t-(Ea.a-10)}function Vd(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=wC(t.charCodeAt(s)),a=wC(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Xl(t){return FS(qd(t))}function yp(t){return Xp(t),FS(qd(Uint8Array.from(t).reverse()))}function Gd(t,e){return Vd(t.toString(16).padStart(e*2,"0"))}function py(t,e){return Gd(t,e).reverse()}function hae(t){return Vd(cd(t))}function hs(t,e,n){let r;if(typeof e=="string")try{r=Vd(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(fu(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function bp(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Xp(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function pae(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function gae(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const w1=t=>typeof t=="bigint"&&fy<=t;function gy(t,e,n){return w1(t)&&w1(e)&&w1(n)&&e<=t&&t<n}function Ha(t,e,n,r){if(!gy(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function nL(t){let e;for(e=0;t>fy;t>>=hy,e+=1);return e}function mae(t,e){return t>>BigInt(e)&hy}function wae(t,e,n){return t|(n?hy:fy)<<BigInt(e)}const zS=t=>(dae<<BigInt(t-1))-hy,y1=t=>new Uint8Array(t),yC=t=>Uint8Array.from(t);function rL(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=y1(t),i=y1(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...u)=>n(i,r,...u),c=(u=y1())=>{i=a(yC([0]),u),r=a(),u.length!==0&&(i=a(yC([1]),u),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const f=r.slice();d.push(f),u+=r.length}return bp(...d)};return(u,d)=>{o(),c(u);let f;for(;!(f=d(l()));)c();return o(),f}}const yae={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||fu(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function wf(t,e,n={}){const r=(i,s,o)=>{const a=yae[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const bae=()=>{throw new Error("not implemented")};function q2(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}var vae=Object.freeze({__proto__:null,isBytes:fu,abytes:Xp,abool:Wd,bytesToHex:qd,numberToHexUnpadded:cd,hexToNumber:FS,hexToBytes:Vd,bytesToNumberBE:Xl,bytesToNumberLE:yp,numberToBytesBE:Gd,numberToBytesLE:py,numberToVarBytesBE:hae,ensureBytes:hs,concatBytes:bp,equalBytes:pae,utf8ToBytes:gae,inRange:gy,aInRange:Ha,bitLen:nL,bitGet:mae,bitSet:wae,bitMask:zS,createHmacDrbg:rL,validateObject:wf,notImplemented:bae,memoized:q2});const Lr=BigInt(0),sr=BigInt(1),Ll=BigInt(2),xae=BigInt(3),V2=BigInt(4),bC=BigInt(5),vC=BigInt(8);function Vi(t,e){const n=t%e;return n>=Lr?n:e+n}function iL(t,e,n){if(e<Lr)throw new Error("invalid exponent, negatives unsupported");if(n<=Lr)throw new Error("invalid modulus");if(n===sr)return Lr;let r=sr;for(;e>Lr;)e&sr&&(r=r*t%n),t=t*t%n,e>>=sr;return r}function uo(t,e,n){let r=t;for(;e-- >Lr;)r*=r,r%=n;return r}function G2(t,e){if(t===Lr)throw new Error("invert: expected non-zero number");if(e<=Lr)throw new Error("invert: expected positive modulus, got "+e);let n=Vi(t,e),r=e,i=Lr,s=sr;for(;n!==Lr;){const o=r/n,a=r%n,c=i-s*o;r=n,n=a,i=s,s=c}if(r!==sr)throw new Error("invert: does not exist");return Vi(i,e)}function Eae(t){const e=(t-sr)/Ll;let n,r,i;for(n=t-sr,r=0;n%Ll===Lr;n/=Ll,r++);for(i=Ll;i<t&&iL(i,e,t)!==t-sr;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+sr)/V2;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(n+sr)/Ll;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let p=o.sqr(d);f<c&&!o.eql(p,o.ONE);f++)p=o.sqr(p);const h=o.pow(l,sr<<BigInt(c-f-1));l=o.sqr(h),u=o.mul(u,h),d=o.mul(d,l),c=f}return u}}function Sae(t){if(t%V2===xae){const e=(t+sr)/V2;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%vC===bC){const e=(t-bC)/vC;return function(n,r){const i=n.mul(r,Ll),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,Ll),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Eae(t)}const _ae=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function kae(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=_ae.reduce((r,i)=>(r[i]="function",r),e);return wf(t,n)}function Aae(t,e,n){if(n<Lr)throw new Error("invalid exponent, negatives unsupported");if(n===Lr)return t.ONE;if(n===sr)return e;let r=t.ONE,i=e;for(;n>Lr;)n&sr&&(r=t.mul(r,i)),i=t.sqr(i),n>>=sr;return r}function Iae(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function sL(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function oL(t,e,n=!1,r={}){if(t<=Lr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=sL(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:zS(i),ZERO:Lr,ONE:sr,create:c=>Vi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Lr<=c&&c<t},is0:c=>c===Lr,isOdd:c=>(c&sr)===sr,neg:c=>Vi(-c,t),eql:(c,l)=>c===l,sqr:c=>Vi(c*c,t),add:(c,l)=>Vi(c+l,t),sub:(c,l)=>Vi(c-l,t),mul:(c,l)=>Vi(c*l,t),pow:(c,l)=>Aae(a,c,l),div:(c,l)=>Vi(c*G2(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>G2(c,t),sqrt:r.sqrt||(c=>(o||(o=Sae(t)),o(a,c))),invertBatch:c=>Iae(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?py(c,s):Gd(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?yp(c):Xl(c)}});return Object.freeze(a)}function aL(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function cL(t){const e=aL(t);return e+Math.ceil(e/2)}function Cae(t,e,n=!1){const r=t.length,i=aL(e),s=cL(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?yp(t):Xl(t),a=Vi(o,e-sr)+sr;return n?py(a,i):Gd(a,i)}const xC=BigInt(0),r0=BigInt(1);function b1(t,e){const n=e.negate();return t?n:e}function lL(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function v1(t,e){lL(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Rae(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Tae(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const x1=new WeakMap,uL=new WeakMap;function E1(t){return uL.get(t)||1}function Oae(t,e){return{constTimeNegate:b1,hasPrecomputes(n){return E1(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>xC;)r&r0&&(i=i.add(s)),s=s.double(),r>>=r0;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=v1(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=v1(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let f=0;f<s;f++){const h=f*o;let p=Number(i&l);i>>=d,p>o&&(p-=u,i+=r0);const g=h,w=h+Math.abs(p)-1,y=f%2!==0,b=p<0;p===0?c=c.add(b1(y,r[g])):a=a.add(b1(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=v1(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const f=d*a;if(i===xC)break;let h=Number(i&c);if(i>>=u,h>a&&(h-=l,i+=r0),h===0)continue;let p=r[f+Math.abs(h)-1];h<0&&(p=p.negate()),s=s.add(p)}return s},getPrecomputes(n,r,i){let s=x1.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&x1.set(r,i(s))),s},wNAFCached(n,r,i){const s=E1(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=E1(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){lL(r,e),uL.set(n,r),x1.delete(n)}}}function Pae(t,e,n,r){if(Rae(n,t),Tae(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=nL(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let h=0;h<r.length;h++){const p=r[h],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[h])}let f=i;for(let h=c.length-1,p=i;h>0;h--)p=p.add(c[h]),f=f.add(p);if(u=u.add(f),d!==0)for(let h=0;h<o;h++)u=u.double()}return u}function dL(t){return kae(t.Fp),wf(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...sL(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Fu=BigInt(0),S1=BigInt(1);function Nae(t){return wf(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function Lae(t){const e=Nae(t),{P:n}=e,r=b=>Vi(b,n),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>iL(b,n-BigInt(2),n));function l(b,m,x){const E=r(b*(m-x));return m=r(m-E),x=r(x+E),[m,x]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,m){Ha("u",b,Fu,n),Ha("scalar",m,Fu,n);const x=m,E=b;let A=S1,k=Fu,S=b,C=S1,F=Fu,N;for(let j=BigInt(i-1);j>=Fu;j--){const B=x>>j&S1;F^=B,N=l(F,A,S),A=N[0],S=N[1],N=l(F,k,C),k=N[0],C=N[1],F=B;const O=A+k,R=r(O*O),D=A-k,T=r(D*D),I=R-T,M=S+C,Y=S-C,X=r(Y*O),Z=r(M*D),le=X+Z,ae=X-Z;S=r(le*le),C=r(E*r(ae*ae)),A=r(R*T),k=r(I*(R+r(u*I)))}N=l(F,A,S),A=N[0],S=N[1],N=l(F,k,C),k=N[0],C=N[1];const L=c(k);return r(A*L)}function f(b){return py(r(b),s)}function h(b){const m=hs("u coordinate",b,s);return o===32&&(m[31]&=127),yp(m)}function p(b){const m=hs("scalar",b),x=m.length;if(x!==s&&x!==o){let E=""+s+" or "+o;throw new Error("invalid scalar, expected "+E+" bytes, got "+x)}return yp(a(m))}function g(b,m){const x=h(m),E=p(b),A=d(x,E);if(A===Fu)throw new Error("invalid private or public key received");return f(A)}const w=f(e.Gu);function y(b){return g(b,w)}return{scalarMult:g,scalarMultBase:y,getSharedSecret:(b,m)=>g(b,m),getPublicKey:b=>y(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}const Y2=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const Dae=BigInt(1),EC=BigInt(2),$ae=BigInt(3),Bae=BigInt(5);BigInt(8);function Mae(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=Y2,o=t*t%s*t%s,a=uo(o,EC,s)*o%s,c=uo(a,Dae,s)*t%s,l=uo(c,Bae,s)*c%s,u=uo(l,e,s)*l%s,d=uo(u,n,s)*u%s,f=uo(d,r,s)*d%s,h=uo(f,i,s)*f%s,p=uo(h,i,s)*f%s,g=uo(p,e,s)*l%s;return{pow_p_5_8:uo(g,EC,s)*t%s,b2:o}}function Uae(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const J2=Lae({P:Y2,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=Y2,{pow_p_5_8:n,b2:r}=Mae(t);return Vi(uo(n,$ae,e)*r,e)},adjustScalarBytes:Uae,randomBytes:mf});function SC(t){t.lowS!==void 0&&Wd("lowS",t.lowS),t.prehash!==void 0&&Wd("prehash",t.prehash)}function jae(t){const e=dL(t);wf(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Fae,hexToBytes:zae}=vae;class Kae extends Error{constructor(e=""){super(e)}}const Oa={Err:Kae,_tlv:{encode:(t,e)=>{const{Err:n}=Oa;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=cd(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?cd(i.length/2|128):"";return cd(t)+s+i+e},decode(t,e){const{Err:n}=Oa;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Oa;if(t<Da)throw new e("integer: negative integers are not allowed");let n=cd(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Oa;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Fae(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Oa,i=typeof t=="string"?zae(t):t;Xp(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Oa,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},Da=BigInt(0),Ir=BigInt(1);BigInt(2);const _C=BigInt(3);BigInt(4);function Hae(t){const e=jae(t),{Fp:n}=e,r=oL(e.n,e.nBitLength),i=e.toBytes||((g,w,y)=>{const b=w.toAffine();return bp(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),s=e.fromBytes||(g=>{const w=g.subarray(1),y=n.fromBytes(w.subarray(0,n.BYTES)),b=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:y,y:b}});function o(g){const{a:w,b:y}=e,b=n.sqr(g),m=n.mul(b,g);return n.add(n.add(m,n.mul(g,w)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return gy(g,Ir,e.n)}function c(g){const{allowedPrivateKeyLengths:w,nByteLength:y,wrapPrivateKey:b,n:m}=e;if(w&&typeof g!="bigint"){if(fu(g)&&(g=qd(g)),typeof g!="string"||!w.includes(g.length))throw new Error("invalid private key");g=g.padStart(y*2,"0")}let x;try{x=typeof g=="bigint"?g:Xl(hs("private key",g,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof g)}return b&&(x=Vi(x,m)),Ha("private key",x,Ir,m),x}function l(g){if(!(g instanceof f))throw new Error("ProjectivePoint expected")}const u=q2((g,w)=>{const{px:y,py:b,pz:m}=g;if(n.eql(m,n.ONE))return{x:y,y:b};const x=g.is0();w==null&&(w=x?n.ONE:n.inv(m));const E=n.mul(y,w),A=n.mul(b,w),k=n.mul(m,w);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(k,n.ONE))throw new Error("invZ was invalid");return{x:E,y:A}}),d=q2(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:w,y}=g.toAffine();if(!n.isValid(w)||!n.isValid(y))throw new Error("bad point: x or y not FE");const b=n.sqr(y),m=o(w);if(!n.eql(b,m))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class f{constructor(w,y,b){if(this.px=w,this.py=y,this.pz=b,w==null||!n.isValid(w))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:y,y:b}=w||{};if(!w||!n.isValid(y)||!n.isValid(b))throw new Error("invalid affine point");if(w instanceof f)throw new Error("projective point not allowed");const m=x=>n.eql(x,n.ZERO);return m(y)&&m(b)?f.ZERO:new f(y,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,m)=>b.toAffine(y[m])).map(f.fromAffine)}static fromHex(w){const y=f.fromAffine(s(hs("pointHex",w)));return y.assertValidity(),y}static fromPrivateKey(w){return f.BASE.multiply(c(w))}static msm(w,y){return Pae(f,r,w,y)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:y,py:b,pz:m}=this,{px:x,py:E,pz:A}=w,k=n.eql(n.mul(y,A),n.mul(x,m)),S=n.eql(n.mul(b,A),n.mul(E,m));return k&&S}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:y}=e,b=n.mul(y,_C),{px:m,py:x,pz:E}=this;let A=n.ZERO,k=n.ZERO,S=n.ZERO,C=n.mul(m,m),F=n.mul(x,x),N=n.mul(E,E),L=n.mul(m,x);return L=n.add(L,L),S=n.mul(m,E),S=n.add(S,S),A=n.mul(w,S),k=n.mul(b,N),k=n.add(A,k),A=n.sub(F,k),k=n.add(F,k),k=n.mul(A,k),A=n.mul(L,A),S=n.mul(b,S),N=n.mul(w,N),L=n.sub(C,N),L=n.mul(w,L),L=n.add(L,S),S=n.add(C,C),C=n.add(S,C),C=n.add(C,N),C=n.mul(C,L),k=n.add(k,C),N=n.mul(x,E),N=n.add(N,N),C=n.mul(N,L),A=n.sub(A,C),S=n.mul(N,F),S=n.add(S,S),S=n.add(S,S),new f(A,k,S)}add(w){l(w);const{px:y,py:b,pz:m}=this,{px:x,py:E,pz:A}=w;let k=n.ZERO,S=n.ZERO,C=n.ZERO;const F=e.a,N=n.mul(e.b,_C);let L=n.mul(y,x),j=n.mul(b,E),B=n.mul(m,A),O=n.add(y,b),R=n.add(x,E);O=n.mul(O,R),R=n.add(L,j),O=n.sub(O,R),R=n.add(y,m);let D=n.add(x,A);return R=n.mul(R,D),D=n.add(L,B),R=n.sub(R,D),D=n.add(b,m),k=n.add(E,A),D=n.mul(D,k),k=n.add(j,B),D=n.sub(D,k),C=n.mul(F,R),k=n.mul(N,B),C=n.add(k,C),k=n.sub(j,C),C=n.add(j,C),S=n.mul(k,C),j=n.add(L,L),j=n.add(j,L),B=n.mul(F,B),R=n.mul(N,R),j=n.add(j,B),B=n.sub(L,B),B=n.mul(F,B),R=n.add(R,B),L=n.mul(j,R),S=n.add(S,L),L=n.mul(D,R),k=n.mul(O,k),k=n.sub(k,L),L=n.mul(O,j),C=n.mul(D,C),C=n.add(C,L),new f(k,S,C)}subtract(w){return this.add(w.negate())}is0(){return this.equals(f.ZERO)}wNAF(w){return p.wNAFCached(this,w,f.normalizeZ)}multiplyUnsafe(w){const{endo:y,n:b}=e;Ha("scalar",w,Da,b);const m=f.ZERO;if(w===Da)return m;if(this.is0()||w===Ir)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,f.normalizeZ);let{k1neg:x,k1:E,k2neg:A,k2:k}=y.splitScalar(w),S=m,C=m,F=this;for(;E>Da||k>Da;)E&Ir&&(S=S.add(F)),k&Ir&&(C=C.add(F)),F=F.double(),E>>=Ir,k>>=Ir;return x&&(S=S.negate()),A&&(C=C.negate()),C=new f(n.mul(C.px,y.beta),C.py,C.pz),S.add(C)}multiply(w){const{endo:y,n:b}=e;Ha("scalar",w,Ir,b);let m,x;if(y){const{k1neg:E,k1:A,k2neg:k,k2:S}=y.splitScalar(w);let{p:C,f:F}=this.wNAF(A),{p:N,f:L}=this.wNAF(S);C=p.constTimeNegate(E,C),N=p.constTimeNegate(k,N),N=new f(n.mul(N.px,y.beta),N.py,N.pz),m=C.add(N),x=F.add(L)}else{const{p:E,f:A}=this.wNAF(w);m=E,x=A}return f.normalizeZ([m,x])[0]}multiplyAndAddUnsafe(w,y,b){const m=f.BASE,x=(A,k)=>k===Da||k===Ir||!A.equals(m)?A.multiplyUnsafe(k):A.multiply(k),E=x(this,y).add(x(w,b));return E.is0()?void 0:E}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:y}=e;if(w===Ir)return!0;if(y)return y(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:y}=e;return w===Ir?this:y?y(f,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return Wd("isCompressed",w),this.assertValidity(),i(f,this,w)}toHex(w=!0){return Wd("isCompressed",w),qd(this.toRawBytes(w))}}f.BASE=new f(e.Gx,e.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,p=Oae(f,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function Wae(t){const e=dL(t);return wf(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function qae(t){const e=Wae(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(B){return Vi(B,r)}function a(B){return G2(B,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=Hae({...e,toBytes(B,O,R){const D=O.toAffine(),T=n.toBytes(D.x),I=bp;return Wd("isCompressed",R),R?I(Uint8Array.from([O.hasEvenY()?2:3]),T):I(Uint8Array.from([4]),T,n.toBytes(D.y))},fromBytes(B){const O=B.length,R=B[0],D=B.subarray(1);if(O===i&&(R===2||R===3)){const T=Xl(D);if(!gy(T,Ir,n.ORDER))throw new Error("Point is not on curve");const I=u(T);let M;try{M=n.sqrt(I)}catch(X){const Z=X instanceof Error?": "+X.message:"";throw new Error("Point is not on curve"+Z)}const Y=(M&Ir)===Ir;return(R&1)===1!==Y&&(M=n.neg(M)),{x:T,y:M}}else if(O===s&&R===4){const T=n.fromBytes(D.subarray(0,n.BYTES)),I=n.fromBytes(D.subarray(n.BYTES,2*n.BYTES));return{x:T,y:I}}else{const T=i,I=s;throw new Error("invalid Point, expected length of "+T+", or uncompressed "+I+", got "+O)}}}),f=B=>qd(Gd(B,e.nByteLength));function h(B){const O=r>>Ir;return B>O}function p(B){return h(B)?o(-B):B}const g=(B,O,R)=>Xl(B.slice(O,R));class w{constructor(O,R,D){this.r=O,this.s=R,this.recovery=D,this.assertValidity()}static fromCompact(O){const R=e.nByteLength;return O=hs("compactSignature",O,R*2),new w(g(O,0,R),g(O,R,2*R))}static fromDER(O){const{r:R,s:D}=Oa.toSig(hs("DER",O));return new w(R,D)}assertValidity(){Ha("r",this.r,Ir,r),Ha("s",this.s,Ir,r)}addRecoveryBit(O){return new w(this.r,this.s,O)}recoverPublicKey(O){const{r:R,s:D,recovery:T}=this,I=A(hs("msgHash",O));if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");const M=T===2||T===3?R+e.n:R;if(M>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const Y=T&1?"03":"02",X=c.fromHex(Y+f(M)),Z=a(M),le=o(-I*Z),ae=o(D*Z),ye=c.BASE.multiplyAndAddUnsafe(X,le,ae);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Vd(this.toDERHex())}toDERHex(){return Oa.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Vd(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const y={isValidPrivateKey(B){try{return l(B),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const B=cL(e.n);return Cae(e.randomBytes(B),e.n)},precompute(B=8,O=c.BASE){return O._setWindowSize(B),O.multiply(BigInt(3)),O}};function b(B,O=!0){return c.fromPrivateKey(B).toRawBytes(O)}function m(B){const O=fu(B),R=typeof B=="string",D=(O||R)&&B.length;return O?D===i||D===s:R?D===2*i||D===2*s:B instanceof c}function x(B,O,R=!0){if(m(B))throw new Error("first arg must be private key");if(!m(O))throw new Error("second arg must be public key");return c.fromHex(O).multiply(l(B)).toRawBytes(R)}const E=e.bits2int||function(B){if(B.length>8192)throw new Error("input is too large");const O=Xl(B),R=B.length*8-e.nBitLength;return R>0?O>>BigInt(R):O},A=e.bits2int_modN||function(B){return o(E(B))},k=zS(e.nBitLength);function S(B){return Ha("num < 2^"+e.nBitLength,B,Da,k),Gd(B,e.nByteLength)}function C(B,O,R=F){if(["recovered","canonical"].some(ee=>ee in R))throw new Error("sign() legacy options not supported");const{hash:D,randomBytes:T}=e;let{lowS:I,prehash:M,extraEntropy:Y}=R;I==null&&(I=!0),B=hs("msgHash",B),SC(R),M&&(B=hs("prehashed msgHash",D(B)));const X=A(B),Z=l(O),le=[S(Z),S(X)];if(Y!=null&&Y!==!1){const ee=Y===!0?T(n.BYTES):Y;le.push(hs("extraEntropy",ee))}const ae=bp(...le),ye=X;function Ee(ee){const te=E(ee);if(!d(te))return;const J=a(te),Q=c.BASE.multiply(te).toAffine(),oe=o(Q.x);if(oe===Da)return;const W=o(J*o(ye+oe*Z));if(W===Da)return;let V=(Q.x===oe?0:2)|Number(Q.y&Ir),se=W;return I&&h(W)&&(se=p(W),V^=1),new w(oe,se,V)}return{seed:ae,k2sig:Ee}}const F={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function L(B,O,R=F){const{seed:D,k2sig:T}=C(B,O,R),I=e;return rL(I.hash.outputLen,I.nByteLength,I.hmac)(D,T)}c.BASE._setWindowSize(8);function j(B,O,R,D=N){var W;const T=B;O=hs("msgHash",O),R=hs("publicKey",R);const{lowS:I,prehash:M,format:Y}=D;if(SC(D),"strict"in D)throw new Error("options.strict was renamed to lowS");if(Y!==void 0&&Y!=="compact"&&Y!=="der")throw new Error("format must be compact or der");const X=typeof T=="string"||fu(T),Z=!X&&!Y&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!X&&!Z)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let le,ae;try{if(Z&&(le=new w(T.r,T.s)),X){try{Y!=="compact"&&(le=w.fromDER(T))}catch(V){if(!(V instanceof Oa.Err))throw V}!le&&Y!=="der"&&(le=w.fromCompact(T))}ae=c.fromHex(R)}catch{return!1}if(!le||I&&le.hasHighS())return!1;M&&(O=e.hash(O));const{r:ye,s:Ee}=le,ee=A(O),te=a(Ee),J=o(ee*te),Q=o(ye*te),oe=(W=c.BASE.multiplyAndAddUnsafe(ae,J,Q))==null?void 0:W.toAffine();return oe?o(oe.x)===ye:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:x,sign:L,verify:j,ProjectivePoint:c,Signature:w,utils:y}}function Vae(t){return{hash:t,hmac:(e,...n)=>dy(t,e,Zse(...n)),randomBytes:mf}}function Gae(t,e){const n=r=>qae({...t,...Vae(r)});return{...n(e),create:n}}const fL=oL(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),Yae=fL.create(BigInt("-3")),Jae=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Zae=Gae({a:Yae,b:Jae,Fp:fL,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Zp),hL="base10",Ni="base16",bo="base64pad",Tc="base64url",Qp="utf8",pL=0,Wa=1,eg=2,Xae=0,kC=1,Ih=12,KS=32;function Qae(){const t=J2.utils.randomPrivateKey(),e=J2.getPublicKey(t);return{privateKey:ts(t,Ni),publicKey:ts(e,Ni)}}function Z2(){const t=mf(KS);return ts(t,Ni)}function ece(t,e){const n=J2.getSharedSecret(qs(t,Ni),qs(e,Ni)),r=iae(Zp,n,void 0,void 0,KS);return ts(r,Ni)}function B0(t){const e=Zp(qs(t,Ni));return ts(e,Ni)}function Vo(t){const e=Zp(qs(t,Qp));return ts(e,Ni)}function gL(t){return qs(`${t}`,hL)}function hu(t){return Number(ts(t,hL))}function mL(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function wL(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function tce(t){const e=gL(typeof t.type<"u"?t.type:pL);if(hu(e)===Wa&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?qs(t.senderPublicKey,Ni):void 0,r=typeof t.iv<"u"?qs(t.iv,Ni):mf(Ih),i=qs(t.symKey,Ni),s=eL(i,r).encrypt(qs(t.message,Qp)),o=yL({type:e,sealed:s,iv:r,senderPublicKey:n});return t.encoding===Tc?mL(o):o}function nce(t){const e=qs(t.symKey,Ni),{sealed:n,iv:r}=vp({encoded:t.encoded,encoding:t.encoding}),i=eL(e,r).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return ts(i,Qp)}function rce(t,e){const n=gL(eg),r=mf(Ih),i=qs(t,Qp),s=yL({type:n,sealed:i,iv:r});return e===Tc?mL(s):s}function ice(t,e){const{sealed:n}=vp({encoded:t,encoding:e});return ts(n,Qp)}function yL(t){if(hu(t.type)===eg)return ts(Ah([t.type,t.sealed]),bo);if(hu(t.type)===Wa){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ts(Ah([t.type,t.senderPublicKey,t.iv,t.sealed]),bo)}return ts(Ah([t.type,t.iv,t.sealed]),bo)}function vp(t){const e=(t.encoding||bo)===Tc?wL(t.encoded):t.encoded,n=qs(e,bo),r=n.slice(Xae,kC),i=kC;if(hu(r)===Wa){const c=i+KS,l=c+Ih,u=n.slice(i,c),d=n.slice(c,l),f=n.slice(l);return{type:r,sealed:f,iv:d,senderPublicKey:u}}if(hu(r)===eg){const c=n.slice(i),l=mf(Ih);return{type:r,sealed:c,iv:l}}const s=i+Ih,o=n.slice(i,s),a=n.slice(s);return{type:r,sealed:a,iv:o}}function sce(t,e){const n=vp({encoded:t,encoding:e==null?void 0:e.encoding});return bL({type:hu(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ts(n.senderPublicKey,Ni):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function bL(t){const e=(t==null?void 0:t.type)||pL;if(e===Wa){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function AC(t){return t.type===Wa&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function IC(t){return t.type===eg}function oce(t){const e=Ne.from(t.x,"base64"),n=Ne.from(t.y,"base64");return Ah([new Uint8Array([4]),e,n])}function ace(t,e){const[n,r,i]=t.split("."),s=Ne.from(wL(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${n}.${r}`,l=Zp(c),u=oce(e);if(!Zae.verify(Ah([o,a]),l,u))throw new Error("Invalid signature");return B2(t).payload}const cce="irn";function qm(t){return(t==null?void 0:t.relay)||{protocol:cce}}function ah(t){const e=hse[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function lce(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(r)){const s=i.replace(r,""),o=t[i];n[s]=o}}),n}function CC(t){if(!t.includes("wc:")){const l=F4(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),i=t.substring(e+1,n).split("@"),s=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:uce(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:lce(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function uce(t){return t.startsWith("//")?t.substring(2):t}function dce(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(i=>{const s=i,o=n+e+s;t[s]&&(r[o]=t[s])}),r}function RC(t){const e=new URLSearchParams,n=dce(t.relay);Object.keys(n).sort().forEach(i=>{e.set(i,n[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function i0(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}function yf(t){const e=[];return t.forEach(n=>{const[r,i]=n.split(":");e.push(`${r}:${i}`)}),e}function fce(t){const e=[];return Object.values(t).forEach(n=>{e.push(...yf(n.accounts))}),e}function hce(t,e){const n=[];return Object.values(t).forEach(r=>{yf(r.accounts).includes(e)&&n.push(...r.methods)}),n}function pce(t,e){const n=[];return Object.values(t).forEach(r=>{yf(r.accounts).includes(e)&&n.push(...r.events)}),n}function gce(t){const e={};return t==null||t.forEach(n=>{var r;const[i,s]=n.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(n),(r=e[i].chains)==null||r.push(`${i}:${s}`)}),e}function TC(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=gce(e);for(const[r,i]of Object.entries(n))i.methods?i.methods=Pse(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return n}const mce={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},wce={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function je(t,e){const{message:n,code:r}=wce[t];return{message:e?`${n} ${e}`:n,code:r}}function fn(t,e){const{message:n,code:r}=mce[t];return{message:e?`${n} ${e}`:n,code:r}}function bf(t,e){return!!Array.isArray(t)}function Vm(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Yr(t){return typeof t>"u"}function dr(t,e){return e&&Yr(t)?!0:typeof t=="string"&&!!t.trim().length}function HS(t,e){return e&&Yr(t)?!0:typeof t=="number"&&!isNaN(t)}function yce(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),i=Object.keys(n);let s=!0;return Fl(i,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=yf(a),d=n[o];(!Fl($4(o,d),u)||!Fl(d.methods,c)||!Fl(d.events,l))&&(s=!1)}),s):!1}function Gm(t){return dr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function bce(t){if(dr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&Gm(n)}}return!1}function vce(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(dr(t,!1)){if(e(t))return!0;const n=F4(t);return e(n)}}catch{}return!1}function xce(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Ece(t){return t==null?void 0:t.topic}function Sce(t,e){let n=null;return dr(t==null?void 0:t.publicKey,!1)||(n=je("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function OC(t){let e=!0;return bf(t)?t.length&&(e=t.every(n=>dr(n,!1))):e=!1,e}function _ce(t,e,n){let r=null;return bf(e)&&e.length?e.forEach(i=>{r||Gm(i)||(r=fn("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Gm(t)||(r=fn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function kce(t,e,n){let r=null;return Object.entries(t).forEach(([i,s])=>{if(r)return;const o=_ce(i,$4(i,s),`${e} ${n}`);o&&(r=o)}),r}function Ace(t,e){let n=null;return bf(t)?t.forEach(r=>{n||bce(r)||(n=fn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=fn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Ice(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const i=Ace(r==null?void 0:r.accounts,`${e} namespace`);i&&(n=i)}),n}function Cce(t,e){let n=null;return OC(t==null?void 0:t.methods)?OC(t==null?void 0:t.events)||(n=fn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=fn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function vL(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const i=Cce(r,`${e}, namespace`);i&&(n=i)}),n}function Rce(t,e,n){let r=null;if(t&&Vm(t)){const i=vL(t,e);i&&(r=i);const s=kce(t,e,n);s&&(r=s)}else r=je("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function _1(t,e){let n=null;if(t&&Vm(t)){const r=vL(t,e);r&&(n=r);const i=Ice(t,e);i&&(n=i)}else n=je("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function xL(t){return dr(t.protocol,!0)}function Tce(t,e){let n=!1;return t?t&&bf(t)&&t.length&&t.forEach(r=>{n=xL(r)}):n=!0,n}function Oce(t){return typeof t=="number"}function Ki(t){return typeof t<"u"&&typeof t!==null}function Pce(t){return!(!t||typeof t!="object"||!t.code||!HS(t.code,!1)||!t.message||!dr(t.message,!1))}function Nce(t){return!(Yr(t)||!dr(t.method,!1))}function Lce(t){return!(Yr(t)||Yr(t.result)&&Yr(t.error)||!HS(t.id,!1)||!dr(t.jsonrpc,!1))}function Dce(t){return!(Yr(t)||!dr(t.name,!1))}function PC(t,e){return!(!Gm(e)||!fce(t).includes(e))}function $ce(t,e,n){return dr(n,!1)?hce(t,e).includes(n):!1}function Bce(t,e,n){return dr(n,!1)?pce(t,e).includes(n):!1}function NC(t,e,n){let r=null;const i=Mce(t),s=Uce(e),o=Object.keys(i),a=Object.keys(s),c=LC(Object.keys(t)),l=LC(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=je("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Fl(o,a)||(r=je("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const f=yf(e[d].accounts);f.includes(d)||(r=je("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${f.toString()}`))}),o.forEach(d=>{r||(Fl(i[d].methods,s[d].methods)?Fl(i[d].events,s[d].events)||(r=je("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=je("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function Mce(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(i=>{e[i]={methods:t[n].methods,events:t[n].events}})}),e}function LC(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Uce(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=yf(t[n].accounts);r==null||r.forEach(i=>{e[i]={accounts:t[n].accounts.filter(s=>s.includes(`${i}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function jce(t,e){return HS(t,!1)&&t<=e.max&&t>=e.min}function DC(){const t=Yp();return new Promise(e=>{switch(t){case Es.browser:e(Fce());break;case Es.reactNative:e(zce());break;case Es.node:e(Kce());break;default:e(!0)}})}function Fce(){return Gp()&&(navigator==null?void 0:navigator.onLine)}async function zce(){if(pl()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo){const t=await(globalThis==null?void 0:globalThis.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function Kce(){return!0}function Hce(t){switch(Yp()){case Es.browser:Wce(t);break;case Es.reactNative:qce(t);break}}function Wce(t){!pl()&&Gp()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function qce(t){pl()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo&&(globalThis==null||globalThis.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const k1={};class Vf{static get(e){return k1[e]}static set(e,n){k1[e]=n}static delete(e){delete k1[e]}}const Vce="PARSE_ERROR",Gce="INVALID_REQUEST",Yce="METHOD_NOT_FOUND",Jce="INVALID_PARAMS",EL="INTERNAL_ERROR",WS="SERVER_ERROR",Zce=[-32700,-32600,-32601,-32602,-32603],Ch={[Vce]:{code:-32700,message:"Parse error"},[Gce]:{code:-32600,message:"Invalid Request"},[Yce]:{code:-32601,message:"Method not found"},[Jce]:{code:-32602,message:"Invalid params"},[EL]:{code:-32603,message:"Internal error"},[WS]:{code:-32e3,message:"Server error"}},SL=WS;function Xce(t){return Zce.includes(t)}function $C(t){return Object.keys(Ch).includes(t)?Ch[t]:Ch[SL]}function Qce(t){const e=Object.values(Ch).find(n=>n.code===t);return e||Ch[SL]}function ele(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var _L={},Sa={},BC;function tle(){if(BC)return Sa;BC=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.isBrowserCryptoAvailable=Sa.getSubtleCrypto=Sa.getBrowerCrypto=void 0;function t(){return(globalThis==null?void 0:globalThis.crypto)||(globalThis==null?void 0:globalThis.msCrypto)||{}}Sa.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Sa.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Sa.isBrowserCryptoAvailable=n,Sa}var _a={},MC;function nle(){if(MC)return _a;MC=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.isBrowser=_a.isNode=_a.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}_a.isReactNative=t;function e(){return typeof Oi<"u"&&typeof Oi.versions<"u"&&typeof Oi.versions.node<"u"}_a.isNode=e;function n(){return!t()&&!e()}return _a.isBrowser=n,_a}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=zp;e.__exportStar(tle(),t),e.__exportStar(nle(),t)})(_L);function Ho(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function zl(t=6){return BigInt(Ho(t))}function Kl(t,e,n){return{id:n||Ho(),jsonrpc:"2.0",method:t,params:e}}function qS(t,e){return{id:t,jsonrpc:"2.0",result:e}}function VS(t,e,n){return{id:t,jsonrpc:"2.0",error:rle(e)}}function rle(t,e){return typeof t>"u"?$C(EL):(typeof t=="string"&&(t=Object.assign(Object.assign({},$C(WS)),{message:t})),Xce(t.code)&&(t=Qce(t.code)),t)}class ile{}class sle extends ile{constructor(){super()}}class ole extends sle{constructor(e){super()}}const ale="^wss?:";function cle(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function lle(t,e){const n=cle(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function UC(t){return lle(t,ale)}function ule(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function kL(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function GS(t){return kL(t)&&"method"in t}function my(t){return kL(t)&&(Wo(t)||Ms(t))}function Wo(t){return"result"in t}function Ms(t){return"error"in t}class dle extends ole{constructor(e){super(e),this.events=new xi.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Kl(e.method,e.params||[],e.id||zl().toString()),n)}async requestStrict(e,n){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Ms(s)?i(s.error):r(s.result)});try{await this.connection.send(e,n)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),my(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var A1,jC;function fle(){return jC||(jC=1,A1=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}),A1}const hle=()=>typeof WebSocket<"u"?WebSocket:typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"?globalThis.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:fle(),ple=()=>typeof WebSocket<"u"||typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",FC=t=>t.split("?")[0],zC=10,gle=hle();let mle=class{constructor(e){if(this.url=e,this.events=new xi.EventEmitter,this.registering=!1,!UC(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(lu(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!UC(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const i=_L.isReactNative()?void 0:{rejectUnauthorized:!ule(e)},s=new gle(e,[],i);ple()?s.onerror=o=>{const a=o;r(this.emitError(a.error))}:s.on("error",o=>{r(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),n(s)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Fd(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),i=r.message||r.toString(),s=VS(e,i);this.events.emit("payload",s)}parseError(e,n=this.url){return ele(e,FC(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>zC&&this.events.setMaxListeners(zC)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${FC(this.url)}`));return this.events.emit("register_error",n),n}};var wle={};const AL="wc",IL=2,X2="core",ca=`${AL}@2:${X2}:`,yle={logger:"error"},ble={database:":memory:"},vle="crypto",KC="client_ed25519_seed",xle=Me.ONE_DAY,Ele="keychain",Sle="0.3",_le="messages",kle="0.3",HC=Me.SIX_HOURS,Ale="publisher",CL="irn",Ile="error",RL="wss://relay.walletconnect.org",Cle="relayer",Or={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Rle="_subscription",Ps={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Tle=.1,Q2="2.19.2",On={link_mode:"link_mode",relay:"relay"},M0={inbound:"inbound",outbound:"outbound"},Ole="0.3",Ple="WALLETCONNECT_CLIENT_ID",WC="WALLETCONNECT_LINK_MODE_APPS",ds={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Nle="subscription",Lle="0.3",Dle="pairing",$le="0.3",Gf={wc_pairingDelete:{req:{ttl:Me.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Me.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Me.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Me.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Me.ONE_DAY,prompt:!1,tag:0},res:{ttl:Me.ONE_DAY,prompt:!1,tag:0}}},Dl={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},oo={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Ble="history",Mle="0.3",Ule="expirer",$s={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},jle="0.3",Fle="verify-api",zle="https://verify.walletconnect.com",TL="https://verify.walletconnect.org",Rh=TL,Kle=`${Rh}/v3`,Hle=[zle,TL],Wle="echo",qle="https://echo.walletconnect.com",Fo={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Aa={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ao={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},_l={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},kl={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Yf={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Vle=.1,Gle="event-client",Yle=86400,Jle="https://pulse.walletconnect.org/batch";function Zle(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var m=(b-y)*u+1>>>0,x=new Uint8Array(m);y!==b;){for(var E=p[y],A=0,k=m-1;(E!==0||A<w)&&k!==-1;k--,A++)E+=256*x[k]>>>0,x[k]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");w=A,y++}for(var S=m-w;S!==m&&x[S]===0;)S++;for(var C=c.repeat(g);S<m;++S)C+=t.charAt(x[S]);return C}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,m=new Uint8Array(b);p[g];){var x=n[p.charCodeAt(g)];if(x===255)return;for(var E=0,A=b-1;(x!==0||E<y)&&A!==-1;A--,E++)x+=a*m[A]>>>0,m[A]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");y=E,g++}if(p[g]!==" "){for(var k=b-y;k!==b&&m[k]===0;)k++;for(var S=new Uint8Array(w+(b-k)),C=w;k!==b;)S[C++]=m[k++];return S}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var Xle=Zle,Qle=Xle;const OL=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},eue=t=>new TextEncoder().encode(t),tue=t=>new TextDecoder().decode(t);class nue{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class rue{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return PL(this,e)}}class iue{constructor(e){this.decoders=e}or(e){return PL(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const PL=(t,e)=>new iue({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class sue{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new nue(e,n,r),this.decoder=new rue(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const wy=({name:t,prefix:e,encode:n,decode:r})=>new sue(t,e,n,r),tg=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=Qle(n,e);return wy({prefix:t,name:e,encode:r,decode:s=>OL(i(s))})},oue=(t,e,n,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},aue=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},ri=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>wy({prefix:e,name:t,encode(i){return aue(i,r,n)},decode(i){return oue(i,r,n,t)}}),cue=wy({prefix:"\0",name:"identity",encode:t=>tue(t),decode:t=>eue(t)});var lue=Object.freeze({__proto__:null,identity:cue});const uue=ri({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var due=Object.freeze({__proto__:null,base2:uue});const fue=ri({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var hue=Object.freeze({__proto__:null,base8:fue});const pue=tg({prefix:"9",name:"base10",alphabet:"0123456789"});var gue=Object.freeze({__proto__:null,base10:pue});const mue=ri({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),wue=ri({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var yue=Object.freeze({__proto__:null,base16:mue,base16upper:wue});const bue=ri({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vue=ri({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),xue=ri({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Eue=ri({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Sue=ri({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),_ue=ri({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),kue=ri({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Aue=ri({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Iue=ri({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Cue=Object.freeze({__proto__:null,base32:bue,base32upper:vue,base32pad:xue,base32padupper:Eue,base32hex:Sue,base32hexupper:_ue,base32hexpad:kue,base32hexpadupper:Aue,base32z:Iue});const Rue=tg({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Tue=tg({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Oue=Object.freeze({__proto__:null,base36:Rue,base36upper:Tue});const Pue=tg({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Nue=tg({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Lue=Object.freeze({__proto__:null,base58btc:Pue,base58flickr:Nue});const Due=ri({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$ue=ri({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Bue=ri({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Mue=ri({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Uue=Object.freeze({__proto__:null,base64:Due,base64pad:$ue,base64url:Bue,base64urlpad:Mue});const NL=Array.from(""),jue=NL.reduce((t,e,n)=>(t[n]=e,t),[]),Fue=NL.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function zue(t){return t.reduce((e,n)=>(e+=jue[n],e),"")}function Kue(t){const e=[];for(const n of t){const r=Fue[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Hue=wy({prefix:"",name:"base256emoji",encode:zue,decode:Kue});var Wue=Object.freeze({__proto__:null,base256emoji:Hue}),que=LL,qC=128,Vue=-128,Gue=Math.pow(2,31);function LL(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Gue;)e[n++]=t&255|qC,t/=128;for(;t&Vue;)e[n++]=t&255|qC,t>>>=7;return e[n]=t|0,LL.bytes=n-r+1,e}var Yue=ex,Jue=128,VC=127;function ex(t,r){var n=0,r=r||0,i=0,s=r,o,a=t.length;do{if(s>=a)throw ex.bytes=0,new RangeError("Could not decode varint");o=t[s++],n+=i<28?(o&VC)<<i:(o&VC)*Math.pow(2,i),i+=7}while(o>=Jue);return ex.bytes=s-r,n}var Zue=Math.pow(2,7),Xue=Math.pow(2,14),Que=Math.pow(2,21),ede=Math.pow(2,28),tde=Math.pow(2,35),nde=Math.pow(2,42),rde=Math.pow(2,49),ide=Math.pow(2,56),sde=Math.pow(2,63),ode=function(t){return t<Zue?1:t<Xue?2:t<Que?3:t<ede?4:t<tde?5:t<nde?6:t<rde?7:t<ide?8:t<sde?9:10},ade={encode:que,decode:Yue,encodingLength:ode},DL=ade;const GC=(t,e,n=0)=>(DL.encode(t,e,n),e),YC=t=>DL.encodingLength(t),tx=(t,e)=>{const n=e.byteLength,r=YC(t),i=r+YC(n),s=new Uint8Array(i+n);return GC(t,s,0),GC(n,s,r),s.set(e,i),new cde(t,n,e,s)};class cde{constructor(e,n,r,i){this.code=e,this.size=n,this.digest=r,this.bytes=i}}const $L=({name:t,code:e,encode:n})=>new lde(t,e,n);class lde{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?tx(this.code,n):n.then(r=>tx(this.code,r))}else throw Error("Unknown type, must be binary type")}}const BL=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),ude=$L({name:"sha2-256",code:18,encode:BL("SHA-256")}),dde=$L({name:"sha2-512",code:19,encode:BL("SHA-512")});var fde=Object.freeze({__proto__:null,sha256:ude,sha512:dde});const ML=0,hde="identity",UL=OL,pde=t=>tx(ML,UL(t)),gde={code:ML,name:hde,encode:UL,digest:pde};var mde=Object.freeze({__proto__:null,identity:gde});new TextEncoder,new TextDecoder;const JC={...lue,...due,...hue,...gue,...yue,...Cue,...Oue,...Lue,...Uue,...Wue};({...fde,...mde});function wde(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function jL(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const ZC=jL("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),I1=jL("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=wde(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),yde={utf8:ZC,"utf-8":ZC,hex:JC.base16,latin1:I1,ascii:I1,binary:I1,...JC};function bde(t,e="utf8"){const n=yde[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var vde=Object.defineProperty,xde=(t,e,n)=>e in t?vde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mo=(t,e,n)=>xde(t,typeof e!="symbol"?e+"":e,n);class Ede{constructor(e,n){this.core=e,this.logger=n,Mo(this,"keychain",new Map),Mo(this,"name",Ele),Mo(this,"version",Sle),Mo(this,"initialized",!1),Mo(this,"storagePrefix",ca),Mo(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Mo(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Mo(this,"set",async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()}),Mo(this,"get",r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:s}=je("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(s)}return i}),Mo(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Ui(n,this.name)}get context(){return ss(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,j2(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?F2(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Sde=Object.defineProperty,_de=(t,e,n)=>e in t?Sde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fr=(t,e,n)=>_de(t,typeof e!="symbol"?e+"":e,n);class kde{constructor(e,n,r){this.core=e,this.logger=n,Fr(this,"name",vle),Fr(this,"keychain"),Fr(this,"randomSessionIdentifier",Z2()),Fr(this,"initialized",!1),Fr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Fr(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Fr(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=OI(i);return h4(s.publicKey)}),Fr(this,"generateKeyPair",()=>{this.isInitialized();const i=Qae();return this.setPrivateKey(i.publicKey,i.privateKey)}),Fr(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=OI(s),a=this.randomSessionIdentifier;return await tre(a,i,xle,o)}),Fr(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=ece(a,s);return this.setSymKey(c,o)}),Fr(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||B0(i);return await this.keychain.set(o,i),o}),Fr(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Fr(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Fr(this,"encode",async(i,s,o)=>{this.isInitialized();const a=bL(o),c=lu(s);if(IC(a))return rce(c,o==null?void 0:o.encoding);if(AC(a)){const f=a.senderPublicKey,h=a.receiverPublicKey;i=await this.generateSharedKey(f,h)}const l=this.getSymKey(i),{type:u,senderPublicKey:d}=a;return tce({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Fr(this,"decode",async(i,s,o)=>{this.isInitialized();const a=sce(s,o);if(IC(a)){const c=ice(s,o==null?void 0:o.encoding);return Fd(c)}if(AC(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=nce({symKey:c,encoded:s,encoding:o==null?void 0:o.encoding});return Fd(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Fr(this,"getPayloadType",(i,s=bo)=>{const o=vp({encoded:i,encoding:s});return hu(o.type)}),Fr(this,"getPayloadSenderPublicKey",(i,s=bo)=>{const o=vp({encoded:i,encoding:s});return o.senderPublicKey?ts(o.senderPublicKey,Ni):void 0}),this.core=e,this.logger=Ui(n,this.name),this.keychain=r||new Ede(this.core,this.logger)}get context(){return ss(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(KC)}catch{e=Z2(),await this.keychain.set(KC,e)}return bde(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Ade=Object.defineProperty,Ide=Object.defineProperties,Cde=Object.getOwnPropertyDescriptors,XC=Object.getOwnPropertySymbols,Rde=Object.prototype.hasOwnProperty,Tde=Object.prototype.propertyIsEnumerable,nx=(t,e,n)=>e in t?Ade(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ode=(t,e)=>{for(var n in e||(e={}))Rde.call(e,n)&&nx(t,n,e[n]);if(XC)for(var n of XC(e))Tde.call(e,n)&&nx(t,n,e[n]);return t},Pde=(t,e)=>Ide(t,Cde(e)),us=(t,e,n)=>nx(t,typeof e!="symbol"?e+"":e,n);class Nde extends QQ{constructor(e,n){super(e,n),this.logger=e,this.core=n,us(this,"messages",new Map),us(this,"messagesWithoutClientAck",new Map),us(this,"name",_le),us(this,"version",kle),us(this,"initialized",!1),us(this,"storagePrefix",ca),us(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),us(this,"set",async(r,i,s)=>{this.isInitialized();const o=Vo(i);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(r,a),s===M0.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,Pde(Ode({},c),{[o]:i}))}return await this.persist(),o}),us(this,"get",r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i}),us(this,"getWithoutAck",r=>{this.isInitialized();const i={};for(const s of r){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),us(this,"has",(r,i)=>{this.isInitialized();const s=this.get(r),o=Vo(i);return typeof s[o]<"u"}),us(this,"ack",async(r,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(r);if(typeof s>"u")return;const o=Vo(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,s),await this.persist()}),us(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Ui(e,this.name),this.core=n}get context(){return ss(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,j2(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,j2(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?F2(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?F2(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Lde=Object.defineProperty,Dde=Object.defineProperties,$de=Object.getOwnPropertyDescriptors,QC=Object.getOwnPropertySymbols,Bde=Object.prototype.hasOwnProperty,Mde=Object.prototype.propertyIsEnumerable,rx=(t,e,n)=>e in t?Lde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,s0=(t,e)=>{for(var n in e||(e={}))Bde.call(e,n)&&rx(t,n,e[n]);if(QC)for(var n of QC(e))Mde.call(e,n)&&rx(t,n,e[n]);return t},C1=(t,e)=>Dde(t,$de(e)),co=(t,e,n)=>rx(t,typeof e!="symbol"?e+"":e,n);class Ude extends eee{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,co(this,"events",new xi.EventEmitter),co(this,"name",Ale),co(this,"queue",new Map),co(this,"publishTimeout",Me.toMiliseconds(Me.ONE_MINUTE)),co(this,"initialPublishTimeout",Me.toMiliseconds(Me.ONE_SECOND*15)),co(this,"needsTransportRestart",!1),co(this,"publish",async(r,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:s}});const a=(s==null?void 0:s.ttl)||HC,c=qm(s),l=(s==null?void 0:s.prompt)||!1,u=(s==null?void 0:s.tag)||0,d=(s==null?void 0:s.id)||zl().toString(),f={topic:r,message:i,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}},h=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{f.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(Or.publish,w),g(f))};this.relayer.events.on(Or.publish,w);const y=$c(new Promise((b,m)=>{this.rpcPublish({topic:r,message:i,ttl:a,prompt:l,tag:u,id:d,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}).then(b).catch(x=>{this.logger.warn(x,x==null?void 0:x.message),m(x)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(Or.publish,w)}catch(b){this.queue.set(d,C1(s0({},f),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:i,opts:s}}),await $c(p,this.publishTimeout,h)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),co(this,"on",(r,i)=>{this.events.on(r,i)}),co(this,"once",(r,i)=>{this.events.once(r,i)}),co(this,"off",(r,i)=>{this.events.off(r,i)}),co(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.relayer=e,this.logger=Ui(n,this.name),this.registerEventListeners()}get context(){return ss(this.logger)}async rpcPublish(e){var n,r,i,s;const{topic:o,message:a,ttl:c=HC,prompt:l,tag:u,id:d,attestation:f,tvf:h}=e,p={method:ah(qm().protocol).publish,params:s0({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:f},h),id:d};Yr((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Yr((i=p.params)==null?void 0:i.tag)&&((s=p.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(Or.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,C1(s0({},e),{attempt:r}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(C1(s0({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(df.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Or.connection_stalled);return}this.checkQueue()}),this.relayer.on(Or.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var jde=Object.defineProperty,Fde=(t,e,n)=>e in t?jde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zu=(t,e,n)=>Fde(t,typeof e!="symbol"?e+"":e,n);class zde{constructor(){zu(this,"map",new Map),zu(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),zu(this,"get",e=>this.map.get(e)||[]),zu(this,"exists",(e,n)=>this.get(e).includes(n)),zu(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const i=r.filter(s=>s!==n);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),zu(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Kde=Object.defineProperty,Hde=Object.defineProperties,Wde=Object.getOwnPropertyDescriptors,e5=Object.getOwnPropertySymbols,qde=Object.prototype.hasOwnProperty,Vde=Object.prototype.propertyIsEnumerable,ix=(t,e,n)=>e in t?Kde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jf=(t,e)=>{for(var n in e||(e={}))qde.call(e,n)&&ix(t,n,e[n]);if(e5)for(var n of e5(e))Vde.call(e,n)&&ix(t,n,e[n]);return t},R1=(t,e)=>Hde(t,Wde(e)),yn=(t,e,n)=>ix(t,typeof e!="symbol"?e+"":e,n);class Gde extends ree{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,yn(this,"subscriptions",new Map),yn(this,"topicMap",new zde),yn(this,"events",new xi.EventEmitter),yn(this,"name",Nle),yn(this,"version",Lle),yn(this,"pending",new Map),yn(this,"cached",[]),yn(this,"initialized",!1),yn(this,"storagePrefix",ca),yn(this,"subscribeTimeout",Me.toMiliseconds(Me.ONE_MINUTE)),yn(this,"initialSubscribeTimeout",Me.toMiliseconds(Me.ONE_SECOND*15)),yn(this,"clientId"),yn(this,"batchSubscribeTopicsLimit",500),yn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),yn(this,"subscribe",async(r,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const s=qm(i),o={topic:r,relay:s,transportType:i==null?void 0:i.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),yn(this,"unsubscribe",async(r,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)}),yn(this,"isSubscribed",r=>new Promise(i=>{i(this.topicMap.topics.includes(r))})),yn(this,"isKnownTopic",r=>new Promise(i=>{i(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(s=>s.topic===r))})),yn(this,"on",(r,i)=>{this.events.on(r,i)}),yn(this,"once",(r,i)=>{this.events.once(r,i)}),yn(this,"off",(r,i)=>{this.events.off(r,i)}),yn(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),yn(this,"start",async()=>{await this.onConnect()}),yn(this,"stop",async()=>{await this.onDisconnect()}),yn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),yn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}),yn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(df.pulse,async()=>{await this.checkPending()}),this.events.on(ds.created,async r=>{const i=ds.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(ds.deleted,async r=>{const i=ds.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}),this.relayer=e,this.logger=Ui(n,this.name),this.clientId=""}get context(){return ss(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async i=>await this.unsubscribeById(e,i,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const i=qm(r);await this.restartToComplete({topic:e,id:n,relay:i}),await this.rpcUnsubscribe(e,n,i);const s=fn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,n,r){var i;(!r||(r==null?void 0:r.transportType)===On.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const s={method:ah(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===On.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},Me.toMiliseconds(Me.ONE_SECOND)),a;const c=new Promise(async u=>{const d=f=>{f.topic===e&&(this.events.removeListener(ds.created,d),u(f.id))};this.events.on(ds.created,d);try{const f=await $c(new Promise((h,p)=>{this.relayer.request(s).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(h)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(ds.created,d),u(f)}catch{}}),l=await $c(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Or.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:ah(n.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await $c(new Promise(i=>{this.relayer.request(r).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Or.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:ah(n.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let i;try{i=await await $c(new Promise((s,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Or.connection_stalled)}return i}rpcUnsubscribe(e,n,r){const i={method:ah(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,n){this.setSubscription(e,R1(Jf({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Jf({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Jf({},n)),this.topicMap.set(n.topic,e),this.events.emit(ds.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=je("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(ds.deleted,R1(Jf({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ds.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(ds.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=je("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>R1(Jf({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await jse(Me.toMiliseconds(Me.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Vo(e+await this.getClientId())}}var Yde=Object.defineProperty,t5=Object.getOwnPropertySymbols,Jde=Object.prototype.hasOwnProperty,Zde=Object.prototype.propertyIsEnumerable,sx=(t,e,n)=>e in t?Yde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,n5=(t,e)=>{for(var n in e||(e={}))Jde.call(e,n)&&sx(t,n,e[n]);if(t5)for(var n of t5(e))Zde.call(e,n)&&sx(t,n,e[n]);return t},nn=(t,e,n)=>sx(t,typeof e!="symbol"?e+"":e,n);class Xde extends tee{constructor(e){super(e),nn(this,"protocol","wc"),nn(this,"version",2),nn(this,"core"),nn(this,"logger"),nn(this,"events",new xi.EventEmitter),nn(this,"provider"),nn(this,"messages"),nn(this,"subscriber"),nn(this,"publisher"),nn(this,"name",Cle),nn(this,"transportExplicitlyClosed",!1),nn(this,"initialized",!1),nn(this,"connectionAttemptInProgress",!1),nn(this,"relayUrl"),nn(this,"projectId"),nn(this,"packageName"),nn(this,"bundleId"),nn(this,"hasExperiencedNetworkDisruption",!1),nn(this,"pingTimeout"),nn(this,"heartBeatTimeout",Me.toMiliseconds(Me.THIRTY_SECONDS+Me.FIVE_SECONDS)),nn(this,"reconnectTimeout"),nn(this,"connectPromise"),nn(this,"reconnectInProgress",!1),nn(this,"requestsInFlight",[]),nn(this,"connectTimeout",Me.toMiliseconds(Me.ONE_SECOND*15)),nn(this,"request",async n=>{var r,i;this.logger.debug("Publishing Request Payload");const s=n.id||zl().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${s}:${((i=n.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),nn(this,"resetPingTimeout",()=>{Hm()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),nn(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),nn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Or.connect)}),nn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),nn(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Or.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),nn(this,"registerProviderListeners",()=>{this.provider.on(Ps.payload,this.onPayloadHandler),this.provider.on(Ps.connect,this.onConnectHandler),this.provider.on(Ps.disconnect,this.onDisconnectHandler),this.provider.on(Ps.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ui(e.logger,this.name):sy(AS({level:e.logger||Ile})),this.messages=new Nde(this.logger,e.core),this.subscriber=new Gde(this,this.logger),this.publisher=new Ude(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||RL,this.projectId=e.projectId,Sse()?this.packageName=JI():_se()&&(this.bundleId=JI()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return ss(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:On.relay},M0.outbound)}async subscribe(e,n){var r,i,s;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(ds.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(ds.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,n5({internal:{throwOnFailedPublish:o}},n)).catch(f=>{o&&d(f)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await $c(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await DC())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,i)=>r.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const i=gr(Me.FIVE_MINUTES),s={topic:r,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,s)}this.events.emit(Or.message,e),await this.recordMessageEvent(e,M0.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ps.disconnect,s),await $c(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(Ps.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ps.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Ps.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const i=r;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Me.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,i,s;if(Hm())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new dle(new mle(Rse({sdkVersion:Q2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:i}=e;await this.messages.set(r,i,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const i=this.messages.has(n,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),GS(e)){if(!e.method.endsWith(Rle))return;const n=e.params,{topic:r,message:i,publishedAt:s,attestation:o}=n.data,a={topic:r,message:i,publishedAt:s,transportType:On.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(n5({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else my(e)&&this.events.emit(Or.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,M0.inbound),this.events.emit(Or.message,e))}async acknowledgePayload(e){const n=qS(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ps.payload,this.onPayloadHandler),this.provider.off(Ps.connect,this.onConnectHandler),this.provider.off(Ps.disconnect,this.onDisconnectHandler),this.provider.off(Ps.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await DC();Hce(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Or.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Me.toMiliseconds(Tle)))))}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function Qde(){}function r5(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function i5(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function s5(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const efe="[object RegExp]",tfe="[object String]",nfe="[object Number]",rfe="[object Boolean]",o5="[object Arguments]",ife="[object Symbol]",sfe="[object Date]",ofe="[object Map]",afe="[object Set]",cfe="[object Array]",lfe="[object Function]",ufe="[object ArrayBuffer]",T1="[object Object]",dfe="[object Error]",ffe="[object DataView]",hfe="[object Uint8Array]",pfe="[object Uint8ClampedArray]",gfe="[object Uint16Array]",mfe="[object Uint32Array]",wfe="[object BigUint64Array]",yfe="[object Int8Array]",bfe="[object Int16Array]",vfe="[object Int32Array]",xfe="[object BigInt64Array]",Efe="[object Float32Array]",Sfe="[object Float64Array]";function _fe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function kfe(t,e,n){return ch(t,e,void 0,void 0,void 0,void 0,n)}function ch(t,e,n,r,i,s,o){const a=o(t,e,n,r,i,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Th(t,e,s,o)}return Th(t,e,s,o)}function Th(t,e,n,r){if(Object.is(t,e))return!0;let i=s5(t),s=s5(e);if(i===o5&&(i=T1),s===o5&&(s=T1),i!==s)return!1;switch(i){case tfe:return t.toString()===e.toString();case nfe:{const c=t.valueOf(),l=e.valueOf();return _fe(c,l)}case rfe:case sfe:case ife:return Object.is(t.valueOf(),e.valueOf());case efe:return t.source===e.source&&t.flags===e.flags;case lfe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(i){case ofe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!ch(l,e.get(c),c,t,e,n,r))return!1;return!0}case afe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],f=l.findIndex(h=>ch(d,h,void 0,t,e,n,r));if(f===-1)return!1;l.splice(f,1)}return!0}case cfe:case hfe:case pfe:case gfe:case mfe:case wfe:case yfe:case bfe:case vfe:case xfe:case Efe:case Sfe:{if(typeof Ne<"u"&&Ne.isBuffer(t)!==Ne.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!ch(t[c],e[c],c,t,e,n,r))return!1;return!0}case ufe:return t.byteLength!==e.byteLength?!1:Th(new Uint8Array(t),new Uint8Array(e),n,r);case ffe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Th(new Uint8Array(t),new Uint8Array(e),n,r);case dfe:return t.name===e.name&&t.message===e.message;case T1:{if(!(Th(t.constructor,e.constructor,n,r)||r5(t)&&r5(e)))return!1;const c=[...Object.keys(t),...i5(t)],l=[...Object.keys(e),...i5(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],f=t[d];if(!Object.hasOwn(e,d))return!1;const h=e[d];if(!ch(f,h,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function Afe(t,e){return kfe(t,e,Qde)}var Ife=Object.defineProperty,a5=Object.getOwnPropertySymbols,Cfe=Object.prototype.hasOwnProperty,Rfe=Object.prototype.propertyIsEnumerable,ox=(t,e,n)=>e in t?Ife(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,c5=(t,e)=>{for(var n in e||(e={}))Cfe.call(e,n)&&ox(t,n,e[n]);if(a5)for(var n of a5(e))Rfe.call(e,n)&&ox(t,n,e[n]);return t},Fi=(t,e,n)=>ox(t,typeof e!="symbol"?e+"":e,n);class Cu extends nee{constructor(e,n,r,i=ca,s=void 0){super(e,n,r,i),this.core=e,this.logger=n,this.name=r,Fi(this,"map",new Map),Fi(this,"version",Ole),Fi(this,"cached",[]),Fi(this,"initialized",!1),Fi(this,"getKey"),Fi(this,"storagePrefix",ca),Fi(this,"recentlyDeleted",[]),Fi(this,"recentlyDeletedLimit",200),Fi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Yr(o)?this.map.set(this.getKey(o),o):xce(o)?this.map.set(o.id,o):Ece(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Fi(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Fi(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Fi(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Afe(a[c],o[c]))):this.values)),Fi(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=c5(c5({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Fi(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Ui(n,this.name),this.storagePrefix=i,this.getKey=s}get context(){return ss(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:i}=je("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:r}=je("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=je("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Tfe=Object.defineProperty,Ofe=(t,e,n)=>e in t?Tfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gt=(t,e,n)=>Ofe(t,typeof e!="symbol"?e+"":e,n);class Pfe{constructor(e,n){this.core=e,this.logger=n,Gt(this,"name",Dle),Gt(this,"version",$le),Gt(this,"events",new D5),Gt(this,"pairings"),Gt(this,"initialized",!1),Gt(this,"storagePrefix",ca),Gt(this,"ignoredPayloadTypes",[Wa]),Gt(this,"registeredMethods",[]),Gt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Gt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Gt(this,"create",async r=>{this.isInitialized();const i=Z2(),s=await this.core.crypto.setSymKey(i),o=gr(Me.FIVE_MINUTES),a={protocol:CL},c={topic:s,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=RC({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(Dl.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:r==null?void 0:r.transportType}),{topic:s,uri:l}}),Gt(this,"pair",async r=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Fo.pairing_started]}});this.isValidPair(r,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=CC(r.uri);i.props.properties.topic=s,i.addTrace(Fo.pairing_uri_validation_success),i.addTrace(Fo.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(Fo.existing_pairing),u.active)throw i.setError(Aa.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(Fo.pairing_not_expired)}const d=c||gr(Me.FIVE_MINUTES),f={topic:s,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(s,d),await this.pairings.set(s,f),i.addTrace(Fo.store_new_pairing),r.activatePairing&&await this.activate({topic:s}),this.events.emit(Dl.create,f),i.addTrace(Fo.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(Fo.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(Aa.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(h){throw i.setError(Aa.subscribe_pairing_topic_failure),h}return i.addTrace(Fo.subscribe_pairing_topic_success),f}),Gt(this,"activate",async({topic:r})=>{this.isInitialized();const i=gr(Me.FIVE_MINUTES);this.core.expirer.set(r,i),await this.pairings.update(r,{active:!0,expiry:i})}),Gt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=r;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Rl();this.events.once(cn("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),Gt(this,"updateExpiry",async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})}),Gt(this,"updateMetadata",async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})}),Gt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Gt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",fn("USER_DISCONNECTED")),await this.deletePairing(i))}),Gt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(i);return RC({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),Gt(this,"sendRequest",async(r,i,s)=>{const o=Kl(i,s),a=await this.core.crypto.encode(r,o),c=Gf[i].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Gt(this,"sendResult",async(r,i,s)=>{const o=qS(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,l=Gf[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),Gt(this,"sendError",async(r,i,s)=>{const o=VS(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,l=Gf[c]?Gf[c].res:Gf.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),Gt(this,"deletePairing",async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,fn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])}),Gt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(i=>Sc(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))}),Gt(this,"onRelayEventRequest",async r=>{const{topic:i,payload:s}=r;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),Gt(this,"onRelayEventResponse",async r=>{const{topic:i,payload:s}=r,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),Gt(this,"onPairingPingRequest",async(r,i)=>{const{id:s}=i;try{this.isValidPing({topic:r}),await this.sendResult(s,r,!0),this.events.emit(Dl.ping,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),Gt(this,"onPairingPingResponse",(r,i)=>{const{id:s}=i;setTimeout(()=>{Wo(i)?this.events.emit(cn("pairing_ping",s),{}):Ms(i)&&this.events.emit(cn("pairing_ping",s),{error:i.error})},500)}),Gt(this,"onPairingDeleteRequest",async(r,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Dl.delete,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),Gt(this,"onUnknownRpcMethodRequest",async(r,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=fn("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,r,a),this.logger.error(a)}catch(a){await this.sendError(s,r,a),this.logger.error(a)}}),Gt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(fn("WC_METHOD_UNSUPPORTED",r))}),Gt(this,"isValidPair",(r,i)=>{var s;if(!Ki(r)){const{message:a}=je("MISSING_OR_INVALID",`pair() params: ${r}`);throw i.setError(Aa.malformed_pairing_uri),new Error(a)}if(!vce(r.uri)){const{message:a}=je("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw i.setError(Aa.malformed_pairing_uri),new Error(a)}const o=CC(r==null?void 0:r.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=je("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(Aa.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=je("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(Aa.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Me.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(Aa.pairing_expired);const{message:a}=je("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Gt(this,"isValidPing",async r=>{if(!Ki(r)){const{message:s}=je("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),Gt(this,"isValidDisconnect",async r=>{if(!Ki(r)){const{message:s}=je("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),Gt(this,"isValidPairingTopic",async r=>{if(!dr(r,!1)){const{message:i}=je("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=je("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(Sc(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=je("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}}),this.core=e,this.logger=Ui(n,this.name),this.pairings=new Cu(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ss(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Or.message,async e=>{const{topic:n,message:r,transportType:i}=e;if(this.pairings.keys.includes(n)&&i!==On.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const s=await this.core.crypto.decode(n,r);GS(s)?(this.core.history.set(n,s),await this.onRelayEventRequest({topic:n,payload:s})):my(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:n,payload:s}),this.core.history.delete(n,s.id)),await this.core.relayer.messages.ack(n,r)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on($s.expired,async e=>{const{topic:n}=j4(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Dl.expire,{topic:n}))})}}var Nfe=Object.defineProperty,Lfe=(t,e,n)=>e in t?Nfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zr=(t,e,n)=>Lfe(t,typeof e!="symbol"?e+"":e,n);class Dfe extends XQ{constructor(e,n){super(e,n),this.core=e,this.logger=n,zr(this,"records",new Map),zr(this,"events",new xi.EventEmitter),zr(this,"name",Ble),zr(this,"version",Mle),zr(this,"cached",[]),zr(this,"initialized",!1),zr(this,"storagePrefix",ca),zr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),zr(this,"set",(r,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:s,expiry:gr(Me.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(oo.created,o)}),zr(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=Ms(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.persist(),this.events.emit(oo.updated,i))}),zr(this,"get",async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i))),zr(this,"delete",(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===r){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(oo.deleted,s)}}),this.persist()}),zr(this,"exists",async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1)),zr(this,"on",(r,i)=>{this.events.on(r,i)}),zr(this,"once",(r,i)=>{this.events.once(r,i)}),zr(this,"off",(r,i)=>{this.events.off(r,i)}),zr(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=Ui(n,this.name)}get context(){return ss(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Kl(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=je("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(oo.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=je("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(oo.created,e=>{const n=oo.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(oo.updated,e=>{const n=oo.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(oo.deleted,e=>{const n=oo.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(df.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{Me.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(oo.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}}var $fe=Object.defineProperty,Bfe=(t,e,n)=>e in t?$fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mi=(t,e,n)=>Bfe(t,typeof e!="symbol"?e+"":e,n);class Mfe extends iee{constructor(e,n){super(e,n),this.core=e,this.logger=n,mi(this,"expirations",new Map),mi(this,"events",new xi.EventEmitter),mi(this,"name",Ule),mi(this,"version",jle),mi(this,"cached",[]),mi(this,"initialized",!1),mi(this,"storagePrefix",ca),mi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),mi(this,"has",r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}}),mi(this,"set",(r,i)=>{this.isInitialized();const s=this.formatTarget(r),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit($s.created,{target:s,expiration:o})}),mi(this,"get",r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)}),mi(this,"del",r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit($s.deleted,{target:i,expiration:s})}}),mi(this,"on",(r,i)=>{this.events.on(r,i)}),mi(this,"once",(r,i)=>{this.events.once(r,i)}),mi(this,"off",(r,i)=>{this.events.off(r,i)}),mi(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=Ui(n,this.name)}get context(){return ss(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Tse(e);if(typeof e=="number")return Ose(e);const{message:n}=je("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit($s.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=je("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=je("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;Me.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit($s.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(df.pulse,()=>this.checkExpirations()),this.events.on($s.created,e=>{const n=$s.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on($s.expired,e=>{const n=$s.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on($s.deleted,e=>{const n=$s.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Ufe=Object.defineProperty,jfe=(t,e,n)=>e in t?Ufe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ar=(t,e,n)=>jfe(t,typeof e!="symbol"?e+"":e,n);class Ffe extends see{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,ar(this,"name",Fle),ar(this,"abortController"),ar(this,"isDevEnv"),ar(this,"verifyUrlV3",Kle),ar(this,"storagePrefix",ca),ar(this,"version",IL),ar(this,"publicKey"),ar(this,"fetchPromise"),ar(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Me.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ar(this,"register",async i=>{if(!Gp()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=qp(),u=this.startAbortTimer(Me.ONE_SECOND*5),d=await new Promise((f,h)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),h("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(B2(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),f(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),ar(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(B2(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,c)}),ar(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(Me.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),ar(this,"getVerifyUrl",i=>{let s=i||Rh;return Hle.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Rh}`),s=Rh),s}),ar(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(Me.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),ar(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),ar(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ar(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ar(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ar(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),ar(this,"validateAttestation",(i,s)=>{const o=ace(i,s.publicKey),a={hasExpired:Me.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Ui(n,this.name),this.abortController=new AbortController,this.isDevEnv=BS(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return ss(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Me.toMiliseconds(e))}}var zfe=Object.defineProperty,Kfe=(t,e,n)=>e in t?zfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,l5=(t,e,n)=>Kfe(t,typeof e!="symbol"?e+"":e,n);class Hfe extends oee{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,l5(this,"context",Wle),l5(this,"registerDeviceToken",async r=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=r,c=`${qle}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=Ui(n,this.context)}}var Wfe=Object.defineProperty,u5=Object.getOwnPropertySymbols,qfe=Object.prototype.hasOwnProperty,Vfe=Object.prototype.propertyIsEnumerable,ax=(t,e,n)=>e in t?Wfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zf=(t,e)=>{for(var n in e||(e={}))qfe.call(e,n)&&ax(t,n,e[n]);if(u5)for(var n of u5(e))Vfe.call(e,n)&&ax(t,n,e[n]);return t},Sr=(t,e,n)=>ax(t,typeof e!="symbol"?e+"":e,n);class Gfe extends aee{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Sr(this,"context",Gle),Sr(this,"storagePrefix",ca),Sr(this,"storageVersion",Vle),Sr(this,"events",new Map),Sr(this,"shouldPersist",!1),Sr(this,"init",async()=>{if(!BS())try{const i={eventId:XI(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:M4(this.core.relayer.protocol,this.core.relayer.version,Q2)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),Sr(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=XI(),u=this.core.projectId||"",d=Date.now(),f=Zf({eventId:l,timestamp:d,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,f),this.shouldPersist=!0),f}),Sr(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Zf(Zf({},a),this.setMethods(a.eventId))}),Sr(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),Sr(this,"setEventListeners",()=>{this.core.heartbeat.on(df.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{Me.fromMiliseconds(Date.now())-Me.fromMiliseconds(i.timestamp)>Yle&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),Sr(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),Sr(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),Sr(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),Sr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Sr(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,Zf(Zf({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),Sr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),Sr(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Jle}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Q2}${s}`,{method:"POST",body:JSON.stringify(i)})}),Sr(this,"getAppDomain",()=>B4().url),this.logger=Ui(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Yfe=Object.defineProperty,d5=Object.getOwnPropertySymbols,Jfe=Object.prototype.hasOwnProperty,Zfe=Object.prototype.propertyIsEnumerable,cx=(t,e,n)=>e in t?Yfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,f5=(t,e)=>{for(var n in e||(e={}))Jfe.call(e,n)&&cx(t,n,e[n]);if(d5)for(var n of d5(e))Zfe.call(e,n)&&cx(t,n,e[n]);return t},En=(t,e,n)=>cx(t,typeof e!="symbol"?e+"":e,n);class YS extends GQ{constructor(e){var n;super(e),En(this,"protocol",AL),En(this,"version",IL),En(this,"name",X2),En(this,"relayUrl"),En(this,"projectId"),En(this,"customStoragePrefix"),En(this,"events",new xi.EventEmitter),En(this,"logger"),En(this,"heartbeat"),En(this,"relayer"),En(this,"crypto"),En(this,"storage"),En(this,"history"),En(this,"expirer"),En(this,"pairing"),En(this,"verify"),En(this,"echoClient"),En(this,"linkModeSupportedApps"),En(this,"eventClient"),En(this,"initialized",!1),En(this,"logChunkController"),En(this,"on",(a,c)=>this.events.on(a,c)),En(this,"once",(a,c)=>this.events.once(a,c)),En(this,"off",(a,c)=>this.events.off(a,c)),En(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),En(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:On.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||RL,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=AS({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:yle.logger,name:X2}),{logger:s,chunkLoggerController:o}=WQ({opts:i,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Ui(s,this.name),this.heartbeat=new DX,this.crypto=new kde(this,this.logger,e==null?void 0:e.keychain),this.history=new Dfe(this,this.logger),this.expirer=new Mfe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new wQ(f5(f5({},ble),e==null?void 0:e.storageOptions)),this.relayer=new Xde({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Pfe(this,this.logger),this.verify=new Ffe(this,this.logger,this.storage),this.echoClient=new Hfe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Gfe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new YS(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(Ple,r),n}get context(){return ss(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(WC,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(WC)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof Oi<"u"&&wle.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}}const Xfe=YS,FL="wc",zL=2,KL="client",JS=`${FL}@${zL}:${KL}:`,O1={name:KL,logger:"error"},h5="WALLETCONNECT_DEEPLINK_CHOICE",Qfe="proposal",p5="Proposal expired",ehe="session",Ku=Me.SEVEN_DAYS,the="engine",_r={wc_sessionPropose:{req:{ttl:Me.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Me.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Me.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Me.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Me.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Me.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Me.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Me.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Me.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Me.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Me.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Me.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Me.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Me.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Me.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Me.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Me.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Me.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Me.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Me.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Me.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Me.FIVE_MINUTES,prompt:!1,tag:1119}}},P1={min:Me.FIVE_MINUTES,max:Me.SEVEN_DAYS},Uo={idle:"IDLE",active:"ACTIVE"},g5={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},nhe="request",rhe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],ihe="wc",she="auth",ohe="authKeys",ahe="pairingTopics",che="requests",yy=`${ihe}@${1.5}:${she}:`,U0=`${yy}:PUB_KEY`;var lhe=Object.defineProperty,uhe=Object.defineProperties,dhe=Object.getOwnPropertyDescriptors,m5=Object.getOwnPropertySymbols,fhe=Object.prototype.hasOwnProperty,hhe=Object.prototype.propertyIsEnumerable,lx=(t,e,n)=>e in t?lhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bn=(t,e)=>{for(var n in e||(e={}))fhe.call(e,n)&&lx(t,n,e[n]);if(m5)for(var n of m5(e))hhe.call(e,n)&&lx(t,n,e[n]);return t},Ai=(t,e)=>uhe(t,dhe(e)),Ce=(t,e,n)=>lx(t,typeof e!="symbol"?e+"":e,n);class phe extends dee{constructor(e){super(e),Ce(this,"name",the),Ce(this,"events",new D5),Ce(this,"initialized",!1),Ce(this,"requestQueue",{state:Uo.idle,queue:[]}),Ce(this,"sessionRequestQueue",{state:Uo.idle,queue:[]}),Ce(this,"requestQueueDelay",Me.ONE_SECOND),Ce(this,"expectedPairingMethodMap",new Map),Ce(this,"recentlyDeletedMap",new Map),Ce(this,"recentlyDeletedLimit",200),Ce(this,"relayMessageCache",[]),Ce(this,"pendingSessions",new Map),Ce(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(_r)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Me.toMiliseconds(this.requestQueueDelay)))}),Ce(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Ai(bn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=i,d,f=!1;try{if(u){const A=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),f=A.active}}catch(A){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),A}if(!u||!f){const{topic:A,uri:k}=await this.client.core.pairing.create();u=A,d=k}if(!u){const{message:A}=je("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(A)}const h=await this.client.core.crypto.generateKeyPair(),p=_r.wc_sessionPropose.req.ttl||Me.FIVE_MINUTES,g=gr(p),w=Ai(bn(bn({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:CL}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Ho()}),y=cn("session_connect",w.id),{reject:b,resolve:m,done:x}=Rl(p,p5),E=({id:A})=>{A===w.id&&(this.client.events.off("proposal_expire",E),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:p5,code:0}}))};return this.client.events.on("proposal_expire",E),this.events.once(y,({error:A,session:k})=>{this.client.events.off("proposal_expire",E),A?b(A):k&&m(k)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:x}}),Ce(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),Ce(this,"approve",async n=>{var r,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[ao.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(C){throw o.setError(_l.no_internet_connection),C}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(C){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(_l.proposal_not_found),C}try{await this.isValidApprove(n)}catch(C){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(_l.session_approve_namespace_validation_failure),C}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:f}=n,h=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:y}=h;let b=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:p});b||(b=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:ao.session_approve_started,properties:{topic:p,trace:[ao.session_approve_started,ao.session_namespaces_validation_success]}}));const m=await this.client.core.crypto.generateKeyPair(),x=g.publicKey,E=await this.client.core.crypto.generateSharedKey(m,x),A=bn(bn(bn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:m,metadata:this.client.metadata},expiry:gr(Ku)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),k=On.relay;b.addTrace(ao.subscribing_session_topic);try{await this.client.core.relayer.subscribe(E,{transportType:k})}catch(C){throw b.setError(_l.subscribe_session_topic_failure),C}b.addTrace(ao.subscribe_session_topic_success);const S=Ai(bn({},A),{topic:E,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:A.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:m,transportType:On.relay});await this.client.session.set(E,S),b.addTrace(ao.store_session);try{b.addTrace(ao.publishing_session_settle),await this.sendRequest({topic:E,method:"wc_sessionSettle",params:A,throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(_l.session_settle_publish_failure),C}),b.addTrace(ao.session_settle_publish_success),b.addTrace(ao.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:m},throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(_l.session_approve_publish_failure),C}),b.addTrace(ao.session_approve_publish_success)}catch(C){throw this.client.logger.error(C),this.client.session.delete(E,fn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(E),C}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,fn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(E,gr(Ku)),{topic:E,acknowledged:()=>Promise.resolve(this.client.session.get(E))}}),Ce(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:i}=n;let s;try{s=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}s&&(await this.sendError({id:r,topic:s,error:i,rpcOpts:_r.wc_sessionPropose.reject}),await this.client.proposal.delete(r,fn("USER_DISCONNECTED")))}),Ce(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:i}=n,{done:s,resolve:o,reject:a}=Rl(),c=Ho(),l=zl().toString(),u=this.client.session.get(r).namespaces;return this.events.once(cn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:s}}),Ce(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,i=Ho(),{done:s,resolve:o,reject:a}=Rl();return this.events.once(cn("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,gr(Ku)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),Ce(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:i,topic:s,expiry:o=_r.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(s);(a==null?void 0:a.transportType)===On.relay&&await this.confirmOnlineStateOrThrow();const c=Ho(),l=zl().toString(),{done:u,resolve:d,reject:f}=Rl(o,"Request expired. Please try again.");this.events.once(cn("session_request",c),({error:y,result:b})=>{y?f(y):d(b)});const h="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:h,params:{request:Ai(bn({},i),{expiryTimestamp:gr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>f(y)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),await u();const g={request:Ai(bn({},i),{expiryTimestamp:gr(o)}),chainId:r},w=this.shouldSetTVF(h,g);return await Promise.all([new Promise(async y=>{await this.sendRequest(bn({clientRpcId:c,relayRpcId:l,topic:s,method:h,params:g,expiry:o,throwOnFailedPublish:!0},w&&{tvf:this.getTVFParams(c,g)})).catch(b=>f(b)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),y()}),new Promise(async y=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const m=await $se(this.client.core.storage,h5);await Nse({id:c,topic:s,wcDeepLink:m})}y()}),u()]).then(y=>y[2])}),Ce(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:i}=n,{id:s}=i,o=this.client.session.get(r);o.transportType===On.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Wo(i)?await this.sendResult({id:s,topic:r,result:i.result,throwOnFailedPublish:!0,appLink:a}):Ms(i)&&await this.sendError({id:s,topic:r,error:i.error,appLink:a}),this.cleanupAfterResponse(n)}),Ce(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:r}=n;if(this.client.session.keys.includes(r)){const i=Ho(),s=zl().toString(),{done:o,resolve:a,reject:c}=Rl();this.events.once(cn("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),Ce(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:i,chainId:s}=n,o=zl().toString(),a=Ho();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),Ce(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:fn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:i}=je("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(i)}}),Ce(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>yce(r,n)))),Ce(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Ce(this,"authenticate",async(n,r)=>{var i;this.isInitialized(),this.isValidAuthenticate(n);const s=r&&this.client.core.linkModeSupportedApps.includes(r)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?On.link_mode:On.relay;o===On.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:f,exp:h,nbf:p,methods:g=[],expiry:w}=n,y=[...n.resources||[]],{topic:b,uri:m}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:m}});const x=await this.client.core.crypto.generateKeyPair(),E=B0(x);if(await Promise.all([this.client.auth.authKeys.set(U0,{responseTopic:E,publicKey:x}),this.client.auth.pairingTopics.set(E,{topic:E,pairingTopic:b})]),await this.client.core.relayer.subscribe(E,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:I}=D0(a[0]);let M=Coe(I,"request",g);$0(y)&&(M=Toe(M,y.pop())),y.push(M)}const A=w&&w>_r.wc_sessionAuthenticate.req.ttl?w:_r.wc_sessionAuthenticate.req.ttl,k={authPayload:{type:f??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:h,nbf:p,resources:y},requester:{publicKey:x,metadata:this.client.metadata},expiryTimestamp:gr(A)},S={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},C={requiredNamespaces:{},optionalNamespaces:S,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:x,metadata:this.client.metadata},expiryTimestamp:gr(_r.wc_sessionPropose.req.ttl),id:Ho()},{done:F,resolve:N,reject:L}=Rl(A,"Request expired"),j=Ho(),B=cn("session_connect",C.id),O=cn("session_request",j),R=async({error:I,session:M})=>{this.events.off(O,D),I?L(I):M&&N({session:M})},D=async I=>{var M,Y,X;if(await this.deletePendingAuthRequest(j,{message:"fulfilled",code:0}),I.error){const te=fn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return I.error.code===te.code?void 0:(this.events.off(B,R),L(I.error.message))}await this.deleteProposal(C.id),this.events.off(B,R);const{cacaos:Z,responder:le}=I.result,ae=[],ye=[];for(const te of Z){await oC({cacao:te,projectId:this.client.core.projectId})||(this.client.logger.error(te,"Signature verification failed"),L(fn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:J}=te,Q=$0(J.resources),oe=[z2(J.iss)],W=Wm(J.iss);if(Q){const V=aC(Q),se=cC(Q);ae.push(...V),oe.push(...se)}for(const V of oe)ye.push(`${V}:${W}`)}const Ee=await this.client.core.crypto.generateSharedKey(x,le.publicKey);let ee;ae.length>0&&(ee={topic:Ee,acknowledged:!0,self:{publicKey:x,metadata:this.client.metadata},peer:le,controller:le.publicKey,expiry:gr(Ku),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:TC([...new Set(ae)],[...new Set(ye)]),transportType:o},await this.client.core.relayer.subscribe(Ee,{transportType:o}),await this.client.session.set(Ee,ee),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:le.metadata}),ee=this.client.session.get(Ee)),(M=this.client.metadata.redirect)!=null&&M.linkMode&&(Y=le.metadata.redirect)!=null&&Y.linkMode&&(X=le.metadata.redirect)!=null&&X.universal&&r&&(this.client.core.addLinkModeSupportedApp(le.metadata.redirect.universal),this.client.session.update(Ee,{transportType:On.link_mode})),N({auths:Z,session:ee})};this.events.once(B,R),this.events.once(O,D);let T;try{if(s){const I=Kl("wc_sessionAuthenticate",k,j);this.client.core.history.set(b,I);const M=await this.client.core.crypto.encode("",I,{type:eg,encoding:Tc});T=i0(r,b,M)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:k,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:j}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:C,expiry:_r.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:C.id})])}catch(I){throw this.events.off(B,R),this.events.off(O,D),I}return await this.setProposal(C.id,C),await this.setAuthRequest(j,{request:Ai(bn({},k),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:T??m,response:F}}),Ce(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:i}=n,s=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[kl.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw s.setError(Yf.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw s.setError(Yf.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||On.relay;a===On.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=B0(c),d={type:Wa,receiverPublicKey:c,senderPublicKey:l},f=[],h=[];for(const w of i){if(!await oC({cacao:w,projectId:this.client.core.projectId})){s.setError(Yf.invalid_cacao);const E=fn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:E,encodeOpts:d}),new Error(E.message)}s.addTrace(kl.cacaos_verified);const{p:y}=w,b=$0(y.resources),m=[z2(y.iss)],x=Wm(y.iss);if(b){const E=aC(b),A=cC(b);f.push(...E),m.push(...A)}for(const E of m)h.push(`${E}:${x}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(kl.create_authenticated_session_topic);let g;if((f==null?void 0:f.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:gr(Ku),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:TC([...new Set(f)],[...new Set(h)]),transportType:a},s.addTrace(kl.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw s.setError(Yf.subscribe_authenticated_session_topic_failure),w}s.addTrace(kl.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),s.addTrace(kl.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(kl.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw s.setError(Yf.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:g}}),Ce(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:i}=n,s=this.getPendingAuthRequest(r);if(!s)throw new Error(`Could not find pending auth request with id ${r}`);s.transportType===On.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=B0(o),l={type:Wa,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:i,encodeOpts:l,rpcOpts:_r.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,fn("USER_DISCONNECTED"))}),Ce(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:i}=n;return Y4(r,i)}),Ce(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),Ce(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&s.topic&&s.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),Ce(this,"deleteSession",async n=>{var r;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,fn("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(h5).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,fn("USER_DISCONNECTED"))}),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Uo.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),Ce(this,"deleteProposal",async(n,r)=>{if(r)try{const i=this.client.proposal.get(n),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(_l.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,fn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),Ce(this,"deletePendingSessionRequest",async(n,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==n),i&&(this.sessionRequestQueue.state=Uo.idle,this.client.events.emit("session_request_expire",{id:n}))}),Ce(this,"deletePendingAuthRequest",async(n,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)])}),Ce(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),Ce(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,gr(_r.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),Ce(this,"setAuthRequest",async(n,r)=>{const{request:i,pairingTopic:s,transportType:o=On.relay}=r;this.client.core.expirer.set(n,i.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:n,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),Ce(this,"setPendingSessionRequest",async n=>{const{id:r,topic:i,params:s,verifyContext:o}=n,a=s.request.expiryTimestamp||gr(_r.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:i,params:s,verifyContext:o})}),Ce(this,"sendRequest",async n=>{const{topic:r,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,f=Kl(i,s,c);let h;const p=!!u;try{const y=p?Tc:bo;h=await this.client.core.crypto.encode(r,f,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(rhe.includes(i)){const y=Vo(JSON.stringify(f)),b=Vo(h);g=await this.client.core.verify.register({id:b,decryptedId:y})}const w=_r[i].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,f),p){const y=i0(u,r,h);await globalThis.Linking.openURL(y,this.client.name)}else{const y=_r[i].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=Ai(bn({},d),{correlationId:f.id}),l?(y.internal=Ai(bn({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,h,y)):this.client.core.relayer.publish(r,h,y).catch(b=>this.client.logger.error(b))}return f.id}),Ce(this,"sendResult",async n=>{const{id:r,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=qS(r,s);let u;const d=c&&typeof(globalThis==null?void 0:globalThis.Linking)<"u";try{const p=d?Tc:bo;u=await this.client.core.crypto.encode(i,l,Ai(bn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),p}let f,h;try{f=await this.client.core.history.get(i,r);const p=f.request;try{this.shouldSetTVF(p.method,p.params)&&(h=this.getTVFParams(r,p.params,s))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),p}if(d){const p=i0(c,i,u);await globalThis.Linking.openURL(p,this.client.name)}else{const p=f.request.method,g=_r[p].res;g.tvf=Ai(bn({},h),{correlationId:r}),o?(g.internal=Ai(bn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,g)):this.client.core.relayer.publish(i,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),Ce(this,"sendError",async n=>{const{id:r,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=VS(r,s);let u;const d=c&&typeof(globalThis==null?void 0:globalThis.Linking)<"u";try{const h=d?Tc:bo;u=await this.client.core.crypto.encode(i,l,Ai(bn({},o||{}),{encoding:h}))}catch(h){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),h}let f;try{f=await this.client.core.history.get(i,r)}catch(h){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),h}if(d){const h=i0(c,i,u);await globalThis.Linking.openURL(h,this.client.name)}else{const h=f.request.method,p=a||_r[h].res;this.client.core.relayer.publish(i,u,p)}await this.client.core.history.resolve(l)}),Ce(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(i=>{let s=!1;Sc(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&n.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Sc(i.expiryTimestamp)&&r.push(i.id)}),await Promise.all([...n.map(i=>this.deleteSession({topic:i})),...r.map(i=>this.deleteProposal(i))])}),Ce(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),Ce(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),Ce(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Uo.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Uo.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Uo.idle}),Ce(this,"processRequest",async n=>{const{topic:r,payload:i,attestation:s,transportType:o,encryptedId:a}=n,c=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,i);case"wc_sessionPing":return await this.onSessionPingRequest(r,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Ce(this,"onRelayEventResponse",async n=>{const{topic:r,payload:i,transportType:s}=n,o=(await this.client.core.history.get(r,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Ce(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:i}=je("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),Ce(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:i}=n,s=this.expectedPairingMethodMap.get(r);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Ce(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:i,attestation:s,encryptedId:o}=n,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Aa.proposal_listener_not_found)),this.isValidConnect(bn({},i.params));const u=a.expiryTimestamp||gr(_r.wc_sessionPropose.req.ttl),d=bn({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const f=await this.getVerifyContext({attestationId:s,hash:Vo(JSON.stringify(i)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Fo.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:f})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:_r.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),Ce(this,"onSessionProposeResponse",async(n,r,i)=>{const{id:s}=r;if(Wo(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:n,proposalId:s,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Ms(r)){await this.client.proposal.delete(s,fn("USER_DISCONNECTED"));const o=cn("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),Ce(this,"onSessionSettleRequest",async(n,r)=>{const{id:i,params:s}=r;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:f}=r.params,h=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!h)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(h.proposalId),g=Ai(bn(bn(bn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:h.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:h.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{transportType:On.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:h.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(cn("session_connect",h.proposalId),{session:g}),this.pendingSessions.delete(h.proposalId),this.deleteProposal(h.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),Ce(this,"onSessionSettleResponse",async(n,r)=>{const{id:i}=r;Wo(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(cn("session_approve",i),{})):Ms(r)&&(await this.client.session.delete(n,fn("USER_DISCONNECTED")),this.events.emit(cn("session_approve",i),{error:r.error}))}),Ce(this,"onSessionUpdateRequest",async(n,r)=>{const{params:i,id:s}=r;try{const o=`${n}_session_update`,a=Vf.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:n,error:fn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(bn({topic:n},i));try{Vf.set(o,s),await this.client.session.update(n,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw Vf.delete(o),c}this.client.events.emit("session_update",{id:s,topic:n,params:i})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Ce(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),Ce(this,"onSessionUpdateResponse",(n,r)=>{const{id:i}=r,s=cn("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Wo(r)?this.events.emit(cn("session_update",i),{}):Ms(r)&&this.events.emit(cn("session_update",i),{error:r.error})}),Ce(this,"onSessionExtendRequest",async(n,r)=>{const{id:i}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,gr(Ku)),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),Ce(this,"onSessionExtendResponse",(n,r)=>{const{id:i}=r,s=cn("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Wo(r)?this.events.emit(cn("session_extend",i),{}):Ms(r)&&this.events.emit(cn("session_extend",i),{error:r.error})}),Ce(this,"onSessionPingRequest",async(n,r)=>{const{id:i}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),Ce(this,"onSessionPingResponse",(n,r)=>{const{id:i}=r,s=cn("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Wo(r)?this.events.emit(cn("session_ping",i),{}):Ms(r)&&this.events.emit(cn("session_ping",i),{error:r.error})},500)}),Ce(this,"onSessionDeleteRequest",async(n,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(Or.publish,async()=>{s(await this.deleteSession({topic:n,id:i}))})}),this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:fn("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),Ce(this,"onSessionRequest",async n=>{var r,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:f}=a;try{await this.isValidRequest(bn({topic:o},f));const h=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Vo(JSON.stringify(Kl("wc_sessionRequest",f,d))),encryptedId:l,metadata:h.peer.metadata,transportType:u}),g={id:d,topic:o,params:f,verifyContext:p};await this.setPendingSessionRequest(g),u===On.link_mode&&(r=h.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((i=h.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(h){await this.sendError({id:d,topic:o,error:h}),this.client.logger.error(h)}}),Ce(this,"onSessionRequestResponse",(n,r)=>{const{id:i}=r,s=cn("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Wo(r)?this.events.emit(cn("session_request",i),{result:r.result}):Ms(r)&&this.events.emit(cn("session_request",i),{error:r.error})}),Ce(this,"onSessionEventRequest",async(n,r)=>{const{id:i,params:s}=r;try{const o=`${n}_session_event_${s.event.name}`,a=Vf.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(bn({topic:n},s)),this.client.events.emit("session_event",{id:i,topic:n,params:s}),Vf.set(o,i)}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),Ce(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Wo(r)?this.events.emit(cn("session_request",i),{result:r.result}):Ms(r)&&this.events.emit(cn("session_request",i),{error:r.error})}),Ce(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=s.params,f=await this.getVerifyContext({attestationId:o,hash:Vo(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),h={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:f,expiryTimestamp:d};await this.setAuthRequest(s.id,{request:h,pairingTopic:i,transportType:c}),c===On.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:f})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(s.params.requester.metadata,c),h={type:Wa,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:h,rpcOpts:_r.wc_sessionAuthenticate.autoReject,appLink:f})}}),Ce(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),Ce(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Uo.idle,this.processSessionRequestQueue()},Me.toMiliseconds(this.requestQueueDelay))}),Ce(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===n&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=cn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(cn("session_request",s.request.id),{error:r})})}),Ce(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Uo.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Uo.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),Ce(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),Ce(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Kl("wc_sessionPropose",Ai(bn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),Ce(this,"isValidConnect",async n=>{if(!Ki(n)){const{message:l}=je("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Yr(r)||await this.isValidPairingTopic(r),!Tce(c)){const{message:l}=je("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Yr(i)&&Vm(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Yr(s)&&Vm(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Yr(o)||this.validateSessionProps(o,"sessionProperties"),!Yr(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),Ce(this,"validateNamespaces",(n,r)=>{const i=Rce(n,"connect()",r);if(i)throw new Error(i.message)}),Ce(this,"isValidApprove",async n=>{if(!Ki(n))throw new Error(je("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=_1(i,"approve()");if(l)throw new Error(l.message);const u=NC(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!dr(s,!0)){const{message:d}=je("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}if(Yr(o)||this.validateSessionProps(o,"sessionProperties"),!Yr(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(i));if(!Object.keys(a).every(f=>d.has(f)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),Ce(this,"isValidReject",async n=>{if(!Ki(n)){const{message:s}=je("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(s)}const{id:r,reason:i}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!Pce(i)){const{message:s}=je("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),Ce(this,"isValidSessionSettleRequest",n=>{if(!Ki(n)){const{message:l}=je("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:i,namespaces:s,expiry:o}=n;if(!xL(r)){const{message:l}=je("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Sce(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=_1(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Sc(o)){const{message:l}=je("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),Ce(this,"isValidUpdate",async n=>{if(!Ki(n)){const{message:c}=je("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:i}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const s=this.client.session.get(r),o=_1(i,"update()");if(o)throw new Error(o.message);const a=NC(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),Ce(this,"isValidExtend",async n=>{if(!Ki(n)){const{message:i}=je("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(i)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),Ce(this,"isValidRequest",async n=>{if(!Ki(n)){const{message:c}=je("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:i,chainId:s,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!PC(a,s)){const{message:c}=je("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!Nce(i)){const{message:c}=je("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!$ce(a,s,i.method)){const{message:c}=je("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!jce(o,P1)){const{message:c}=je("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${P1.min} and ${P1.max}`);throw new Error(c)}}),Ce(this,"isValidRespond",async n=>{var r;if(!Ki(n)){const{message:o}=je("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:i,response:s}=n;try{await this.isValidSessionTopic(i)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!Lce(s)){const{message:o}=je("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),Ce(this,"isValidPing",async n=>{if(!Ki(n)){const{message:i}=je("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Ce(this,"isValidEmit",async n=>{if(!Ki(n)){const{message:a}=je("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:i,chainId:s}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!PC(o,s)){const{message:a}=je("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!Dce(i)){const{message:a}=je("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!Bce(o,s,i.name)){const{message:a}=je("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),Ce(this,"isValidDisconnect",async n=>{if(!Ki(n)){const{message:i}=je("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Ce(this,"isValidAuthenticate",n=>{const{chains:r,uri:i,domain:s,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!dr(i,!1))throw new Error("uri is required parameter");if(!dr(s,!1))throw new Error("domain is required parameter");if(!dr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>D0(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=D0(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Ce(this,"getVerifyContext",async n=>{const{attestationId:r,hash:i,encryptedId:s,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||Rh,validation:"UNKNOWN",origin:o.url||""}};try{if(a===On.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Ce(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((i,s)=>{if(i==null){const{message:o}=je("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${i} for key ${Object.keys(n)[s]}`);throw new Error(o)}})}),Ce(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),Ce(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),Ce(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:i}=je("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(i)}}),Ce(this,"isLinkModeEnabled",(n,r)=>{var i,s,o,a,c,l,u,d,f;return!n||r!==On.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((f=n==null?void 0:n.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(globalThis==null?void 0:globalThis.Linking)<"u"}),Ce(this,"getAppLinkIfEnabled",(n,r)=>{var i;return this.isLinkModeEnabled(n,r)?(i=n==null?void 0:n.redirect)==null?void 0:i.universal:void 0}),Ce(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=ZI(n,"topic")||"",i=decodeURIComponent(ZI(n,"wc_ev")||""),s=this.client.session.keys.includes(r);s&&this.client.session.update(r,{transportType:On.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:s})}),Ce(this,"registerLinkModeListeners",async()=>{var n;if(BS()||pl()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=globalThis==null?void 0:globalThis.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await r.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),Ce(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:i}=r;return Object.keys(g5).includes(i.method)}),Ce(this,"getTVFParams",(n,r,i)=>{var s,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,i);return Ai(bn({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(s=r.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),Ce(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const i=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),Ce(this,"extractTxHashesFromResult",(n,r)=>{try{const i=g5[n];if(typeof r=="string")return[r];const s=r[i.key];if(bf(s))return n==="solana_signAllTransactions"?s.map(o=>poe(o)):s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,i]of Object.entries(n))for(const s of i)try{await this.onProviderMessageEvent({topic:r,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=je("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Or.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(U0)?this.client.auth.authKeys.get(U0):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:s===On.link_mode?Tc:bo});GS(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:i,transportType:s,encryptedId:Vo(r)})):my(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:s}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on($s.expired,async e=>{const{topic:n,id:r}=j4(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,je("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,je("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Dl.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Dl.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!dr(e,!1)){const{message:n}=je("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=je("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Sc(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=je("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!dr(e,!1)){const{message:n}=je("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=je("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Sc(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=je("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=je("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(dr(e,!1)){const{message:n}=je("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=je("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!Oce(e)){const{message:n}=je("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=je("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Sc(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=je("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class ghe extends Cu{constructor(e,n){super(e,n,Qfe,JS),this.core=e,this.logger=n}}class mhe extends Cu{constructor(e,n){super(e,n,ehe,JS),this.core=e,this.logger=n}}class whe extends Cu{constructor(e,n){super(e,n,nhe,JS,r=>r.id),this.core=e,this.logger=n}}class yhe extends Cu{constructor(e,n){super(e,n,ohe,yy,()=>U0),this.core=e,this.logger=n}}class bhe extends Cu{constructor(e,n){super(e,n,ahe,yy),this.core=e,this.logger=n}}class vhe extends Cu{constructor(e,n){super(e,n,che,yy,r=>r.id),this.core=e,this.logger=n}}var xhe=Object.defineProperty,Ehe=(t,e,n)=>e in t?xhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N1=(t,e,n)=>Ehe(t,typeof e!="symbol"?e+"":e,n);class She{constructor(e,n){this.core=e,this.logger=n,N1(this,"authKeys"),N1(this,"pairingTopics"),N1(this,"requests"),this.authKeys=new yhe(this.core,this.logger),this.pairingTopics=new bhe(this.core,this.logger),this.requests=new vhe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var _he=Object.defineProperty,khe=(t,e,n)=>e in t?_he(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yt=(t,e,n)=>khe(t,typeof e!="symbol"?e+"":e,n);class ZS extends uee{constructor(e){super(e),Yt(this,"protocol",FL),Yt(this,"version",zL),Yt(this,"name",O1.name),Yt(this,"metadata"),Yt(this,"core"),Yt(this,"logger"),Yt(this,"events",new xi.EventEmitter),Yt(this,"engine"),Yt(this,"session"),Yt(this,"proposal"),Yt(this,"pendingRequest"),Yt(this,"auth"),Yt(this,"signConfig"),Yt(this,"on",(r,i)=>this.events.on(r,i)),Yt(this,"once",(r,i)=>this.events.once(r,i)),Yt(this,"off",(r,i)=>this.events.off(r,i)),Yt(this,"removeListener",(r,i)=>this.events.removeListener(r,i)),Yt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Yt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"update",async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"request",async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"find",r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Yt(this,"authenticate",async(r,i)=>{try{return await this.engine.authenticate(r,i)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),this.name=(e==null?void 0:e.name)||O1.name,this.metadata=Ase(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:sy(AS({level:(e==null?void 0:e.logger)||O1.logger}));this.core=(e==null?void 0:e.core)||new Xfe(e),this.logger=Ui(n,this.name),this.session=new mhe(this.core,this.logger),this.proposal=new ghe(this.core,this.logger),this.pendingRequest=new whe(this.core,this.logger),this.engine=new phe(this),this.auth=new She(this.core,this.logger)}static async init(e){const n=new ZS(e);return await n.initialize(),n}get context(){return ss(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},Me.toMiliseconds(Me.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}function Ahe(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var p=0,g=0,w=0,y=h.length;w!==y&&h[w]===0;)w++,p++;for(var b=(y-w)*l+1>>>0,m=new Uint8Array(b);w!==y;){for(var x=h[w],E=0,A=b-1;(x!==0||E<g)&&A!==-1;A--,E++)x+=256*m[A]>>>0,m[A]=x%o>>>0,x=x/o>>>0;if(x!==0)throw new Error("Non-zero carry");g=E,w++}for(var k=b-g;k!==b&&m[k]===0;)k++;for(var S=a.repeat(p);k<b;++k)S+=t.charAt(m[k]);return S}function d(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;for(var p=0,g=0,w=0;h[p]===a;)g++,p++;for(var y=(h.length-p)*c+1>>>0,b=new Uint8Array(y);h[p];){var m=h.charCodeAt(p);if(m>255)return;var x=e[m];if(x===255)return;for(var E=0,A=y-1;(x!==0||E<w)&&A!==-1;A--,E++)x+=o*b[A]>>>0,b[A]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");w=E,p++}for(var k=y-w;k!==y&&b[k]===0;)k++;for(var S=new Uint8Array(g+(y-k)),C=g;k!==y;)S[C++]=b[k++];return S}function f(h){var p=d(h);if(p)return p;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:f}}var Ihe=Ahe;const Che=Ihe,Rhe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var The=Che(Rhe);const j0=vi(The);function Ohe({getAccounts:t,getPrivateKey:e,getPublicKey:n,processEthSignMessage:r,processPersonalMessage:i,processTransaction:s,processSignTransaction:o,processTypedMessageV4:a}){if(!t)throw new Error("opts.getAccounts is required");async function c(y,b){if(typeof y=="string"&&y.length>0){const x=(await t(b)).map(A=>A.toLowerCase()),E=y.toLowerCase();if(x.includes(E))return E}throw _t.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})}async function l(y,b){b.result=await t(y)}async function u(y,b){if(!s)throw _t.methodNotSupported();const m=y.params[0]||{from:""};m.from=await c(m.from,y),b.result=await s(m,y)}async function d(y,b){if(!o)throw _t.methodNotSupported();const m=y.params[0]||{from:""};m.from=await c(m.from,y),b.result=await o(m,y)}async function f(y,b){if(!r)throw _t.methodNotSupported();let m=y.params;const x=y.params[2]||{};if(Array.isArray(y.params)){if(y.params.length!==2)throw new Error(`WalletMiddleware - incorrect params for ${y.method} method. expected [address, message]`);const E=y.params,A=E[0],k=E[1];m={from:A,data:k}}m=fe(fe({},x),m),b.result=await r(m,y)}async function h(y,b){if(!a)throw _t.methodNotSupported();if(!(y!=null&&y.params))throw new Error("WalletMiddleware - missing params");let m=y.params;if(Array.isArray(y.params)){if(y.params.length!==2)throw new Error(`WalletMiddleware - incorrect params for ${y.method} method. expected [address, typedData]`);const x=y.params,E=x[0],A=x[1];m={from:E,data:A}}b.result=await a(m,y)}async function p(y,b){if(!i)throw _t.methodNotSupported();let m=y.params;const x=y.params[2]||{};if(Array.isArray(y.params)){if(!(y.params.length>=2))throw new Error(`WalletMiddleware - incorrect params for ${y.method} method. expected [message, address]`);const E=y.params;if(typeof E[0]=="object"){const{challenge:A,address:k}=E[0];m={from:k,data:A}}else{const A=E[0];m={from:E[1],data:A}}}m=fe(fe({},x),m),b.result=await i(m,y)}async function g(y,b){if(!e)throw _t.methodNotSupported();b.result=await e(y)}async function w(y,b){if(!n)throw _t.methodNotSupported();b.result=await n(y)}return UE({eth_accounts:Vr(l),eth_requestAccounts:Vr(l),eth_private_key:Vr(g),eth_public_key:Vr(w),public_key:Vr(w),private_key:Vr(g),eth_sendTransaction:Vr(u),eth_signTransaction:Vr(d),eth_sign:Vr(f),eth_signTypedData_v4:Vr(h),personal_sign:Vr(p)})}function Phe(t){const{getAccounts:e,getPrivateKey:n,getPublicKey:r,processTransaction:i,processSignTransaction:s,processEthSignMessage:o,processTypedMessageV4:a,processPersonalMessage:c}=t;return hl([UE({eth_syncing:!1}),Ohe({getAccounts:e,getPrivateKey:n,getPublicKey:r,processTransaction:i,processEthSignMessage:o,processSignTransaction:s,processTypedMessageV4:a,processPersonalMessage:c})])}function Nhe({addChain:t,switchChain:e}){async function n(i,s){var o;const a=(o=i.params)!==null&&o!==void 0&&o.length?i.params[0]:void 0;if(!a)throw _t.invalidParams("Missing chain params");if(!a.chainId)throw _t.invalidParams("Missing chainId in chainParams");if(!a.rpcUrls||a.rpcUrls.length===0)throw _t.invalidParams("Missing rpcUrls in chainParams");if(!a.nativeCurrency)throw _t.invalidParams("Missing nativeCurrency in chainParams");s.result=await t(a)}async function r(i,s){var o;const a=(o=i.params)!==null&&o!==void 0&&o.length?i.params[0]:void 0;if(!a)throw _t.invalidParams("Missing chainId");s.result=await e(a)}return UE({wallet_addEthereumChain:Vr(n),wallet_switchEthereumChain:Vr(r)})}function Lhe(t){return(e,n,r,i)=>e.method==="eth_chainId"?(n.result=t,i()):r()}function Dhe(t){return(e,n,r,i)=>e.method==="eth_provider_config"?(n.result=t,i()):r()}function $he(t){const{chainId:e,rpcTarget:n}=t,r=jE({rpcTarget:n});return{networkMiddleware:hl([Lhe(e),Dhe(t),r]),fetchMiddleware:r}}async function HL(t){if(t.session.length){const e=t.session.keys.length-1;return t.session.get(t.session.keys[e])}return null}function Bhe(){return/Mobi|Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(window.navigator.userAgent)}function Mhe(t){return t.startsWith("solana:")}async function $a(t,e,n,r){const i=await HL(t);if(!i)throw Ws.disconnected();return typeof window<"u"&&Bhe()&&i.peer.metadata.redirect&&i.peer.metadata.redirect.native&&window.open(i.peer.metadata.redirect.native,"_blank"),t.request({topic:i.topic,chainId:e,request:{method:n,params:Mhe(e)?fe(fe({},r),{},{pubkey:i.self.publicKey}):r}})}async function xd(t){const e=await HL(t);if(!e)throw Ws.disconnected();const n=D4(e.namespaces);if(n&&n.length)return[...new Set(n.map(r=>L4(r).address))];throw ut.connectionError("Failed to get accounts")}function Uhe({connector:t,chainId:e}){return{getPrivateKey:async()=>{throw _t.methodNotSupported()},getPublicKey:async()=>{throw _t.methodNotSupported()},getAccounts:async n=>xd(t),processTransaction:async(n,r)=>await $a(t,`eip155:${e}`,"eth_sendTransaction",[n]),processSignTransaction:async(n,r)=>await $a(t,`eip155:${e}`,"eth_signTransaction",[n]),processEthSignMessage:async(n,r)=>await $a(t,`eip155:${e}`,"eth_sign",[n.from,n.data]),processPersonalMessage:async(n,r)=>await $a(t,`eip155:${e}`,"personal_sign",[n.data,n.from]),processTypedMessageV4:async n=>await $a(t,`eip155:${e}`,"eth_signTypedData_v4",[n.from,n.data])}}function jhe({connector:t,chainId:e}){return{requestAccounts:async n=>xd(t),getPrivateKey:async()=>{throw _t.methodNotSupported()},getSecretKey:async()=>{throw _t.methodNotSupported()},getPublicKey:async()=>{throw _t.methodNotSupported()},getAccounts:async n=>xd(t),signAllTransactions:async n=>{throw _t.methodNotSupported()},signAndSendTransaction:async n=>{throw _t.methodNotSupported()},signMessage:async n=>{const r=await $a(t,`solana:${A2[e]}`,"solana_signMessage",{message:j0.encode(n.params.message)});return j0.decode(r.signature)},signTransaction:async n=>{const[{PublicKey:r},i]=await Promise.all([Ds(()=>Promise.resolve().then(()=>KZ),void 0),xd(t)]);if(i.length===0)throw Ws.disconnected();const s=await $a(t,`solana:${A2[e]}`,"solana_signTransaction",{transaction:n.params.message.serialize({requireAllSignatures:!1}).toString("base64")}),o=n.params.message;return o.addSignature(new r(i[0]),Ne.from(j0.decode(s.signature))),o}}}async function Fhe({connector:t,chainId:e,newChainId:n}){await $a(t,`eip155:${e}`,"wallet_switchEthereumChain",[{chainId:n}])}async function zhe({connector:t,chainId:e,chainConfig:n}){await $a(t,`eip155:${e}`,"wallet_addEthereumChain",[n])}var WL;class Ym extends Bw{constructor({clientId:e,config:n,state:r,connector:i}){super({config:{chainConfig:n.chainConfig,skipLookupNetwork:!!n.skipLookupNetwork},state:fe(fe({},r||{}),{},{chainId:"loading",accounts:[]})}),me(this,"connector",null),me(this,"clientId",void 0),this.connector=i||null,this.clientId=e}async enable(){if(!this.connector)throw Ws.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});return await this.setupProvider(this.connector),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(e){this.onConnectorStateUpdate(e),await this.setupEngine(e)}async switchChain({chainId:e}){if(!this.connector)throw Ws.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});const n=this.getChainConfig(e),{chainId:r}=this.config.chainConfig,i=parseInt(r,16);await Fhe({connector:this.connector,chainId:i,newChainId:e}),this.configure({chainConfig:n}),await this.setupEngine(this.connector),this.lookupNetwork(this.connector)}async addChain(e){const{chainId:n}=this.config.chainConfig,r=parseInt(n,16);await zhe({connector:this.connector,chainId:r,chainConfig:{chainId:e.chainId,chainName:e.displayName,nativeCurrency:{name:e.tickerName,symbol:e.ticker.toLocaleUpperCase(),decimals:e.decimals||18},rpcUrls:[e.rpcTarget],blockExplorerUrls:[e.blockExplorerUrl],iconUrls:[e.logo]}}),super.addChain(e)}async lookupNetwork(e){const n=this.config.chainConfig.chainId;return this.update({chainId:n}),this.emit("chainChanged",n),this.emit("connect",{chainId:n}),this.config.chainConfig.chainId}async setupEngine(e){if(this.config.chainConfig.chainNamespace===wt.EIP155)return this.setupEthEngine(e);if(this.config.chainConfig.chainNamespace===wt.SOLANA)return this.setupSolEngine(e);throw new Error(`Unsupported chainNamespace: ${this.config.chainConfig.chainNamespace}`)}async setupEthEngine(e){const{chainId:n}=this.config.chainConfig,r=parseInt(n,16),i=Uhe({connector:e,chainId:r}),s=await xd(e);this.update({accounts:s||[]});const o=Phe(i),a=this.getEthChainSwitchMiddleware(),c=new Hi,{networkMiddleware:l}=$he(this.config.chainConfig);c.push(o),c.push(a),c.push(l);const u=np(c);this.updateProviderEngineProxy(u)}async setupSolEngine(e){const{chainId:n}=this.config.chainConfig,r=jhe({connector:e,chainId:n}),i=await xd(e);this.update({accounts:i||[]});const s=qE(r),o=new Hi,{networkMiddleware:a}=e8(this.config.chainConfig);o.push(s),o.push(a);const c=np(o);this.updateProviderEngineProxy(c)}getEthChainSwitchMiddleware(){return Nhe({addChain:async r=>{const{chainId:i,chainName:s,rpcUrls:o,blockExplorerUrls:a,nativeCurrency:c,iconUrls:l}=r;this.addChain({chainNamespace:wt.EIP155,chainId:i,ticker:(c==null?void 0:c.symbol)||"ETH",tickerName:(c==null?void 0:c.name)||"Ether",displayName:s,rpcTarget:o[0],blockExplorerUrl:(a==null?void 0:a[0])||"",decimals:(c==null?void 0:c.decimals)||18,logo:(l==null?void 0:l[0])||"https://images.toruswallet.io/eth.svg"})},switchChain:async r=>{const{chainId:i}=r;await this.switchChain({chainId:i})}})}connectedTopic(){var e;if(!this.connector)throw ut.notConnectedError("Wallet connect connector is not connected");if((e=this.connector)!==null&&e!==void 0&&(e=e.session)!==null&&e!==void 0&&e.length){var n;const r=this.connector.session.keys.length-1;return(n=this.connector.session.get(this.connector.session.keys[r]))===null||n===void 0?void 0:n.topic}}checkIfAccountAllowed(e){if(!this.connector||!this.connectedTopic())return!1;const n=this.connector.session.get(this.connectedTopic()),r=D4(n.namespaces);let i=!1;for(const o of r){var s;if(((s=L4(o).address)===null||s===void 0?void 0:s.toLowerCase())===(e==null?void 0:e.toLowerCase())){i=!0;break}}return i}async onConnectorStateUpdate(e){e.events.on("session_event",async n=>{if(We.debug("session_event data",n),!this.provider)throw ut.notConnectedError("Wallet connect connector is not connected");const{event:r}=n.params,{name:i,data:s}=r||{};if(i==="accountsChanged"&&s!==null&&s!==void 0&&s.length&&this.state.accounts[0]!==s[0]&&this.checkIfAccountAllowed(s[0])&&(this.update({accounts:s}),this.emit("accountsChanged",s)),r.name==="chainChanged"){if(!s)return;const a=`0x${s.toString(16)}`;if(a&&this.state.chainId!==a){const c=nl(wt.EIP155,a,this.clientId);this.configure({chainConfig:fe(fe({},c),{},{chainId:a,chainNamespace:wt.EIP155})}),await this.setupEngine(e)}}})}}WL=Ym;me(Ym,"getProviderInstance",async t=>{const e=new WL({clientId:t.clientId,config:{chainConfig:t.chainConfig,skipLookupNetwork:t.skipLookupNetwork}});return await e.setupProvider(t.connector),e});class Khe extends FE{constructor(e={}){super(e),me(this,"name",Wt.WALLET_CONNECT_V2),me(this,"adapterNamespace",Zh.MULTICHAIN),me(this,"currentChainNamespace",wt.OTHER),me(this,"type",ho.EXTERNAL),me(this,"adapterOptions",{}),me(this,"status",Le.NOT_READY),me(this,"adapterData",{uri:""}),me(this,"connector",null),me(this,"activeSession",null),me(this,"wcProvider",null),this.adapterOptions=fe({},e),this.setAdapterSettings(e)}get connected(){return!!this.activeSession}get provider(){return this.status!==Le.NOT_READY&&this.wcProvider?this.wcProvider:null}set provider(e){throw new Error("Not implemented")}async init(e){var n,r,i;super.checkInitializationRequirements();const s=(n=this.adapterOptions.adapterSettings)===null||n===void 0||(n=n.walletConnectInitOptions)===null||n===void 0?void 0:n.projectId;if(!s)throw Ue.invalidParams("Wallet connect project id is required in wallet connect v2 adapter");const o=await sX((r=this.chainConfig)===null||r===void 0?void 0:r.chainNamespace,[(i=this.chainConfig)===null||i===void 0?void 0:i.chainId],s);(!this.adapterOptions.loginSettings||Object.keys(this.adapterOptions.loginSettings).length===0)&&(this.adapterOptions.loginSettings=o.loginSettings),this.adapterOptions.adapterSettings=_o(o.adapterSettings||{},this.adapterOptions.adapterSettings||{});const{adapterSettings:a}=this.adapterOptions;if(this.connector=await ZS.init(a==null?void 0:a.walletConnectInitOptions),this.wcProvider=new Ym({clientId:this.clientId,config:{chainConfig:this.chainConfig},connector:this.connector}),this.emit(It.READY,Wt.WALLET_CONNECT_V2),this.status=Le.READY,We.debug("initializing wallet connect v2 adapter"),e.autoConnect)if(await this.checkForPersistedSession(),this.connected){this.rehydrated=!0;try{await this.onConnectHandler()}catch(c){We.error("wallet auto connect",c),this.emit(It.ERRORED,c)}}else this.status=Le.NOT_READY,this.emit(It.CACHE_CLEAR)}async connect(){if(super.checkConnectionRequirements(),!this.connector)throw Ue.notReady("Wallet adapter is not ready yet");try{return this.connected?(await this.onConnectHandler(),this.provider):(this.status!==Le.CONNECTING&&await this.createNewSession(),this.provider)}catch(e){throw We.error("Wallet connect v2 adapter error while connecting",e),this.status=Le.READY,this.rehydrated=!0,this.emit(It.ERRORED,e),e instanceof Wc?e:ut.connectionError(`Failed to login with wallet connect: ${(e==null?void 0:e.message)||""}`,e)}}setAdapterSettings(e){var n,r,i,s,o;super.setAdapterSettings(e);const{qrcodeModal:a,walletConnectInitOptions:c}=(e==null?void 0:e.adapterSettings)||{};this.adapterOptions=fe(fe({},this.adapterOptions),{},{adapterSettings:(n=(r=this.adapterOptions)===null||r===void 0?void 0:r.adapterSettings)!==null&&n!==void 0?n:{},loginSettings:(i=(s=this.adapterOptions)===null||s===void 0?void 0:s.loginSettings)!==null&&i!==void 0?i:{}}),a&&(this.adapterOptions.adapterSettings.qrcodeModal=a),c&&(this.adapterOptions.adapterSettings.walletConnectInitOptions=fe(fe({},(o=this.adapterOptions.adapterSettings.walletConnectInitOptions)!==null&&o!==void 0?o:{}),c));const{loginSettings:l}=e;l&&(this.adapterOptions.loginSettings=fe(fe({},this.adapterOptions.loginSettings||{}),l))}async addChain(e,n=!1){var r;super.checkAddChainRequirements(e,n),await((r=this.wcProvider)===null||r===void 0?void 0:r.addChain(e)),this.addChainConfig(e)}async switchChain(e,n=!1){var r;super.checkSwitchChainRequirements(e,n),await((r=this.wcProvider)===null||r===void 0?void 0:r.switchChain({chainId:e.chainId})),this.setAdapterSettings({chainConfig:this.getChainConfig(e.chainId)})}async getUserInfo(){if(!this.connected)throw ut.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async disconnect(e={cleanup:!1,sessionRemovedByWallet:!1}){var n,r;const{cleanup:i}=e;if(!this.connector||!this.connected||!((n=this.activeSession)!==null&&n!==void 0&&n.topic))throw ut.notConnectedError("Not connected with wallet");e.sessionRemovedByWallet||await this.connector.disconnect({topic:(r=this.activeSession)===null||r===void 0?void 0:r.topic,reason:fn("USER_DISCONNECTED")}),this.rehydrated=!1,i?(this.connector=null,this.status=Le.NOT_READY,this.wcProvider=null):this.status=Le.READY,this.activeSession=null,this.emit(It.DISCONNECTED)}async authenticateUser(){if(!this.provider||this.status!==Le.CONNECTED)throw ut.notConnectedError();const{chainNamespace:e,chainId:n}=this.chainConfig,r=await this.provider.request({method:e===wt.EIP155?"eth_accounts":"getAccounts"});if(r&&r.length>0){const i=TN(r[0],this.name);if(i&&!RN(i))return{idToken:i};const s={domain:window.location.origin,uri:window.location.href,address:r[0],chainId:parseInt(n,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},o=await kN(s,e),a=await this._getSignedMessage(o,r,e),c=await AN(e,a,o,this.name,this.sessionTime,this.clientId,this.web3AuthNetwork);return ON(r[0],this.name,c),{idToken:c}}throw ut.notConnectedError("Not connected with wallet, Please login/connect first")}async enableMFA(){throw new Error("Method Not implemented")}async manageMFA(){throw new Error("Method Not implemented")}cleanupPendingPairings(){if(!this.connector)throw Ue.notReady("Wallet adapter is not ready yet");const e=this.connector.pairing.getAll({active:!1});bf(e)&&e.forEach(n=>{this.connector&&this.connector.pairing.delete(n.topic,fn("USER_DISCONNECTED"))})}async checkForPersistedSession(){if(!this.connector)throw Ue.notReady("Wallet adapter is not ready yet");if(this.connector.session.length){const e=this.connector.session.keys.length-1;this.activeSession=this.connector.session.get(this.connector.session.keys[e])}return this.activeSession}async createNewSession(e={forceNewSession:!1}){try{var n,r;if(!this.connector)throw Ue.notReady("Wallet adapter is not ready yet");if(!this.adapterOptions.loginSettings||Object.keys(this.adapterOptions.loginSettings).length===0)throw Ue.notReady("login settings are not set yet");if(this.status=Le.CONNECTING,this.emit(It.CONNECTING,{adapter:Wt.WALLET_CONNECT_V2}),e.forceNewSession&&(n=this.activeSession)!==null&&n!==void 0&&n.topic){var i;await this.connector.disconnect({topic:(i=this.activeSession)===null||i===void 0?void 0:i.topic,reason:fn("USER_DISCONNECTED")})}const{uri:o,approval:a}=await this.connector.connect(this.adapterOptions.loginSettings),c=(r=this.adapterOptions)===null||r===void 0||(r=r.adapterSettings)===null||r===void 0?void 0:r.qrcodeModal;if(o)if(c)try{await c.openModal({uri:o}),We.debug("EVENT","QR Code Modal closed"),this.status=Le.READY,this.emit(It.READY,Wt.WALLET_CONNECT_V2)}catch{We.error("unable to open qr code modal")}else this.updateAdapterData({uri:o});We.info("awaiting session approval from wallet");const l=await a();this.activeSession=l,await this.onConnectHandler(),c&&c.closeModal()}catch(o){var s;if((s=o.message)!==null&&s!==void 0&&s.toLowerCase().includes("proposal expired")){if(We.info("current adapter status: ",this.status),this.status===Le.CONNECTING)return We.info("retrying to create new wallet connect session since proposal expired"),this.createNewSession({forceNewSession:!0});if(this.status===Le.READY){We.info("ignoring proposal expired error since some other adapter is connected");return}}throw We.error("error while creating new wallet connect session",o),this.emit(It.ERRORED,o),o}}async onConnectHandler(){var e;if(!this.connector||!this.wcProvider)throw Ue.notReady("Wallet adapter is not ready yet");if(!this.chainConfig)throw Ue.invalidParams("Chain config is not set");this.subscribeEvents(),(e=this.adapterOptions.adapterSettings)!==null&&e!==void 0&&e.qrcodeModal&&(this.wcProvider=new Ym({clientId:this.clientId,config:{chainConfig:this.chainConfig,skipLookupNetwork:!0},connector:this.connector})),await this.wcProvider.setupProvider(this.connector),this.cleanupPendingPairings(),this.status=Le.CONNECTED,this.emit(It.CONNECTED,{adapter:Wt.WALLET_CONNECT_V2,reconnected:this.rehydrated,provider:this.provider})}subscribeEvents(){if(!this.connector)throw Ue.notReady("Wallet adapter is not ready yet");this.connector.events.on("session_update",({topic:e,params:n})=>{if(!this.connector)return;const{namespaces:r}=n,i=this.connector.session.get(e),s=fe(fe({},i),{},{namespaces:r});this.activeSession=s}),this.connector.events.on("session_delete",()=>{this.disconnect({sessionRemovedByWallet:!0})})}async _getSignedMessage(e,n,r){const i=await this.provider.request({method:r===wt.EIP155?"personal_sign":"signMessage",params:r===wt.EIP155?[e,n[0]]:{message:Ne.from(e)}});return r===wt.SOLANA?j0.encode(i):i}}const qL="solana:signAndSendTransaction",VL="solana:signMessage",GL="solana:signTransaction";var Hhe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Whe=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},F0;let Xf;const by=new Set;function qhe(t){Oh=void 0,by.add(t)}function Vhe(t){Oh=void 0,by.delete(t)}const ld={};function Ghe(){if(Xf||(Xf=Object.freeze({register:w5,get:Yhe,on:Jhe}),typeof window>"u"))return Xf;const t=Object.freeze({register:w5});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new Zhe(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Xf}function w5(...t){var e;return t=t.filter(n=>!by.has(n)),t.length?(t.forEach(n=>qhe(n)),(e=ld.register)==null||e.forEach(n=>y5(()=>n(...t))),function(){var r;t.forEach(i=>Vhe(i)),(r=ld.unregister)==null||r.forEach(i=>y5(()=>i(...t)))}):()=>{}}let Oh;function Yhe(){return Oh||(Oh=[...by]),Oh}function Jhe(t,e){var n;return(n=ld[t])!=null&&n.push(e)||(ld[t]=[e]),function(){var i;ld[t]=(i=ld[t])==null?void 0:i.filter(s=>e!==s)}}function y5(t){try{t()}catch(e){console.error(e)}}class Zhe extends Event{get detail(){return Hhe(this,F0,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),F0.set(this,void 0),Whe(this,F0,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}F0=new WeakMap;const YL="standard:connect",Xhe="standard:disconnect";function Qhe(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var p=0,g=0,w=0,y=h.length;w!==y&&h[w]===0;)w++,p++;for(var b=(y-w)*l+1>>>0,m=new Uint8Array(b);w!==y;){for(var x=h[w],E=0,A=b-1;(x!==0||E<g)&&A!==-1;A--,E++)x+=256*m[A]>>>0,m[A]=x%o>>>0,x=x/o>>>0;if(x!==0)throw new Error("Non-zero carry");g=E,w++}for(var k=b-g;k!==b&&m[k]===0;)k++;for(var S=a.repeat(p);k<b;++k)S+=t.charAt(m[k]);return S}function d(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;for(var p=0,g=0,w=0;h[p]===a;)g++,p++;for(var y=(h.length-p)*c+1>>>0,b=new Uint8Array(y);h[p];){var m=h.charCodeAt(p);if(m>255)return;var x=e[m];if(x===255)return;for(var E=0,A=y-1;(x!==0||E<w)&&A!==-1;A--,E++)x+=o*b[A]>>>0,b[A]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");w=E,p++}for(var k=y-w;k!==y&&b[k]===0;)k++;for(var S=new Uint8Array(g+(y-k)),C=g;k!==y;)S[C++]=b[k++];return S}function f(h){var p=d(h);if(p)return p;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:f}}var epe=Qhe;const tpe=epe,npe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var rpe=tpe(npe);const ipe=vi(rpe);class spe extends FE{async init(e){this.chainConfig||(this.chainConfig=nl(wt.SOLANA,1,this.clientId))}async authenticateUser(){if(!this.provider||this.status!==Le.CONNECTED)throw ut.notConnectedError();const{chainNamespace:e,chainId:n}=this.chainConfig,r=await this.provider.request({method:"getAccounts"});if(r&&r.length>0){const i=TN(r[0],this.name);if(i&&!RN(i))return{idToken:i};const s={domain:window.location.origin,uri:window.location.href,address:r[0],chainId:parseInt(n,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},o=await kN(s,e),a=new TextEncoder().encode(o),c=await this.provider.request({method:"signMessage",params:{message:a,display:"utf8"}}),l=await AN(e,ipe.encode(c),o,this.name,this.sessionTime,this.clientId,this.web3AuthNetwork);return ON(r[0],this.name,l),{idToken:l}}throw ut.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();const e=await this.provider.request({method:"getAccounts"});e&&e.length>0&&PH(e[0],this.name)}async disconnect(){this.rehydrated=!1,this.emit(It.DISCONNECTED)}}const b5=t=>{switch(t.chainId){case"0x65":return"solana:mainnet";case"0x66":return"solana:testnet";case"0x67":return"solana:devnet";default:return null}};class ope extends rl{constructor({wallet:e,getCurrentChain:n}){super(),me(this,"wallet",null),me(this,"getCurrentChain",void 0),this.wallet=e,this.getCurrentChain=n}get currentAccount(){var e;const n=(e=this.wallet)===null||e===void 0?void 0:e.accounts[0];if(!n)throw ut.notConnectedError();return n}get publicKey(){return new xe(this.currentAccount.publicKey)}async signMessage(e){const n=this.currentAccount;return{signature:(await this.wallet.features[VL].signMessage({account:n,message:e}))[0].signature,publicKey:new B1(Ne.from(n.publicKey))}}async signTransaction(e){const n=this.currentAccount,r=await this.wallet.features[GL].signTransaction({account:n,transaction:e.serialize({requireAllSignatures:!1}),chain:this.getCurrentChain()});return e.version!==void 0||e instanceof ys?ys.deserialize(r[0].signedTransaction):Ft.from(r[0].signedTransaction)}async signAllTransactions(e){return Promise.all(e.map(n=>this.signTransaction(n)))}async signAndSendTransaction(e){const n=this.currentAccount,r=await this.wallet.features[qL].signAndSendTransaction({account:n,transaction:e.serialize({requireAllSignatures:!1}),chain:this.getCurrentChain()}),[{signature:i}]=r;return{signature:new TextDecoder().decode(i)}}}class ape extends spe{constructor(e){super(e),me(this,"name",void 0),me(this,"adapterNamespace",Zh.SOLANA),me(this,"currentChainNamespace",wt.SOLANA),me(this,"type",ho.EXTERNAL),me(this,"isInjected",!0),me(this,"status",Le.NOT_READY),me(this,"wallet",null),me(this,"injectedProvider",null),this.name=e.name,this.wallet=["gate","solflare"].includes(this.name)?Object.freeze(e.wallet):e.wallet}get provider(){return this.status!==Le.NOT_READY&&this.injectedProvider?this.injectedProvider:null}get isWalletConnected(){return this.status===Le.CONNECTED&&this.wallet.accounts.length>0}async init(e={}){await super.init(e),super.checkInitializationRequirements(),this.injectedProvider=new Bq({config:{chainConfig:this.chainConfig}});const n=new ope({wallet:this.wallet,getCurrentChain:()=>b5(this.chainConfig)});this.injectedProvider.setupProvider(n),this.status=Le.READY,this.emit(It.READY,this.name);try{We.debug("initializing solana injected adapter"),e.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(r){We.error("Failed to connect with cached solana injected provider",r),this.emit(It.ERRORED,r)}}async connect(){try{super.checkConnectionRequirements(),this.status=Le.CONNECTING,this.emit(It.CONNECTING,{adapter:this.name});const e=b5(this.chainConfig);if(!this.wallet.chains.find(n=>n===e))throw ut.connectionError(`Chain ${e} not supported. Supported chains are ${this.wallet.chains.join(", ")}`);if(this.isWalletConnected||await this.wallet.features[YL].connect(),this.wallet.accounts.length===0)throw ut.connectionError();return this.status=Le.CONNECTED,this.emit(It.CONNECTED,{adapter:this.name,reconnected:this.rehydrated,provider:this.provider}),this.provider}catch(e){throw this.status=Le.READY,this.rehydrated=!1,this.emit(It.ERRORED,e),e}}async disconnect(e={cleanup:!1}){await super.disconnectSession();try{var n;await((n=this.wallet.features[Xhe])===null||n===void 0?void 0:n.disconnect()),e.cleanup?(this.status=Le.NOT_READY,this.injectedProvider=null):this.status=Le.READY,await super.disconnect()}catch(r){this.emit(It.ERRORED,ut.disconnectionError(r==null?void 0:r.message))}}async getUserInfo(){if(!this.isWalletConnected)throw ut.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async addChain(e,n=!1){var r;super.checkAddChainRequirements(e,n),(r=this.injectedProvider)===null||r===void 0||r.addChain(e),this.addChainConfig(e)}async switchChain(e,n=!1){var r;super.checkSwitchChainRequirements(e,n),await((r=this.injectedProvider)===null||r===void 0?void 0:r.switchChain(e)),this.setAdapterSettings({chainConfig:this.getChainConfig(e.chainId)})}async enableMFA(){throw new Error("Method not implemented.")}async manageMFA(){throw new Error("Method Not implemented")}}const cpe=t=>{const{options:e}=t,{clientId:n,chainConfig:r,sessionTime:i,web3AuthNetwork:s,useCoreKitKey:o}=e;if(!Object.values(wt).includes(r.chainNamespace))throw Ue.invalidParams(`Invalid chainNamespace: ${r.chainNamespace}`);const a=fe(fe({},nl(r.chainNamespace,r==null?void 0:r.chainId,n)),r||{}),c=[];return Ghe().get().forEach(u=>{const{name:d,chains:f,features:h}=u;!f.some(w=>w.startsWith("solana"))||![YL,VL,GL,qL].every(w=>Object.keys(h).includes(w))||c.push(new ape({name:OH(d),wallet:u,chainConfig:a,clientId:n,sessionTime:i,web3AuthNetwork:s,useCoreKitKey:o}))}),c},lpe=t=>{const{options:e}=t,{clientId:n,chainConfig:r,sessionTime:i,web3AuthNetwork:s,useCoreKitKey:o}=e;if(!Object.values(wt).includes(r.chainNamespace))throw Ue.invalidParams(`Invalid chainNamespace: ${r.chainNamespace}`);const a=fe(fe({},nl(r.chainNamespace,r==null?void 0:r.chainId,n)),r||{}),c=new Khe({chainConfig:a,clientId:n,sessionTime:i,web3AuthNetwork:s,useCoreKitKey:o,adapterSettings:{walletConnectInitOptions:{}}});return[...cpe({options:e}),c]};function JL(t,e){return function(){return t.apply(e,arguments)}}const{toString:upe}=Object.prototype,{getPrototypeOf:XS}=Object,{iterator:vy,toStringTag:ZL}=Symbol,xy=(t=>e=>{const n=upe.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Co=t=>(t=t.toLowerCase(),e=>xy(e)===t),Ey=t=>e=>typeof e===t,{isArray:vf}=Array,xp=Ey("undefined");function dpe(t){return t!==null&&!xp(t)&&t.constructor!==null&&!xp(t.constructor)&&ns(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const XL=Co("ArrayBuffer");function fpe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&XL(t.buffer),e}const hpe=Ey("string"),ns=Ey("function"),QL=Ey("number"),Sy=t=>t!==null&&typeof t=="object",ppe=t=>t===!0||t===!1,z0=t=>{if(xy(t)!=="object")return!1;const e=XS(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ZL in t)&&!(vy in t)},gpe=Co("Date"),mpe=Co("File"),wpe=Co("Blob"),ype=Co("FileList"),bpe=t=>Sy(t)&&ns(t.pipe),vpe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ns(t.append)&&((e=xy(t))==="formdata"||e==="object"&&ns(t.toString)&&t.toString()==="[object FormData]"))},xpe=Co("URLSearchParams"),[Epe,Spe,_pe,kpe]=["ReadableStream","Request","Response","Headers"].map(Co),Ape=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ng(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),vf(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function eD(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Hl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,tD=t=>!xp(t)&&t!==Hl;function ux(){const{caseless:t}=tD(this)&&this||{},e={},n=(r,i)=>{const s=t&&eD(e,i)||i;z0(e[s])&&z0(r)?e[s]=ux(e[s],r):z0(r)?e[s]=ux({},r):vf(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ng(arguments[r],n);return e}const Ipe=(t,e,n,{allOwnKeys:r}={})=>(ng(e,(i,s)=>{n&&ns(i)?t[s]=JL(i,n):t[s]=i},{allOwnKeys:r}),t),Cpe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Rpe=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Tpe=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&XS(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Ope=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Ppe=t=>{if(!t)return null;if(vf(t))return t;let e=t.length;if(!QL(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Npe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&XS(Uint8Array)),Lpe=(t,e)=>{const r=(t&&t[vy]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},Dpe=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},$pe=Co("HTMLFormElement"),Bpe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),v5=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Mpe=Co("RegExp"),nD=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ng(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},Upe=t=>{nD(t,(e,n)=>{if(ns(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ns(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},jpe=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return vf(t)?r(t):r(String(t).split(e)),n},Fpe=()=>{},zpe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Kpe(t){return!!(t&&ns(t.append)&&t[ZL]==="FormData"&&t[vy])}const Hpe=t=>{const e=new Array(10),n=(r,i)=>{if(Sy(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=vf(r)?[]:{};return ng(r,(o,a)=>{const c=n(o,i+1);!xp(c)&&(s[a]=c)}),e[i]=void 0,s}}return r};return n(t,0)},Wpe=Co("AsyncFunction"),qpe=t=>t&&(Sy(t)||ns(t))&&ns(t.then)&&ns(t.catch),rD=((t,e)=>t?setImmediate:e?((n,r)=>(Hl.addEventListener("message",({source:i,data:s})=>{i===Hl&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Hl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ns(Hl.postMessage)),Vpe=typeof queueMicrotask<"u"?queueMicrotask.bind(Hl):typeof Oi<"u"&&Oi.nextTick||rD,Gpe=t=>t!=null&&ns(t[vy]),ge={isArray:vf,isArrayBuffer:XL,isBuffer:dpe,isFormData:vpe,isArrayBufferView:fpe,isString:hpe,isNumber:QL,isBoolean:ppe,isObject:Sy,isPlainObject:z0,isReadableStream:Epe,isRequest:Spe,isResponse:_pe,isHeaders:kpe,isUndefined:xp,isDate:gpe,isFile:mpe,isBlob:wpe,isRegExp:Mpe,isFunction:ns,isStream:bpe,isURLSearchParams:xpe,isTypedArray:Npe,isFileList:ype,forEach:ng,merge:ux,extend:Ipe,trim:Ape,stripBOM:Cpe,inherits:Rpe,toFlatObject:Tpe,kindOf:xy,kindOfTest:Co,endsWith:Ope,toArray:Ppe,forEachEntry:Lpe,matchAll:Dpe,isHTMLForm:$pe,hasOwnProperty:v5,hasOwnProp:v5,reduceDescriptors:nD,freezeMethods:Upe,toObjectSet:jpe,toCamelCase:Bpe,noop:Fpe,toFiniteNumber:zpe,findKey:eD,global:Hl,isContextDefined:tD,isSpecCompliantForm:Kpe,toJSONObject:Hpe,isAsyncFn:Wpe,isThenable:qpe,setImmediate:rD,asap:Vpe,isIterable:Gpe};function Nt(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}ge.inherits(Nt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ge.toJSONObject(this.config),code:this.code,status:this.status}}});const iD=Nt.prototype,sD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{sD[t]={value:t}});Object.defineProperties(Nt,sD);Object.defineProperty(iD,"isAxiosError",{value:!0});Nt.from=(t,e,n,r,i,s)=>{const o=Object.create(iD);return ge.toFlatObject(t,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),Nt.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const Ype=null;function dx(t){return ge.isPlainObject(t)||ge.isArray(t)}function oD(t){return ge.endsWith(t,"[]")?t.slice(0,-2):t}function x5(t,e,n){return t?t.concat(e).map(function(i,s){return i=oD(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function Jpe(t){return ge.isArray(t)&&!t.some(dx)}const Zpe=ge.toFlatObject(ge,{},null,function(e){return/^is[A-Z]/.test(e)});function _y(t,e,n){if(!ge.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ge.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,w){return!ge.isUndefined(w[g])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&ge.isSpecCompliantForm(e);if(!ge.isFunction(i))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(ge.isDate(p))return p.toISOString();if(!c&&ge.isBlob(p))throw new Nt("Blob is not supported. Use a Buffer instead.");return ge.isArrayBuffer(p)||ge.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Ne.from(p):p}function u(p,g,w){let y=p;if(p&&!w&&typeof p=="object"){if(ge.endsWith(g,"{}"))g=r?g:g.slice(0,-2),p=JSON.stringify(p);else if(ge.isArray(p)&&Jpe(p)||(ge.isFileList(p)||ge.endsWith(g,"[]"))&&(y=ge.toArray(p)))return g=oD(g),y.forEach(function(m,x){!(ge.isUndefined(m)||m===null)&&e.append(o===!0?x5([g],x,s):o===null?g:g+"[]",l(m))}),!1}return dx(p)?!0:(e.append(x5(w,g,s),l(p)),!1)}const d=[],f=Object.assign(Zpe,{defaultVisitor:u,convertValue:l,isVisitable:dx});function h(p,g){if(!ge.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(p),ge.forEach(p,function(y,b){(!(ge.isUndefined(y)||y===null)&&i.call(e,y,ge.isString(b)?b.trim():b,g,f))===!0&&h(y,g?g.concat(b):[b])}),d.pop()}}if(!ge.isObject(t))throw new TypeError("data must be an object");return h(t),e}function E5(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function QS(t,e){this._pairs=[],t&&_y(t,this,e)}const aD=QS.prototype;aD.append=function(e,n){this._pairs.push([e,n])};aD.toString=function(e){const n=e?function(r){return e.call(this,r,E5)}:E5;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Xpe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cD(t,e,n){if(!e)return t;const r=n&&n.encode||Xpe;ge.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=ge.isURLSearchParams(e)?e.toString():new QS(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class S5{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ge.forEach(this.handlers,function(r){r!==null&&e(r)})}}const lD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Qpe=typeof URLSearchParams<"u"?URLSearchParams:QS,ege=typeof FormData<"u"?FormData:null,tge=typeof Blob<"u"?Blob:null,nge={isBrowser:!0,classes:{URLSearchParams:Qpe,FormData:ege,Blob:tge},protocols:["http","https","file","blob","url","data"]},e3=typeof window<"u"&&typeof document<"u",fx=typeof navigator=="object"&&navigator||void 0,rge=e3&&(!fx||["ReactNative","NativeScript","NS"].indexOf(fx.product)<0),ige=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sge=e3&&window.location.href||"http://localhost",oge=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:e3,hasStandardBrowserEnv:rge,hasStandardBrowserWebWorkerEnv:ige,navigator:fx,origin:sge},Symbol.toStringTag,{value:"Module"})),yi={...oge,...nge};function age(t,e){return _y(t,new yi.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return yi.isNode&&ge.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function cge(t){return ge.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lge(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function uD(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=s>=n.length;return o=!o&&ge.isArray(i)?i.length:o,c?(ge.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!ge.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&ge.isArray(i[o])&&(i[o]=lge(i[o])),!a)}if(ge.isFormData(t)&&ge.isFunction(t.entries)){const n={};return ge.forEachEntry(t,(r,i)=>{e(cge(r),i,n,0)}),n}return null}function uge(t,e,n){if(ge.isString(t))try{return(e||JSON.parse)(t),ge.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const rg={transitional:lD,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=ge.isObject(e);if(s&&ge.isHTMLForm(e)&&(e=new FormData(e)),ge.isFormData(e))return i?JSON.stringify(uD(e)):e;if(ge.isArrayBuffer(e)||ge.isBuffer(e)||ge.isStream(e)||ge.isFile(e)||ge.isBlob(e)||ge.isReadableStream(e))return e;if(ge.isArrayBufferView(e))return e.buffer;if(ge.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return age(e,this.formSerializer).toString();if((a=ge.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return _y(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),uge(e)):e}],transformResponse:[function(e){const n=this.transitional||rg.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(ge.isResponse(e)||ge.isReadableStream(e))return e;if(e&&ge.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Nt.from(a,Nt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yi.classes.FormData,Blob:yi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ge.forEach(["delete","get","head","post","put","patch"],t=>{rg.headers[t]={}});const dge=ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fge=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&dge[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},_5=Symbol("internals");function Qf(t){return t&&String(t).trim().toLowerCase()}function K0(t){return t===!1||t==null?t:ge.isArray(t)?t.map(K0):String(t)}function hge(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const pge=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function L1(t,e,n,r,i){if(ge.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!ge.isString(e)){if(ge.isString(r))return e.indexOf(r)!==-1;if(ge.isRegExp(r))return r.test(e)}}function gge(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function mge(t,e){const n=ge.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let rs=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,c,l){const u=Qf(c);if(!u)throw new Error("header name must be a non-empty string");const d=ge.findKey(i,u);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||c]=K0(a))}const o=(a,c)=>ge.forEach(a,(l,u)=>s(l,u,c));if(ge.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(ge.isString(e)&&(e=e.trim())&&!pge(e))o(fge(e),n);else if(ge.isObject(e)&&ge.isIterable(e)){let a={},c,l;for(const u of e){if(!ge.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[l=u[0]]=(c=a[l])?ge.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(a,n)}else e!=null&&s(n,e,r);return this}get(e,n){if(e=Qf(e),e){const r=ge.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return hge(i);if(ge.isFunction(n))return n.call(this,i,r);if(ge.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Qf(e),e){const r=ge.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||L1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Qf(o),o){const a=ge.findKey(r,o);a&&(!n||L1(r,r[a],a,n))&&(delete r[a],i=!0)}}return ge.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||L1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return ge.forEach(this,(i,s)=>{const o=ge.findKey(r,s);if(o){n[o]=K0(i),delete n[s];return}const a=e?gge(s):String(s).trim();a!==s&&delete n[s],n[a]=K0(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ge.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&ge.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[_5]=this[_5]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Qf(o);r[a]||(mge(i,o),r[a]=!0)}return ge.isArray(e)?e.forEach(s):s(e),this}};rs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ge.reduceDescriptors(rs.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});ge.freezeMethods(rs);function D1(t,e){const n=this||rg,r=e||n,i=rs.from(r.headers);let s=r.data;return ge.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function dD(t){return!!(t&&t.__CANCEL__)}function xf(t,e,n){Nt.call(this,t??"canceled",Nt.ERR_CANCELED,e,n),this.name="CanceledError"}ge.inherits(xf,Nt,{__CANCEL__:!0});function fD(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Nt("Request failed with status code "+n.status,[Nt.ERR_BAD_REQUEST,Nt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function wge(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function yge(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),u=r[s];o||(o=l),n[i]=c,r[i]=l;let d=s,f=0;for(;d!==i;)f+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),l-o<e)return;const h=u&&l-u;return h?Math.round(f*1e3/h):void 0}}function bge(t,e){let n=0,r=1e3/e,i,s;const o=(l,u=Date.now())=>{n=u,i=null,s&&(clearTimeout(s),s=null),t.apply(null,l)};return[(...l)=>{const u=Date.now(),d=u-n;d>=r?o(l,u):(i=l,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}const Jm=(t,e,n=3)=>{let r=0;const i=yge(50,250);return bge(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-r,l=i(c),u=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:l||void 0,estimated:l&&a&&u?(a-o)/l:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},n)},k5=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},A5=t=>(...e)=>ge.asap(()=>t(...e)),vge=yi.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,yi.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(yi.origin),yi.navigator&&/(msie|trident)/i.test(yi.navigator.userAgent)):()=>!0,xge=yi.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];ge.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),ge.isString(r)&&o.push("path="+r),ge.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ege(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Sge(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function hD(t,e,n){let r=!Ege(e);return t&&(r||n==!1)?Sge(t,e):e}const I5=t=>t instanceof rs?{...t}:t;function pu(t,e){e=e||{};const n={};function r(l,u,d,f){return ge.isPlainObject(l)&&ge.isPlainObject(u)?ge.merge.call({caseless:f},l,u):ge.isPlainObject(u)?ge.merge({},u):ge.isArray(u)?u.slice():u}function i(l,u,d,f){if(ge.isUndefined(u)){if(!ge.isUndefined(l))return r(void 0,l,d,f)}else return r(l,u,d,f)}function s(l,u){if(!ge.isUndefined(u))return r(void 0,u)}function o(l,u){if(ge.isUndefined(u)){if(!ge.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function a(l,u,d){if(d in e)return r(l,u);if(d in t)return r(void 0,l)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u,d)=>i(I5(l),I5(u),d,!0)};return ge.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=c[u]||i,f=d(t[u],e[u],u);ge.isUndefined(f)&&d!==a||(n[u]=f)}),n}const pD=t=>{const e=pu({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=rs.from(o),e.url=cD(hD(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(ge.isFormData(n)){if(yi.hasStandardBrowserEnv||yi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[l,...u]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...u].join("; "))}}if(yi.hasStandardBrowserEnv&&(r&&ge.isFunction(r)&&(r=r(e)),r||r!==!1&&vge(e.url))){const l=i&&s&&xge.read(s);l&&o.set(i,l)}return e},_ge=typeof XMLHttpRequest<"u",kge=_ge&&function(t){return new Promise(function(n,r){const i=pD(t);let s=i.data;const o=rs.from(i.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:l}=i,u,d,f,h,p;function g(){h&&h(),p&&p(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function y(){if(!w)return;const m=rs.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),E={data:!a||a==="text"||a==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:m,config:t,request:w};fD(function(k){n(k),g()},function(k){r(k),g()},E),w=null}"onloadend"in w?w.onloadend=y:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(y)},w.onabort=function(){w&&(r(new Nt("Request aborted",Nt.ECONNABORTED,t,w)),w=null)},w.onerror=function(){r(new Nt("Network Error",Nt.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const E=i.transitional||lD;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),r(new Nt(x,E.clarifyTimeoutError?Nt.ETIMEDOUT:Nt.ECONNABORTED,t,w)),w=null},s===void 0&&o.setContentType(null),"setRequestHeader"in w&&ge.forEach(o.toJSON(),function(x,E){w.setRequestHeader(E,x)}),ge.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),a&&a!=="json"&&(w.responseType=i.responseType),l&&([f,p]=Jm(l,!0),w.addEventListener("progress",f)),c&&w.upload&&([d,h]=Jm(c),w.upload.addEventListener("progress",d),w.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(u=m=>{w&&(r(!m||m.type?new xf(null,t,w):m),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const b=wge(i.url);if(b&&yi.protocols.indexOf(b)===-1){r(new Nt("Unsupported protocol "+b+":",Nt.ERR_BAD_REQUEST,t));return}w.send(s||null)})},Age=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(l){if(!i){i=!0,a();const u=l instanceof Error?l:this.reason;r.abort(u instanceof Nt?u:new xf(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new Nt(`timeout ${e} of ms exceeded`,Nt.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),t=null)};t.forEach(l=>l.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>ge.asap(a),c}},Ige=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},Cge=async function*(t,e){for await(const n of Rge(t))yield*Ige(n,e)},Rge=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},C5=(t,e,n,r)=>{const i=Cge(t,e);let s=0,o,a=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){a(),c.close();return}let d=u.byteLength;if(n){let f=s+=d;n(f)}c.enqueue(new Uint8Array(u))}catch(l){throw a(l),l}},cancel(c){return a(c),i.return()}},{highWaterMark:2})},ky=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",gD=ky&&typeof ReadableStream=="function",Tge=ky&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),mD=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Oge=gD&&mD(()=>{let t=!1;const e=new Request(yi.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),R5=64*1024,hx=gD&&mD(()=>ge.isReadableStream(new Response("").body)),Zm={stream:hx&&(t=>t.body)};ky&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Zm[e]&&(Zm[e]=ge.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Nt(`Response type '${e}' is not supported`,Nt.ERR_NOT_SUPPORT,r)})})})(new Response);const Pge=async t=>{if(t==null)return 0;if(ge.isBlob(t))return t.size;if(ge.isSpecCompliantForm(t))return(await new Request(yi.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(ge.isArrayBufferView(t)||ge.isArrayBuffer(t))return t.byteLength;if(ge.isURLSearchParams(t)&&(t=t+""),ge.isString(t))return(await Tge(t)).byteLength},Nge=async(t,e)=>{const n=ge.toFiniteNumber(t.getContentLength());return n??Pge(e)},Lge=ky&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:f}=pD(t);l=l?(l+"").toLowerCase():"text";let h=Age([i,s&&s.toAbortSignal()],o),p;const g=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let w;try{if(c&&Oge&&n!=="get"&&n!=="head"&&(w=await Nge(u,r))!==0){let E=new Request(e,{method:"POST",body:r,duplex:"half"}),A;if(ge.isFormData(r)&&(A=E.headers.get("content-type"))&&u.setContentType(A),E.body){const[k,S]=k5(w,Jm(A5(c)));r=C5(E.body,R5,k,S)}}ge.isString(d)||(d=d?"include":"omit");const y="credentials"in Request.prototype;p=new Request(e,{...f,signal:h,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:y?d:void 0});let b=await fetch(p);const m=hx&&(l==="stream"||l==="response");if(hx&&(a||m&&g)){const E={};["status","statusText","headers"].forEach(C=>{E[C]=b[C]});const A=ge.toFiniteNumber(b.headers.get("content-length")),[k,S]=a&&k5(A,Jm(A5(a),!0))||[];b=new Response(C5(b.body,R5,k,()=>{S&&S(),g&&g()}),E)}l=l||"text";let x=await Zm[ge.findKey(Zm,l)||"text"](b,t);return!m&&g&&g(),await new Promise((E,A)=>{fD(E,A,{data:x,headers:rs.from(b.headers),status:b.status,statusText:b.statusText,config:t,request:p})})}catch(y){throw g&&g(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new Nt("Network Error",Nt.ERR_NETWORK,t,p),{cause:y.cause||y}):Nt.from(y,y&&y.code,t,p)}}),px={http:Ype,xhr:kge,fetch:Lge};ge.forEach(px,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const T5=t=>`- ${t}`,Dge=t=>ge.isFunction(t)||t===null||t===!1,wD={getAdapter:t=>{t=ge.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!Dge(n)&&(r=px[(o=String(n)).toLowerCase()],r===void 0))throw new Nt(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(T5).join(`
`):" "+T5(s[0]):"as no adapter specified";throw new Nt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:px};function $1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new xf(null,t)}function O5(t){return $1(t),t.headers=rs.from(t.headers),t.data=D1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),wD.getAdapter(t.adapter||rg.adapter)(t).then(function(r){return $1(t),r.data=D1.call(t,t.transformResponse,r),r.headers=rs.from(r.headers),r},function(r){return dD(r)||($1(t),r&&r.response&&(r.response.data=D1.call(t,t.transformResponse,r.response),r.response.headers=rs.from(r.response.headers))),Promise.reject(r)})}const yD="1.9.0",Ay={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ay[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const P5={};Ay.transitional=function(e,n,r){function i(s,o){return"[Axios v"+yD+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Nt(i(o," has been removed"+(n?" in "+n:"")),Nt.ERR_DEPRECATED);return n&&!P5[o]&&(P5[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Ay.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function $ge(t,e,n){if(typeof t!="object")throw new Nt("options must be an object",Nt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new Nt("option "+s+" must be "+c,Nt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Nt("Unknown option "+s,Nt.ERR_BAD_OPTION)}}const H0={assertOptions:$ge,validators:Ay},jo=H0.validators;let Ql=class{constructor(e){this.defaults=e||{},this.interceptors={request:new S5,response:new S5}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=pu(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&H0.assertOptions(r,{silentJSONParsing:jo.transitional(jo.boolean),forcedJSONParsing:jo.transitional(jo.boolean),clarifyTimeoutError:jo.transitional(jo.boolean)},!1),i!=null&&(ge.isFunction(i)?n.paramsSerializer={serialize:i}:H0.assertOptions(i,{encode:jo.function,serialize:jo.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),H0.assertOptions(n,{baseUrl:jo.spelling("baseURL"),withXsrfToken:jo.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&ge.merge(s.common,s[n.method]);s&&ge.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=rs.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(c=c&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});let u,d=0,f;if(!c){const p=[O5.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,l),f=p.length,u=Promise.resolve(n);d<f;)u=u.then(p[d++],p[d++]);return u}f=a.length;let h=n;for(d=0;d<f;){const p=a[d++],g=a[d++];try{h=p(h)}catch(w){g.call(this,w);break}}try{u=O5.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,f=l.length;d<f;)u=u.then(l[d++],l[d++]);return u}getUri(e){e=pu(this.defaults,e);const n=hD(e.baseURL,e.url,e.allowAbsoluteUrls);return cD(n,e.params,e.paramsSerializer)}};ge.forEach(["delete","get","head","options"],function(e){Ql.prototype[e]=function(n,r){return this.request(pu(r||{},{method:e,url:n,data:(r||{}).data}))}});ge.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(pu(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Ql.prototype[e]=n(),Ql.prototype[e+"Form"]=n(!0)});let Bge=class bD{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new xf(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new bD(function(i){e=i}),cancel:e}}};function Mge(t){return function(n){return t.apply(null,n)}}function Uge(t){return ge.isObject(t)&&t.isAxiosError===!0}const gx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gx).forEach(([t,e])=>{gx[e]=t});function vD(t){const e=new Ql(t),n=JL(Ql.prototype.request,e);return ge.extend(n,Ql.prototype,e,{allOwnKeys:!0}),ge.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return vD(pu(t,i))},n}const Xn=vD(rg);Xn.Axios=Ql;Xn.CanceledError=xf;Xn.CancelToken=Bge;Xn.isCancel=dD;Xn.VERSION=yD;Xn.toFormData=_y;Xn.AxiosError=Nt;Xn.Cancel=Xn.CanceledError;Xn.all=function(e){return Promise.all(e)};Xn.spread=Mge;Xn.isAxiosError=Uge;Xn.mergeConfig=pu;Xn.AxiosHeaders=rs;Xn.formToJSON=t=>uD(ge.isHTMLForm(t)?new FormData(t):t);Xn.getAdapter=wD.getAdapter;Xn.HttpStatusCode=gx;Xn.default=Xn;const{Axios:Q0e,AxiosError:eme,CanceledError:tme,isCancel:nme,CancelToken:rme,VERSION:ime,all:sme,Cancel:ome,isAxiosError:ame,spread:cme,toFormData:lme,AxiosHeaders:ume,HttpStatusCode:dme,formToJSON:fme,getAdapter:hme,mergeConfig:pme}=Xn,N5="/api";class jge{async getUsers(){try{return(await Xn.get(`${N5}/users`,{headers:{accept:"application/json"}})).data}catch(e){throw console.error("Error fetching users:",e),e}}async getUserByWalletAddress(e){try{return(await Xn.get(`${N5}/users/wallet/${e}`,{headers:{accept:"application/json"}})).data}catch(n){throw console.error(`Error fetching user with wallet address ${e}:`,n),n}}}const Fge=new jge,L5="BPi5PB_UiIZ-cPz1GtV5i1I2iOSOHuimiXBI0e-Oe_u6X3oVAbCiAZOTEBtTXw4tsluTITPqA8zMsfxIKMjiqNQ";function zge(){const[t,e]=ne.useState(null),[n,r]=ne.useState(null),[i,s]=ne.useState(!1),[o,a]=ne.useState(!0),[c,l]=ne.useState("Loading wallet information..."),[u,d]=ne.useState(""),[f,h]=ne.useState(""),[p,g]=ne.useState("0"),[w,y]=ne.useState(null),[b,m]=ne.useState(null),[x,E]=ne.useState(!1),[A,k]=ne.useState(null),S=yE(3),C=J=>(parseFloat(J)/1e9).toFixed(4);ne.useEffect(()=>{(async()=>{try{a(!0);const Q=new ry({config:{chainConfig:S}}),oe=new XN({clientId:L5,uiConfig:{appName:"Solana App",mode:"light",logoLight:"https://web3auth.io/images/web3authlog.png",logoDark:"https://web3auth.io/images/web3authlogodark.png",defaultLanguage:"en",loginGridCol:3,primaryButton:"externalLogin",uxMode:"redirect"},web3AuthNetwork:Ka.SAPPHIRE_MAINNET,privateKeyProvider:Q});if(lpe({options:{clientId:L5,chainConfig:S}}).forEach(V=>{oe.configureAdapter(V)}),e(oe),await oe.initModal({modalConfig:{[Wt.AUTH]:{label:"auth",loginMethods:{facebook:{name:"facebook",showOnModal:!1},reddit:{name:"reddit",showOnModal:!1},twitch:{name:"twitch",showOnModal:!1},line:{name:"line",showOnModal:!1},kakao:{name:"kakao",showOnModal:!1},linkedin:{name:"linkedin",showOnModal:!1},twitter:{name:"twitter",showOnModal:!1},weibo:{name:"weibo",showOnModal:!1},wechat:{name:"wechat",showOnModal:!1},farcaster:{name:"farcaster",showOnModal:!1},email_passwordless:{name:"email-passwordless",showOnModal:!0},sms_passwordless:{name:"sms-passwordless",showOnModal:!0}},showOnModal:!0}}}),oe.connected){if(s(!0),r(oe.provider),oe.provider){const se=new Ls(oe.provider),Re=await se.getAccounts();d(Re[0]);try{const Pe=await se.getBalance();h(Pe),g(C(Pe))}catch(Pe){console.error("Error fetching balance:",Pe)}}const V={chainId:S.chainId,displayName:S.displayName,ticker:S.ticker,tickerName:S.tickerName};y(V),l("Wallet connected successfully. Select an action below.")}a(!1)}catch(Q){console.error(Q),a(!1)}})()},[]);const F=async()=>{if(!t){Ee("web3auth not initialized yet");return}const J=await t.connect();if(t.connected){if(s(!0),r(J),J){const oe=new Ls(J),W=await oe.getAccounts();d(W[0]);try{const V=await oe.getBalance();h(V),g(C(V))}catch(V){console.error("Error fetching balance:",V)}}const Q={chainId:S.chainId,displayName:S.displayName,ticker:S.ticker,tickerName:S.tickerName};y(Q)}},N=async()=>{if(!t){Ee("web3auth not initialized yet");return}await t.logout(),r(null),s(!1),d(""),h(""),g("0"),y(null)},L=async()=>{if(!t){Ee("web3auth not initialized yet");return}const J=await t.getUserInfo();Ee(J)},j=async()=>{if(!t){Ee("web3auth not initialized yet");return}const J=await t.authenticateUser();Ee(J)},B=async()=>{if(!n){Ee("provider not initialized yet");return}const Q=await new Ls(n).getAccounts();d(Q[0]),Ee(Q)},O=async()=>{if(!n){Ee("provider not initialized yet");return}const Q=await new Ls(n).getBalance();h(Q),g(C(Q)),Ee(`Balance: ${C(Q)} SOL`)},R=async()=>{if(!n){Ee("provider not initialized yet");return}const Q=await new Ls(n).sendTransaction();Ee(Q)},D=async()=>{if(!n){Ee("provider not initialized yet");return}const Q=await new Ls(n).signMessage();Ee(Q)},T=async()=>{if(!n){Ee("provider not initialized yet");return}const Q=await new Ls(n).sendVersionTransaction();Ee(Q)},I=async()=>{if(!n){Ee("provider not initialized yet");return}const Q=await new Ls(n).signVersionedTransaction();Ee(Q)},M=async()=>{if(!n){Ee("provider not initialized yet");return}const Q=await new Ls(n).signAllVersionedTransaction();Ee(Q)},Y=async()=>{if(!n){Ee("provider not initialized yet");return}const Q=await new Ls(n).signAllTransaction();Ee(Q)},X=async()=>{if(!n){Ee("provider not initialized yet");return}const Q=await new Ls(n).getPrivateKey();Ee(Q)},Z=async()=>{if(!t){Ee("web3auth not initialized yet");return}const J=t.coreOptions.chainConfig;if(!J){Ee("Chain config not available");return}Ee({chainId:J.chainId,displayName:J.displayName,ticker:J.ticker,tickerName:J.tickerName})},le=async()=>{if(!n){Ee("provider not initialized yet");return}await(t==null?void 0:t.addChain(S)),Ee("New Chain Added")},ae=async()=>{if(!n){Ee("provider not initialized yet");return}await(t==null?void 0:t.switchChain({chainId:"0x3"})),Ee("Chain Switched")},ye=async()=>{try{E(!0),k(null);const J=await Fge.getUsers();m(J),Ee("API Users fetched:",J)}catch(J){const Q=J instanceof Error?J.message:"Unknown error";k(`Failed to fetch users: ${Q}`),Ee("API Error:",Q)}finally{E(!1)}};function Ee(...J){const Q=J.map(oe=>typeof oe=="object"?JSON.stringify(oe,null,2):String(oe)).join(" ");l(Q)}const ee=z.jsxs("div",{className:"wallet-content",children:[z.jsxs("div",{className:"wallet-header",children:[z.jsxs("div",{className:"network-info",children:[z.jsx("span",{className:"network-label",children:"Network:"}),z.jsx("span",{className:"network-value",children:w==null?void 0:w.displayName})]}),z.jsxs("div",{className:"account-info",children:[z.jsxs("div",{className:"address-display",children:[z.jsx("span",{className:"address-label",children:"Address:"}),z.jsx("span",{className:"address-value",children:u})]}),z.jsxs("div",{className:"balance-display",children:[z.jsx("span",{className:"balance-label",children:"Balance:"}),z.jsxs("span",{className:"balance-value",children:[p," SOL"]})]})]})]}),z.jsxs("div",{className:"action-container",children:[z.jsx("h2",{children:"Wallet Actions"}),z.jsxs("div",{className:"action-row",children:[z.jsxs("div",{className:"action-group",children:[z.jsx("h3",{children:"Account"}),z.jsx("button",{onClick:L,className:"wallet-action-button",children:"Get User Info"}),z.jsx("button",{onClick:B,className:"wallet-action-button",children:"Refresh Address"}),z.jsx("button",{onClick:O,className:"wallet-action-button",children:"Refresh Balance"}),z.jsx("button",{onClick:j,className:"wallet-action-button",children:"Get ID Token"})]}),z.jsxs("div",{className:"action-group",children:[z.jsx("h3",{children:"Transactions"}),z.jsx("button",{onClick:R,className:"wallet-action-button",children:"Send Transaction"}),z.jsx("button",{onClick:T,className:"wallet-action-button",children:"Send Version Transaction"}),z.jsx("button",{onClick:D,className:"wallet-action-button",children:"Sign Message"}),z.jsx("button",{onClick:X,className:"wallet-action-button",children:"Get Private Key"})]})]}),z.jsxs("div",{className:"action-row",children:[z.jsxs("div",{className:"action-group",children:[z.jsx("h3",{children:"Chain Management"}),z.jsx("button",{onClick:le,className:"wallet-action-button",children:"Add Chain"}),z.jsx("button",{onClick:ae,className:"wallet-action-button",children:"Switch Chain"}),z.jsx("button",{onClick:Z,className:"wallet-action-button",children:"Refresh Chain Info"})]}),z.jsxs("div",{className:"action-group",children:[z.jsx("h3",{children:"Advanced Signing"}),z.jsx("button",{onClick:I,className:"wallet-action-button",children:"Sign Versioned Transaction"}),z.jsx("button",{onClick:M,className:"wallet-action-button",children:"Sign All Versioned Transactions"}),z.jsx("button",{onClick:Y,className:"wallet-action-button",children:"Sign All Transactions"})]})]}),z.jsx("div",{className:"action-row session-row",children:z.jsx("button",{onClick:N,className:"wallet-action-button logout-button",children:"Disconnect Wallet"})})]}),z.jsxs("div",{className:"api-section",children:[z.jsx("h2",{children:"API Integration"}),z.jsxs("div",{className:"action-card",children:[z.jsx("h3",{children:"Test API Connection"}),z.jsx("button",{onClick:ye,disabled:x,children:x?"Loading...":"Fetch Users"}),A&&z.jsx("div",{className:"api-error",children:A}),b&&z.jsxs("div",{className:"api-results",children:[z.jsx("h4",{children:"API Results:"}),z.jsx("pre",{children:JSON.stringify(b,null,2)})]})]})]})]}),te=z.jsxs("div",{className:"login-section",children:[z.jsx("p",{children:"Connect your wallet to access your dashboard"}),z.jsx("button",{onClick:F,className:"wallet-action-button login-button",children:"Connect Wallet"})]});return z.jsxs("div",{className:"wallet-page",children:[z.jsx("h1",{children:"Wallet Dashboard"}),o?z.jsxs("div",{className:"wallet-loading",children:[z.jsx("div",{className:"loader"}),z.jsx("p",{children:"Loading wallet information..."})]}):i?z.jsx(z.Fragment,{children:ee}):te,z.jsxs("div",{className:"console-output",children:[z.jsx("h3",{children:"Console Output"}),z.jsx("pre",{children:c})]})]})}function Kge(){return z.jsxs("div",{className:"app",children:[z.jsx(qZ,{}),z.jsx("main",{className:"main-content",children:z.jsxs(uU,{children:[z.jsx(Pv,{path:"/",element:z.jsx(VZ,{})}),z.jsx(Pv,{path:"/wallet",element:z.jsx(zge,{})})]})})]})}const Hge=M1.createRoot(document.getElementById("root"));Hge.render(z.jsx(e$.StrictMode,{children:z.jsx(LU,{children:z.jsx(Kge,{})})}));export{Zre as H,MI as a,Fre as b,H0e as c,K0e as d,ly as e,V0e as f,q0e as g,W0e as r,S4 as t,Xre as w};
//# sourceMappingURL=index-aPqfz8kP.js.map
